2026-01-28T17:00:29.625+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:29.627+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:29.627+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:00:29.628+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:29.644+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:29.646+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:00:29.649+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1a13af]
2026-01-28T17:00:29.649+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:29.657+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1806eecb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:29.658+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1892272582 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:29.659+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:29.659+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:00:29.660+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:00:29.661+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:00:29.672+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:29.672+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82d6420]
2026-01-28T17:00:29.673+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565b9d9a]
2026-01-28T17:00:29.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df77d9b]
2026-01-28T17:00:29.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a5e5fb]
2026-01-28T17:00:29.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:29.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faf2d8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:29.677+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:29.677+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:29.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:29.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:29.679+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54733850 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:29.680+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4a04f3] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:29.680+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:00:29.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:00:29.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:29.690+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1324273375 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:29.692+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:29.698+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:29.704+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:29.705+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:29.716+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:29.718+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:29.726+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1806eecb]
2026-01-28T17:00:29.727+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:29.727+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:29.733+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4a04f3]
2026-01-28T17:00:29.742+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faf2d8]
2026-01-28T17:00:29.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:29.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:29.745+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:29.812+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:29.818+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:29.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709081327 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will be managed by Spring
2026-01-28T17:00:29.863+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:29.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:29.882+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:29.898+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:00:29.899+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@363168369 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will be managed by Spring
2026-01-28T17:00:29.900+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:29.907+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:00:30.071+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 47
2026-01-28T17:00:30.139+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.141+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 47
2026-01-28T17:00:30.378+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546] from current transaction
2026-01-28T17:00:30.545+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.666+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:30.732+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da] from current transaction
2026-01-28T17:00:30.739+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.739+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:30.740+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.749+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:30.757+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.758+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546] from current transaction
2026-01-28T17:00:30.763+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:30.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:30.767+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.767+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.768+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da] from current transaction
2026-01-28T17:00:30.768+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:30.777+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.780+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:30.783+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.783+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546] from current transaction
2026-01-28T17:00:30.785+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:30.797+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:30.797+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 121(Long), 1(Long)
2026-01-28T17:00:30.800+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da] from current transaction
2026-01-28T17:00:30.808+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:30.808+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 121(Long), 1(Long)
2026-01-28T17:00:30.814+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-28T17:00:30.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.818+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-28T17:00:30.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b250546]
2026-01-28T17:00:30.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.838+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa509da]
2026-01-28T17:00:30.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:30.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc4b046] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:30.888+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222987177 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:30.892+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:30.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:30.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a440e7] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:30.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.911+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370106659 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:30.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:30.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:30.942+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc4b046]
2026-01-28T17:00:30.943+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:30.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65574915] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:30.946+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:30.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@743998329 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:30.948+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a440e7]
2026-01-28T17:00:30.948+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:30.949+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:30.949+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.950+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155133dd] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:30.950+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301394664 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:30.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:30.959+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:30.959+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-28T17:00:30.960+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65574915]
2026-01-28T17:00:30.961+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:30.961+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b2c8e46] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:30.961+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-28T17:00:30.962+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424781783 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:30.962+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155133dd]
2026-01-28T17:00:30.962+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:30.962+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:30.963+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:30.963+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ea5b13] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:30.964+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1035553576 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:30.968+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:30.974+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:30.977+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:30.978+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b2c8e46]
2026-01-28T17:00:30.978+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:30.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:30.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ea5b13]
2026-01-28T17:00:30.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=78, drafterId=2, r (truncated)...]
2026-01-28T17:00:30.980+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:30.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:30.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=78, drafterId=2, r (truncated)...]
2026-01-28T17:00:31.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.604+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:32.605+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:00:32.609+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:32.611+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:00:32.612+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:32.614+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:00:32.616+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:32.620+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:00:32.620+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:32.628+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:32.630+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:00:32.630+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:00:32.640+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:32.644+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:00:32.642+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:32.643+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:00:32.644+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:00:32.659+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:32.645+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:32.646+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:00:32.647+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:00:32.662+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:00:32.659+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:00:32.660+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:00:32.677+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:00:32.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:32.660+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:32.660+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:32.662+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:00:32.676+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:00:32.676+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:00:32.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:00:32.679+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.679+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:32.680+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:32.680+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:00:32.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:00:32.684+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:00:32.682+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.683+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d818b1] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.683+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:32.683+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.684+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:32.692+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.692+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@429fb8f3] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.695+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.695+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c50f74] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.696+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.696+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79eb391e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.699+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a372b9] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.701+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35493b6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.713+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266456914 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:32.714+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089367858 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.714+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.714+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.716+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.716+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.717+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655563759 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:32.719+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.717+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383265723 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.717+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075617138 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:32.732+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.734+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.734+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.734+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.734+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560510017 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.735+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:00:32.742+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:32.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d818b1]
2026-01-28T17:00:32.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@429fb8f3]
2026-01-28T17:00:32.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c50f74]
2026-01-28T17:00:32.745+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.747+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.748+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:32.748+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:00:32.749+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.749+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.749+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306431fb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a372b9]
2026-01-28T17:00:32.757+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.758+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ec9379e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79eb391e]
2026-01-28T17:00:32.751+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405f9d42] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.751+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454fa86b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.751+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.752+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538742857 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.758+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@794523435 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.762+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.759+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.759+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115659579 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:32.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845871108 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:32.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35493b6]
2026-01-28T17:00:32.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.763+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.763+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771cca05] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.765+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510296557 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:32.765+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.765+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.765+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43074a59] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.767+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.773+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.774+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.774+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.775+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789673788 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.775+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.775+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ec9379e]
2026-01-28T17:00:32.775+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306431fb]
2026-01-28T17:00:32.776+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405f9d42]
2026-01-28T17:00:32.776+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.776+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.776+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.777+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.777+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.778+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.778+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454fa86b]
2026-01-28T17:00:32.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:32.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cb501b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112e48af] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771cca05]
2026-01-28T17:00:32.780+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.780+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.781+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1504791312 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.783+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@757559877 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:32.783+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.784+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:32.784+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.784+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:32.790+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:32.796+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:32.796+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c68e62] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.797+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43074a59]
2026-01-28T17:00:32.797+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:32.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:00:32.800+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1629171357 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:32.809+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:32.800+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:32.800+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.807+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:32.810+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:00:32.811+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:32.812+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@408447b8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.814+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:32.815+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:32.815+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967350387 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.816+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:32.816+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:32.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:32.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:32.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:00:32.818+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:32.821+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.822+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:00:32.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:32.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:32.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112e48af]
2026-01-28T17:00:32.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cb501b]
2026-01-28T17:00:32.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc1d9a5] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c68e62]
2026-01-28T17:00:32.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529758031 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbf8b2] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa0144e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c9bf47] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.829+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.829+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:32.829+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@423611a8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.830+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1999710146 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:32.830+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749229605 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:32.831+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360032941 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.831+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.832+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@408447b8]
2026-01-28T17:00:32.833+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113713682 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:32.833+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.833+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.834+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.840+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.841+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.842+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:32.845+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4373070d] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc1d9a5]
2026-01-28T17:00:32.848+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564670812 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.855+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.858+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47c79567] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.859+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.859+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@353984715 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.859+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.859+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.860+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.860+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.860+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:32.861+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c9bf47]
2026-01-28T17:00:32.861+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa0144e]
2026-01-28T17:00:32.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@423611a8]
2026-01-28T17:00:32.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbf8b2]
2026-01-28T17:00:32.864+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.863+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.863+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.864+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.864+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a33023] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.864+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4373070d]
2026-01-28T17:00:32.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b59db3] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:00:32.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:00:32.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47c79567]
2026-01-28T17:00:32.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946887245 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:32.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a5bea8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495467269 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.867+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.867+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.876+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:32.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1060476510 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.882+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:32.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:32.885+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.890+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:32.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:32.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:32.899+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:32.913+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.913+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:32.913+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:32.915+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a33023]
2026-01-28T17:00:32.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b59db3]
2026-01-28T17:00:32.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:32.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f773c50] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:32.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:32.919+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537948680 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.925+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.926+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.926+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:32.926+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:32.927+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73833d77] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.930+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a5bea8]
2026-01-28T17:00:32.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:32.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@520278632 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.935+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.939+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:32.940+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7197a94f] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:32.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948832555 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:32.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:32.945+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f773c50]
2026-01-28T17:00:32.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:32.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:32.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73833d77]
2026-01-28T17:00:32.948+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f48e423] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.948+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.948+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778111526 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.949+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666683ce] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.949+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.950+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216298224 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:32.950+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.950+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.951+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.951+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:32.952+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7197a94f]
2026-01-28T17:00:32.952+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f48e423]
2026-01-28T17:00:32.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f98d68e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666683ce]
2026-01-28T17:00:32.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59364323 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@577113b1] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:32.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603308672 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:32.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.960+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:32.960+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.963+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f98d68e]
2026-01-28T17:00:32.964+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.965+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3798d175] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.965+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:32.967+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@577113b1]
2026-01-28T17:00:32.967+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1044209070 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.967+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.968+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:32.971+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6175d6ef] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.971+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:32.973+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1044823531 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:32.976+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.976+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.977+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:32.978+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3798d175]
2026-01-28T17:00:32.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:32.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6175d6ef]
2026-01-28T17:00:32.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ab625c0] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:32.980+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069126810 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:32.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:32.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:32.982+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:32.982+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:32.992+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:32.993+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ab625c0]
2026-01-28T17:00:32.994+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:32.995+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:32.996+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:36.225+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:36.226+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:00:36.227+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/78
2026-01-28T17:00:36.227+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/78
2026-01-28T17:00:36.227+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:00:36.232+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:00:36.232+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:36.233+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/78
2026-01-28T17:00:36.234+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:00:36.238+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:00:36.239+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:36.239+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/78
2026-01-28T17:00:36.241+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/78
2026-01-28T17:00:36.241+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:00:36.241+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:00:36.242+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:36.242+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/78
2026-01-28T17:00:36.243+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:00:36.243+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/78
2026-01-28T17:00:36.243+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:00:36.244+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:36.244+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/78", parameters={}
2026-01-28T17:00:36.244+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:00:36.245+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/78
2026-01-28T17:00:36.245+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:00:36.246+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:36.247+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:00:36.247+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:00:36.247+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/78", parameters={}
2026-01-28T17:00:36.248+09:00  INFO 13328 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:00:36.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:00:36.249+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.249+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.249+09:00  INFO 13328 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:00:36.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0817d5] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31115e2f] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.251+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.251+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa70b1d] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.251+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68cb6a57] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.258+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6458d78b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.262+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1557037610 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:36.262+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1290227269 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:36.263+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:36.264+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168951506 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:36.264+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988930630 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:36.264+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:00:36.265+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544734773 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:36.265+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:36.265+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:00:36.265+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:00:36.265+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.266+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:00:36.267+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.268+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:36.272+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:36.274+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:00:36.274+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:36.275+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31115e2f]
2026-01-28T17:00:36.275+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0817d5]
2026-01-28T17:00:36.276+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:00:36.276+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.276+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:00:36.276+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:00:36.276+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.276+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68cb6a57]
2026-01-28T17:00:36.277+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a2acd9] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.277+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa70b1d]
2026-01-28T17:00:36.277+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6458d78b]
2026-01-28T17:00:36.277+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b436b9f] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.277+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.278+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750636942 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:36.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:36.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:36.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490153614 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:36.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a22753] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:36.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:00:36.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:00:36.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:36.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101325326 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:36.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:36.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:36.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:36.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:36.297+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.299+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:36.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a2acd9]
2026-01-28T17:00:36.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:36.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:36.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a22753]
2026-01-28T17:00:36.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b436b9f]
2026-01-28T17:00:36.308+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:36.309+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:36.309+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:36.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.311+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2105114365 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will be managed by Spring
2026-01-28T17:00:36.312+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.314+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:36.314+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@886282962 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will be managed by Spring
2026-01-28T17:00:36.316+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:00:36.316+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:36.322+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:00:36.325+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 47
2026-01-28T17:00:36.327+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 47
2026-01-28T17:00:36.328+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.328+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.328+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9] from current transaction
2026-01-28T17:00:36.329+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09] from current transaction
2026-01-28T17:00:36.329+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:36.329+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:00:36.329+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.330+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.331+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:36.331+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:00:36.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9] from current transaction
2026-01-28T17:00:36.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09] from current transaction
2026-01-28T17:00:36.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:36.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:36.333+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.333+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.335+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:36.335+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.338+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9] from current transaction
2026-01-28T17:00:36.340+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:36.340+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 121(Long), 1(Long)
2026-01-28T17:00:36.340+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:36.343+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.343+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09] from current transaction
2026-01-28T17:00:36.343+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:36.344+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 121(Long), 1(Long)
2026-01-28T17:00:36.344+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-28T17:00:36.344+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.347+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.348+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.349+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbab0f9]
2026-01-28T17:00:36.349+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-28T17:00:36.349+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.350+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.351+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.357+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c50d09]
2026-01-28T17:00:36.363+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.365+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f452bdc] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.366+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358594668 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:36.367+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.367+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:36.367+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d61bca] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.367+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.367+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877934930 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:36.375+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:00:36.377+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.378+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:36.379+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f452bdc]
2026-01-28T17:00:36.379+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.379+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6385766e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.381+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437116937 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:36.381+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:00:36.381+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:36.381+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d61bca]
2026-01-28T17:00:36.382+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.382+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.383+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5c5e07] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.383+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537214573 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:36.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-28T17:00:36.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:00:36.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6385766e]
2026-01-28T17:00:36.385+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:00:36.390+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.390+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643c7a89] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.391+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742544998 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:36.392+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:36.392+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:36.393+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-28T17:00:36.393+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5c5e07]
2026-01-28T17:00:36.393+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:36.394+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40915571] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:36.394+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:36.395+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225482498 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:36.395+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643c7a89]
2026-01-28T17:00:36.395+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:36.396+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:36.397+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:36.397+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=78, drafterId=2, r (truncated)...]
2026-01-28T17:00:36.397+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:36.400+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:36.411+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40915571]
2026-01-28T17:00:36.411+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:36.429+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=78, drafterId=2, r (truncated)...]
2026-01-28T17:00:36.448+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:39.871+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:39.874+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:00:39.876+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:39.877+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:00:39.877+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:39.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:00:39.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:39.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:00:39.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:39.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:39.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:00:39.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:00:39.896+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:39.896+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:39.897+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:39.909+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:39.896+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:00:39.896+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:00:39.911+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.912+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:39.912+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:00:39.912+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:00:39.913+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:00:39.914+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9fbd605] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.915+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:39.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:00:39.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:00:39.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:00:39.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:39.918+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:39.918+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:00:39.925+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:00:39.927+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:00:39.928+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:39.928+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:39.929+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:00:39.930+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:00:39.932+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fb61d1] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.948+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238fe967] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.934+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:39.935+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246390130 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:39.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:39.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:00:39.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6271f755] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.957+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:39.959+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:00:39.960+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258354816 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:39.960+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625002194 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:39.960+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f03e7c8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.964+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:00:39.964+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:39.964+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:39.965+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982888789 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:39.966+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:39.966+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.967+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:39.972+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:39.972+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:39.972+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9fbd605]
2026-01-28T17:00:39.972+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@660c163c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.977+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:39.978+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728445973 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:39.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.980+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:39.980+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:39.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:39.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba5a8fb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.982+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238fe967]
2026-01-28T17:00:39.982+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605131130 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:39.982+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:00:39.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fb61d1]
2026-01-28T17:00:39.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:39.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296793753 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:39.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:39.984+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6271f755]
2026-01-28T17:00:39.984+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.989+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:39.990+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cde6abb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.991+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:39.992+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.993+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e882ee] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.993+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:39.993+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:39.994+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922526024 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:39.996+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e8da6f] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:39.996+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327749233 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:39.997+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f03e7c8]
2026-01-28T17:00:39.997+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:39.998+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568296082 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:39.998+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:39.999+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:39.999+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.000+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.000+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:00:40.001+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.001+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.001+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f240684] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.007+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.007+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@660c163c]
2026-01-28T17:00:40.008+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba5a8fb]
2026-01-28T17:00:40.010+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855998484 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.011+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.012+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.012+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.012+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.012+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371b1e15] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e882ee]
2026-01-28T17:00:40.014+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1216715088 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:40.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:40.014+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cde6abb]
2026-01-28T17:00:40.014+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.015+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.015+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.015+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e8da6f]
2026-01-28T17:00:40.016+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.016+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.017+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a37e3b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.017+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.024+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.025+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:40.027+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:40.031+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381591507 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:40.032+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bdf15a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.033+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.042+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:40.042+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:40.043+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@328235040 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:40.045+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:40.046+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:40.049+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:40.051+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:40.051+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.055+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:40.056+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.057+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:40.062+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:00:40.063+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f240684]
2026-01-28T17:00:40.079+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.063+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:40.076+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371b1e15]
2026-01-28T17:00:40.076+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:40.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cef7d5] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:40.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.084+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4643c668] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.081+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:40.084+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830929198 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.084+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:40.087+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692556547 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:40.092+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:40.087+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3012c29e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.091+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a37e3b]
2026-01-28T17:00:40.091+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:40.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:40.092+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.093+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:00:40.094+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.094+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@509443578 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:40.095+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:00:40.103+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6722c6b6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.110+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5facecd8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.110+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:40.111+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bdf15a]
2026-01-28T17:00:40.112+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686795896 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:40.115+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322044848 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:40.117+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.116+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:40.116+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.133+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a01b24] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.135+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@788338123 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:40.141+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.142+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.117+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:40.117+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.177+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:00:40.177+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:40.177+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:40.179+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4643c668]
2026-01-28T17:00:40.179+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.181+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a01b24]
2026-01-28T17:00:40.180+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:40.180+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cef7d5]
2026-01-28T17:00:40.180+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.181+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.182+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.182+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3012c29e]
2026-01-28T17:00:40.182+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.183+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4348079a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.183+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:40.183+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5facecd8]
2026-01-28T17:00:40.184+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:00:40.184+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.184+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55af6f3d] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.189+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459335965 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:40.189+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6722c6b6]
2026-01-28T17:00:40.189+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.190+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56527814] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.190+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.191+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@817519106 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.197+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.198+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.192+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.192+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.199+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2191ec86] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.193+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f692ab] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.194+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886537330 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:40.196+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:40.199+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.200+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358399860 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:40.206+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2072276001 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:40.207+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.208+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:40.208+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.209+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:40.209+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.211+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:40.211+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.212+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.212+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:40.213+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.214+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:40.215+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55af6f3d]
2026-01-28T17:00:40.216+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.217+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4348079a]
2026-01-28T17:00:40.218+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.221+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:40.221+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:40.221+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.222+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56527814]
2026-01-28T17:00:40.223+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.223+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2191ec86]
2026-01-28T17:00:40.223+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f692ab]
2026-01-28T17:00:40.224+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.224+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaa2051] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.225+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.226+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:00:40.227+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.228+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.228+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0fe9f0] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355972158 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:40.230+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.231+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:40.232+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c694d4] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.233+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276396755 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:40.233+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:40.235+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.244+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.247+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657945869 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:40.263+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:40.248+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:40.248+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:40.265+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:40.267+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:00:40.277+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:00:40.278+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:40.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0fe9f0]
2026-01-28T17:00:40.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:40.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaa2051]
2026-01-28T17:00:40.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c694d4]
2026-01-28T17:00:40.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f82510d] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fda8838] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504590692 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:40.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48239e2] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1079874874 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.285+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.287+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@633568658 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:40.287+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:40.289+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.291+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.293+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:40.294+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.298+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.299+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-28T17:00:40.300+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f82510d]
2026-01-28T17:00:40.300+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.301+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fda8838]
2026-01-28T17:00:40.301+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.305+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48239e2]
2026-01-28T17:00:40.306+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:00:40.308+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.309+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a4edae] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.313+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a2c383] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.315+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1476666026 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.413+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.414+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.326+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75146620 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:40.416+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:40.416+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:40.533+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.533+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:40.574+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a4edae]
2026-01-28T17:00:40.588+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a2c383]
2026-01-28T17:00:40.588+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.589+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.589+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e8f87e7] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.589+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd45d35] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.590+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518518277 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.590+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997011447 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:40.626+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.621+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:40.626+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.627+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:40.632+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.635+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd45d35]
2026-01-28T17:00:40.632+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 32
2026-01-28T17:00:40.642+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.643+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e8f87e7]
2026-01-28T17:00:40.643+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:40.647+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:40.648+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:40.649+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e00615] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:40.650+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370627889 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:40.667+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:40.668+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:00:40.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:40.679+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e00615]
2026-01-28T17:00:40.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:40.706+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:40.708+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:41.428+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-28T17:00:41.431+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-28T17:00:41.433+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/logout
2026-01-28T17:00:41.433+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-28T17:00:41.437+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-28T17:00:41.438+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-28T17:00:41.440+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-28T17:00:41.447+09:00  INFO 13328 --- [http-nio-8080-exec-2] SECURITY                                 : LOGOUT userId=2
2026-01-28T17:00:41.462+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:41.463+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-28T17:00:41.464+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:43.870+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-28T17:00:43.873+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-28T17:00:43.874+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-28T17:00:43.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-28T17:00:43.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-28T17:00:43.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-28T17:00:43.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-28T17:00:43.881+09:00  INFO 13328 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-28T17:00:43.882+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:43.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fec37cf] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:43.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759460801 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:43.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-28T17:00:43.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-28T17:00:43.897+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-28T17:00:43.898+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fec37cf]
2026-01-28T17:00:43.988+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:43.989+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c71dab1] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:43.989+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1556190490 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:43.990+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:00:43.992+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-28T17:00:43.996+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-28T17:00:43.998+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c71dab1]
2026-01-28T17:00:43.998+09:00  INFO 13328 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-28T17:00:44.000+09:00  INFO 13328 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-28T17:00:44.000+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.000+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-28T17:00:44.001+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.320+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-28T17:00:44.326+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-28T17:00:44.327+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-28T17:00:44.328+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-28T17:00:44.329+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-28T17:00:44.329+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-28T17:00:44.330+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.330+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15755700] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847352514 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:44.336+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-28T17:00:44.338+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-28T17:00:44.344+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-28T17:00:44.344+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15755700]
2026-01-28T17:00:44.345+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.345+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-28T17:00:44.346+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.410+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:44.411+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:44.433+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.412+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:44.415+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:44.415+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:44.416+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.437+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.438+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:44.440+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:44.441+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:44.443+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:44.447+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.450+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.454+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.455+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:44.458+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.464+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:44.458+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:44.460+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:44.465+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:44.476+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:44.494+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:44.465+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:44.465+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-28T17:00:44.496+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.465+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:44.466+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-28T17:00:44.477+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:44.495+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:44.496+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:44.498+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:44.498+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:44.499+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:44.499+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:44.499+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:44.499+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:44.500+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-28T17:00:44.506+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:44.507+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:44.507+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:44.507+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.508+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:44.508+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.508+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.511+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-28T17:00:44.511+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:44.511+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d01e45] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.511+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:44.512+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.513+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba49208] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.514+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.516+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256e009e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.514+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.514+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657363554 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:44.523+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424486521 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:44.515+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.515+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.524+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc19098] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.522+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.523+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:44.524+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976067249 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.524+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:44.524+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7b4db] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.527+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.529+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:44.529+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:44.530+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:44.534+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:44.531+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eaf3abf] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.538+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773155900 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:44.539+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:44.540+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1204559127 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.541+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738256465 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:44.542+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:44.542+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:44.542+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d01e45]
2026-01-28T17:00:44.543+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba49208]
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256e009e]
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.547+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-28T17:00:44.547+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.548+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-28T17:00:44.548+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.548+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5576f676] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cb73a9] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc19098]
2026-01-28T17:00:44.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34143020] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-28T17:00:44.551+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012674219 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:44.551+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340466878 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:44.554+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7b4db]
2026-01-28T17:00:44.562+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.563+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608369035 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.563+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eaf3abf]
2026-01-28T17:00:44.564+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.564+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.565+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.565+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-28T17:00:44.565+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.566+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.567+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.567+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.567+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d62885] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.568+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.568+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.573+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-28T17:00:44.578+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189878227 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.579+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.581+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:44.581+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.582+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.590+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.591+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cb73a9]
2026-01-28T17:00:44.592+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.592+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5576f676]
2026-01-28T17:00:44.592+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-28T17:00:44.594+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:44.597+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.597+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.598+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34143020]
2026-01-28T17:00:44.599+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.600+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:44.600+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:44.604+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:44.605+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.605+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:44.605+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:44.613+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-28T17:00:44.606+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:44.607+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.611+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:44.625+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.612+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.615+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.615+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:44.640+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:44.641+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.641+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7b125e] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.642+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1385115384 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:44.642+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:44.617+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:44.630+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.645+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:44.638+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.640+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.646+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:44.644+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:44.645+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-28T17:00:44.646+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:44.646+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.647+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.648+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.662+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.664+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:44.664+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a017221] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.665+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:44.665+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:44.666+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d62885]
2026-01-28T17:00:44.667+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:44.668+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:44.670+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1196835413 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:44.672+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:44.672+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-28T17:00:44.673+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.673+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7b125e]
2026-01-28T17:00:44.674+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5b7175] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.674+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-28T17:00:44.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2930a0a9] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.675+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.676+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360229086 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:44.677+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-28T17:00:44.677+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77404b8c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295319306 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c4190b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.678+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.683+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299376175 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:44.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1700468134 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.682+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.682+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-28T17:00:44.682+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:44.683+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.683+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.684+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.684+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305f2397] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.684+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a017221]
2026-01-28T17:00:44.690+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:44.690+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.691+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.692+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117183845 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:44.692+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.693+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.696+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-28T17:00:44.696+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5b7175]
2026-01-28T17:00:44.697+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-28T17:00:44.698+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.698+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-28T17:00:44.699+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44330b71] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.699+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.699+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.700+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.700+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:44.701+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347282011 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:44.704+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c4190b]
2026-01-28T17:00:44.704+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77404b8c]
2026-01-28T17:00:44.705+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2930a0a9]
2026-01-28T17:00:44.707+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:44.708+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.712+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.712+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.712+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.715+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a690a54] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.713+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.714+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:44.714+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:44.714+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de70fec] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.715+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-28T17:00:44.716+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116445784 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.717+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:44.721+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.727+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477328375 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.727+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305f2397]
2026-01-28T17:00:44.727+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.728+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:44.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.733+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.740+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.742+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.742+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:44.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44330b71]
2026-01-28T17:00:44.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.745+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-28T17:00:44.745+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.749+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-28T17:00:44.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421b8176] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.757+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.759+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.760+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605a5289] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.762+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a690a54]
2026-01-28T17:00:44.763+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@506421959 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:44.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:44.766+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.766+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1392367238 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:44.767+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.778+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:44.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de70fec]
2026-01-28T17:00:44.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-28T17:00:44.780+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:44.780+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-28T17:00:44.780+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcec8c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.781+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:44.782+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.791+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d55769] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.784+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.790+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:44.790+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.791+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738898893 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.792+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1196993200 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:44.795+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.797+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:44.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:44.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:44.807+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:44.811+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.811+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421b8176]
2026-01-28T17:00:44.811+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-28T17:00:44.811+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:44.813+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:44.813+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c74a59c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.814+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802280320 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:44.815+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605a5289]
2026-01-28T17:00:44.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@111b588c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc259ae] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-28T17:00:44.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:44.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602377788 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:44.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@592215889 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:44.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-28T17:00:44.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 31
2026-01-28T17:00:44.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:44.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.829+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3557c568] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.831+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.832+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d55769]
2026-01-28T17:00:44.832+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcec8c]
2026-01-28T17:00:44.843+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.833+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.834+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@542598866 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:44.834+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-28T17:00:44.843+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b4e8c3] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.843+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.844+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3538ffbf] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.845+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-28T17:00:44.845+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c74a59c]
2026-01-28T17:00:44.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1545772323 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.851+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.855+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@111b588c]
2026-01-28T17:00:44.859+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464007960 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-28T17:00:44.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-28T17:00:44.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc259ae]
2026-01-28T17:00:44.868+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.864+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:44.891+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:44.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:44.914+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:44.868+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42425ce6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.922+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835164201 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:44.901+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:44.914+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b4e8c3]
2026-01-28T17:00:44.915+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-28T17:00:44.922+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:44.927+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:44.935+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:44.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3538ffbf]
2026-01-28T17:00:44.939+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.941+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.949+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e4054f] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.943+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3557c568]
2026-01-28T17:00:44.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.946+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:44.947+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.958+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d6ffaa] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:44.950+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:44.954+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898957728 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:44.965+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:44.973+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-28T17:00:44.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:44.977+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-28T17:00:44.956+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:44.961+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912340360 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:44.964+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:44.965+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:44.984+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42425ce6]
2026-01-28T17:00:44.978+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:44.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:44.997+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:44.983+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:44.999+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:44.984+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:44.994+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.997+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:44.999+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:45.001+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-01-28T17:00:45.009+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:45.012+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b074e04] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565cde3] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.013+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.014+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e4054f]
2026-01-28T17:00:45.014+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:45.015+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997362414 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.015+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1740791423 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.015+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:45.016+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.016+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.016+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.016+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.025+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.043+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.029+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:45.029+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e01bb72] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.031+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d6ffaa]
2026-01-28T17:00:45.031+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4788f2aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.034+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.046+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1490616704 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.051+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.046+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.046+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.048+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243409495 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:45.061+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.061+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.062+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:45.074+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b074e04]
2026-01-28T17:00:45.063+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b90db3c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.063+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b14f71] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.063+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:45.073+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565cde3]
2026-01-28T17:00:45.075+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 31
2026-01-28T17:00:45.075+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49960f39] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.076+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387385751 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.077+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862569314 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.081+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.083+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:45.079+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:45.079+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.094+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cbdea59] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e01bb72]
2026-01-28T17:00:45.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414191457 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.095+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.081+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.093+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:45.095+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998335736 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.095+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.096+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.097+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:45.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b14f71]
2026-01-28T17:00:45.100+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.100+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac839dc] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.108+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4788f2aa]
2026-01-28T17:00:45.109+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.110+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.112+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230100956 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.115+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.113+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.114+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49960f39]
2026-01-28T17:00:45.114+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271878ac] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.116+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.126+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f946cb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.127+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.130+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830314489 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.130+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.131+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.142+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927604124 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:45.142+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdad2cb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.143+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.143+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b90db3c]
2026-01-28T17:00:45.144+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cbdea59]
2026-01-28T17:00:45.145+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.146+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1967979438 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.148+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.150+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.151+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.151+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.159+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fdbeab] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.160+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bccaba4] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.166+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:45.167+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac839dc]
2026-01-28T17:00:45.167+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@429513267 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.173+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403727270 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.176+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.177+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.179+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.180+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.180+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.181+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:45.182+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7870992c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.182+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.191+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.191+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f946cb]
2026-01-28T17:00:45.192+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271878ac]
2026-01-28T17:00:45.192+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdad2cb]
2026-01-28T17:00:45.192+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868047143 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.196+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.200+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.200+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.201+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.206+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.207+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 31
2026-01-28T17:00:45.208+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:45.208+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:45.209+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5f4e6a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.210+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-28T17:00:45.210+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fdbeab]
2026-01-28T17:00:45.210+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bccaba4]
2026-01-28T17:00:45.211+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.212+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.224+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456048544 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.227+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.228+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.251+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-01-28T17:00:45.258+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.259+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c90b114] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.260+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49cc350a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.260+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7870992c]
2026-01-28T17:00:45.261+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.261+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96556235 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.263+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118699548 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2bece2] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.289+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.295+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5f4e6a]
2026-01-28T17:00:45.291+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.293+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911471506 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.299+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.301+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.307+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:45.308+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.312+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.327+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.359+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49cc350a]
2026-01-28T17:00:45.328+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.328+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 31
2026-01-28T17:00:45.364+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.365+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2bece2]
2026-01-28T17:00:45.368+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c90b114]
2026-01-28T17:00:45.376+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7da4ce5c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.378+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.381+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.383+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432932487 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.399+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-28T17:00:45.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:45.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c8acca] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.406+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.406+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168411062 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.412+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.417+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.436+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-01-28T17:00:45.439+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7da4ce5c]
2026-01-28T17:00:45.440+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.440+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ca7c3b1] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.442+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665465943 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.447+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.449+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.480+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:45.487+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:45.490+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:45.492+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.495+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.495+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:45.496+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.497+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 31
2026-01-28T17:00:45.501+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:45.504+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:45.522+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:45.513+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.514+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:45.514+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c8acca]
2026-01-28T17:00:45.515+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ca7c3b1]
2026-01-28T17:00:45.523+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:45.524+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:45.528+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.531+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:45.532+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.533+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.534+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-28T17:00:45.541+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:45.542+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:45.543+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-28T17:00:45.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25efb5d0] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.544+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52193708] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.545+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:45.545+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:45.546+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:45.546+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.547+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869790555 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.548+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283233457 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.548+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:45.549+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:45.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:45.554+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.550+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:45.551+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.552+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.553+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-28T17:00:45.555+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.555+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2f585] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.555+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-28T17:00:45.556+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-28T17:00:45.556+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.557+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.557+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6d65be] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.557+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170204242 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.560+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.562+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.562+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609340456 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.563+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.563+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.564+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.564+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:45.564+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.565+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.583+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508af485] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.565+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b04a05] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.588+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556725357 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:45.589+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-28T17:00:45.590+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-28T17:00:45.566+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:45.584+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642829536 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.591+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-28T17:00:45.592+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-28T17:00:45.614+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.614+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.615+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-01-28T17:00:45.623+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2f585]
2026-01-28T17:00:45.624+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-28T17:00:45.625+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-28T17:00:45.625+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:45.625+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52193708]
2026-01-28T17:00:45.627+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25efb5d0]
2026-01-28T17:00:45.629+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.629+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508af485]
2026-01-28T17:00:45.629+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b04a05]
2026-01-28T17:00:45.630+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6d65be]
2026-01-28T17:00:45.640+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.630+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.631+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.631+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391681b9] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.632+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.640+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.640+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-28T17:00:45.641+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b716934] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.641+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa79d71] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.643+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796796355 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.645+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-28T17:00:45.648+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34942278] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.649+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.660+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615568933 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.661+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658433632 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.688+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.693+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.662+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.663+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.666+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@292680129 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.707+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.676+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.681+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.711+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.696+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.699+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:45.707+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.711+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-28T17:00:45.712+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-28T17:00:45.716+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:45.728+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.731+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:45.731+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:45.732+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:45.732+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-28T17:00:45.733+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.734+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 31
2026-01-28T17:00:45.734+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:45.741+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.741+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391681b9]
2026-01-28T17:00:45.742+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa79d71]
2026-01-28T17:00:45.742+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.747+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.747+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.747+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.748+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ac6594] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.749+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.750+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.751+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-01-28T17:00:45.756+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60787e69] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.757+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fbb4fde] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.759+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163093109 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.759+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f53821b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.760+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34942278]
2026-01-28T17:00:45.760+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b716934]
2026-01-28T17:00:45.760+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1844326550 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.762+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018435917 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:45.762+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:45.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991678651 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.767+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.767+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.769+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.775+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.777+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:45.777+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-28T17:00:45.778+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:45.779+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6281d58f] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.782+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.782+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.783+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-28T17:00:45.784+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.784+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315172898 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.798+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.798+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:45.799+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.800+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:45.810+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.812+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:45.812+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-28T17:00:45.812+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-28T17:00:45.812+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fbb4fde]
2026-01-28T17:00:45.813+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:45.813+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ac6594]
2026-01-28T17:00:45.813+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f53821b]
2026-01-28T17:00:45.814+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:45.814+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.822+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b668c1b] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.816+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60787e69]
2026-01-28T17:00:45.816+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18047fd3] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958740866 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.817+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.821+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:45.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503767318 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:45.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6281d58f]
2026-01-28T17:00:45.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.824+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-28T17:00:45.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657279b0] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1188743233 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.825+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:45.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-28T17:00:45.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4734d6f6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.829+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.830+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:45.831+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@596446116 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.834+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.833+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.833+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-28T17:00:45.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-28T17:00:45.845+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-28T17:00:45.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-28T17:00:45.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-28T17:00:45.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:45.848+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.848+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-28T17:00:45.849+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1069c155] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.852+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1635270975 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:45.853+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-28T17:00:45.853+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.854+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-28T17:00:45.854+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdebbbf] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.855+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737631357 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.855+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-28T17:00:45.856+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-28T17:00:45.876+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.876+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18047fd3]
2026-01-28T17:00:45.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:45.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657279b0]
2026-01-28T17:00:45.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.880+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bfb3ff4] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498230466 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4734d6f6]
2026-01-28T17:00:45.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:45.882+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:45.882+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.882+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.890+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e2cd5d] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.890+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1107307697 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.891+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.890+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-28T17:00:45.891+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.891+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-28T17:00:45.892+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-28T17:00:45.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-28T17:00:45.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-28T17:00:45.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdebbbf]
2026-01-28T17:00:45.893+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-28T17:00:45.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-01-28T17:00:45.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b668c1b]
2026-01-28T17:00:45.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-28T17:00:45.896+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1069c155]
2026-01-28T17:00:45.897+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.897+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-28T17:00:45.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a9faca4] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.895+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.897+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-28T17:00:45.905+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919448098 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:45.905+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2184a3f6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.907+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-28T17:00:45.907+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.908+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772662665 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:45.909+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:45.910+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:45.909+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-28T17:00:45.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-28T17:00:45.919+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-28T17:00:45.921+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-28T17:00:45.922+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-28T17:00:45.922+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-28T17:00:45.923+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.924+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-28T17:00:45.924+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.924+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85a44d5] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.925+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803181215 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:45.925+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-28T17:00:45.925+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-28T17:00:45.942+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.942+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:45.942+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-28T17:00:45.942+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2184a3f6]
2026-01-28T17:00:45.943+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e2cd5d]
2026-01-28T17:00:45.943+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.943+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a9faca4]
2026-01-28T17:00:45.943+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:45.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218b7f51] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.944+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-28T17:00:45.945+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@339138072 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:45.945+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.945+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:45.945+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.946+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:45.968+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:45.971+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-28T17:00:45.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bfb3ff4]
2026-01-28T17:00:45.979+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85a44d5]
2026-01-28T17:00:45.980+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:45.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:45.981+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36799c84] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:45.982+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-28T17:00:45.984+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72290592 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:45.987+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:45.994+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:46.012+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:46.027+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:46.028+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218b7f51]
2026-01-28T17:00:46.028+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.028+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7d038] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.029+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2058114698 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:46.037+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.062+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.076+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:46.080+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36799c84]
2026-01-28T17:00:46.081+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.093+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564c3237] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.112+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749410758 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:46.156+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.157+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.223+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.311+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.315+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7d038]
2026-01-28T17:00:46.331+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564c3237]
2026-01-28T17:00:46.331+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.333+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75699576] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.332+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe32306] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.334+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1115933798 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:46.338+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:46.339+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:46.337+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838538450 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:46.340+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:46.397+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:46.424+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75699576]
2026-01-28T17:00:46.425+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.425+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68069fb2] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.427+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375565281 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:46.427+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.405+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:46.428+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.461+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.462+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:46.483+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:46.487+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:00:46.490+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:46.491+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:00:46.494+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68069fb2]
2026-01-28T17:00:46.494+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe32306]
2026-01-28T17:00:46.497+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:46.499+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:00:46.503+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:46.503+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:00:46.504+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:46.504+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.509+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:46.509+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a38ece] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.510+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:46.512+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@558788655 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:46.515+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:46.518+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:46.525+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:00:46.555+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:46.556+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:00:46.577+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:46.558+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:00:46.578+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:46.578+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:46.580+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:00:46.581+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:00:46.582+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:46.589+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:46.598+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:00:46.696+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:00:46.697+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:00:46.698+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:00:46.698+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:46.613+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-28T17:00:46.649+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:00:46.688+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:00:46.694+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:46.695+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:46.699+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.700+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a38ece]
2026-01-28T17:00:46.700+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:00:46.716+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:00:46.700+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:00:46.703+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.704+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:46.709+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220489bd] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.709+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.717+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.721+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.723+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6937b382] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.724+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:46.725+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3993282a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.725+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6912585a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.738+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414c889d] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.743+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736154623 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:46.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1391899536 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:46.744+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:46.745+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317527080 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:46.760+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:46.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.761+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.764+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:46.782+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5497ea85] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.783+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.800+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152265603 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:46.805+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658923354 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:46.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@704127992 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:46.823+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:46.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:46.826+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3993282a]
2026-01-28T17:00:46.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220489bd]
2026-01-28T17:00:46.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.827+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:46.828+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6937b382]
2026-01-28T17:00:46.829+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:46.830+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.831+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.845+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:46.845+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7de421] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.846+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3334aabb] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.847+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddc22aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.848+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106541532 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:46.848+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1299831312 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:46.848+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032348976 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:46.849+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:46.849+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.849+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-28T17:00:46.850+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.855+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.859+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.861+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414c889d]
2026-01-28T17:00:46.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:46.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 38
2026-01-28T17:00:46.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:46.862+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 21
2026-01-28T17:00:46.864+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.865+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3334aabb]
2026-01-28T17:00:46.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddc22aa]
2026-01-28T17:00:46.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7de421]
2026-01-28T17:00:46.866+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5497ea85]
2026-01-28T17:00:46.868+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6912585a]
2026-01-28T17:00:46.877+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2241a144] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.877+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.878+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:46.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.879+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.880+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:46.880+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217821652 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:46.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f62a573] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.881+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:46.883+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@418569f5] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.883+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fb927b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.884+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80c5451] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:46.885+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.891+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152417622 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:46.894+09:00 DEBUG 13328 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:46.897+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936445704 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:46.898+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840922073 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:46.898+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970696834 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:46.899+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:46.899+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:46.924+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:46.907+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:00:46.915+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.916+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.917+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:46.996+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:00:46.997+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.047+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:00:47.075+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.096+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.096+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:00:47.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2241a144]
2026-01-28T17:00:47.099+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f62a573]
2026-01-28T17:00:47.104+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:00:47.105+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.116+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2188c2] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.117+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355111907 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:47.117+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:47.105+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.106+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:00:47.129+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:47.134+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3f1b56] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.136+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.139+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.140+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.140+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.142+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1199339199 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:47.144+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13911409] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.145+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80c5451]
2026-01-28T17:00:47.145+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fb927b7]
2026-01-28T17:00:47.145+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@418569f5]
2026-01-28T17:00:47.146+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.147+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424757642 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:47.147+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.147+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:00:47.148+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.148+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.148+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:47.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554db704] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2188c2]
2026-01-28T17:00:47.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:47.149+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:47.156+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:47.158+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057607456 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:47.158+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.159+09:00 DEBUG 13328 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.160+09:00 DEBUG 13328 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.163+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:47.163+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290a3cfd] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.164+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.174+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:47.188+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-28T17:00:47.190+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 21
2026-01-28T17:00:47.193+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:47.199+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520359046 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:47.200+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3f1b56]
2026-01-28T17:00:47.204+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:47.209+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13911409]
2026-01-28T17:00:47.211+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.211+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:47.216+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:00:47.213+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.214+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:47.214+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.216+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.217+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:47.217+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554db704]
2026-01-28T17:00:47.217+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@131169e6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.217+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:47.217+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4564b269] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.221+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:47.223+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.224+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:47.224+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@650192249 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:47.225+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582221200 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:47.226+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:47.226+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.227+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c043dd] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.228+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.228+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:47.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290a3cfd]
2026-01-28T17:00:47.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1846360982 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:47.229+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7850e102] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.230+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:47.230+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.230+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f37f675] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.230+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.231+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.231+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@586575409 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:47.239+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938822958 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:47.239+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28be0d97] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.240+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.240+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:00:47.241+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.241+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:47.243+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:47.245+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4564b269]
2026-01-28T17:00:47.245+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1353396649 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:47.245+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@131169e6]
2026-01-28T17:00:47.248+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:47.248+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.248+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:47.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:47.250+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.251+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c043dd]
2026-01-28T17:00:47.253+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376c34c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.253+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:47.253+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb66d1a] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.254+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.254+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467695032 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:47.255+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:47.255+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1198547283 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:47.255+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterI (truncated)...]
2026-01-28T17:00:47.256+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:47.256+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-28T17:00:47.257+09:00 DEBUG 13328 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.258+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:47.266+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:00:47.270+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:00:47.278+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:00:47.278+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:00:47.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:00:47.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afcfe5c] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918381857 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:47.279+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:00:47.280+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:00:47.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:47.281+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:00:47.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:47.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f37f675]
2026-01-28T17:00:47.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:00:47.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376c34c6]
2026-01-28T17:00:47.282+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7850e102]
2026-01-28T17:00:47.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:00:47.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28be0d97]
2026-01-28T17:00:47.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.283+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f2537e8] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb66d1a]
2026-01-28T17:00:47.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34ec9136] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6a27b2] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.284+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605493799 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e57f69] will not be managed by Spring
2026-01-28T17:00:47.285+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.286+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29259f00] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.288+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651530089 wrapping com.mysql.cj.jdbc.ConnectionImpl@2329d7ec] will not be managed by Spring
2026-01-28T17:00:47.288+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682808108 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d66474b] will not be managed by Spring
2026-01-28T17:00:47.288+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.288+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9cc9d49] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.289+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.289+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898970374 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:47.289+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.289+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.290+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711206359 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:47.290+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.290+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:00:47.290+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.290+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.291+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:00:47.292+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:00:47.293+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.293+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afcfe5c]
2026-01-28T17:00:47.294+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.294+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.294+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.297+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.298+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34ec9136]
2026-01-28T17:00:47.299+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:00:47.299+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f2537e8]
2026-01-28T17:00:47.300+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6a27b2]
2026-01-28T17:00:47.309+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354e7ecf] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29259f00]
2026-01-28T17:00:47.310+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.311+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.311+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.313+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@142436388 wrapping com.mysql.cj.jdbc.ConnectionImpl@6a65e790] will not be managed by Spring
2026-01-28T17:00:47.313+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterI (truncated)...]
2026-01-28T17:00:47.316+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.316+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9cc9d49]
2026-01-28T17:00:47.317+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:47.318+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:47.319+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.320+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b80a738] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.320+09:00 DEBUG 13328 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.322+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1851320535 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:47.321+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.339+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62c716e5] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.321+09:00 DEBUG 13328 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.321+09:00 DEBUG 13328 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.321+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.322+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.341+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@252504353 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:47.347+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.349+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:47.350+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:47.364+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.371+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b80a738]
2026-01-28T17:00:47.364+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.372+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.372+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354e7ecf]
2026-01-28T17:00:47.372+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0bb002] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.373+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.374+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1943830012 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:47.374+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:00:47.382+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:00:47.382+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:00:47.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62c716e5]
2026-01-28T17:00:47.384+09:00 DEBUG 13328 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.392+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:00:47.392+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.397+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ffa9a51] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.401+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1708184437 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e8a35ee] will not be managed by Spring
2026-01-28T17:00:47.406+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.407+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:00:47.409+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.409+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0bb002]
2026-01-28T17:00:47.412+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:00:47.413+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356b1ecd] was not registered for synchronization because synchronization is not active
2026-01-28T17:00:47.414+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.414+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965044674 wrapping com.mysql.cj.jdbc.ConnectionImpl@1016ec1] will not be managed by Spring
2026-01-28T17:00:47.414+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ffa9a51]
2026-01-28T17:00:47.415+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:00:47.417+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.417+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:00:47.418+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:47.422+09:00 DEBUG 13328 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:00:47.431+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:00:47.439+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356b1ecd]
2026-01-28T17:00:47.440+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:00:47.445+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:00:47.447+09:00 DEBUG 13328 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:32.883+09:00  INFO 11120 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 11120 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-28T17:07:32.886+09:00 DEBUG 11120 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-28T17:07:32.887+09:00  INFO 11120 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-28T17:07:35.302+09:00 DEBUG 11120 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-28T17:07:35.304+09:00 DEBUG 11120 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-28T17:07:35.703+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-28T17:07:35.705+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-28T17:07:35.707+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-28T17:07:35.709+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-28T17:07:35.710+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-28T17:07:35.711+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-28T17:07:35.712+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-28T17:07:35.714+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-28T17:07:35.718+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-28T17:07:35.720+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-28T17:07:35.721+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-28T17:07:35.723+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-28T17:07:35.726+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-28T17:07:35.727+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-28T17:07:35.732+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-28T17:07:35.735+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-28T17:07:35.736+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-28T17:07:35.737+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-28T17:07:35.743+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-28T17:07:35.749+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-28T17:07:35.752+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-28T17:07:35.754+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-28T17:07:35.757+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-28T17:07:35.761+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-28T17:07:35.771+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-28T17:07:35.784+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-28T17:07:35.786+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-28T17:07:35.790+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-28T17:07:35.794+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-28T17:07:35.798+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-28T17:07:35.801+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-28T17:07:35.803+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-28T17:07:35.805+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-28T17:07:35.807+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-28T17:07:35.814+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-28T17:07:35.817+09:00 DEBUG 11120 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-28T17:07:36.689+09:00  INFO 11120 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-28T17:07:36.730+09:00  INFO 11120 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-28T17:07:36.750+09:00  INFO 11120 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-28T17:07:36.979+09:00  INFO 11120 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-28T17:07:36.981+09:00  INFO 11120 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4011 ms
2026-01-28T17:07:37.171+09:00 DEBUG 11120 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-28T17:07:37.181+09:00 DEBUG 11120 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-28T17:07:37.768+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-28T17:07:37.807+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-28T17:07:37.845+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-28T17:07:37.905+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-28T17:07:37.931+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-28T17:07:37.989+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-28T17:07:38.044+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-28T17:07:38.086+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-28T17:07:38.222+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-28T17:07:38.331+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-28T17:07:38.341+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-28T17:07:38.358+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-28T17:07:38.383+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-28T17:07:38.398+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-28T17:07:38.415+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-28T17:07:38.445+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-28T17:07:38.473+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-28T17:07:38.495+09:00 DEBUG 11120 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-28T17:07:40.177+09:00 DEBUG 11120 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2026-01-28T17:07:40.637+09:00 DEBUG 11120 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-28T17:07:40.705+09:00  WARN 11120 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 2f83b5d4-5126-43a5-aefb-8ea82beb70f5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-28T17:07:40.737+09:00  INFO 11120 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-28T17:07:40.964+09:00 DEBUG 11120 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-28T17:07:41.179+09:00 DEBUG 11120 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-28T17:07:41.291+09:00 DEBUG 11120 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-28T17:07:41.307+09:00 DEBUG 11120 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-28T17:07:41.666+09:00  INFO 11120 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-28T17:07:41.717+09:00  INFO 11120 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 9.729 seconds (process running for 10.302)
2026-01-28T17:07:47.162+09:00  INFO 11120 --- [http-nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-28T17:07:47.179+09:00  INFO 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-28T17:07:47.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-28T17:07:47.261+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-28T17:07:47.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-28T17:07:47.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@136fece2
2026-01-28T17:07:47.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6591f8ea
2026-01-28T17:07:47.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-28T17:07:47.282+09:00  INFO 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 86 ms
2026-01-28T17:07:47.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-28T17:07:47.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:07:47.442+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:07:47.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:07:47.494+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.494+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:07:47.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:47.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:47.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:47.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-28T17:07:47.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:47.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:47.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:47.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:47.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:47.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:47.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:47.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-28T17:07:47.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:47.840+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-28T17:07:47.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:47.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:47.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:47.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:47.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:47.842+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:47.846+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:47.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-28T17:07:47.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:47.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:47.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:47.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:47.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:47.919+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:47.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-28T17:07:47.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:47.922+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:47.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:47.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:47.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:47.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:47.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:47.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2298ba46] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@353475c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2407f30d] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d841eea] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee7477a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6924793f] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:47.985+09:00  INFO 11120 --- [http-nio-8080-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-28T17:07:48.317+09:00  INFO 11120 --- [http-nio-8080-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63baed14
2026-01-28T17:07:48.320+09:00  INFO 11120 --- [http-nio-8080-exec-3] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-28T17:07:48.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598798421 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:48.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:48.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:48.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957442082 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:48.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-28T17:07:48.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:48.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-28T17:07:48.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6924793f]
2026-01-28T17:07:48.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226783774 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:48.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:48.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-28T17:07:48.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:48.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20bd6260] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:48.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d841eea]
2026-01-28T17:07:48.523+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:48.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186607821 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:48.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:48.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:48.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:48.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:48.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@353475c6]
2026-01-28T17:07:48.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:48.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b600684] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:48.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@469189298 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:48.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:48.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:48.643+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-28T17:07:48.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:48.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2407f30d]
2026-01-28T17:07:48.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:48.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657535092 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:48.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538daaff] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:48.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:48.690+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:48.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:48.751+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:48.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341559289 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:48.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:48.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2298ba46]
2026-01-28T17:07:48.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:48.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc92e9d] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:48.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:07:48.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:48.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034668972 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:48.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:07:48.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:48.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:07:48.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:48.818+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:07:48.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:48.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:48.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:48.872+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:48.872+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:48.897+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b600684]
2026-01-28T17:07:48.877+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ed37f16] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:48.900+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:48.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee7477a]
2026-01-28T17:07:48.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:48.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438dad86] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:48.895+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20bd6260]
2026-01-28T17:07:48.899+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2123792579 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:48.923+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:48.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315713216 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:48.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:48.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:48.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:48.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854059493 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:48.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:48.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:48.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:48.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:48.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:48.956+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:48.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:48.994+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:07:49.006+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.008+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc92e9d]
2026-01-28T17:07:49.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:49.050+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538daaff]
2026-01-28T17:07:49.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:07:49.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375763923 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:49.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:49.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:49.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:07:49.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.063+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:49.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:49.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:49.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:07:49.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ed37f16]
2026-01-28T17:07:49.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:49.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:07:49.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:07:49.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:49.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:49.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-28T17:07:49.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:07:49.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e71ca0] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:49.189+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438dad86]
2026-01-28T17:07:49.190+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a4e7fd] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:49.194+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:07:49.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:07:49.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241625850 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:49.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:49.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677580121 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:49.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:49.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:07:49.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:49.224+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:07:49.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:49.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:49.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:07:49.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa74b8a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.260+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:49.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:49.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9d1b7d] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:07:49.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1415622318 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:49.457+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:49.459+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1634037773 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:49.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e71ca0]
2026-01-28T17:07:49.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645397a0] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:49.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 21
2026-01-28T17:07:49.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:49.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:49.510+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287739885 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:49.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f78da00] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a4e7fd]
2026-01-28T17:07:49.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:49.522+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:49.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:49.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:49.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@971f82d] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.559+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158422270 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:49.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de86ad5] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1511444817 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:49.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:49.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa74b8a]
2026-01-28T17:07:49.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:49.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24029377] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@234041341 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:49.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.606+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 21
2026-01-28T17:07:49.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9d1b7d]
2026-01-28T17:07:49.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645397a0]
2026-01-28T17:07:49.623+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8af9813] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:07:49.643+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095292220 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:49.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@743827630 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:49.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@971f82d]
2026-01-28T17:07:49.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f78da00]
2026-01-28T17:07:49.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:49.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ea4369] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:49.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1626782467 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:49.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fc9a1] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e11152] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.656+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.657+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362977798 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:49.661+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.659+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.673+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24029377]
2026-01-28T17:07:49.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:49.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800727219 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:49.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:49.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ea4369]
2026-01-28T17:07:49.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8af9813]
2026-01-28T17:07:49.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fc9a1]
2026-01-28T17:07:49.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de86ad5]
2026-01-28T17:07:49.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:49.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:49.705+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.740+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71504cf9] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5dded6] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-28T17:07:49.753+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60822077 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:49.726+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:49.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1efd5b] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.739+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b50e671] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606434500 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:49.773+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:49.756+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:49.761+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:49.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@998179418 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:49.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:49.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-28T17:07:49.773+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607175176 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:49.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:49.777+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:49.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:07:49.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:49.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:49.790+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:49.794+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:49.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:49.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:49.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:07:49.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:07:49.828+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:07:49.827+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:07:49.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71504cf9]
2026-01-28T17:07:49.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1efd5b]
2026-01-28T17:07:49.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5dded6]
2026-01-28T17:07:49.910+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c13fc19] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.896+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b50e671]
2026-01-28T17:07:49.898+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e11152]
2026-01-28T17:07:49.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c608e5] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:49.906+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260024435 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:49.923+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:49.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a13f6f] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49265889 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:49.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:49.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f71a5ff] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:49.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d38e7f3] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:49.939+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914371778 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:49.939+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:49.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:49.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623494928 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:49.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:50.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553841076 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:50.045+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:50.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:50.061+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.062+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.062+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:50.090+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a13f6f]
2026-01-28T17:07:50.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f71a5ff]
2026-01-28T17:07:50.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d38e7f3]
2026-01-28T17:07:50.098+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:50.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:07:50.105+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:50.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:50.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:50.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterI (truncated)...]
2026-01-28T17:07:50.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterI (truncated)...]
2026-01-28T17:07:50.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:50.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c13fc19]
2026-01-28T17:07:50.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c608e5]
2026-01-28T17:07:50.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:50.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5a71fa] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:50.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17400aba] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713cc209] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:50.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658531291 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:50.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759494338 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:50.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941925355 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:50.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:50.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:50.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:07:50.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2578bdf0] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1434551973 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:50.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.203+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:07:50.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5a71fa]
2026-01-28T17:07:50.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.206+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:50.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17400aba]
2026-01-28T17:07:50.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713cc209]
2026-01-28T17:07:50.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3a6d79] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.224+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c31930] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-28T17:07:50.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:50.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529883924 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:50.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143406920 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:50.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:50.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:50.240+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:50.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:50.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-28T17:07:50.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:50.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:07:50.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2578bdf0]
2026-01-28T17:07:50.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:07:50.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 47
2026-01-28T17:07:50.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4feb5094] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c31930]
2026-01-28T17:07:50.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3a6d79]
2026-01-28T17:07:50.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790426532 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:50.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf284c8] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156993c] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470293247 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:50.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027309002 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:50.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156993c]
2026-01-28T17:07:50.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4feb5094]
2026-01-28T17:07:50.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf284c8]
2026-01-28T17:07:50.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:50.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fa3d3af] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:50.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafterId= (truncated)...]
2026-01-28T17:07:50.393+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168370718 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:50.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:50.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:50.411+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:50.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:50.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 72(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:07:50.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 57
2026-01-28T17:07:50.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fa3d3af]
2026-01-28T17:07:50.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:50.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46560fc4] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:50.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741259274 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:50.474+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:50.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-28T17:07:50.489+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:50.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46560fc4]
2026-01-28T17:07:50.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:50.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:50.506+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:51.856+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-28T17:07:51.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-28T17:07:51.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-28T17:07:52.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-28T17:07:52.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-28T17:07:52.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-28T17:07:52.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI0IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-28T17:07:52.161+09:00  INFO 11120 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=4
2026-01-28T17:07:52.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:52.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-28T17:07:52.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:55.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-28T17:07:55.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-28T17:07:55.173+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-28T17:07:55.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-28T17:07:55.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-28T17:07:55.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-28T17:07:55.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-28T17:07:55.195+09:00  INFO 11120 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-28T17:07:55.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:55.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b897e3] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:55.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235079442 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:55.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-28T17:07:55.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-28T17:07:55.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-28T17:07:55.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b897e3]
2026-01-28T17:07:55.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:55.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9e91d0] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:55.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615003451 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:55.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:07:55.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:07:55.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:07:55.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9e91d0]
2026-01-28T17:07:55.316+09:00  INFO 11120 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 1
2026-01-28T17:07:55.317+09:00  INFO 11120 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-28T17:07:55.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:55.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-28T17:07:55.340+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:55.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-28T17:07:55.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-28T17:07:55.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-28T17:07:55.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-28T17:07:55.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-28T17:07:55.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-28T17:07:55.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:55.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a09582a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:55.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1820469296 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:55.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-28T17:07:55.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-28T17:07:55.828+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-28T17:07:55.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a09582a]
2026-01-28T17:07:55.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:55.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-28T17:07:55.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:56.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:56.225+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:56.243+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.261+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:56.277+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:56.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:56.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:07:56.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.306+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:56.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:56.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:07:56.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:07:56.323+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:56.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:56.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:56.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-28T17:07:56.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:56.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:56.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:56.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-28T17:07:56.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-28T17:07:56.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:56.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:56.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:56.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:56.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:56.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:56.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:56.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c08804c] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174be543] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5e517a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c8b7c69] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a38f4ab] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@252ad211] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630756956 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378588615 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:56.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297317333 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:56.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370968362 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:56.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890952636 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200910708 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:56.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:07:56.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:56.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:07:56.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:07:56.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.374+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c08804c]
2026-01-28T17:07:56.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:07:56.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:07:56.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:07:56.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174be543]
2026-01-28T17:07:56.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60217472] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@252ad211]
2026-01-28T17:07:56.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5e517a]
2026-01-28T17:07:56.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c8b7c69]
2026-01-28T17:07:56.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1961587145 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25683bcf] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.390+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a559371] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.390+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaa4f8a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.393+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fadef65] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a38f4ab]
2026-01-28T17:07:56.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822210224 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291258843 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017384275 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:56.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702435078 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:56.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5642be7] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2125975816 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60217472]
2026-01-28T17:07:56.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaa4f8a]
2026-01-28T17:07:56.407+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25683bcf]
2026-01-28T17:07:56.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a559371]
2026-01-28T17:07:56.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fadef65]
2026-01-28T17:07:56.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d97973] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.407+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.407+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.411+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984614366 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:07:56.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:07:56.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f02d28] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:07:56.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5642be7]
2026-01-28T17:07:56.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713956444 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d97973]
2026-01-28T17:07:56.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12efe707] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:07:56.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc25ffe] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@921755054 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1753222154 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-28T17:07:56.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:56.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f02d28]
2026-01-28T17:07:56.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.522+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.524+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c38bc55] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bdf25c] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.531+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2063321640 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.531+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683297454 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc25ffe]
2026-01-28T17:07:56.539+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.539+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.540+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.540+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c38bc55]
2026-01-28T17:07:56.540+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.540+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bdf25c]
2026-01-28T17:07:56.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665e07dc] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12efe707]
2026-01-28T17:07:56.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608157510 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@173c4aca] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b21e55a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1045399148 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cbaec9b] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24434544 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1635841492 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.558+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665e07dc]
2026-01-28T17:07:56.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@173c4aca]
2026-01-28T17:07:56.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e74a2cd] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671228472 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371504ea] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.572+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cbaec9b]
2026-01-28T17:07:56.572+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b21e55a]
2026-01-28T17:07:56.573+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1116369624 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c80ce16] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78b0e3b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@117784361 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@214946510 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.612+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e74a2cd]
2026-01-28T17:07:56.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c9138b] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371504ea]
2026-01-28T17:07:56.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c80ce16]
2026-01-28T17:07:56.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288523395 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17eab08b] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a94dbf7] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78b0e3b7]
2026-01-28T17:07:56.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@138925256 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.623+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.624+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@12472013 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247c6973] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c9138b]
2026-01-28T17:07:56.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529776912 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.640+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.640+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7e04f] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17eab08b]
2026-01-28T17:07:56.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973288411 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a94dbf7]
2026-01-28T17:07:56.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed93478] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096473536 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25882b05] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247c6973]
2026-01-28T17:07:56.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1505691424 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38684982] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7e04f]
2026-01-28T17:07:56.656+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.659+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2132318221 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.663+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.664+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.664+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@435e36a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@565567035 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed93478]
2026-01-28T17:07:56.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.674+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.678+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25882b05]
2026-01-28T17:07:56.678+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38684982]
2026-01-28T17:07:56.679+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6ac7] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@435e36a]
2026-01-28T17:07:56.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2004018244 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638dd2ed] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121179546 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529e8e57] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:56.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:56.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@675342815 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:07:56.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:56.706+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.722+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:56.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638dd2ed]
2026-01-28T17:07:56.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6ac7]
2026-01-28T17:07:56.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22080867] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611c65a2] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529e8e57]
2026-01-28T17:07:56.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790604913 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:56.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60873634 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.740+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.740+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:56.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22080867]
2026-01-28T17:07:56.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611c65a2]
2026-01-28T17:07:56.755+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.756+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.758+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:56.763+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbc1a17] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.779+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762608055 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:56.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:56.790+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:07:56.793+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:56.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:07:56.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-28T17:07:56.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbc1a17]
2026-01-28T17:07:56.805+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:56.805+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-28T17:07:56.805+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-28T17:07:56.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c4fa51] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:07:56.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17f20eb4] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@497235516 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:56.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bdb2ba6] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.920+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.923+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741124029 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.956+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1494304978 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:56.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.972+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c4fa51]
2026-01-28T17:07:56.974+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.974+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:56.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:56.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bdb2ba6]
2026-01-28T17:07:56.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17f20eb4]
2026-01-28T17:07:56.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:56.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:56.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d020cd6] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:56.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bfcdf0] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:56.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878426315 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:56.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902709459 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:56.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:56.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:56.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bfcdf0]
2026-01-28T17:07:57.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d020cd6]
2026-01-28T17:07:57.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bad518a] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.023+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c383a73] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.024+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1620499778 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.027+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104280478 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:57.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:57.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:57.040+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:57.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:57.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:57.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bad518a]
2026-01-28T17:07:57.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c383a73]
2026-01-28T17:07:57.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17288d11] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1994964863 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b5b0e2d] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:57.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@649937559 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:57.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.090+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17288d11]
2026-01-28T17:07:57.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b5b0e2d]
2026-01-28T17:07:57.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b89e67] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.096+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24151b0e] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@439075396 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:57.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473004487 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:57.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:57.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:57.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:57.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:57.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b89e67]
2026-01-28T17:07:57.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24151b0e]
2026-01-28T17:07:57.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f8bb5d] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb991b] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@348013987 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218771271 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:57.158+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:07:57.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:57.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:07:57.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:57.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-28T17:07:57.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb991b]
2026-01-28T17:07:57.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f8bb5d]
2026-01-28T17:07:57.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b457996] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251469ee] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916141732 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2036993090 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:57.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:57.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b457996]
2026-01-28T17:07:57.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251469ee]
2026-01-28T17:07:57.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb45a7c] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f475ec] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122124789 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437154661 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:57.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:07:57.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:57.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 78(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-28T17:07:57.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:57.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f475ec]
2026-01-28T17:07:57.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d1a1acb] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1840334737 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:57.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:57.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-28T17:07:57.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb45a7c]
2026-01-28T17:07:57.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:57.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e249f7] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:57.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570348045 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:57.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:57.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:57.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d1a1acb]
2026-01-28T17:07:57.240+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:57.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:57.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:57.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:57.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e249f7]
2026-01-28T17:07:57.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:57.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:07:57.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:58.739+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:07:58.741+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:07:58.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/78
2026-01-28T17:07:58.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/78
2026-01-28T17:07:58.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:07:58.756+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:07:58.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:07:58.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:07:58.773+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:07:58.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/78
2026-01-28T17:07:58.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:07:58.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/78
2026-01-28T17:07:58.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:07:58.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/78
2026-01-28T17:07:58.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:07:58.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/78
2026-01-28T17:07:58.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:07:58.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:07:58.807+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/78
2026-01-28T17:07:58.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/78", parameters={}
2026-01-28T17:07:58.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:07:58.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/78
2026-01-28T17:07:58.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:07:58.810+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ab1dc3] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:07:58.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:07:58.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/78", parameters={}
2026-01-28T17:07:58.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:07:58.819+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:07:58.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.822+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:07:58.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:07:58.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:07:58.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bab2573] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36450948 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:58.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.823+09:00  INFO 11120 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:07:58.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc1edef] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:58.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ecebd0e] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:07:58.832+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4654b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049960375 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:58.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760578306 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:58.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130545142 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:07:58.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:07:58.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:07:58.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:07:58.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:07:58.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722651088 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:07:58.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:58.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:58.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ab1dc3]
2026-01-28T17:07:58.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:07:58.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:07:58.840+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.845+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:07:58.845+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c16936] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644564919 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:07:58.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:07:58.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:07:58.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:58.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc1edef]
2026-01-28T17:07:58.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bab2573]
2026-01-28T17:07:58.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:07:58.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:07:58.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:58.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:58.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4654b7]
2026-01-28T17:07:58.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ecebd0e]
2026-01-28T17:07:58.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2250cb4b] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1edfc440] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:58.856+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:58.856+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:58.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2063407191 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:58.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:07:58.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1859509826 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:58.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:58.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:07:58.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:07:58.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:58.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:07:58.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c16936]
2026-01-28T17:07:58.873+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:58.873+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:58.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:58.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:58.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:07:58.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:58.938+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:07:58.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1edfc440]
2026-01-28T17:07:58.939+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:07:58.956+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2250cb4b]
2026-01-28T17:07:59.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.143+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.143+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379091230 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:07:59.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774021246 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will be managed by Spring
2026-01-28T17:07:59.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:59.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:07:59.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:07:59.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:07:59.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 47
2026-01-28T17:07:59.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 47
2026-01-28T17:07:59.224+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0] from current transaction
2026-01-28T17:07:59.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:07:59.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea] from current transaction
2026-01-28T17:07:59.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:07:59.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:07:59.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:07:59.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0] from current transaction
2026-01-28T17:07:59.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea] from current transaction
2026-01-28T17:07:59.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:07:59.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:07:59.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:07:59.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:07:59.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea] from current transaction
2026-01-28T17:07:59.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0] from current transaction
2026-01-28T17:07:59.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:07:59.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:07:59.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 121(Long), 1(Long)
2026-01-28T17:07:59.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 121(Long), 1(Long)
2026-01-28T17:07:59.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-28T17:07:59.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-28T17:07:59.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.257+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.257+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.257+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.259+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.260+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7451ea]
2026-01-28T17:07:59.260+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621e57f0]
2026-01-28T17:07:59.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473339c] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:59.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0e4123] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:59.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@374582319 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:59.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591860747 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:59.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:07:59.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:07:59.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:07:59.273+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-28T17:07:59.273+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0e4123]
2026-01-28T17:07:59.276+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473339c]
2026-01-28T17:07:59.276+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@603099ab] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:59.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac057ad] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:59.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560992727 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:59.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462923962 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:59.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:07:59.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:07:59.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:07:59.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-28T17:07:59.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-28T17:07:59.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@603099ab]
2026-01-28T17:07:59.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac057ad]
2026-01-28T17:07:59.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:07:59.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10420f21] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:59.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5ce192] was not registered for synchronization because synchronization is not active
2026-01-28T17:07:59.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960517955 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:07:59.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441374379 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:07:59.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:59.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:07:59.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:59.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:07:59.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:59.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:07:59.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10420f21]
2026-01-28T17:07:59.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5ce192]
2026-01-28T17:07:59.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:59.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:07:59.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=78, drafterId=2, r (truncated)...]
2026-01-28T17:07:59.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=78, drafterId=2, r (truncated)...]
2026-01-28T17:07:59.326+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:07:59.326+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:01.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/78?userId=2
2026-01-28T17:08:01.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/78?userId=2
2026-01-28T17:08:01.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/78
2026-01-28T17:08:01.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/78?userId=2
2026-01-28T17:08:01.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/78?userId=2", parameters={masked}
2026-01-28T17:08:01.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:08:01.104+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 78, userId: 2
2026-01-28T17:08:01.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:01.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733240136 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:01.140+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:01.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:08:01.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:01.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a] from current transaction
2026-01-28T17:08:01.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:01.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:01.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:01.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a] from current transaction
2026-01-28T17:08:01.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a] from current transaction
2026-01-28T17:08:01.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a] from current transaction
2026-01-28T17:08:01.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:01.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 78(Long), 1(Long)
2026-01-28T17:08:01.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:08:01.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.184+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 78, userId: 2
2026-01-28T17:08:01.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2e596a]
2026-01-28T17:08:01.204+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 78
2026-01-28T17:08:01.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:01.206+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:08:01.208+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:01.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:01.990+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:01.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:01.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:01.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:01.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:02.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:02.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:02.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:02.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:02.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:02.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:02.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:02.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:02.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:02.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:02.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:02.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:02.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:02.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:02.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:02.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:02.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:02.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:02.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:02.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:02.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:02.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:02.062+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:02.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:02.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:02.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:02.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:02.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733d71ba] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1194a4c9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b42f330] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:02.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:02.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:02.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:02.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:02.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410482511 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:02.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097875413 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:02.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625556020 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:02.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.096+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45718296] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a20c105] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.105+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22a27c28] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1692155275 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:02.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:02.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b42f330]
2026-01-28T17:08:02.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217318289 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:02.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293319623 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:02.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a451fb0] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:02.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733d71ba]
2026-01-28T17:08:02.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1194a4c9]
2026-01-28T17:08:02.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@329764955 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:02.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45718296]
2026-01-28T17:08:02.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ca6af5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4b2432] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964635165 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:02.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cb11420] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:02.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843319041 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a20c105]
2026-01-28T17:08:02.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1861667266 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:02.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22a27c28]
2026-01-28T17:08:02.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.173+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.173+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a451fb0]
2026-01-28T17:08:02.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382b28c2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ffc72] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945999859 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.189+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@406399103 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:02.189+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:02.190+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:02.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:02.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4b2432]
2026-01-28T17:08:02.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ca6af5]
2026-01-28T17:08:02.240+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382b28c2]
2026-01-28T17:08:02.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cb11420]
2026-01-28T17:08:02.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ffc72]
2026-01-28T17:08:02.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:02.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:02.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:02.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:02.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f752532] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6678a024] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:02.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:02.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1978824683 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@133490961 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:02.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8d851f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:02.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:02.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:02.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:02.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288347009 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:02.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:02.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:02.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:02.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:02.325+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:02.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:02.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 26
2026-01-28T17:08:02.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:02.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:02.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f752532]
2026-01-28T17:08:02.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:02.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.341+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 26
2026-01-28T17:08:02.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:02.355+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8d851f]
2026-01-28T17:08:02.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f5ca] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6678a024]
2026-01-28T17:08:02.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efdb48d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f1be93] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.356+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@447122108 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:02.360+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280290406 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:02.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483165397 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ffca21a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:02.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cbe1abe] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014211975 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:02.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:02.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145708173 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.373+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:02.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:02.390+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f1be93]
2026-01-28T17:08:02.394+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f5ca]
2026-01-28T17:08:02.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257851b3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efdb48d]
2026-01-28T17:08:02.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cbe1abe]
2026-01-28T17:08:02.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ffca21a]
2026-01-28T17:08:02.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55445a6c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293248169 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:02.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1108294059 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:02.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f56a5d7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9279ad1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635439777 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:02.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:02.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634dc2bf] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@703283390 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:02.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1551639916 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:02.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:02.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:02.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:02.494+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:08:02.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257851b3]
2026-01-28T17:08:02.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55445a6c]
2026-01-28T17:08:02.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9279ad1]
2026-01-28T17:08:02.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:08:02.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f56a5d7]
2026-01-28T17:08:02.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f9ca3f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.522+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:02.522+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632e3b80] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.523+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.524+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74185274 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:02.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:02.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1449841702 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6124e5c3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:02.543+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634dc2bf]
2026-01-28T17:08:02.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:02.548+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2076613677 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:02.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:02.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:02.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25019835] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:02.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685047312 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:02.560+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.562+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:02.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 26
2026-01-28T17:08:02.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f9ca3f]
2026-01-28T17:08:02.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6124e5c3]
2026-01-28T17:08:02.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 26
2026-01-28T17:08:02.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632e3b80]
2026-01-28T17:08:02.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467708a6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad0130] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802668645 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:02.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080157915 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8545ac] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106939245 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.572+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.572+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.573+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25019835]
2026-01-28T17:08:02.578+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.582+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:02.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad0130]
2026-01-28T17:08:02.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8545ac]
2026-01-28T17:08:02.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467708a6]
2026-01-28T17:08:02.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8c7af2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69638240] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:02.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1137068786 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507253477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:02.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:02.606+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:02.612+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 77(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:02.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:08:02.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8c7af2]
2026-01-28T17:08:02.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a7986b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:08:02.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82591456 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:02.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69638240]
2026-01-28T17:08:02.623+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:02.626+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.626+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627ee29c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:02.627+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402263313 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:02.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:02.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:02.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.635+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a7986b7]
2026-01-28T17:08:02.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:02.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:02.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627ee29c]
2026-01-28T17:08:02.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:02.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:02.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:02.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:04.762+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:04.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/77
2026-01-28T17:08:04.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:04.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/77
2026-01-28T17:08:04.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:04.775+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:04.779+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/77
2026-01-28T17:08:04.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/77
2026-01-28T17:08:04.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:04.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/77
2026-01-28T17:08:04.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:04.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:04.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:04.818+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:04.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/77
2026-01-28T17:08:04.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:04.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/77
2026-01-28T17:08:04.805+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:04.827+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:04.819+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:04.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/77", parameters={}
2026-01-28T17:08:04.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:04.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/77
2026-01-28T17:08:04.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:04.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.832+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:04.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:04.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/77", parameters={}
2026-01-28T17:08:04.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:04.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779caa83] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.882+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae8c6c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:04.873+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:04.873+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:04.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.885+09:00  INFO 11120 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:04.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88845f4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.895+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d12e94d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@874adc8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.899+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1277847952 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:04.900+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@990231283 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:04.900+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520580689 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:04.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:04.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:04.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:04.916+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:04.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:04.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:04.923+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799416390 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:04.924+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1015050205 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:04.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:04.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:04.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:04.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:04.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:04.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:04.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779caa83]
2026-01-28T17:08:04.939+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae8c6c6]
2026-01-28T17:08:04.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:04.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ecdeee] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@762fb7ff] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:04.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88845f4]
2026-01-28T17:08:04.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:04.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1194972700 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:04.956+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018707839 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:04.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@874adc8]
2026-01-28T17:08:04.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:04.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d12e94d]
2026-01-28T17:08:04.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:04.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:04.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:04.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:04.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:04.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:04.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:04.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5047e42d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:04.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:04.972+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:04.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678626508 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:04.992+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:05.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:05.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:05.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:05.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ecdeee]
2026-01-28T17:08:05.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@762fb7ff]
2026-01-28T17:08:05.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:05.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:05.025+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:05.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:05.063+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5047e42d]
2026-01-28T17:08:05.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.069+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1672160418 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will be managed by Spring
2026-01-28T17:08:05.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:05.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:05.073+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.073+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.074+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711881789 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:05.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:05.079+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:05.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 46
2026-01-28T17:08:05.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9] from current transaction
2026-01-28T17:08:05.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:05.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 46
2026-01-28T17:08:05.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:05.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5] from current transaction
2026-01-28T17:08:05.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:05.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9] from current transaction
2026-01-28T17:08:05.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:05.090+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.098+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:05.098+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:05.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5] from current transaction
2026-01-28T17:08:05.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9] from current transaction
2026-01-28T17:08:05.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:05.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:05.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 119(Long), 1(Long)
2026-01-28T17:08:05.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:05.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:05.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.105+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.105+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5] from current transaction
2026-01-28T17:08:05.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:05.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 119(Long), 1(Long)
2026-01-28T17:08:05.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150e7ed9]
2026-01-28T17:08:05.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:05.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e5e8d5]
2026-01-28T17:08:05.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4ff465] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920555424 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:05.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:05.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.123+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:05.123+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1801cb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.126+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4ff465]
2026-01-28T17:08:05.126+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057979740 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:05.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:05.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b93b2a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047221412 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:05.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:05.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:05.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1801cb]
2026-01-28T17:08:05.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:05.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c70dcde] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b93b2a]
2026-01-28T17:08:05.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17534658 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:05.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:05.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb81e3a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807225868 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:05.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:05.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:05.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:05.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c70dcde]
2026-01-28T17:08:05.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:05.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76beb73d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb81e3a]
2026-01-28T17:08:05.140+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474092312 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:05.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:05.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:05.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=77, drafterId=2, r (truncated)...]
2026-01-28T17:08:05.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:05.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:05.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/77/receipts
2026-01-28T17:08:05.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:05.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76beb73d]
2026-01-28T17:08:05.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:05.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/77/receipts
2026-01-28T17:08:05.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=77, drafterId=2, r (truncated)...]
2026-01-28T17:08:05.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:05.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/77/receipts
2026-01-28T17:08:05.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/77/receipts
2026-01-28T17:08:05.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/77/receipts
2026-01-28T17:08:05.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/77/receipts", parameters={}
2026-01-28T17:08:05.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:05.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/77/receipts
2026-01-28T17:08:05.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 77, userId: 2
2026-01-28T17:08:05.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/77/receipts
2026-01-28T17:08:05.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7661cb4a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/77/receipts
2026-01-28T17:08:05.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147921065 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:05.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/77/receipts", parameters={}
2026-01-28T17:08:05.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:05.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:05.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 77, userId: 2
2026-01-28T17:08:05.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7847cb0f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.240+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:05.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7661cb4a]
2026-01-28T17:08:05.242+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141850241 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:05.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:05.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739a9239] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198786203 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:05.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:05.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:05.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7847cb0f]
2026-01-28T17:08:05.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:05.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739a9239]
2026-01-28T17:08:05.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f275987] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.257+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@167701727 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:05.262+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67134cfc] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:05.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086263677 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:05.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:05.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:05.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:05.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f275987]
2026-01-28T17:08:05.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bf25bd] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:05.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134668172 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:05.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67134cfc]
2026-01-28T17:08:05.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:05.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7544524f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:05.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@147686583 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:05.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:05.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:05.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bf25bd]
2026-01-28T17:08:05.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@633d97e1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:05.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@744539382 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:05.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7544524f]
2026-01-28T17:08:05.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:05.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3405f65f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:05.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669602490 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:05.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:05.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 119(Long), 1(Long)
2026-01-28T17:08:05.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:05.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@633d97e1]
2026-01-28T17:08:05.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:05.290+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:05.290+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3405f65f]
2026-01-28T17:08:05.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666972e1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:05.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:05.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1768186706 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:05.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:05.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:05.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 119(Long), 1(Long)
2026-01-28T17:08:05.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:05.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:05.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666972e1]
2026-01-28T17:08:05.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:05.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:05.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:06.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/77?userId=2
2026-01-28T17:08:06.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/77?userId=2
2026-01-28T17:08:06.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/77
2026-01-28T17:08:06.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/77?userId=2
2026-01-28T17:08:06.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/77?userId=2", parameters={masked}
2026-01-28T17:08:06.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:08:06.402+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 77, userId: 2
2026-01-28T17:08:06.412+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:06.412+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1848365612 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:08:06.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:06.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:06.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:06.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1] from current transaction
2026-01-28T17:08:06.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:06.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:06.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:06.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1] from current transaction
2026-01-28T17:08:06.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1] from current transaction
2026-01-28T17:08:06.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1] from current transaction
2026-01-28T17:08:06.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:06.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 77(Long), 1(Long)
2026-01-28T17:08:06.446+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:08:06.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.448+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 77, userId: 2
2026-01-28T17:08:06.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2134d0e1]
2026-01-28T17:08:06.470+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 77
2026-01-28T17:08:06.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:06.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:08:06.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:07.291+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:07.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:07.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:07.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:07.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:07.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:07.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:07.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:07.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:07.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:07.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:07.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:07.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:07.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:07.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:07.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:07.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:07.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:07.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:07.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:07.356+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:07.356+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:07.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:07.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:07.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:07.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:07.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:07.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:07.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:07.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:07.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:07.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:07.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:07.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:07.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:07.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:07.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:07.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ef147d5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.373+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9f7f46] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5158fb16] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2089bc6f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1ea2bf] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419812b4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897136907 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260158660 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:07.390+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428009799 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.390+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085820563 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453046652 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:07.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501146687 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:07.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ef147d5]
2026-01-28T17:08:07.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:07.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:07.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:07.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96dabe1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5158fb16]
2026-01-28T17:08:07.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9f7f46]
2026-01-28T17:08:07.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2089bc6f]
2026-01-28T17:08:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100315435 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.423+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.423+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.423+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1ea2bf]
2026-01-28T17:08:07.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419812b4]
2026-01-28T17:08:07.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a0c748] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b6d924b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b60ff4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897829997 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@455736924 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:07.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b56b5b6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420d4fe] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821237591 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.441+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643015458 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:07.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912284102 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:07.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.440+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96dabe1]
2026-01-28T17:08:07.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.446+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.446+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.451+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.451+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34240565] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b6d924b]
2026-01-28T17:08:07.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b60ff4]
2026-01-28T17:08:07.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a0c748]
2026-01-28T17:08:07.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358074531 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:07.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420d4fe]
2026-01-28T17:08:07.457+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:07.457+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b56b5b6]
2026-01-28T17:08:07.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:07.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a23a300] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:07.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461941643 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c67ed6f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:07.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f1a37f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:07.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:07.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319264057 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:07.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:07.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1017405330 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:07.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:07.492+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:08:07.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:07.488+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:07.489+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:07.490+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:07.493+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34240565]
2026-01-28T17:08:07.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:07.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:07.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:07.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:07.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:07.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:07.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:07.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a23a300]
2026-01-28T17:08:07.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ef98b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:07.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:07.507+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:08:07.509+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f1a37f]
2026-01-28T17:08:07.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458872994 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.507+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c67ed6f]
2026-01-28T17:08:07.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@752df981] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25093efb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87a447e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adc2166] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982447430 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:07.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@310751993 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980278127 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:07.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e70bf9f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437178137 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573858219 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:07.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ef98b7]
2026-01-28T17:08:07.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:07.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:07.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87a447e]
2026-01-28T17:08:07.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25093efb]
2026-01-28T17:08:07.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@752df981]
2026-01-28T17:08:07.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2361f5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adc2166]
2026-01-28T17:08:07.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.540+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.543+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e70bf9f]
2026-01-28T17:08:07.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834103942 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71cc4924] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.548+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:07.548+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd5d848] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.548+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.548+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:07.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68efc4bf] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726645463 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:07.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@917425570 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:07.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:07.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:07.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1133711317 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.561+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:07.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:07.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:07.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:07.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:07.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:07.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:07.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:08:07.595+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2361f5]
2026-01-28T17:08:07.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d32dc92] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:08:07.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639529573 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a70b74c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71cc4924]
2026-01-28T17:08:07.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd5d848]
2026-01-28T17:08:07.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68efc4bf]
2026-01-28T17:08:07.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:07.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118668094 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:07.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:07.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:07.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:07.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699078cf] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:07.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:07.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2135720830 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d32dc92]
2026-01-28T17:08:07.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:07.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:07.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d731fa] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@254459838 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:07.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:08:07.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a70b74c]
2026-01-28T17:08:07.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f128030] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891081801 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:08:07.635+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699078cf]
2026-01-28T17:08:07.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27adc9ca] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.640+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1292999664 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d731fa]
2026-01-28T17:08:07.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:07.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f128030]
2026-01-28T17:08:07.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37295ec3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27adc9ca]
2026-01-28T17:08:07.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018252054 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24629f9f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:07.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841881408 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:07.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:07.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 71(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:07.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:08:07.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37295ec3]
2026-01-28T17:08:07.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:08:07.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24629f9f]
2026-01-28T17:08:07.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce8e328] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.694+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:07.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290092848 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:07.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17130d9b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:07.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.698+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@666760833 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:07.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:07.704+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:07.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce8e328]
2026-01-28T17:08:07.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:07.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17130d9b]
2026-01-28T17:08:07.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:07.721+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:07.725+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:07.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:07.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:08.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:08.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71
2026-01-28T17:08:08.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:08.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71
2026-01-28T17:08:08.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:08.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:08.792+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/71
2026-01-28T17:08:08.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:08.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/71
2026-01-28T17:08:08.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:08.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:08.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/71
2026-01-28T17:08:08.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:08.810+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:08.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/71
2026-01-28T17:08:08.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:08.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/71
2026-01-28T17:08:08.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:08.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:08.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/71
2026-01-28T17:08:08.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:08.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/71", parameters={}
2026-01-28T17:08:08.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:08.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:08.818+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:08.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/71", parameters={}
2026-01-28T17:08:08.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:08.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:08.818+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:08.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27cb600f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:08.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1163142e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.822+09:00  INFO 11120 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:08.822+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:08.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7c53a6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013808409 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:08.835+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1645348341 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:08.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1223348827 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:08.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59134ba1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18cff6c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:08.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:08.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:08.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:08.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@509307363 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:08.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610529289 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:08.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:08.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:08.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:08.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:08.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27cb600f]
2026-01-28T17:08:08.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:08.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1163142e]
2026-01-28T17:08:08.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:08.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:08.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7c53a6]
2026-01-28T17:08:08.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.856+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c902c99] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d659de4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@609250288 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:08.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a1db6f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:08.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218661853 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:08.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:08.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600605543 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:08.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:08.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:08.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:08.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:08.872+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.873+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59134ba1]
2026-01-28T17:08:08.873+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18cff6c6]
2026-01-28T17:08:08.882+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:08.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:08.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:08.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:08.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:08.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:08.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:08.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c902c99]
2026-01-28T17:08:08.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d659de4]
2026-01-28T17:08:08.891+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:08.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:08.891+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:08.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a1db6f]
2026-01-28T17:08:08.905+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:08.920+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:08.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:08.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:08.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:08.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:08.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713331096 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will be managed by Spring
2026-01-28T17:08:08.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869952147 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:08:08.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:08.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:08.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:08.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:08.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:08.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:08.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:08.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:08.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c] from current transaction
2026-01-28T17:08:08.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144] from current transaction
2026-01-28T17:08:08.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:08.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:08.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:08.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:08.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:08.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:08.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c] from current transaction
2026-01-28T17:08:08.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144] from current transaction
2026-01-28T17:08:08.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:08.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:08.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:08.957+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:08.957+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:08.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:08.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:08.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144] from current transaction
2026-01-28T17:08:08.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c] from current transaction
2026-01-28T17:08:08.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:08.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:08.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 115(Long), 1(Long)
2026-01-28T17:08:08.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 115(Long), 1(Long)
2026-01-28T17:08:08.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:08.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:09.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:09.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:09.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:09.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:09.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:09.006+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:09.006+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3200c15c]
2026-01-28T17:08:09.006+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fb9144]
2026-01-28T17:08:09.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8be192] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a240c56] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329503390 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550307494 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:09.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:09.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:09.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:09.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:09.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8be192]
2026-01-28T17:08:09.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a240c56]
2026-01-28T17:08:09.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73cec5ea] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5645ed] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1382559088 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357218029 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:09.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:09.096+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:09.098+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:09.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:09.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73cec5ea]
2026-01-28T17:08:09.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5645ed]
2026-01-28T17:08:09.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761de7a7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e84ddd] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1937345819 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241960800 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:09.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:09.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:09.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:09.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:09.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:09.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:09.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761de7a7]
2026-01-28T17:08:09.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e84ddd]
2026-01-28T17:08:09.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:09.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:09.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=71, drafterId=2, r (truncated)...]
2026-01-28T17:08:09.140+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=71, drafterId=2, r (truncated)...]
2026-01-28T17:08:09.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:09.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:09.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71/receipts
2026-01-28T17:08:09.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71/receipts
2026-01-28T17:08:09.206+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/71/receipts
2026-01-28T17:08:09.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/71/receipts
2026-01-28T17:08:09.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/71/receipts
2026-01-28T17:08:09.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/71/receipts
2026-01-28T17:08:09.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/71/receipts
2026-01-28T17:08:09.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/71/receipts
2026-01-28T17:08:09.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/71/receipts", parameters={}
2026-01-28T17:08:09.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/71/receipts", parameters={}
2026-01-28T17:08:09.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:09.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:09.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 71, userId: 2
2026-01-28T17:08:09.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 71, userId: 2
2026-01-28T17:08:09.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d00948] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6382c817] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@261147770 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:09.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2062016876 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:09.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:09.261+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:09.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6382c817]
2026-01-28T17:08:09.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c8dd2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963667378 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:09.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:09.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d00948]
2026-01-28T17:08:09.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adbd8b6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357800359 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:09.290+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:09.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:09.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c8dd2]
2026-01-28T17:08:09.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2139b90d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158673125 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:09.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:09.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:09.306+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adbd8b6]
2026-01-28T17:08:09.309+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f83b4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662037763 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:09.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:09.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:09.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2139b90d]
2026-01-28T17:08:09.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:09.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b255a70] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000189896 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:09.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:09.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f83b4]
2026-01-28T17:08:09.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29287031] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451558019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:09.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:09.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:09.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b255a70]
2026-01-28T17:08:09.323+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:09.323+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d958891] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012049289 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:09.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:09.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:09.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29287031]
2026-01-28T17:08:09.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 115(Long), 1(Long)
2026-01-28T17:08:09.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:09.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66fda60a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:09.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@205454108 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:09.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:09.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:09.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 115(Long), 1(Long)
2026-01-28T17:08:09.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d958891]
2026-01-28T17:08:09.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:09.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:09.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:09.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:09.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66fda60a]
2026-01-28T17:08:09.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:09.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:09.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:10.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71?userId=2
2026-01-28T17:08:10.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/71?userId=2
2026-01-28T17:08:10.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/71
2026-01-28T17:08:10.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/71?userId=2
2026-01-28T17:08:10.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/71?userId=2", parameters={masked}
2026-01-28T17:08:10.440+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:08:10.448+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 71, userId: 2
2026-01-28T17:08:10.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:10.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283292237 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will be managed by Spring
2026-01-28T17:08:10.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:10.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:10.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:10.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed] from current transaction
2026-01-28T17:08:10.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:10.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:10.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:10.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed] from current transaction
2026-01-28T17:08:10.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed] from current transaction
2026-01-28T17:08:10.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.488+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed] from current transaction
2026-01-28T17:08:10.488+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:10.488+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 71(Long), 1(Long)
2026-01-28T17:08:10.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:08:10.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.499+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 71, userId: 2
2026-01-28T17:08:10.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636a4ed]
2026-01-28T17:08:10.520+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 71
2026-01-28T17:08:10.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:10.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:08:10.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:11.475+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:11.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:11.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:11.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:11.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:11.488+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:11.493+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:11.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:11.494+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:11.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:11.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:11.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:11.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:11.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:11.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:11.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:11.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:11.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:11.522+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:11.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8970e0] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a88dc8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:11.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:11.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:11.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:11.564+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:11.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:11.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:11.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864490969 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:11.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:11.572+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:11.572+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:11.573+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291faa33] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:11.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@418180707 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:11.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:11.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:11.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:11.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1497660832 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:11.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.590+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:11.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:11.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8970e0]
2026-01-28T17:08:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45cb4f82] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:11.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508b3d96] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:11.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53145be5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a88dc8]
2026-01-28T17:08:11.606+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667037075 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:11.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:11.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2088081800 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:11.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291faa33]
2026-01-28T17:08:11.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143e7b55] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242676074 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:11.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f213672] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075280688 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:11.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75ff20d6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@479800718 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:11.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53145be5]
2026-01-28T17:08:11.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460305505 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:11.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:11.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:11.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45cb4f82]
2026-01-28T17:08:11.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a282521] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508b3d96]
2026-01-28T17:08:11.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454197490 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:11.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d9eba7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:11.689+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c0c451] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471888383 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:11.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f213672]
2026-01-28T17:08:11.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:11.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044626948 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:11.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.704+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:11.704+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.705+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.705+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.711+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75ff20d6]
2026-01-28T17:08:11.712+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:11.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143e7b55]
2026-01-28T17:08:11.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:11.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:11.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ee0969] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:11.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:08:11.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:11.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:11.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@807582599 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:11.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a282521]
2026-01-28T17:08:11.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:11.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:11.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:11.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:11.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7704fde] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.774+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752509756 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:11.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c0c451]
2026-01-28T17:08:11.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f445f46] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d9eba7]
2026-01-28T17:08:11.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411617654 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:11.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:11.792+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:11.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7ea9ef] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:11.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082330141 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:11.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:11.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:11.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:11.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:11.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:11.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ee0969]
2026-01-28T17:08:11.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:11.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:11.823+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:11.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:11.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:11.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b71385e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:11.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7704fde]
2026-01-28T17:08:11.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.842+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@466931480 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:11.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:11.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:11.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:11.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37317907] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b17d00] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:11.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7ea9ef]
2026-01-28T17:08:11.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f445f46]
2026-01-28T17:08:11.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:11.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@851107456 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:11.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277382776 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:11.872+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:11.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36fed788] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.889+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:11.889+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed51bfb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.895+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@727515262 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:11.897+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7226075a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.898+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:11.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146021407 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:11.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.938+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1707851986 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:11.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:08:11.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.939+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:11.940+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b71385e]
2026-01-28T17:08:11.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:11.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:11.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd20b62] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:11.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500739982 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:11.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:11.971+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:11.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:11.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 29
2026-01-28T17:08:12.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b17d00]
2026-01-28T17:08:12.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37317907]
2026-01-28T17:08:12.023+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.024+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364d2398] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfc10d6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@873861420 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:12.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1362732335 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:12.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:12.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:12.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:12.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd20b62]
2026-01-28T17:08:12.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed51bfb]
2026-01-28T17:08:12.040+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36fed788]
2026-01-28T17:08:12.040+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7226075a]
2026-01-28T17:08:12.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2725c8dc] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.050+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:12.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:12.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:12.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2088197697 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:12.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:12.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:12.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cdf653] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:12.073+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169026759 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:12.073+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:12.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:12.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 29
2026-01-28T17:08:12.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:08:12.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364d2398]
2026-01-28T17:08:12.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2725c8dc]
2026-01-28T17:08:12.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfc10d6]
2026-01-28T17:08:12.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b8dfeb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c17f657] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cdf653]
2026-01-28T17:08:12.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c2f3454] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1983277223 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:12.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165866017 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:12.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:12.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104738215 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:12.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:12.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:12.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:12.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:12.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:12.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:12.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:12.273+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:08:12.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b8dfeb]
2026-01-28T17:08:12.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c17f657]
2026-01-28T17:08:12.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dafd183] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@839322202 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:12.290+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.290+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a676811] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@422678084 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:12.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.308+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c2f3454]
2026-01-28T17:08:12.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7111cf1d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dafd183]
2026-01-28T17:08:12.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a676811]
2026-01-28T17:08:12.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1143589119 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:12.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:12.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:12.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:12.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41779ee9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:12.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:12.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@268517686 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:12.393+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:12.393+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 29
2026-01-28T17:08:12.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 75(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:12.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7111cf1d]
2026-01-28T17:08:12.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.409+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e71f767] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097313939 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:12.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 29
2026-01-28T17:08:12.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41779ee9]
2026-01-28T17:08:12.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:12.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be3018c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:12.443+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713259727 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:12.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:12.446+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:12.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e71f767]
2026-01-28T17:08:12.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:12.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:12.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:12.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:12.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be3018c]
2026-01-28T17:08:12.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:12.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:12.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:14.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:14.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:14.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75
2026-01-28T17:08:14.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75
2026-01-28T17:08:14.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:14.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:14.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:14.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-28T17:08:14.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:14.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:14.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-28T17:08:14.971+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:14.971+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/75
2026-01-28T17:08:14.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/75
2026-01-28T17:08:14.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-28T17:08:14.972+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:14.972+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:14.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-28T17:08:14.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:14.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-28T17:08:14.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:14.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:14.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-28T17:08:14.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:14.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:14.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:14.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:14.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:14.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:14.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:14.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:14.988+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:14.989+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:14.992+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:14.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0891f8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:14.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a2ee37] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:14.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:14.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401c44f5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:14.999+09:00  INFO 11120 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:15.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f94a3f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.011+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5355cbab] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@387758026 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:15.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002278326 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616282595 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:15.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312126603 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277308962 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:15.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:15.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:15.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:15.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:15.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:15.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:15.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:15.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:15.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:15.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:15.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:15.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5355cbab]
2026-01-28T17:08:15.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a2ee37]
2026-01-28T17:08:15.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:15.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0891f8]
2026-01-28T17:08:15.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:15.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:15.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401c44f5]
2026-01-28T17:08:15.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f94a3f]
2026-01-28T17:08:15.040+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:15.045+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b1158e3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1153e9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646876257 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38aad305] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720192589 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:15.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:15.056+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:15.056+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693509609 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:15.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:15.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:15.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:15.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:15.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b1158e3]
2026-01-28T17:08:15.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:15.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:15.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38aad305]
2026-01-28T17:08:15.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1153e9]
2026-01-28T17:08:15.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:15.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:15.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217234806 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:08:15.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250560014 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will be managed by Spring
2026-01-28T17:08:15.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:15.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:15.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:15.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:15.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:08:15.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:08:15.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d] from current transaction
2026-01-28T17:08:15.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:15.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e] from current transaction
2026-01-28T17:08:15.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:15.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:15.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:15.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d] from current transaction
2026-01-28T17:08:15.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e] from current transaction
2026-01-28T17:08:15.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:15.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:15.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:15.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:15.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d] from current transaction
2026-01-28T17:08:15.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e] from current transaction
2026-01-28T17:08:15.189+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:15.189+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:15.190+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 117(Long), 1(Long)
2026-01-28T17:08:15.195+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 117(Long), 1(Long)
2026-01-28T17:08:15.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:15.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:15.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f8a6d]
2026-01-28T17:08:15.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.206+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdbeb0e]
2026-01-28T17:08:15.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de1e916] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805763077 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30229ed2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:15.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1604756128 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:15.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:15.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:15.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:15.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de1e916]
2026-01-28T17:08:15.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30229ed2]
2026-01-28T17:08:15.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f48805] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f6dd37a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132086004 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260192843 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:15.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:15.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:15.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:15.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:15.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f48805]
2026-01-28T17:08:15.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f6dd37a]
2026-01-28T17:08:15.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575b7f4f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acd52ae] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.241+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725267086 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:15.240+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1984852225 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:15.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:15.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:15.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:15.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:15.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:15.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acd52ae]
2026-01-28T17:08:15.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575b7f4f]
2026-01-28T17:08:15.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=2, r (truncated)...]
2026-01-28T17:08:15.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=2, r (truncated)...]
2026-01-28T17:08:15.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:15.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:15.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75/receipts
2026-01-28T17:08:15.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75/receipts
2026-01-28T17:08:15.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75/receipts
2026-01-28T17:08:15.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75/receipts
2026-01-28T17:08:15.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/75/receipts
2026-01-28T17:08:15.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/75/receipts
2026-01-28T17:08:15.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75/receipts
2026-01-28T17:08:15.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75/receipts
2026-01-28T17:08:15.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75/receipts", parameters={}
2026-01-28T17:08:15.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75/receipts", parameters={}
2026-01-28T17:08:15.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:15.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:15.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 75, userId: 2
2026-01-28T17:08:15.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 75, userId: 2
2026-01-28T17:08:15.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5257389c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a155d1d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76744194 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1717582105 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:15.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:15.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:15.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:15.306+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a155d1d]
2026-01-28T17:08:15.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5257389c]
2026-01-28T17:08:15.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a0c2b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783832b1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113019598 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322987762 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:15.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:15.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:15.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:15.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a0c2b]
2026-01-28T17:08:15.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783832b1]
2026-01-28T17:08:15.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8e6d2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.340+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41490349] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@628205400 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818633039 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:15.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:15.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:15.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:15.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:15.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:15.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41490349]
2026-01-28T17:08:15.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8e6d2]
2026-01-28T17:08:15.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.355+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2916f03b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.355+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382e3bba] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.356+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541916443 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.357+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@134267931 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.360+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:15.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:15.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:15.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:15.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:15.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2916f03b]
2026-01-28T17:08:15.373+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382e3bba]
2026-01-28T17:08:15.375+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:15.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34276aec] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e35a3b2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:15.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716096379 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:15.380+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997515813 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:15.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:15.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:15.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 117(Long), 1(Long)
2026-01-28T17:08:15.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 117(Long), 1(Long)
2026-01-28T17:08:15.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:15.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:15.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e35a3b2]
2026-01-28T17:08:15.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34276aec]
2026-01-28T17:08:15.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:15.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:15.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:15.389+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:15.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:17.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75?userId=2
2026-01-28T17:08:17.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/75?userId=2
2026-01-28T17:08:17.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/75
2026-01-28T17:08:17.260+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/75?userId=2
2026-01-28T17:08:17.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/75?userId=2", parameters={masked}
2026-01-28T17:08:17.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:08:17.265+09:00  INFO 11120 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 75, userId: 2
2026-01-28T17:08:17.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:17.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200693330 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will be managed by Spring
2026-01-28T17:08:17.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:17.273+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:17.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:17.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb] from current transaction
2026-01-28T17:08:17.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:17.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:17.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:17.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb] from current transaction
2026-01-28T17:08:17.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb] from current transaction
2026-01-28T17:08:17.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb] from current transaction
2026-01-28T17:08:17.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:17.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 75(Long), 1(Long)
2026-01-28T17:08:17.305+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:08:17.305+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.306+09:00  INFO 11120 --- [http-nio-8080-exec-9] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 75, userId: 2
2026-01-28T17:08:17.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2529fb]
2026-01-28T17:08:17.334+09:00  INFO 11120 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 75
2026-01-28T17:08:17.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:17.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:08:17.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:18.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:18.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:18.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:18.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:18.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:08:18.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:08:18.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:18.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:18.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:18.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:18.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:18.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:18.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:08:18.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:08:18.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:18.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:18.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:18.206+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:18.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:08:18.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:08:18.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:18.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:18.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:18.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:18.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:08:18.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:08:18.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:18.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:18.239+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:18.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:18.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:08:18.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:08:18.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:18.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:18.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:18.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bc556a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:18.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:08:18.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:08:18.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19551ffc] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69dafd45] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@633205914 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9022c8c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dfe070] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a267401] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271620921 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:18.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254349445 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:18.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@927605343 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:18.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1507100287 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1594365504 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:18.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.305+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.306+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:18.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bc556a]
2026-01-28T17:08:18.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19551ffc]
2026-01-28T17:08:18.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:18.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69dafd45]
2026-01-28T17:08:18.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:08:18.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2495df6a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dfe070]
2026-01-28T17:08:18.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@910538515 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c2a2daf] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:18.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a267401]
2026-01-28T17:08:18.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@963960812 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:18.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9022c8c]
2026-01-28T17:08:18.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e27d95d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4181b02d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@479217827 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:18.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f0868d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131870505 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@118b2a82] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143150626 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:18.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179526852 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:18.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2495df6a]
2026-01-28T17:08:18.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c2a2daf]
2026-01-28T17:08:18.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c481a63] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:18.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722607119 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4181b02d]
2026-01-28T17:08:18.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:18.356+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e27d95d]
2026-01-28T17:08:18.373+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f0868d]
2026-01-28T17:08:18.362+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@118b2a82]
2026-01-28T17:08:18.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:18.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:18.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e41209] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160364761 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:18.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60cfaf41] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:18.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e018b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:18.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:18.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738421677 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:18.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:18.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@31930989 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:18.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:18.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:08:18.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:18.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:18.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:18.409+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:18.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c481a63]
2026-01-28T17:08:18.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:18.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:08:18.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:18.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:18.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f7e68e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:18.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a69d12] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:18.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432040273 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e41209]
2026-01-28T17:08:18.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741630503 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:18.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:18.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.440+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.440+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.440+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:08:18.443+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:08:18.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4739bf6a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f412726] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.451+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e018b]
2026-01-28T17:08:18.451+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60cfaf41]
2026-01-28T17:08:18.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34118110 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:18.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122759277 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:18.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339ae9e9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb8da2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329890376 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:18.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@412323827 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:18.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f7e68e]
2026-01-28T17:08:18.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a69d12]
2026-01-28T17:08:18.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:18.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4739bf6a]
2026-01-28T17:08:18.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339ae9e9]
2026-01-28T17:08:18.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f412726]
2026-01-28T17:08:18.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb8da2]
2026-01-28T17:08:18.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fcee1d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296e8838] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:18.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@342c51cd] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1043709338 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159436298 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:18.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:08:18.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16672124] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.488+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839402103 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:18.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:18.494+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:18.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.506+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887001817 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:18.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:18.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:18.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:18.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:08:18.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:18.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296e8838]
2026-01-28T17:08:18.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@342c51cd]
2026-01-28T17:08:18.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.542+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10423ef8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:18.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.543+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177990916 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:18.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:18.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:18.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:18.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa7929c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.561+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705721434 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:18.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:18.564+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:08:18.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:18.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fcee1d]
2026-01-28T17:08:18.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.578+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:08:18.580+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@574c6728] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16672124]
2026-01-28T17:08:18.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:18.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10423ef8]
2026-01-28T17:08:18.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68417498 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa7929c]
2026-01-28T17:08:18.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:08:18.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:18.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af9594] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:08:18.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72c6e1f1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.589+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77319719 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095151175 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:18.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:08:18.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@574c6728]
2026-01-28T17:08:18.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d79ca19] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699960249 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72c6e1f1]
2026-01-28T17:08:18.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af9594]
2026-01-28T17:08:18.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.635+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.635+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.635+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:18.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a105119] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602565882 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.661+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:18.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:18.663+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d79ca19]
2026-01-28T17:08:18.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f976db6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:08:18.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a105119]
2026-01-28T17:08:18.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022188383 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.679+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.679+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:08:18.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3844dba5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:08:18.681+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610927405 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:18.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:08:18.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f976db6]
2026-01-28T17:08:18.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:18.691+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138ad1eb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:18.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1193600241 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:18.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:18.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:18.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3844dba5]
2026-01-28T17:08:18.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:18.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:18.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138ad1eb]
2026-01-28T17:08:18.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:18.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:18.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:08:18.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:22.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:22.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:08:22.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:08:22.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:08:22.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:08:22.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:08:22.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:22.243+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:08:22.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:08:22.258+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:22.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:08:22.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:08:22.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:08:22.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:08:22.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:22.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:08:22.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:08:22.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:08:22.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:08:22.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:08:22.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:22.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:08:22.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:08:22.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:22.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:08:22.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:08:22.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:22.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:22.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:08:22.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:08:22.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:08:22.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4754e686] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:22.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:22.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:22.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:22.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:08:22.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:22.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:22.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:22.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:22.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:22.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464f7e41] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:22.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:22.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358212812 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:22.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:22.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:22.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cda8db2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:22.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2bcee6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:22.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:22.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38165351] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:22.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:22.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@956674511 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:22.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1301710666 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:22.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:08:22.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:08:22.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:08:22.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644658680 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:22.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867504891 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:22.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:22.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:22.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:08:22.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:08:22.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4754e686]
2026-01-28T17:08:22.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:22.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d56539] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:22.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:22.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:08:22.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1335193206 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:22.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:22.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:22.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:08:22.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464f7e41]
2026-01-28T17:08:22.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:22.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:08:22.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:08:22.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:08:22.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:08:22.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38165351]
2026-01-28T17:08:22.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:22.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cda8db2]
2026-01-28T17:08:22.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2bcee6]
2026-01-28T17:08:22.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:22.474+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d56539]
2026-01-28T17:08:22.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:22.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:22.473+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:22.475+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:22.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:08:22.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:08:22.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:08:22.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:22.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:22.506+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:22.509+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:22.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:24.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:08:24.428+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:08:24.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:08:24.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:08:24.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:08:24.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:08:24.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:08:24.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:08:24.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:08:24.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:08:24.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:08:24.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:08:24.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:08:24.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:08:24.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:24.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:24.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189aadae] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:24.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743ff27d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:24.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:08:24.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:08:24.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:08:24.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:08:24.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:08:24.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:08:24.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:08:24.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@769518832 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:24.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388397052 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:24.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:08:24.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:08:24.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:08:24.506+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:08:24.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:08:24.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:24.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:08:24.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:08:24.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:24.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aeae79e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:24.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c1c55e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:24.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902102225 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:24.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1047359470 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:24.531+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:08:24.531+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:08:24.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:08:24.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743ff27d]
2026-01-28T17:08:24.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:08:24.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:08:24.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:08:24.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:24.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189aadae]
2026-01-28T17:08:24.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:24.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:08:24.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:08:24.539+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:08:24.541+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:08:24.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c1c55e]
2026-01-28T17:08:24.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aeae79e]
2026-01-28T17:08:24.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:24.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:24.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:08:24.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:24.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:24.557+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:24.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:08:24.576+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:31.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/draft
2026-01-28T17:08:31.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/draft
2026-01-28T17:08:31.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/draft
2026-01-28T17:08:31.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/draft
2026-01-28T17:08:31.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/draft", parameters={}
2026-01-28T17:08:31.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpenseDraft(ExpenseReportDto)
2026-01-28T17:08:31.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-28, title=null, totalAmount=1 (truncated)...]
2026-01-28T17:08:31.130+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 지출결의서 임시 저장 요청 - drafterId: 2, currentUserId: 2
2026-01-28T17:08:31.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:31.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2061355469 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will be managed by Spring
2026-01-28T17:08:31.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:31.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:31.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:31.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6] from current transaction
2026-01-28T17:08:31.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:08:31.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 2(Long), 2026-01-28(LocalDate), 지출결의서 (임시저장) - 2026-01-28(String), 10000(Long), DRAFT(String), null, null, 1(Long)
2026-01-28T17:08:31.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-28T17:08:31.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.backend.service.ExpenseService       : 임시 저장 - 상세 항목 저장 시작 - 항목 수: 1
2026-01-28T17:08:31.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6] from current transaction
2026-01-28T17:08:31.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:08:31.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 79(Long), (String), 상호명1(String), 임시저장테스트(String), 10000(Long), null, (String), 2026-01-28(LocalDate), (String), null, (String), 1(Long)
2026-01-28T17:08:31.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-28T17:08:31.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.backend.service.ExpenseService       : 임시 저장 - 상세 항목 저장 완료
2026-01-28T17:08:31.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.backend.service.ExpenseService       : 임시 저장 - 결재 라인은 저장하지 않습니다.
2026-01-28T17:08:31.211+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.backend.service.ExpenseService       : 지출결의서 임시 저장 완료 - expenseReportId: 79
2026-01-28T17:08:31.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a2c02d6]
2026-01-28T17:08:31.222+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 지출결의서 임시 저장 완료 - expenseReportId: 79
2026-01-28T17:08:31.223+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:31.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=임시 저장 성공, data=79)]
2026-01-28T17:08:31.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:32.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79
2026-01-28T17:08:32.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:32.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79
2026-01-28T17:08:32.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:32.407+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:32.410+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79
2026-01-28T17:08:32.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:32.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79
2026-01-28T17:08:32.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:08:32.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:32.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:32.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79
2026-01-28T17:08:32.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:32.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:08:32.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:32.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79", parameters={}
2026-01-28T17:08:32.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:32.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:32.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79
2026-01-28T17:08:32.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:32.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:32.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79", parameters={}
2026-01-28T17:08:32.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:32.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d52dd0b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.442+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:32.443+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f8b64e5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.443+09:00  INFO 11120 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:32.444+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f56bb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad00ae2] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:32.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350517912 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:32.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352327705 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:32.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1444125562 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520613122 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:32.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:32.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:32.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:32.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:32.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:32.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:32.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:32.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:32.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:32.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:32.489+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:32.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df38364] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:32.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:32.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:32.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:32.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f56bb]
2026-01-28T17:08:32.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d52dd0b]
2026-01-28T17:08:32.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f8b64e5]
2026-01-28T17:08:32.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad00ae2]
2026-01-28T17:08:32.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418557465 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:32.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.510+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:32.510+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399d8666] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c16a5a9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@465f87db] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:32.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:32.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453177113 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:32.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618413771 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:32.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097026312 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:32.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:32.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:32.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.528+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:32.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:32.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df38364]
2026-01-28T17:08:32.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:32.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399d8666]
2026-01-28T17:08:32.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:32.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:32.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:32.561+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@465f87db]
2026-01-28T17:08:32.562+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c16a5a9]
2026-01-28T17:08:32.562+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:32.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357458453 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:32.578+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:32.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:32.580+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2132005702 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:08:32.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:32.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:08:32.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:32.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54] from current transaction
2026-01-28T17:08:32.591+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:32.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:08:32.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.595+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1] from current transaction
2026-01-28T17:08:32.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:32.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:32.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54] from current transaction
2026-01-28T17:08:32.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:32.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:32.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1] from current transaction
2026-01-28T17:08:32.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:32.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:32.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54] from current transaction
2026-01-28T17:08:32.613+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:32.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:32.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:32.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1] from current transaction
2026-01-28T17:08:32.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:32.628+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:32.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:32.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:32.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc33d54]
2026-01-28T17:08:32.639+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e386bb1]
2026-01-28T17:08:32.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b5953e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.656+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539759796 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:32.656+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc0dcab] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.656+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:32.656+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305773244 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:32.660+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.661+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:32.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.663+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:32.664+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b5953e]
2026-01-28T17:08:32.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e695a0] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:32.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158461095 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:32.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc0dcab]
2026-01-28T17:08:32.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:32.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fbeab2c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110837236 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:32.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:32.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:32.671+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e695a0]
2026-01-28T17:08:32.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:32.672+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4c229e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.673+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fbeab2c]
2026-01-28T17:08:32.673+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@204602338 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:32.676+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:32.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f3a55d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:32.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569620292 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:32.678+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:32.678+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:32.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:32.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:32.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4c229e]
2026-01-28T17:08:32.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f3a55d]
2026-01-28T17:08:32.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=79, drafterId=2, r (truncated)...]
2026-01-28T17:08:32.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=79, drafterId=2, r (truncated)...]
2026-01-28T17:08:32.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79/receipts
2026-01-28T17:08:32.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79/receipts
2026-01-28T17:08:32.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79/receipts
2026-01-28T17:08:32.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79/receipts
2026-01-28T17:08:32.721+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79/receipts", parameters={}
2026-01-28T17:08:32.728+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:32.729+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79/receipts
2026-01-28T17:08:32.729+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 79, userId: 2
2026-01-28T17:08:32.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4828a8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@111296315 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:32.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79/receipts
2026-01-28T17:08:32.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79/receipts
2026-01-28T17:08:32.741+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79/receipts
2026-01-28T17:08:32.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79/receipts", parameters={}
2026-01-28T17:08:32.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:32.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:32.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 79, userId: 2
2026-01-28T17:08:32.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4828a8]
2026-01-28T17:08:32.748+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.748+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.748+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70893681] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3857aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660552653 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.751+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:32.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.755+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1019412501 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:32.756+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:32.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:32.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3857aa]
2026-01-28T17:08:32.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195185af] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375067688 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:32.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:32.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70893681]
2026-01-28T17:08:32.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:32.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.788+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35851e36] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.790+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627590001 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:32.792+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:32.793+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:32.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195185af]
2026-01-28T17:08:32.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a402d4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909301010 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:32.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:32.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35851e36]
2026-01-28T17:08:32.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4101579d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558746405 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:32.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:32.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:32.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a402d4]
2026-01-28T17:08:32.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:32.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.805+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513023f9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.807+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356919721 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:32.809+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:32.810+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:32.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:32.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4101579d]
2026-01-28T17:08:32.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43acce15] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148558914 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:32.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:32.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:32.822+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513023f9]
2026-01-28T17:08:32.826+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:32.827+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.828+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:32.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:32.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:32.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43acce15]
2026-01-28T17:08:32.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:32.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0edb8e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:32.839+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534553660 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:32.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:32.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:32.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:32.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0edb8e]
2026-01-28T17:08:32.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:32.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:32.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:34.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:34.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:08:34.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:08:34.007+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79
2026-01-28T17:08:34.009+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:08:34.010+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79
2026-01-28T17:08:34.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:08:34.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:34.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:08:34.050+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:08:34.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79
2026-01-28T17:08:34.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:34.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:08:34.058+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:08:34.060+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:08:34.061+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:34.062+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:08:34.063+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:08:34.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:08:34.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:08:34.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79
2026-01-28T17:08:34.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79", parameters={}
2026-01-28T17:08:34.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:34.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:34.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:08:34.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:08:34.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:08:34.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:08:34.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:08:34.076+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:34.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:08:34.079+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:08:34.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:34.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:08:34.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40eb84d3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:08:34.098+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:08:34.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:34.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:34.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:08:34.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e83090] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203626408 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:34.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:34.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:34.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:08:34.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:34.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:34.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c15258e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:34.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.106+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992007728 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:34.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9b14c1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:34.112+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:34.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688851714 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:34.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd0026b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:34.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:34.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:08:34.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40eb84d3]
2026-01-28T17:08:34.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181121044 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:34.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4634f20a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.123+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:34.126+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:08:34.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685322167 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:34.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:34.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1427108173 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:34.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc04971] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:08:34.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:08:34.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e83090]
2026-01-28T17:08:34.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:08:34.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:08:34.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:08:34.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1060391619 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:34.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:34.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c15258e]
2026-01-28T17:08:34.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:34.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a71fb3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:34.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126933579 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:34.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:08:34.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:08:34.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:34.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:08:34.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:08:34.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:34.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9b14c1]
2026-01-28T17:08:34.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:34.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd0026b]
2026-01-28T17:08:34.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4634f20a]
2026-01-28T17:08:34.195+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:34.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79
2026-01-28T17:08:34.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:34.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:34.209+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:34.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc04971]
2026-01-28T17:08:34.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:08:34.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:08:34.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:08:34.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:08:34.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:34.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:34.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:34.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79
2026-01-28T17:08:34.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:34.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79", parameters={}
2026-01-28T17:08:34.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a71fb3]
2026-01-28T17:08:34.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:34.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:34.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:34.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6dc4b1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:34.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.289+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941307431 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:34.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874142286 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will be managed by Spring
2026-01-28T17:08:34.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:34.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:34.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:34.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.309+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:34.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:08:34.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6dc4b1]
2026-01-28T17:08:34.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0] from current transaction
2026-01-28T17:08:34.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359ffc02] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:34.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132513356 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:34.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:34.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:34.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:34.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359ffc02]
2026-01-28T17:08:34.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0] from current transaction
2026-01-28T17:08:34.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:34.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1303052956 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:34.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:34.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:34.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:34.527+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0] from current transaction
2026-01-28T17:08:34.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:34.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:34.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:08:34.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.610+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6] from current transaction
2026-01-28T17:08:34.610+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:34.612+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:34.659+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d195da0]
2026-01-28T17:08:34.726+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:34.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6] from current transaction
2026-01-28T17:08:34.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:34.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.756+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.756+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:34.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97596b8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@621103818 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:34.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6] from current transaction
2026-01-28T17:08:34.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:34.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:34.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:34.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:34.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:34.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.777+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97596b8]
2026-01-28T17:08:34.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1d2faf] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2101f6]
2026-01-28T17:08:34.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224254690 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:34.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:34.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:34.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:34.804+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1d2faf]
2026-01-28T17:08:34.816+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:34.828+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee8f74c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37fb7c00] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:34.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713868649 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:34.832+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@439070401 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:34.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:34.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:34.875+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:34.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.107+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:35.141+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee8f74c]
2026-01-28T17:08:35.142+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:35.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:35.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37fb7c00]
2026-01-28T17:08:35.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=79, drafterId=2, r (truncated)...]
2026-01-28T17:08:35.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.209+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d4925d8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.208+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:35.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834554125 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:35.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:35.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79/receipts
2026-01-28T17:08:35.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:35.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79/receipts
2026-01-28T17:08:35.306+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d4925d8]
2026-01-28T17:08:35.310+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.310+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79/receipts
2026-01-28T17:08:35.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc9b02c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79/receipts
2026-01-28T17:08:35.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606040424 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:35.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79/receipts", parameters={}
2026-01-28T17:08:35.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:35.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:35.341+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:35.342+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 79, userId: 2
2026-01-28T17:08:35.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5900f52] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:35.358+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc9b02c]
2026-01-28T17:08:35.358+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:35.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576962935 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:35.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=79, drafterId=2, r (truncated)...]
2026-01-28T17:08:35.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:35.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:35.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:35.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5900f52]
2026-01-28T17:08:35.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79/receipts
2026-01-28T17:08:35.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b718d53] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151904116 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:35.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:35.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79/receipts
2026-01-28T17:08:35.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79/receipts
2026-01-28T17:08:35.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79/receipts
2026-01-28T17:08:35.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:35.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79/receipts", parameters={}
2026-01-28T17:08:35.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b718d53]
2026-01-28T17:08:35.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:35.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 79, userId: 2
2026-01-28T17:08:35.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ac5155] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584417830 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:35.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a215e06] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:35.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:35.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@508732982 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:35.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:35.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:35.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ac5155]
2026-01-28T17:08:35.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:35.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138a480e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a215e06]
2026-01-28T17:08:35.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750570451 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:35.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:35.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5801a2d3] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665085753 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:35.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:35.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:35.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138a480e]
2026-01-28T17:08:35.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b2325] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.406+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:35.408+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1118880116 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:35.409+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5801a2d3]
2026-01-28T17:08:35.410+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:35.410+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.411+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:35.411+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b1309b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.412+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643318244 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:35.412+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:35.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:35.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:35.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b2325]
2026-01-28T17:08:35.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:35.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:35.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:35.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b1309b]
2026-01-28T17:08:35.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:35.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd3c72] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@349561914 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:35.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:35.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:08:35.428+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:08:35.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd3c72]
2026-01-28T17:08:35.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:35.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f4e9c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:35.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420114470 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:35.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:35.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:08:35.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:35.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f4e9c6]
2026-01-28T17:08:35.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:35.443+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:35.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:38.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:08:38.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:08:38.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:08:38.722+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:08:38.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:08:38.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:08:38.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:08:38.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:08:38.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:08:38.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:08:38.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:08:38.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:08:38.748+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:08:38.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:08:38.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:08:38.747+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:08:38.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:08:38.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:08:38.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:08:38.751+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:38.751+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:08:38.751+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:08:38.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:38.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c68a9a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:38.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47bbb634] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:38.753+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:08:38.753+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:08:38.763+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:08:38.763+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:38.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:38.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5aae23] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:38.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d786e8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:38.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651201068 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:38.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1132303174 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:38.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@66661469 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:38.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207643141 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:38.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:08:38.774+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:08:38.777+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:08:38.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:08:38.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:08:38.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:08:38.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:08:38.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:08:38.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:08:38.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:08:38.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:08:38.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:08:38.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c68a9a]
2026-01-28T17:08:38.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5aae23]
2026-01-28T17:08:38.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47bbb634]
2026-01-28T17:08:38.788+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d786e8]
2026-01-28T17:08:38.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:38.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:38.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:38.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:38.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:08:38.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:08:38.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:08:38.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:08:38.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:38.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:38.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:38.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:42.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:08:42.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:08:42.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:08:42.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:08:42.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:08:42.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:08:42.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:08:42.262+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:08:42.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:08:42.277+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:08:42.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:08:42.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:08:42.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:08:42.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:08:42.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:08:42.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:08:42.305+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:08:42.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:08:42.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:08:42.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:08:42.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:08:42.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:42.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:08:42.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:08:42.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:42.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:08:42.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1bf036] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:42.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:42.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac94be5] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:42.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:42.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509dd247] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:42.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfedfba] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:42.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1629707681 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:42.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171902921 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:42.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1218117788 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:42.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:08:42.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:08:42.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:08:42.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:08:42.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566440191 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:42.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:08:42.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:08:42.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:08:42.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:08:42.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:08:42.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:08:42.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac94be5]
2026-01-28T17:08:42.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:08:42.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509dd247]
2026-01-28T17:08:42.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1bf036]
2026-01-28T17:08:42.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:42.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:42.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:42.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:08:42.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:08:42.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:08:42.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:08:42.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfedfba]
2026-01-28T17:08:42.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:42.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:42.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:42.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:42.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:08:42.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:48.492+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/draft
2026-01-28T17:08:48.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/draft
2026-01-28T17:08:48.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/draft
2026-01-28T17:08:48.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/draft
2026-01-28T17:08:48.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/draft", parameters={}
2026-01-28T17:08:48.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpenseDraft(ExpenseReportDto)
2026-01-28T17:08:48.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-28, title=null, totalAmount=2 (truncated)...]
2026-01-28T17:08:48.500+09:00  INFO 11120 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 임시 저장 요청 - drafterId: 2, currentUserId: 2
2026-01-28T17:08:48.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:48.506+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013150702 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:08:48.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:48.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:48.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:48.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5] from current transaction
2026-01-28T17:08:48.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:08:48.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 2(Long), 2026-01-28(LocalDate), 지출결의서 (임시저장) - 2026-01-28(String), 20000(Long), DRAFT(String), null, null, 1(Long)
2026-01-28T17:08:48.522+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-28T17:08:48.523+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.528+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 임시 저장 - 상세 항목 저장 시작 - 항목 수: 2
2026-01-28T17:08:48.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5] from current transaction
2026-01-28T17:08:48.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:08:48.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 80(Long), (String), 상호명1(String), 임시저장테스트(String), 10000(Long), null, (String), 2026-01-28(LocalDate), (String), null, (String), 1(Long)
2026-01-28T17:08:48.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-28T17:08:48.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5] from current transaction
2026-01-28T17:08:48.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:08:48.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 80(Long), (String), 상호명1(String), 임시저장테스트(String), 10000(Long), null, (String), 2026-01-28(LocalDate), (String), null, (String), 1(Long)
2026-01-28T17:08:48.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-28T17:08:48.540+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 임시 저장 - 상세 항목 저장 완료
2026-01-28T17:08:48.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 임시 저장 - 결재 라인은 저장하지 않습니다.
2026-01-28T17:08:48.553+09:00  INFO 11120 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 지출결의서 임시 저장 완료 - expenseReportId: 80
2026-01-28T17:08:48.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.555+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433ae8c5]
2026-01-28T17:08:48.569+09:00  INFO 11120 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 임시 저장 완료 - expenseReportId: 80
2026-01-28T17:08:48.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:48.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=임시 저장 성공, data=80)]
2026-01-28T17:08:48.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:49.421+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:08:49.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:49.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:49.427+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:08:49.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:49.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:08:49.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:49.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:08:49.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:49.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:49.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:08:49.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:08:49.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:49.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:49.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:49.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:08:49.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:08:49.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:49.543+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:49.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:49.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:08:49.557+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:49.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:08:49.550+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:49.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:49.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:49.564+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:49.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:49.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:49.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a2c8ce1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.567+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:49.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e746ee7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.568+09:00  INFO 11120 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:49.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8b4a52] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.582+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f37ac94] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.582+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f30816e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068209396 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462504443 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@25734164 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510614187 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1827493106 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:49.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:49.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:49.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:49.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:49.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:49.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:49.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:49.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a2c8ce1]
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2570fdf8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:49.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:49.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f30816e]
2026-01-28T17:08:49.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8b4a52]
2026-01-28T17:08:49.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773511171 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:49.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f37ac94]
2026-01-28T17:08:49.601+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e746ee7]
2026-01-28T17:08:49.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:49.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:49.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:49.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:49.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66853cd6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5345ae5a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.606+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.607+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.610+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957022257 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:49.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1047155220 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:49.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:49.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:49.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2570fdf8]
2026-01-28T17:08:49.642+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:49.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66853cd6]
2026-01-28T17:08:49.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:49.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5345ae5a]
2026-01-28T17:08:49.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:49.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776868545 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will be managed by Spring
2026-01-28T17:08:49.655+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.660+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:49.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:49.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.678+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:49.679+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1539462722 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:49.681+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa] from current transaction
2026-01-28T17:08:49.681+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:49.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:49.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:49.691+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.693+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.694+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa] from current transaction
2026-01-28T17:08:49.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859] from current transaction
2026-01-28T17:08:49.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa] from current transaction
2026-01-28T17:08:49.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859] from current transaction
2026-01-28T17:08:49.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:49.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.705+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:49.706+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.710+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.710+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.711+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.712+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859] from current transaction
2026-01-28T17:08:49.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4892bbfa]
2026-01-28T17:08:49.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:49.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:49.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.721+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499d0859]
2026-01-28T17:08:49.728+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.729+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330184459 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will be managed by Spring
2026-01-28T17:08:49.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:49.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:49.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493855613 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:49.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:49.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:49.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:49.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930] from current transaction
2026-01-28T17:08:49.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.747+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:49.747+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.747+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4] from current transaction
2026-01-28T17:08:49.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930] from current transaction
2026-01-28T17:08:49.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930] from current transaction
2026-01-28T17:08:49.753+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4] from current transaction
2026-01-28T17:08:49.753+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:49.755+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.759+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:49.759+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.761+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.761+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4] from current transaction
2026-01-28T17:08:49.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.763+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ab930]
2026-01-28T17:08:49.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:49.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:49.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518624d4]
2026-01-28T17:08:49.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bde5123] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457390414 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:49.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.772+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bde5123]
2026-01-28T17:08:49.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4908b8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@889652059 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:49.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:49.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eaff34] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4908b8]
2026-01-28T17:08:49.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840066325 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:49.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de6cd41] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151917709 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:49.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:49.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:49.789+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:49.790+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.792+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de6cd41]
2026-01-28T17:08:49.793+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eaff34]
2026-01-28T17:08:49.793+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:49.793+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.794+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:08:49.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6752d7f8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648662393 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:49.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:08:49.819+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:08:49.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:08:49.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:08:49.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:08:49.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:49.832+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:08:49.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.843+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c20b537] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:49.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6752d7f8]
2026-01-28T17:08:49.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b1e60d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1638731508 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:49.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:49.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:49.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015691398 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:49.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:49.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.878+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:49.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b1e60d]
2026-01-28T17:08:49.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:49.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:08:49.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.899+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:08:49.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:49.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c20b537]
2026-01-28T17:08:49.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb731b4] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.905+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716836977 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:49.905+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.906+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.916+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:08:49.920+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:08:49.920+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:08:49.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:08:49.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:49.922+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:08:49.922+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.922+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3b0ff] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.926+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802587845 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:49.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:49.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb731b4]
2026-01-28T17:08:49.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30bd0e12] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@922788640 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:49.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:49.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:49.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:49.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:49.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3b0ff]
2026-01-28T17:08:49.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30bd0e12]
2026-01-28T17:08:49.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18a749b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f8e7485] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50869780 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:49.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932920056 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:49.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:49.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:49.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18a749b7]
2026-01-28T17:08:49.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f8e7485]
2026-01-28T17:08:49.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541a0e99] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5007285b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1993482076 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:49.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1286689922 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:49.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:49.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:49.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:49.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:49.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:49.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5007285b]
2026-01-28T17:08:49.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541a0e99]
2026-01-28T17:08:49.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23163d1a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37188017] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245351123 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:49.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@871509675 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:49.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:49.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:49.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:49.975+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:49.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:49.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23163d1a]
2026-01-28T17:08:49.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37188017]
2026-01-28T17:08:49.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:49.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:49.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2099aaca] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:49.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:49.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1400020726 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:49.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:49.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:49.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:50.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:50.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2099aaca]
2026-01-28T17:08:50.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:50.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43227356] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:50.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780164610 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:50.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:50.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:50.025+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:50.026+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43227356]
2026-01-28T17:08:50.026+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:50.027+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:50.027+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:52.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:52.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:08:52.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:08:52.808+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:08:52.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:08:52.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:08:52.819+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:08:52.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:52.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:08:52.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:08:52.843+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:08:52.844+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:08:52.847+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:08:52.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:08:52.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:52.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:08:52.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:08:52.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:08:52.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:08:52.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:08:52.855+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:08:52.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:08:52.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:52.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:08:52.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:08:52.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:08:52.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:08:52.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:08:52.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:52.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:08:52.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:08:52.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:08:52.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:52.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:52.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:52.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:52.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:08:52.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:08:52.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:52.876+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.877+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d40e1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.879+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce1937] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503cf197] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:52.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:52.881+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db11cff] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:52.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:08:52.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f55d3a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.889+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1133720186 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:52.892+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197558510 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:52.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929917548 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:52.896+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885026175 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:52.897+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1c6aff] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.897+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:52.897+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:52.898+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:08:52.898+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598096110 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:52.899+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:52.900+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:52.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:52.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:52.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:08:52.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:52.905+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@13709431 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:52.913+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:52.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:08:52.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:08:52.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:52.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:08:52.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503cf197]
2026-01-28T17:08:52.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce1937]
2026-01-28T17:08:52.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:08:52.922+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d40e1]
2026-01-28T17:08:52.925+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.925+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.926+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:52.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:52.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309ba7c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74de6b99] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db11cff]
2026-01-28T17:08:52.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:08:52.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@226837089 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:52.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114806827 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:52.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:52.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:08:52.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1c6aff]
2026-01-28T17:08:52.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:08:52.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:52.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:52.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ebd9fb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.941+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:08:52.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:52.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f55d3a]
2026-01-28T17:08:52.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:52.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:52.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63617221 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:52.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:08:52.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:52.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:08:52.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:52.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:52.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:52.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:08:52.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:08:52.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:52.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:52.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:52.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:08:52.971+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74de6b99]
2026-01-28T17:08:52.972+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:52.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309ba7c]
2026-01-28T17:08:52.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:08:52.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:52.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ebd9fb]
2026-01-28T17:08:52.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:52.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:52.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:08:52.989+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:52.989+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:52.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e8818f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:52.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@479301967 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:52.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:52.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@650404840 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:52.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:52.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247419672 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:08:53.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:52.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:08:53.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:53.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:53.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:53.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:08:53.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:53.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:53.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e8818f]
2026-01-28T17:08:53.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:53.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881] from current transaction
2026-01-28T17:08:53.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:08:53.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f] from current transaction
2026-01-28T17:08:53.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:53.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:53.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:53.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:53.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:53.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881] from current transaction
2026-01-28T17:08:53.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f] from current transaction
2026-01-28T17:08:53.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881] from current transaction
2026-01-28T17:08:53.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f] from current transaction
2026-01-28T17:08:53.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:53.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:53.139+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a42a87f]
2026-01-28T17:08:53.156+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3537b881]
2026-01-28T17:08:53.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885603078 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:08:53.189+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:53.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:53.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.194+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.194+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732651070 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:08:53.194+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:53.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:53.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:53.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b] from current transaction
2026-01-28T17:08:53.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:53.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:53.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d] from current transaction
2026-01-28T17:08:53.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:53.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:53.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b] from current transaction
2026-01-28T17:08:53.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:53.203+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.203+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d] from current transaction
2026-01-28T17:08:53.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.206+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b] from current transaction
2026-01-28T17:08:53.207+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.208+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.209+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:53.209+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d] from current transaction
2026-01-28T17:08:53.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:53.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.225+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.225+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc5db3b]
2026-01-28T17:08:53.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4f024d]
2026-01-28T17:08:53.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce82589] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948309931 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:53.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3176375e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@718151478 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce82589]
2026-01-28T17:08:53.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479fd628] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247176511 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:53.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3176375e]
2026-01-28T17:08:53.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ff378] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.242+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72607858 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.243+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:53.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479fd628]
2026-01-28T17:08:53.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2873828c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:53.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@291778364 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:53.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ff378]
2026-01-28T17:08:53.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:53.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:53.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3663da] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642342711 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:53.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:53.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:53.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2873828c]
2026-01-28T17:08:53.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:53.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:53.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:08:53.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3663da]
2026-01-28T17:08:53.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:53.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:53.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:08:53.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:08:53.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:53.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:08:53.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:08:53.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:08:53.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:08:53.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:08:53.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:08:53.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:53.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:08:53.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:08:53.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:08:53.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:08:53.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538dac7d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:53.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132531922 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:08:53.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:53.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7baae580] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1487846316 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:53.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:53.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:53.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538dac7d]
2026-01-28T17:08:53.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7f5f9e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370486856 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:53.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7baae580]
2026-01-28T17:08:53.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d2556] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@775378544 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:53.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:53.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7f5f9e]
2026-01-28T17:08:53.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f19932c] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.309+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242539262 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:53.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:53.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:53.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d2556]
2026-01-28T17:08:53.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5372f76a] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942563271 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:53.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:53.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:53.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f19932c]
2026-01-28T17:08:53.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:53.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5796a183] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141233838 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:53.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:53.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5372f76a]
2026-01-28T17:08:53.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.326+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c5dbd1] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617134340 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:53.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:53.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:53.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5796a183]
2026-01-28T17:08:53.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:53.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74932ca8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384499968 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:53.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c5dbd1]
2026-01-28T17:08:53.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:53.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326340b9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2083921527 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:53.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:53.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.342+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74932ca8]
2026-01-28T17:08:53.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a99965b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326340b9]
2026-01-28T17:08:53.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931268556 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:53.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:53.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632aea19] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:53.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:53.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1273235533 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:53.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:53.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:53.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a99965b]
2026-01-28T17:08:53.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:53.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:53.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:53.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632aea19]
2026-01-28T17:08:53.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:53.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:53.358+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:53.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:54.958+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:08:54.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:54.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:08:54.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:08:54.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:08:54.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:54.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:08:54.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:08:54.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:54.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:08:54.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:08:54.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:08:54.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:08:54.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:54.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:08:54.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:08:54.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:08:54.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:08:54.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:54.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:08:54.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:08:54.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:08:54.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:54.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:54.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:08:54.994+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:08:54.994+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:08:54.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10526155] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:54.996+09:00  INFO 11120 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:54.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:08:54.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:54.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:08:54.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:08:54.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@306753588 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:55.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.001+09:00  INFO 11120 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:08:55.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b033352] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d88e99] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:55.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75487441] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:55.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec7c070] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666593084 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:08:55.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:55.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:08:55.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10526155]
2026-01-28T17:08:55.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808763957 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:55.022+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1063349273 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.025+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044401158 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:55.028+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:55.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:55.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:08:55.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:55.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d626a51] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:08:55.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1684959363 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:08:55.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:55.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:55.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:55.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b033352]
2026-01-28T17:08:55.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:55.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75487441]
2026-01-28T17:08:55.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:08:55.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:55.045+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d88e99]
2026-01-28T17:08:55.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778369c9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.042+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.044+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.044+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec7c070]
2026-01-28T17:08:55.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1394763866 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:55.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:55.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221eaad8] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253584190 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:55.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:55.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:08:55.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:55.063+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:55.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d626a51]
2026-01-28T17:08:55.069+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.077+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:08:55.077+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778369c9]
2026-01-28T17:08:55.078+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:55.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221eaad8]
2026-01-28T17:08:55.089+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667955595 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:08:55.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779068319 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will be managed by Spring
2026-01-28T17:08:55.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:55.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:55.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:55.096+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:55.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:55.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:55.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805] from current transaction
2026-01-28T17:08:55.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73] from current transaction
2026-01-28T17:08:55.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73] from current transaction
2026-01-28T17:08:55.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805] from current transaction
2026-01-28T17:08:55.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.112+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73] from current transaction
2026-01-28T17:08:55.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805] from current transaction
2026-01-28T17:08:55.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:55.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:55.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd11805]
2026-01-28T17:08:55.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d900c73]
2026-01-28T17:08:55.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1521431161 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:08:55.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713800458 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will be managed by Spring
2026-01-28T17:08:55.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:55.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:08:55.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:55.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:08:55.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:55.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:08:55.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540] from current transaction
2026-01-28T17:08:55.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da] from current transaction
2026-01-28T17:08:55.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540] from current transaction
2026-01-28T17:08:55.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da] from current transaction
2026-01-28T17:08:55.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540] from current transaction
2026-01-28T17:08:55.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:55.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da] from current transaction
2026-01-28T17:08:55.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:55.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffa6540]
2026-01-28T17:08:55.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8a37da]
2026-01-28T17:08:55.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ac3237] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250275159 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:55.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d193b9] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2116127665 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:55.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ac3237]
2026-01-28T17:08:55.175+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.175+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.175+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ef24adc] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.176+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d193b9]
2026-01-28T17:08:55.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689496767 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:55.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ff97ab] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1786414134 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:55.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.195+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:55.195+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:08:55.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ef24adc]
2026-01-28T17:08:55.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ff97ab]
2026-01-28T17:08:55.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b490] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42de763b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140907660 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:08:55.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490992388 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:08:55.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:55.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:08:55.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:55.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:08:55.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:55.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:08:55.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42de763b]
2026-01-28T17:08:55.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b490]
2026-01-28T17:08:55.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:08:55.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:08:55.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:55.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:55.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:08:55.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:08:55.278+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:08:55.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:08:55.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:08:55.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:08:55.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:55.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:08:55.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d9610b] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472330268 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:55.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:55.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:08:55.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.305+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:08:55.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:08:55.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:08:55.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:55.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:08:55.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d9610b]
2026-01-28T17:08:55.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.319+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3144851f] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250829662 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:55.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:08:55.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbd9c27] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604414356 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:08:55.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3144851f]
2026-01-28T17:08:55.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e90d20e] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:08:55.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736740542 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:55.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbd9c27]
2026-01-28T17:08:55.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:55.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:55.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f53891] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836360236 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:08:55.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.339+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:55.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e90d20e]
2026-01-28T17:08:55.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:08:55.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f53891]
2026-01-28T17:08:55.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da9a3c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@621875935 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:55.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372dbbdb] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601453087 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:08:55.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:08:55.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da9a3c6]
2026-01-28T17:08:55.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e9e258] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:08:55.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898554544 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:55.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372dbbdb]
2026-01-28T17:08:55.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:55.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164b2830] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.360+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1289927233 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.362+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:08:55.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:08:55.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e9e258]
2026-01-28T17:08:55.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fec3b81] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@901636358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:08:55.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:55.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:08:55.378+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164b2830]
2026-01-28T17:08:55.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9ce28d] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104757190 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.394+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fec3b81]
2026-01-28T17:08:55.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:08:55.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:55.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:08:55.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9ce28d]
2026-01-28T17:08:55.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:08:55.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd58bcd] was not registered for synchronization because synchronization is not active
2026-01-28T17:08:55.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@78943344 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:08:55.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:08:55.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:08:55.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:08:55.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd58bcd]
2026-01-28T17:08:55.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:08:55.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:08:55.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:00.908+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:00.909+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:00.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:00.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:00.913+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:00.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:00.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:00.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:00.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:00.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:00.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:00.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:00.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:00.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:00.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:00.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:00.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:00.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:00.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:00.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:00.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:00.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:00.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:00.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:00.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119e7019] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:00.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:00.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:00.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:00.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:00.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:00.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:00.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:00.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:00.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:00.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:00.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:00.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:00.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:00.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:00.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:00.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:00.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e8ee34] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:00.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd31d8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:00.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:00.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:00.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:00.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:00.994+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f88d09d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:00.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1893929834 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:00.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:00.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@925c5c9] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:00.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:00.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795551330 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:00.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1710778513 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:01.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d85662] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832186192 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:01.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887631927 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:01.005+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.006+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067465209 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119e7019]
2026-01-28T17:09:01.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cab6cf6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752863581 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.028+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.028+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:01.028+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:01.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f88d09d]
2026-01-28T17:09:01.028+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@925c5c9]
2026-01-28T17:09:01.028+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd31d8]
2026-01-28T17:09:01.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffe8094] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@404140147 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:01.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647a5314] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b9db24] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436959152 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:01.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016029999 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:01.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cab6cf6]
2026-01-28T17:09:01.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:01.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:01.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d85662]
2026-01-28T17:09:01.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e8ee34]
2026-01-28T17:09:01.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f4f1de] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.038+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.044+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40649d81] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1136650602 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.041+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3f84cf] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951575701 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:01.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:01.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365261614 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.047+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:01.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b9db24]
2026-01-28T17:09:01.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647a5314]
2026-01-28T17:09:01.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.056+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.059+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.060+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:01.061+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40649d81]
2026-01-28T17:09:01.062+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@875d814] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.063+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffe8094]
2026-01-28T17:09:01.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042405629 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:01.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:01.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.069+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:09:01.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:01.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23fac1b9] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3f84cf]
2026-01-28T17:09:01.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:01.086+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f4f1de]
2026-01-28T17:09:01.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192675538 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:01.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:01.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:01.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:01.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:01.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:01.095+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:09:01.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@875d814]
2026-01-28T17:09:01.096+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab3383e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:01.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227511479 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:01.100+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:01.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:01.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:01.111+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:01.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:01.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7943c745] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23fac1b9]
2026-01-28T17:09:01.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:01.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:01.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607472385 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:01.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5b67bf] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:01.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab3383e]
2026-01-28T17:09:01.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:01.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763737505 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:01.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33237a34] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:01.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:01.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184989920 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:01.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e282d1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:01.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc8b3c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@363015419 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7943c745]
2026-01-28T17:09:01.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.158+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1362197403 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:01.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:01.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:01.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de99344] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 79(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:01.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e88ec6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33237a34]
2026-01-28T17:09:01.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5b67bf]
2026-01-28T17:09:01.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660165701 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:01.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131814129 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:01.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:01.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:09:01.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:01.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3810096c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:01.176+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 79(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:01.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e282d1]
2026-01-28T17:09:01.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133981006 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:01.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:01.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc8b3c6]
2026-01-28T17:09:01.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:09:01.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:01.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de99344]
2026-01-28T17:09:01.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b323489] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e88ec6]
2026-01-28T17:09:01.192+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.192+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.192+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500829492 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.192+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2766662a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40926db7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3810096c]
2026-01-28T17:09:01.194+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:01.195+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1026205571 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:01.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454fdd57] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18916690 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:01.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:01.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@632419718 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3549f019] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:01.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:01.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@229295285 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:01.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:09:01.208+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:01.208+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2766662a]
2026-01-28T17:09:01.209+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b323489]
2026-01-28T17:09:01.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:01.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-28T17:09:01.210+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40926db7]
2026-01-28T17:09:01.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:01.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454fdd57]
2026-01-28T17:09:01.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d7565b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:01.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@456896660 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3549f019]
2026-01-28T17:09:01.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:01.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4119da65] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.225+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055672436 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49116f0a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866289417 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:01.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4119da65]
2026-01-28T17:09:01.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d7565b]
2026-01-28T17:09:01.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49116f0a]
2026-01-28T17:09:01.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19087268] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56670d60] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:01.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@374163934 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232389753 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:01.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:01.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 79(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:01.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 79(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:01.262+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:09:01.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19087268]
2026-01-28T17:09:01.263+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25601c8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-28T17:09:01.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486338264 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:01.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56670d60]
2026-01-28T17:09:01.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:01.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6748860b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:01.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162171791 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:01.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:01.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:01.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25601c8]
2026-01-28T17:09:01.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:01.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:01.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6748860b]
2026-01-28T17:09:01.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:01.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:01.277+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:01.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:03.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:03.939+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79
2026-01-28T17:09:03.941+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:09:03.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79
2026-01-28T17:09:03.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:09:03.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:03.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79
2026-01-28T17:09:03.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:09:03.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79
2026-01-28T17:09:03.955+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:09:03.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:03.952+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:09:03.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:09:03.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79
2026-01-28T17:09:03.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:09:03.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:09:03.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:03.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79", parameters={}
2026-01-28T17:09:03.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:09:03.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79
2026-01-28T17:09:03.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:09:03.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:03.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:09:03.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:09:03.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79", parameters={}
2026-01-28T17:09:03.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:09:03.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:03.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:03.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:09:03.971+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:09:03.976+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:09:03.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:03.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56dc6d9a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:03.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:09:03.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:03.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:03.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f6a7aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:03.982+09:00  INFO 11120 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:09:03.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f969d84] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:03.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b1af1e2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:03.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:03.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd96a7b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:03.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@25060090 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:03.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026417120 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:03.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878747641 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:03.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114779732 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:03.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197885202 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:04.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:04.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:04.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:09:04.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:09:04.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:04.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.005+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:04.011+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:04.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:04.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:04.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:09:04.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:04.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:04.026+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:09:04.027+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f969d84]
2026-01-28T17:09:04.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd96a7b]
2026-01-28T17:09:04.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56dc6d9a]
2026-01-28T17:09:04.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f6a7aa]
2026-01-28T17:09:04.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b1af1e2]
2026-01-28T17:09:04.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8b49d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:09:04.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69820a77] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a7b353] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:09:04.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128752358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847348001 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:04.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:04.039+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211633319 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:04.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:04.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:04.045+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:04.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:04.048+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:04.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.069+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:04.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a7b353]
2026-01-28T17:09:04.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:09:04.072+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:09:04.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:04.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69820a77]
2026-01-28T17:09:04.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8b49d]
2026-01-28T17:09:04.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:04.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233019876 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:09:04.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@971195917 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:09:04.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:04.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:04.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:04.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:04.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:09:04.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 45
2026-01-28T17:09:04.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366] from current transaction
2026-01-28T17:09:04.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565] from current transaction
2026-01-28T17:09:04.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:04.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:04.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:09:04.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:09:04.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366] from current transaction
2026-01-28T17:09:04.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565] from current transaction
2026-01-28T17:09:04.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:04.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:04.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:04.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:04.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366] from current transaction
2026-01-28T17:09:04.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:04.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565] from current transaction
2026-01-28T17:09:04.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:09:04.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:04.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:09:04.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:04.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:04.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7802e366]
2026-01-28T17:09:04.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1497c565]
2026-01-28T17:09:04.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a41bf19] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6650a852] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866478797 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605890751 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:04.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:04.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:04.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:04.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:04.241+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6650a852]
2026-01-28T17:09:04.242+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a41bf19]
2026-01-28T17:09:04.242+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.243+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22cacaf2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1710fb0a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1094448321 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:04.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279848838 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:04.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:04.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.260+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:09:04.260+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:09:04.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22cacaf2]
2026-01-28T17:09:04.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1710fb0a]
2026-01-28T17:09:04.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3249a51b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354ecc18] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176532218 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:04.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630634768 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:04.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:04.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:04.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:04.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:04.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:04.277+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354ecc18]
2026-01-28T17:09:04.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3249a51b]
2026-01-28T17:09:04.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=79, drafterId=2, r (truncated)...]
2026-01-28T17:09:04.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=79, drafterId=2, r (truncated)...]
2026-01-28T17:09:04.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:04.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:04.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79/receipts
2026-01-28T17:09:04.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79/receipts
2026-01-28T17:09:04.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79/receipts
2026-01-28T17:09:04.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79/receipts
2026-01-28T17:09:04.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79/receipts
2026-01-28T17:09:04.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79/receipts", parameters={}
2026-01-28T17:09:04.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/79/receipts
2026-01-28T17:09:04.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:09:04.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 79, userId: 2
2026-01-28T17:09:04.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.342+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79/receipts
2026-01-28T17:09:04.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3955c806] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/79/receipts
2026-01-28T17:09:04.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112806808 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:04.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/79/receipts", parameters={}
2026-01-28T17:09:04.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:04.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:09:04.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 79, userId: 2
2026-01-28T17:09:04.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e7cf685] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.358+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867782265 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:04.360+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:04.362+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3955c806]
2026-01-28T17:09:04.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ead41c8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959429091 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:04.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:04.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.397+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:04.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e7cf685]
2026-01-28T17:09:04.403+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.404+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:04.412+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7323c982] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ead41c8]
2026-01-28T17:09:04.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246941629 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.424+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.428+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:04.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5157088c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355512431 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:04.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:04.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:04.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:04.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7323c982]
2026-01-28T17:09:04.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668a56fb] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@193526897 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:04.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:04.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:04.439+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5157088c]
2026-01-28T17:09:04.441+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264a1bf9] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1328575700 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:04.446+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:04.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:04.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668a56fb]
2026-01-28T17:09:04.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a1e44] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849591796 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:09:04.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:04.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264a1bf9]
2026-01-28T17:09:04.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:04.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29edbe57] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.460+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603202368 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:04.460+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:04.460+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-28T17:09:04.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:09:04.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a1e44]
2026-01-28T17:09:04.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:04.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71dcc7ca] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:04.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:04.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@668086155 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:04.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29edbe57]
2026-01-28T17:09:04.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:04.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 122(Long), 1(Long)
2026-01-28T17:09:04.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:09:04.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:04.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:04.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71dcc7ca]
2026-01-28T17:09:04.510+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:04.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:09:04.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:05.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/79?userId=2
2026-01-28T17:09:05.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/79?userId=2
2026-01-28T17:09:05.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/79
2026-01-28T17:09:05.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/79?userId=2
2026-01-28T17:09:05.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/79?userId=2", parameters={masked}
2026-01-28T17:09:05.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:09:05.802+09:00  INFO 11120 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 79, userId: 2
2026-01-28T17:09:05.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:05.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:05.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@717176117 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will be managed by Spring
2026-01-28T17:09:05.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:05.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:05.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:06.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.007+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd] from current transaction
2026-01-28T17:09:06.008+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:06.012+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:06.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:06.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd] from current transaction
2026-01-28T17:09:06.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd] from current transaction
2026-01-28T17:09:06.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd] from current transaction
2026-01-28T17:09:06.024+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:06.026+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 79(Long), 1(Long)
2026-01-28T17:09:06.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:09:06.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.033+09:00  INFO 11120 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 79, userId: 2
2026-01-28T17:09:06.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f3a4fd]
2026-01-28T17:09:06.053+09:00  INFO 11120 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 79
2026-01-28T17:09:06.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:06.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:09:06.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.060+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:07.061+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:07.064+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:07.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:07.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:07.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:07.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:07.092+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:07.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:07.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:07.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:07.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:07.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:07.142+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:07.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:07.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:07.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:07.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:07.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:07.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:07.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:07.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:07.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:07.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:07.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:07.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:07.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:07.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:07.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:07.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:07.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:07.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:07.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:07.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:07.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:07.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:07.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696da4d6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:07.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:07.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:07.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4c926a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@594405ae] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6224e3d7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776b41e9] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@610970336 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:07.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@827543361 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:07.192+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37179118] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.197+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089250963 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830979735 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:07.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.199+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@605803295 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223064531 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:07.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.215+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:07.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:07.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:07.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:07.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696da4d6]
2026-01-28T17:09:07.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37179118]
2026-01-28T17:09:07.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6224e3d7]
2026-01-28T17:09:07.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@594405ae]
2026-01-28T17:09:07.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4c926a]
2026-01-28T17:09:07.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776b41e9]
2026-01-28T17:09:07.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2331beef] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4654a99d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1931c621] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16860e6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56db34e2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@259970a4] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005023795 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:07.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1107627936 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:07.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987806581 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:07.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@909978624 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843847435 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:07.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@651018192 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.255+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.259+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.265+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.266+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4654a99d]
2026-01-28T17:09:07.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1931c621]
2026-01-28T17:09:07.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2331beef]
2026-01-28T17:09:07.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56db34e2]
2026-01-28T17:09:07.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@259970a4]
2026-01-28T17:09:07.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16860e6]
2026-01-28T17:09:07.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:07.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:07.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564e80f7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bcb0bc] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540e5689] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:07.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.278+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015791639 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:07.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164624557 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:07.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@989593852 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:07.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:07.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:07.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:07.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:07.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:07.308+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:07.309+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:07.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:07.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:07.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:07.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:07.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:07.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:07.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:07.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:07.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:07.342+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:07.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5434bff0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:07.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:07.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284146727 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:07.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:07.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:07.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:07.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bcb0bc]
2026-01-28T17:09:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564e80f7]
2026-01-28T17:09:07.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540e5689]
2026-01-28T17:09:07.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b35d4aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534bd6a7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.352+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897310334 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:07.355+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144957331 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:07.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31e8dff2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.360+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d324e24] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d55d3ba] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.362+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:07.362+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:07.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387442211 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:07.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331245645 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726230663 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:07.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5434bff0]
2026-01-28T17:09:07.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee4ed0e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:07.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:07.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136868893 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:07.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b35d4aa]
2026-01-28T17:09:07.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31e8dff2]
2026-01-28T17:09:07.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534bd6a7]
2026-01-28T17:09:07.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d324e24]
2026-01-28T17:09:07.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d55d3ba]
2026-01-28T17:09:07.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@365a8881] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.384+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7140398e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:07.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d02a09] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e753f8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1395624548 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:07.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2092120047 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:07.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.394+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020349881 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@51158109 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:07.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee4ed0e]
2026-01-28T17:09:07.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:07.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:07.400+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:07.405+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37871f8a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.409+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513939689 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:07.412+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:07.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:07.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e753f8]
2026-01-28T17:09:07.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@365a8881]
2026-01-28T17:09:07.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7140398e]
2026-01-28T17:09:07.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:07.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:07.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510cf49d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1265501655 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d02a09]
2026-01-28T17:09:07.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:07.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:07.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:07.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:07.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66a6ee83] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37871f8a]
2026-01-28T17:09:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:07.422+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.425+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612709948 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:07.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1a0596] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:07.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1626225840 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:07.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.451+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:07.455+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510cf49d]
2026-01-28T17:09:07.459+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:07.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e7ea7d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1a0596]
2026-01-28T17:09:07.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66a6ee83]
2026-01-28T17:09:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1962497696 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:07.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a77f071] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1542767946 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e7ea7d]
2026-01-28T17:09:07.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f417138] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@579394735 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:07.483+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a77f071]
2026-01-28T17:09:07.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:07.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b7e0132] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1052744788 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.485+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:07.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:07.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:07.489+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f417138]
2026-01-28T17:09:07.493+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460874df] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:07.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303306135 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:07.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b7e0132]
2026-01-28T17:09:07.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:07.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5045cd88] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:07.499+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726216995 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:07.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:07.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:07.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.508+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460874df]
2026-01-28T17:09:07.510+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.510+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:07.513+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:07.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5045cd88]
2026-01-28T17:09:07.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:07.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:07.529+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:07.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:10.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:10.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-28T17:09:10.873+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:10.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:10.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:10.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:10.973+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:10.974+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-28T17:09:11.065+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.081+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-28T17:09:11.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-28T17:09:11.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-28T17:09:11.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-28T17:09:11.109+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa3dd52] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aca3069] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.110+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f2c9d2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1071484242 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:11.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442432947 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1468832653 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-28T17:09:11.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-28T17:09:11.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.203+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:11.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-28T17:09:11.212+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.222+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aca3069]
2026-01-28T17:09:11.226+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:11.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f2c9d2]
2026-01-28T17:09:11.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-28T17:09:11.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa3dd52]
2026-01-28T17:09:11.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:11.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.241+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3475fa39] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:11.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cdacde6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131868854 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@985509679 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.259+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:11.267+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:11.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:11.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:11.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.290+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:11.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:11.291+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.291+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:11.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:11.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:11.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.298+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:11.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3475fa39]
2026-01-28T17:09:11.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cdacde6]
2026-01-28T17:09:11.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd0bba5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@222a312] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.308+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610797290 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:11.308+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ad3ee0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.309+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6d44aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.309+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.310+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432350157 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.310+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.318+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.320+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:11.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93005687 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426351798 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:11.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:11.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.355+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.359+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:11.360+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:11.361+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd0bba5]
2026-01-28T17:09:11.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@222a312]
2026-01-28T17:09:11.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:11.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6d44aa]
2026-01-28T17:09:11.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa2275] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6d6674] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5382d2c3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ea1a94f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ad3ee0]
2026-01-28T17:09:11.369+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282540971 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:11.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@851106812 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.371+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150621276 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.372+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097682652 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.376+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76a74b82] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f9a211] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039069299 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.387+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336825639 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.388+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.401+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.402+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.414+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.415+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ea1a94f]
2026-01-28T17:09:11.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76a74b82]
2026-01-28T17:09:11.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5382d2c3]
2026-01-28T17:09:11.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6d6674]
2026-01-28T17:09:11.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa2275]
2026-01-28T17:09:11.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f9a211]
2026-01-28T17:09:11.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766d44b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.423+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.424+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.424+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.425+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.426+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272013950 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.426+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c7add6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bbc04c5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6677bde4] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.431+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:11.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989572007 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.434+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742755584 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.435+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818467541 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:11.437+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.446+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:11.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.448+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:11.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:11.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.466+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.467+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.468+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:11.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:11.469+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bbc04c5]
2026-01-28T17:09:11.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766d44b]
2026-01-28T17:09:11.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c7add6]
2026-01-28T17:09:11.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6677bde4]
2026-01-28T17:09:11.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.471+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.472+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.474+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@609670e1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.474+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.475+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.475+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.475+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e8ceca] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.475+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d87c2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1595932624 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6e0816] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@86840994 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:11.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbd3897] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840524574 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870895446 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.477+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.478+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966135123 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:11.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.482+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:11.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:11.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.493+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:11.494+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.495+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@609670e1]
2026-01-28T17:09:11.496+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.497+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:11.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6e0816]
2026-01-28T17:09:11.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.498+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@86ec24e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:11.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:11.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d87c2]
2026-01-28T17:09:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538046682 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e8ceca]
2026-01-28T17:09:11.501+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c89952] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbd3897]
2026-01-28T17:09:11.502+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.503+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.504+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.505+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@444969886 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.509+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:11.507+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.508+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.508+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cac1b77] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.508+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aeff144] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.511+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:11.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ef4bd8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.516+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1135415478 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.525+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641037481 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.520+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.521+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1187225778 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.523+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.526+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.526+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.527+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.527+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.527+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@86ec24e]
2026-01-28T17:09:11.532+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.530+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.531+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:11.531+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.533+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.534+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.535+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c89952]
2026-01-28T17:09:11.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cac1b77]
2026-01-28T17:09:11.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.539+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ef4bd8]
2026-01-28T17:09:11.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:11.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4960536d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.541+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.542+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aeff144]
2026-01-28T17:09:11.543+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a36b09] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.543+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5b4291] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:11.549+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043822362 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283209158 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303072142 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:11.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@417bd048] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.562+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:11.564+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:11.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:11.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410034930 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.580+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:11.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:11.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:11.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.588+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:11.590+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:11.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:11.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5b4291]
2026-01-28T17:09:11.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.595+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f82f34c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4960536d]
2026-01-28T17:09:11.595+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538880487 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bb74ec8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a36b09]
2026-01-28T17:09:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.598+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1051427973 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@417bd048]
2026-01-28T17:09:11.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330c75a0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:11.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:11.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6269b97f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017239959 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:11.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596943640 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:11.605+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d855cb6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.607+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.609+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.610+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-28T17:09:11.610+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927489758 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f82f34c]
2026-01-28T17:09:11.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:11.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:11.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bb74ec8]
2026-01-28T17:09:11.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:11.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5f1a4a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330c75a0]
2026-01-28T17:09:11.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417645086 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6269b97f]
2026-01-28T17:09:11.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a11f3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:11.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1920654940 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:11.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3df8527b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d855cb6]
2026-01-28T17:09:11.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1837728017 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:11.627+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12ae0220] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.628+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:11.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.633+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426689071 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:11.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5f1a4a]
2026-01-28T17:09:11.634+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a11f3]
2026-01-28T17:09:11.635+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.636+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:11.637+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:11.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150480a6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.638+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3df8527b]
2026-01-28T17:09:11.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27084038 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.643+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:11.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cfda30e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12ae0220]
2026-01-28T17:09:11.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 80(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:11.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936282464 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:11.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:11.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.653+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.663+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-28T17:09:11.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150480a6]
2026-01-28T17:09:11.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cfda30e]
2026-01-28T17:09:11.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:11.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b1204c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:11.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:11.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327259404 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:11.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:11.675+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:11.679+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:11.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:11.694+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b1204c]
2026-01-28T17:09:11.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:11.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:11.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:12.695+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:12.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:09:12.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:09:12.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80
2026-01-28T17:09:12.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:09:12.730+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:12.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:09:12.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:09:12.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:09:12.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80
2026-01-28T17:09:12.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:09:12.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:09:12.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:09:12.740+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:09:12.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:09:12.741+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:12.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:12.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:09:12.775+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80
2026-01-28T17:09:12.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:09:12.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:09:12.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:09:12.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:09:12.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:12.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80", parameters={}
2026-01-28T17:09:12.777+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:09:12.779+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:09:12.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79105b7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:12.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:09:12.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:09:12.783+09:00  INFO 11120 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:09:12.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.795+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:09:12.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b2dcbe] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c42130b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608425065 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:12.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468b1e0a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.828+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4edd] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:12.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@501010628 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:12.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803084641 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:12.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:12.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:12.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034367912 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:12.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@873559115 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:12.838+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:12.844+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.844+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:09:12.845+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:12.846+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:09:12.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:12.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79105b7]
2026-01-28T17:09:12.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:12.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:12.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:12.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c901084] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b2dcbe]
2026-01-28T17:09:12.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c42130b]
2026-01-28T17:09:12.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@64381821 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:12.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:09:12.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:12.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:09:12.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a25bfcc] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488f5adc] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:12.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4edd]
2026-01-28T17:09:12.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.871+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468b1e0a]
2026-01-28T17:09:12.878+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707816003 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:12.879+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@626095280 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:12.880+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:12.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:12.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:12.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:12.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:09:12.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:09:12.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:12.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:12.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:12.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:12.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c901084]
2026-01-28T17:09:12.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:12.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:12.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a25bfcc]
2026-01-28T17:09:12.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488f5adc]
2026-01-28T17:09:12.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:12.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:12.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:12.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:12.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:12.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:12.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@526661168 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will be managed by Spring
2026-01-28T17:09:12.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256033608 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:09:12.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:12.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:12.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:12.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:12.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:12.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:12.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:12.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:12.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891] from current transaction
2026-01-28T17:09:12.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f] from current transaction
2026-01-28T17:09:12.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:12.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:12.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:12.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:12.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:12.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:12.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f] from current transaction
2026-01-28T17:09:12.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891] from current transaction
2026-01-28T17:09:12.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:12.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:12.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:12.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:12.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:13.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:13.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891] from current transaction
2026-01-28T17:09:13.003+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f] from current transaction
2026-01-28T17:09:13.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.005+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:09:13.009+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:09:13.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:13.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:13.016+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:13.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:13.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:13.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:13.021+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c34f]
2026-01-28T17:09:13.026+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7367b891]
2026-01-28T17:09:13.046+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.050+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998234933 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will be managed by Spring
2026-01-28T17:09:13.051+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:13.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:13.054+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.055+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2018013809 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will be managed by Spring
2026-01-28T17:09:13.066+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:13.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:13.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:13.067+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f] from current transaction
2026-01-28T17:09:13.069+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:13.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.075+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:13.075+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.076+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413] from current transaction
2026-01-28T17:09:13.076+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:13.077+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:13.079+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.080+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f] from current transaction
2026-01-28T17:09:13.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:13.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:13.083+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413] from current transaction
2026-01-28T17:09:13.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:13.084+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f] from current transaction
2026-01-28T17:09:13.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:09:13.087+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.088+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413] from current transaction
2026-01-28T17:09:13.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.093+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.094+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.096+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:09:13.097+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532dc84f]
2026-01-28T17:09:13.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c7b413]
2026-01-28T17:09:13.112+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6409a3a4] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.114+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207887940 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:13.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:13.122+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69898415] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6409a3a4]
2026-01-28T17:09:13.137+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2048176583 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:13.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:13.147+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27aa03f6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236421156 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:13.152+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.153+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69898415]
2026-01-28T17:09:13.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:09:13.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4064c0ef] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27aa03f6]
2026-01-28T17:09:13.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701338586 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:13.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@415035f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935087000 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:13.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:13.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:13.167+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:09:13.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4064c0ef]
2026-01-28T17:09:13.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:13.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5cb2d8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@415035f]
2026-01-28T17:09:13.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@467232292 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:13.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:13.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:13.169+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:13.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:09:13.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:13.186+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:13.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5cb2d8]
2026-01-28T17:09:13.187+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:13.188+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=80, drafterId=2, r (truncated)...]
2026-01-28T17:09:13.198+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:13.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:09:13.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:09:13.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:09:13.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:09:13.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:09:13.221+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:09:13.229+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:09:13.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3742a251] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.243+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949810571 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:13.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:13.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:13.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3742a251]
2026-01-28T17:09:13.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8f2c73] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80/receipts
2026-01-28T17:09:13.292+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72738175 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:13.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:13.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/80/receipts
2026-01-28T17:09:13.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80/receipts
2026-01-28T17:09:13.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/80/receipts
2026-01-28T17:09:13.328+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/80/receipts", parameters={}
2026-01-28T17:09:13.329+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:09:13.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8f2c73]
2026-01-28T17:09:13.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 80, userId: 2
2026-01-28T17:09:13.331+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@970d80f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb1440f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087289318 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:13.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1544122215 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:13.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:13.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:13.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:13.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:13.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:13.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@970d80f]
2026-01-28T17:09:13.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb1440f]
2026-01-28T17:09:13.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.338+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d46d66] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30cb846a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736848211 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:13.368+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:13.370+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895430464 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:13.377+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:13.379+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:13.413+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:13.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30cb846a]
2026-01-28T17:09:13.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d46d66]
2026-01-28T17:09:13.416+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.418+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bb6cc79] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd949a2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.419+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1999827889 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:13.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@744599266 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:13.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:13.445+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:13.447+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:09:13.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:13.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd949a2]
2026-01-28T17:09:13.450+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bb6cc79]
2026-01-28T17:09:13.451+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a206550] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4975e84c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.452+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1263906287 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:13.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1678581791 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:13.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:13.453+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:09:13.454+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:13.456+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.457+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a206550]
2026-01-28T17:09:13.458+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:13.459+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:13.460+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4975e84c]
2026-01-28T17:09:13.460+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:09:13.460+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.461+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:13.462+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6044bdd3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.463+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102047263 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:13.464+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.470+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 123(Long), 1(Long)
2026-01-28T17:09:13.476+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.479+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6044bdd3]
2026-01-28T17:09:13.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:13.480+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18061274] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:13.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567202946 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:13.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:13.481+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 124(Long), 1(Long)
2026-01-28T17:09:13.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:13.484+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18061274]
2026-01-28T17:09:13.486+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:13.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:09:13.487+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:14.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/80?userId=2
2026-01-28T17:09:14.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/80?userId=2
2026-01-28T17:09:14.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/80
2026-01-28T17:09:14.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/80?userId=2
2026-01-28T17:09:14.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/80?userId=2", parameters={masked}
2026-01-28T17:09:14.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:09:14.771+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 80, userId: 2
2026-01-28T17:09:14.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:14.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914754818 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:09:14.788+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:14.794+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:14.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:14.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f] from current transaction
2026-01-28T17:09:14.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:14.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:14.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:14.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f] from current transaction
2026-01-28T17:09:14.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f] from current transaction
2026-01-28T17:09:14.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f] from current transaction
2026-01-28T17:09:14.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:14.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 80(Long), 1(Long)
2026-01-28T17:09:14.808+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:09:14.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.811+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 80, userId: 2
2026-01-28T17:09:14.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a188e1f]
2026-01-28T17:09:14.922+09:00  INFO 11120 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 80
2026-01-28T17:09:14.925+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:14.925+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:09:14.926+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.069+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:16.070+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:16.085+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:16.074+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:16.074+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:16.075+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:16.076+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:16.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:16.091+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:16.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:16.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:16.102+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:16.112+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:16.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:16.103+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:16.104+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:16.108+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:16.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:16.112+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:16.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:16.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:16.115+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:16.117+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:16.118+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:16.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:16.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:16.119+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:16.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:16.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:16.120+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:16.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:16.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:16.121+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:16.124+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:16.127+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:16.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:16.128+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:16.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.129+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:16.130+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:16.131+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@225826ec] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f1579dd] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.132+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c945f34] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24bb79c6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.133+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d573c4a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.134+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a599d1d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20884818 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.135+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@939431822 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:16.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612260598 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@385787964 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:16.138+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1124085899 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:16.142+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.143+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.143+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.143+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.144+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.146+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1833583216 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:16.148+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.149+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.150+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d573c4a]
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24bb79c6]
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f1579dd]
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@225826ec]
2026-01-28T17:09:16.154+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c945f34]
2026-01-28T17:09:16.155+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a599d1d]
2026-01-28T17:09:16.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b60196] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c6973d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e1f23c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.158+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777908eb] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203408853 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:16.160+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1003587443 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:16.161+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278396100 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bad47e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15aa71f5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898528756 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:16.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45175582 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:16.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.163+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459617750 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.164+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.165+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.166+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.168+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.170+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777908eb]
2026-01-28T17:09:16.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c6973d]
2026-01-28T17:09:16.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15aa71f5]
2026-01-28T17:09:16.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.171+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b60196]
2026-01-28T17:09:16.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.172+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.175+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.176+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.176+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bad47e]
2026-01-28T17:09:16.177+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e1f23c]
2026-01-28T17:09:16.178+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4b4ea8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:16.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170878298 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:16.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145ffdda] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:16.179+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.180+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:16.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379668861 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.181+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2260123e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.182+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bfe72a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.183+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:16.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:16.184+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949252392 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:16.191+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:16.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441947475 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.185+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:16.191+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:16.194+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:16.192+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:16.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:16.193+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:16.196+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:16.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:16.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:16.200+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:16.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:16.201+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:16.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.202+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:16.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad38fe4] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.204+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:16.205+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180978073 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:16.211+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.208+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbb19d1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18656493 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:16.214+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:16.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:16.227+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:16.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4b4ea8]
2026-01-28T17:09:16.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:16.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad38fe4]
2026-01-28T17:09:16.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:16.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2260123e]
2026-01-28T17:09:16.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bfe72a]
2026-01-28T17:09:16.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145ffdda]
2026-01-28T17:09:16.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e783c11] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eed5497] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afe4f5f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852183928 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:16.237+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddbf856] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955729409 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:16.238+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2166da] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.241+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414014428 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:16.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270582896 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@368829929 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:16.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbb19d1]
2026-01-28T17:09:16.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339e9b35] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681680646 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:16.310+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.310+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afe4f5f]
2026-01-28T17:09:16.383+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.385+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:16.312+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.358+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2166da]
2026-01-28T17:09:16.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.381+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eed5497]
2026-01-28T17:09:16.382+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e783c11]
2026-01-28T17:09:16.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddbf856]
2026-01-28T17:09:16.386+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.391+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1e49c1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.391+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.395+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.433+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.436+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:16.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@201123694 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.441+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:16.442+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:16.442+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad6c2d7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.500+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:16.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:16.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021493395 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.580+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:16.580+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339e9b35]
2026-01-28T17:09:16.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:16.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:16.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:16.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:16.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:16.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:16.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.602+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31d7f4c2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:16.603+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:16.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@418651469 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:16.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad6c2d7]
2026-01-28T17:09:16.604+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1e49c1]
2026-01-28T17:09:16.610+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:16.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.611+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.613+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:16.613+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd6329] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.613+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13808c82] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104613309 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@526163826 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:16.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:16.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:16.616+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:16.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:16.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31d7f4c2]
2026-01-28T17:09:16.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6aeb1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.623+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170470157 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:16.624+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:16.624+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:16.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd6329]
2026-01-28T17:09:16.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13808c82]
2026-01-28T17:09:16.626+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.626+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.626+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.627+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41990f81] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.627+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263afd6c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.627+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@724035760 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.628+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.628+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835289525 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.628+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.628+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6aeb1]
2026-01-28T17:09:16.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.630+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:16.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41990f81]
2026-01-28T17:09:16.640+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263afd6c]
2026-01-28T17:09:16.641+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5646a6ba] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.642+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.643+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605000948 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.643+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74cee0f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.643+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:16.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1986830871 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:16.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:16.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:16.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:16.678+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5646a6ba]
2026-01-28T17:09:16.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ad1c5a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@859640707 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:16.692+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.693+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.694+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:16.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74cee0f]
2026-01-28T17:09:16.698+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:16.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ad1c5a]
2026-01-28T17:09:16.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685c8d6a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:16.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@134228728 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:16.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:16.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:16.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:16.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:16.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:16.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685c8d6a]
2026-01-28T17:09:16.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:16.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:16.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:19.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-28T17:09:19.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:19.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-28T17:09:20.270+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.274+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-28T17:09:20.275+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-28T17:09:20.276+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.277+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-28T17:09:20.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-28T17:09:20.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.291+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6321d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad3844a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1419b6c0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529598107 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.302+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-28T17:09:20.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@995602864 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-28T17:09:20.304+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.305+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1928431201 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-28T17:09:20.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad3844a]
2026-01-28T17:09:20.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6321d]
2026-01-28T17:09:20.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.348+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25422cf2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-28T17:09:20.349+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1419b6c0]
2026-01-28T17:09:20.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701530850 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c5bb75] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.353+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.354+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598268404 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.357+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.357+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.363+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c5bb75]
2026-01-28T17:09:20.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25422cf2]
2026-01-28T17:09:20.364+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.449+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.492+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.512+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:20.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.514+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:20.515+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.517+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b95cdf1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.518+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973560084 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.519+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.541+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.524+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.536+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.537+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.538+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:20.542+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564a5eb3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:20.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130142140 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.544+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:20.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.545+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:20.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:20.546+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1891498f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.547+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52420362] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:20.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:20.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:20.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:20.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:20.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:20.554+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@313610971 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.557+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.556+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.558+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9160af] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.560+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.561+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b95cdf1]
2026-01-28T17:09:20.561+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.562+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3179268d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346464022 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.563+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330532605 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:20.564+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564a5eb3]
2026-01-28T17:09:20.564+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@888c071] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213100565 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.566+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.570+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.573+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.574+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1597f9] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.574+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637309159 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.575+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.575+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064576669 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:20.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.586+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1597f9]
2026-01-28T17:09:20.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1891498f]
2026-01-28T17:09:20.587+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52420362]
2026-01-28T17:09:20.590+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3179268d]
2026-01-28T17:09:20.590+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@888c071]
2026-01-28T17:09:20.591+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.591+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.592+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd477b0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4b4390] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e42e745] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.593+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.594+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2127403948 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.595+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971293681 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:20.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.595+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1223645372 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.596+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:20.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.606+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:20.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:20.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.617+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9160af]
2026-01-28T17:09:20.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd477b0]
2026-01-28T17:09:20.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e42e745]
2026-01-28T17:09:20.618+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4b4390]
2026-01-28T17:09:20.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fb0d316] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.619+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219333479 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:20.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112d9e01] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.620+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.621+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.622+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.624+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208761262 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:20.631+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:20.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:20.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112d9e01]
2026-01-28T17:09:20.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.646+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df4e465] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356114508 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fb0d316]
2026-01-28T17:09:20.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678e34d0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248476500 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:20.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:20.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:20.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:20.657+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.661+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:20.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.657+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:20.660+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:20.664+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:20.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.663+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.664+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:20.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:20.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:20.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2856ee] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:20.669+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862816882 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.674+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@285487b8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.676+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1766046d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.670+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:20.676+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365840702 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:20.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789681431 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.677+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@466ec044] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:20.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1054595914 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.683+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df4e465]
2026-01-28T17:09:20.685+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2856ee]
2026-01-28T17:09:20.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678e34d0]
2026-01-28T17:09:20.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.686+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@285487b8]
2026-01-28T17:09:20.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1766046d]
2026-01-28T17:09:20.687+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.692+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@648446d0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26625cc5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.688+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db952d7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.691+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7bd9d5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.692+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.692+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924847140 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:20.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742343584 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@848947880 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@824111237 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:20.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276238d8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.710+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.710+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:20.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8389941 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:20.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.721+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:20.731+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:20.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@466ec044]
2026-01-28T17:09:20.732+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.733+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7bd9d5]
2026-01-28T17:09:20.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26625cc5]
2026-01-28T17:09:20.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@648446d0]
2026-01-28T17:09:20.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db952d7]
2026-01-28T17:09:20.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276238d8]
2026-01-28T17:09:20.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47cecfc0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997691805 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.739+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412d4a99] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:20.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d61d09] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.738+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.739+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973264909 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.746+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933500078 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.747+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.749+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:20.750+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:20.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:20.759+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:20.762+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:20.762+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:20.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:20.765+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47cecfc0]
2026-01-28T17:09:20.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:20.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:20.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:20.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:20.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d61d09]
2026-01-28T17:09:20.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2408e805] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412d4a99]
2026-01-28T17:09:20.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.775+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352945035 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.775+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aaa8c16] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.779+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a49c293] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.776+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2598cbc9] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.777+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:20.777+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@879397925 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832256705 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555922470 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:20.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:20.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:20.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:20.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:20.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.795+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aaa8c16]
2026-01-28T17:09:20.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2408e805]
2026-01-28T17:09:20.796+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a49c293]
2026-01-28T17:09:20.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2598cbc9]
2026-01-28T17:09:20.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.797+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280ee087] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.798+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7925c391] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44e0487c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a696aa] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283723561 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.799+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@385487788 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:20.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445535344 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:20.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872663316 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:20.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:20.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:20.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:20.810+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280ee087]
2026-01-28T17:09:20.810+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:20.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:20.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7925c391]
2026-01-28T17:09:20.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44e0487c]
2026-01-28T17:09:20.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:20.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a696aa]
2026-01-28T17:09:20.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42b249e7] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:20.815+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2241a128] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.820+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@558007517 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.821+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.835+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688518324 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:20.835+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:20.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:20.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:20.892+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2241a128]
2026-01-28T17:09:20.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42b249e7]
2026-01-28T17:09:20.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.895+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:20.896+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df0aea2] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.899+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:20.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103261066 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.909+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.910+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.913+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df0aea2]
2026-01-28T17:09:20.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2d6cfb] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988123682 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.916+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:20.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:20.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:20.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2d6cfb]
2026-01-28T17:09:20.924+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:20.925+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd47061] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:20.925+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2125174612 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:20.926+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:20.926+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:20.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:20.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd47061]
2026-01-28T17:09:20.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:20.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:20.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:22.151+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:22.157+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:09:22.159+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-28T17:09:22.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:09:22.162+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-28T17:09:22.203+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:22.203+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:09:22.209+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:09:22.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-28T17:09:22.213+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-28T17:09:22.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:22.216+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:09:22.217+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:09:22.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-28T17:09:22.220+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-28T17:09:22.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:22.228+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:09:22.230+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:09:22.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-28T17:09:22.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-28T17:09:22.231+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:22.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:09:22.232+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:09:22.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-28T17:09:22.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-28T17:09:22.233+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:22.234+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:09:22.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:09:22.235+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-28T17:09:22.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:09:22.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-28T17:09:22.236+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:22.244+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:09:22.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:09:22.245+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:09:22.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:09:22.246+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebe8b1e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:22.249+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:09:22.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-28T17:09:22.247+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-28T17:09:22.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:22.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:22.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:22.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:22.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e78fd1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:22.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@495a8199] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:22.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3988d3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:22.261+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2b49f6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:22.264+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484772356 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:22.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210117175 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:22.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457973330 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:22.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:22.268+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:09:22.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:09:22.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:22.271+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:09:22.272+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:22.277+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@139272776 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:22.278+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-28T17:09:22.278+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259183783 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:22.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-28T17:09:22.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-28T17:09:22.279+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:22.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:09:22.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:22.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e78fd1]
2026-01-28T17:09:22.281+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:09:22.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebe8b1e]
2026-01-28T17:09:22.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:22.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@495a8199]
2026-01-28T17:09:22.283+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:22.284+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:09:22.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b11edc] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:22.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:22.285+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:22.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@739398253 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:22.286+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:09:22.287+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:22.288+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:22.291+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:22.322+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-28T17:09:22.324+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3988d3]
2026-01-28T17:09:22.325+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:22.326+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-28T17:09:22.326+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:22.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:22.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b11edc]
2026-01-28T17:09:22.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:22.334+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:22.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:22.417+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-28T17:09:22.438+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2b49f6]
2026-01-28T17:09:22.459+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:22.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-28T17:09:22.465+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:23.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:09:23.698+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:09:23.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:09:23.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:09:23.704+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:09:23.727+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:09:23.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:09:23.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:09:23.705+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:09:23.708+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:09:23.741+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:09:23.709+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:09:23.740+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:09:23.742+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:23.741+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:09:23.741+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:09:23.742+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:09:23.751+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:09:23.752+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:09:23.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6189695b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:23.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:09:23.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:09:23.753+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:09:23.757+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:23.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:09:23.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:09:23.758+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6963561d] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:23.758+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:09:23.759+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:23.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:23.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b86d48f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:23.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5413920f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:23.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1594852660 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:23.767+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330281370 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:23.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1149498312 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:23.766+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212859718 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:23.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:09:23.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:09:23.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:09:23.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:09:23.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:09:23.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:09:23.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:09:23.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:09:23.843+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:09:23.844+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:09:23.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:09:23.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:09:23.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b86d48f]
2026-01-28T17:09:23.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6963561d]
2026-01-28T17:09:23.854+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6189695b]
2026-01-28T17:09:23.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5413920f]
2026-01-28T17:09:23.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:23.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:23.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:23.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:23.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:09:23.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:09:23.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:09:23.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:09:23.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:23.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:23.876+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:23.879+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:31.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:09:31.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-28T17:09:31.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:09:31.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-28T17:09:31.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:09:31.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:09:31.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-28T17:09:31.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-28T17:09:31.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:09:31.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:09:31.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-28T17:09:31.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-28T17:09:31.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:09:31.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:09:31.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-28T17:09:31.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-28T17:09:31.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:09:31.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:09:31.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-28T17:09:31.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-28T17:09:31.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:09:31.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:09:31.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-28T17:09:32.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-28T17:09:32.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:32.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:32.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:32.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:32.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122c805b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:32.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0fefc3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:32.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713f155f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:32.004+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f59b19] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:32.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@729028345 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:32.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510067030 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:32.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474230285 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:32.015+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951361977 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:32.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:09:32.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:09:32.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-28T17:09:32.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-28T17:09:32.018+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:09:32.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:09:32.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-28T17:09:32.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-28T17:09:32.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:09:32.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:09:32.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-28T17:09:32.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713f155f]
2026-01-28T17:09:32.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f59b19]
2026-01-28T17:09:32.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122c805b]
2026-01-28T17:09:32.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:32.035+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:32.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:32.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:09:32.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:09:32.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-28T17:09:32.037+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:32.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:32.068+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:32.071+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-28T17:09:32.082+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0fefc3]
2026-01-28T17:09:32.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:32.099+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-28T17:09:32.101+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:40.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/draft
2026-01-28T17:09:40.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/draft
2026-01-28T17:09:40.891+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/draft
2026-01-28T17:09:40.892+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/draft
2026-01-28T17:09:40.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/draft", parameters={}
2026-01-28T17:09:40.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpenseDraft(ExpenseReportDto)
2026-01-28T17:09:40.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-28, title=null, totalAmount=2 (truncated)...]
2026-01-28T17:09:40.896+09:00  INFO 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 지출결의서 임시 저장 요청 - drafterId: 2, currentUserId: 2
2026-01-28T17:09:40.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:40.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075069791 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:09:40.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:40.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:40.911+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:40.911+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a] from current transaction
2026-01-28T17:09:40.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:09:40.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 2(Long), 2026-01-28(LocalDate), 지출결의서 (임시저장) - 2026-01-28(String), 20000(Long), DRAFT(String), null, null, 1(Long)
2026-01-28T17:09:40.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-28T17:09:40.916+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.backend.service.ExpenseService       : 임시 저장 - 상세 항목 저장 시작 - 항목 수: 2
2026-01-28T17:09:40.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a] from current transaction
2026-01-28T17:09:40.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:09:40.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 81(Long), 출장/교통비(String), 상호명1(String), 임시저장테스트(String), 10000(Long), null, (String), 2026-01-28(LocalDate), (String), null, (String), 1(Long)
2026-01-28T17:09:40.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-28T17:09:40.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a] from current transaction
2026-01-28T17:09:40.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-28T17:09:40.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 81(Long), 식비/회식(String), 상호명1(String), 임시저장테스트(String), 10000(Long), null, (String), 2026-01-28(LocalDate), (String), null, (String), 1(Long)
2026-01-28T17:09:40.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-28T17:09:40.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.backend.service.ExpenseService       : 임시 저장 - 상세 항목 저장 완료
2026-01-28T17:09:40.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.backend.service.ExpenseService       : 임시 저장 - 결재 라인은 저장하지 않습니다.
2026-01-28T17:09:40.934+09:00  INFO 11120 --- [http-nio-8080-exec-3] c.i.backend.service.ExpenseService       : 지출결의서 임시 저장 완료 - expenseReportId: 81
2026-01-28T17:09:40.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb46a1a]
2026-01-28T17:09:40.945+09:00  INFO 11120 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 지출결의서 임시 저장 완료 - expenseReportId: 81
2026-01-28T17:09:40.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:40.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=임시 저장 성공, data=81)]
2026-01-28T17:09:40.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:41.812+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:41.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:09:41.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/81
2026-01-28T17:09:41.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-28T17:09:41.817+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/81
2026-01-28T17:09:41.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:41.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/81
2026-01-28T17:09:41.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:09:41.832+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/81
2026-01-28T17:09:41.832+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:41.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:41.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:09:41.833+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/81
2026-01-28T17:09:41.834+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:41.835+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:09:41.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/81", parameters={}
2026-01-28T17:09:41.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:41.840+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-28T17:09:41.841+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:09:41.842+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:09:41.842+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.844+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/81
2026-01-28T17:09:41.846+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:09:41.847+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-28T17:09:41.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4260950f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.848+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:09:41.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/81
2026-01-28T17:09:41.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-28T17:09:41.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e51c217] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.849+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dc57a5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.850+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/81
2026-01-28T17:09:41.851+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-28T17:09:41.852+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157318194 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:41.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991030508 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:41.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/81", parameters={}
2026-01-28T17:09:41.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-28T17:09:41.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883022724 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:41.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:41.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:41.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-28T17:09:41.860+09:00  INFO 11120 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-28T17:09:41.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:09:41.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:41.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:41.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@935803a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6321d5c4] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:41.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e51c217]
2026-01-28T17:09:41.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:41.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:09:41.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800424395 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:41.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@551843690 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:41.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4260950f]
2026-01-28T17:09:41.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dc57a5]
2026-01-28T17:09:41.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3272f62] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-28T17:09:41.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:41.869+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:41.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735936088 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:41.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:41.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a0ba8e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.874+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:09:41.874+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:41.877+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1152216018 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:41.881+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.877+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:41.878+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:41.878+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-28T17:09:41.881+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:41.882+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@935803a]
2026-01-28T17:09:41.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6321d5c4]
2026-01-28T17:09:41.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:41.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:41.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60fa27d6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-28T17:09:41.892+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789480584 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:41.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:41.896+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:41.898+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:41.898+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:41.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a0ba8e]
2026-01-28T17:09:41.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3272f62]
2026-01-28T17:09:41.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:41.908+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:41.910+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:41.911+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60fa27d6]
2026-01-28T17:09:41.911+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:41.913+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.913+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1092266795 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will be managed by Spring
2026-01-28T17:09:41.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:41.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:41.919+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.921+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.927+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509570527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:09:41.928+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:41.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:41.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:41.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc] from current transaction
2026-01-28T17:09:41.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:41.932+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:41.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec] from current transaction
2026-01-28T17:09:41.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:41.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:41.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc] from current transaction
2026-01-28T17:09:41.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:41.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:41.936+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec] from current transaction
2026-01-28T17:09:41.938+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:41.940+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:41.941+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc] from current transaction
2026-01-28T17:09:41.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:41.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 125(Long), 1(Long)
2026-01-28T17:09:41.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:41.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec] from current transaction
2026-01-28T17:09:41.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:41.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:41.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 125(Long), 1(Long)
2026-01-28T17:09:41.945+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.946+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:41.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b134ecc]
2026-01-28T17:09:41.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@337e8cec]
2026-01-28T17:09:41.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.953+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@886767375 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will be managed by Spring
2026-01-28T17:09:41.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:41.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.957+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:41.957+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1409430835 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will be managed by Spring
2026-01-28T17:09:41.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:41.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-28T17:09:41.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:41.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19] from current transaction
2026-01-28T17:09:41.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:41.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 44
2026-01-28T17:09:41.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef] from current transaction
2026-01-28T17:09:41.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:41.965+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:41.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19] from current transaction
2026-01-28T17:09:41.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:41.966+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:41.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef] from current transaction
2026-01-28T17:09:41.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:41.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:41.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19] from current transaction
2026-01-28T17:09:41.969+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:41.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 126(Long), 1(Long)
2026-01-28T17:09:41.970+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:41.971+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.973+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef] from current transaction
2026-01-28T17:09:41.974+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:41.974+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:41.975+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 126(Long), 1(Long)
2026-01-28T17:09:41.975+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.976+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbac19]
2026-01-28T17:09:41.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:41.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.977+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.978+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444e39ef]
2026-01-28T17:09:41.980+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16146443] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165991774 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:41.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:41.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad46557] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@645720245 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:41.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:41.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:41.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16146443]
2026-01-28T17:09:41.985+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b393161] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@515538489 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:41.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:41.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:41.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.987+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad46557]
2026-01-28T17:09:41.988+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.991+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13633160] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.991+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:09:41.991+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@176423046 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:41.991+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b393161]
2026-01-28T17:09:41.991+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:41.992+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.992+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:41.992+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68175ea5] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172480767 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:41.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:41.993+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:41.994+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-28T17:09:41.994+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13633160]
2026-01-28T17:09:41.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:41.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:41.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68175ea5]
2026-01-28T17:09:41.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12918c86] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:41.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:41.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@418596741 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:41.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=81, drafterId=2, r (truncated)...]
2026-01-28T17:09:41.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:41.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:41.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:42.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:42.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12918c86]
2026-01-28T17:09:42.009+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:42.009+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/81/receipts
2026-01-28T17:09:42.009+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=81, drafterId=2, r (truncated)...]
2026-01-28T17:09:42.012+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:42.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/81/receipts
2026-01-28T17:09:42.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/81/receipts
2026-01-28T17:09:42.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/81/receipts
2026-01-28T17:09:42.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/81/receipts", parameters={}
2026-01-28T17:09:42.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:09:42.024+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 81, userId: 2
2026-01-28T17:09:42.025+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.027+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3a8d2a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.031+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677301391 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:42.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:42.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:42.044+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:42.045+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3a8d2a]
2026-01-28T17:09:42.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1616b9de] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.050+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491660779 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:42.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/81/receipts
2026-01-28T17:09:42.113+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:42.116+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:42.136+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/81/receipts
2026-01-28T17:09:42.145+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/81/receipts
2026-01-28T17:09:42.218+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:42.219+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/81/receipts
2026-01-28T17:09:42.248+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1616b9de]
2026-01-28T17:09:42.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/81/receipts", parameters={}
2026-01-28T17:09:42.250+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-28T17:09:42.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4583c465] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.251+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 81, userId: 2
2026-01-28T17:09:42.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719160130 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:42.252+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:42.253+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3f484b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.254+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:42.256+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1983117006 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:42.262+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:42.269+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:42.280+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:42.282+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4583c465]
2026-01-28T17:09:42.293+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.294+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca6c4eb] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.295+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@131957750 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:42.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:42.296+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:42.297+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3f484b]
2026-01-28T17:09:42.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:42.299+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.300+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5f4f5f] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.301+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166013903 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:42.303+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-28T17:09:42.307+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:42.308+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:42.308+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca6c4eb]
2026-01-28T17:09:42.311+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.313+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6c0e1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765662188 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:42.314+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 0
2026-01-28T17:09:42.315+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:42.316+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5f4f5f]
2026-01-28T17:09:42.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 125(Long), 1(Long)
2026-01-28T17:09:42.317+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.321+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a35984e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.324+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124682208 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:42.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:42.327+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:42.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:42.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6c0e1]
2026-01-28T17:09:42.330+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.332+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f626602] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241931975 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:42.333+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:42.335+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:42.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a35984e]
2026-01-28T17:09:42.336+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 126(Long), 1(Long)
2026-01-28T17:09:42.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.337+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d24a25] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.343+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289622905 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:42.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:42.344+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:42.345+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f626602]
2026-01-28T17:09:42.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:42.346+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:42.347+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:09:42.350+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:42.351+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-28T17:09:42.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d24a25]
2026-01-28T17:09:42.365+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e1dc65a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.366+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@201013982 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:42.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:42.367+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 125(Long), 1(Long)
2026-01-28T17:09:42.396+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:42.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e1dc65a]
2026-01-28T17:09:42.398+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:42.399+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3f7a95] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:42.408+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081447006 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:42.411+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-28T17:09:42.411+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 126(Long), 1(Long)
2026-01-28T17:09:42.420+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-28T17:09:42.425+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3f7a95]
2026-01-28T17:09:42.429+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:42.430+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-28T17:09:42.432+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:46.548+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/81?userId=2
2026-01-28T17:09:46.551+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/81?userId=2
2026-01-28T17:09:46.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/81
2026-01-28T17:09:46.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/81?userId=2
2026-01-28T17:09:46.552+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/81?userId=2", parameters={masked}
2026-01-28T17:09:46.553+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-28T17:09:46.553+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 81, userId: 2
2026-01-28T17:09:46.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:46.565+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.567+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140767287 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will be managed by Spring
2026-01-28T17:09:46.568+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-28T17:09:46.569+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:46.571+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-28T17:09:46.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946] from current transaction
2026-01-28T17:09:46.578+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-28T17:09:46.579+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-28T17:09:46.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-28T17:09:46.582+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.583+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946] from current transaction
2026-01-28T17:09:46.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946] from current transaction
2026-01-28T17:09:46.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946] from current transaction
2026-01-28T17:09:46.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-28T17:09:46.585+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 81(Long), 1(Long)
2026-01-28T17:09:46.597+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-28T17:09:46.599+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.599+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.backend.service.ExpenseService       : DRAFT 상태 문서 삭제 완료 - expenseReportId: 81, userId: 2
2026-01-28T17:09:46.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.600+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28218946]
2026-01-28T17:09:46.612+09:00  INFO 11120 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 81
2026-01-28T17:09:46.613+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:46.614+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-28T17:09:46.615+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.575+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:47.577+09:00 DEBUG 11120 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:47.578+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:47.581+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:47.582+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:47.584+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-28T17:09:47.625+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:47.629+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-28T17:09:47.632+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-28T17:09:47.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:47.645+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:47.644+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:47.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:47.647+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:47.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:47.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:47.648+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:47.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-28T17:09:47.649+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:47.650+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:47.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-28T17:09:47.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:47.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:47.658+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:47.651+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:47.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:47.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-28T17:09:47.652+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:47.654+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-28T17:09:47.660+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:47.662+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:47.664+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:47.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.668+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45fcf03a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.665+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-28T17:09:47.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:47.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-28T17:09:47.666+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.667+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.679+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-28T17:09:47.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.682+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50fc1a95] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-28T17:09:47.680+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ea6b70] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.681+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f982836] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.681+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-28T17:09:47.684+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-28T17:09:47.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.696+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@167818212 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:47.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487024581 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:47.697+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f3ac51] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.698+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854476090 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:47.698+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4c2f25] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.698+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417810575 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.699+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.700+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.701+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.702+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.703+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@485938305 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50fc1a95]
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116049192 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:47.713+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f982836]
2026-01-28T17:09:47.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.714+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ea6b70]
2026-01-28T17:09:47.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45fcf03a]
2026-01-28T17:09:47.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.715+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.716+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305b01f0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.717+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7d03ea] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7612a8] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77787a6e] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.718+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620169858 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:47.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781239797 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710179837 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:47.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657072103 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:47.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.719+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.720+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.724+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.724+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.734+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305b01f0]
2026-01-28T17:09:47.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.735+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:47.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77787a6e]
2026-01-28T17:09:47.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-28T17:09:47.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f3ac51]
2026-01-28T17:09:47.736+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7612a8]
2026-01-28T17:09:47.739+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.742+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:47.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1019c3] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4c2f25]
2026-01-28T17:09:47.737+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.743+09:00 DEBUG 11120 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.744+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502586117 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:47.745+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.747+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716b242c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.761+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1589661815 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.761+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.763+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.764+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:47.754+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:47.759+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:47.760+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211c1b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:47.768+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:47.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:47.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1066648716 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:47.770+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.771+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:47.769+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:47.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:47.778+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:47.779+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:47.779+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:47.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34e7c410] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.780+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6cd223] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868278225 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:47.781+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47381402 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:47.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.782+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.783+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.784+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.785+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7d03ea]
2026-01-28T17:09:47.786+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.787+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c38f105] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.788+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1310245179 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.791+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:47.792+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:47.800+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:47.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211c1b]
2026-01-28T17:09:47.801+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1019c3]
2026-01-28T17:09:47.802+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de76c76] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de2d94] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.803+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705927701 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:47.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1768813261 wrapping com.mysql.cj.jdbc.ConnectionImpl@56d353e0] will not be managed by Spring
2026-01-28T17:09:47.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:47.806+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.807+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-28T17:09:47.808+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.809+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.809+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716b242c]
2026-01-28T17:09:47.810+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.811+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448982e4] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:47.813+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:47.814+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:47.828+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1827378205 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34e7c410]
2026-01-28T17:09:47.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6cd223]
2026-01-28T17:09:47.829+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c38f105]
2026-01-28T17:09:47.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:47.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.830+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.831+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.836+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:47.837+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea2930b] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.845+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9b7f4a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.845+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d40ecf] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.847+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888080267 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:47.847+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644767088 wrapping com.mysql.cj.jdbc.ConnectionImpl@ece593e] will not be managed by Spring
2026-01-28T17:09:47.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.848+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-28T17:09:47.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387230249 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.853+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.857+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de2d94]
2026-01-28T17:09:47.858+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de76c76]
2026-01-28T17:09:47.859+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.860+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:47.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.861+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.862+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448982e4]
2026-01-28T17:09:47.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:47.863+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ffd50d1] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.864+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.865+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.866+09:00 DEBUG 11120 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033126788 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ac983bb] will not be managed by Spring
2026-01-28T17:09:47.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.867+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea2930b]
2026-01-28T17:09:47.868+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9b7f4a]
2026-01-28T17:09:47.870+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d166b6] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.877+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-28T17:09:47.879+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.879+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d40ecf]
2026-01-28T17:09:47.880+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.882+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180832938 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.883+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.884+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-28T17:09:47.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:47.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:47.885+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44742b62] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.886+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-28T17:09:47.887+09:00 DEBUG 11120 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.888+09:00 DEBUG 11120 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.893+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.894+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112874325 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.901+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:47.895+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-28T17:09:47.899+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ffd50d1]
2026-01-28T17:09:47.902+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:47.903+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-28T17:09:47.904+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.907+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d166b6]
2026-01-28T17:09:47.909+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.910+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc9d511] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.908+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.909+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-28T17:09:47.912+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@572842504 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:47.913+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc03336] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.914+09:00 DEBUG 11120 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.915+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:47.917+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:47.918+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814828809 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:47.919+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44742b62]
2026-01-28T17:09:47.930+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.929+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-28T17:09:47.931+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d25d2bc] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.933+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-28T17:09:47.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:47.934+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483723073 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:47.935+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc9d511]
2026-01-28T17:09:47.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-28T17:09:47.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:47.937+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.938+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc03336]
2026-01-28T17:09:47.941+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0750db] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.943+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@413aeb06] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.944+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730413460 wrapping com.mysql.cj.jdbc.ConnectionImpl@63baed14] will not be managed by Spring
2026-01-28T17:09:47.942+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@771974647 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.947+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.948+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-28T17:09:47.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.949+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:47.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-28T17:09:47.950+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d25d2bc]
2026-01-28T17:09:47.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.951+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4835e6ce] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1528200518 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.954+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-28T17:09:47.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@413aeb06]
2026-01-28T17:09:47.958+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.959+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0750db]
2026-01-28T17:09:47.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:47.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.960+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.962+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae28c89] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.961+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-28T17:09:47.963+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064811142 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.967+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:47.964+09:00 DEBUG 11120 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.968+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:47.979+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4835e6ce]
2026-01-28T17:09:47.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.981+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65770fa0] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.982+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34838102 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:47.983+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:47.984+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:47.986+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:47.992+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae28c89]
2026-01-28T17:09:47.995+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:47.996+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:47.997+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7231eb8c] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:47.998+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65770fa0]
2026-01-28T17:09:47.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823061895 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:47.999+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:48.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-28T17:09:48.000+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d509049] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:48.001+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-28T17:09:48.002+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619493452 wrapping com.mysql.cj.jdbc.ConnectionImpl@80eadd4] will not be managed by Spring
2026-01-28T17:09:48.013+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:48.014+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:48.017+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-28T17:09:48.019+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7231eb8c]
2026-01-28T17:09:48.020+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-28T17:09:48.025+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b8ff8a] was not registered for synchronization because synchronization is not active
2026-01-28T17:09:48.029+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1806179162 wrapping com.mysql.cj.jdbc.ConnectionImpl@655ae87e] will not be managed by Spring
2026-01-28T17:09:48.030+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:48.032+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-28T17:09:48.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d509049]
2026-01-28T17:09:48.033+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-28T17:09:48.034+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:48.036+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:48.043+09:00 DEBUG 11120 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-28T17:09:48.049+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-28T17:09:48.052+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b8ff8a]
2026-01-28T17:09:48.053+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-28T17:09:48.058+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-28T17:09:48.061+09:00 DEBUG 11120 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
