2026-01-14T15:39:34.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:39:34.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:39:34.367+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:39:34.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f73c38]
2026-01-14T15:39:34.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:39:34.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:39:34.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f79408]
2026-01-14T15:39:34.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:39:34.389+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77df8b52] was not registered for synchronization because synchronization is not active
2026-01-14T15:39:34.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36770c64] was not registered for synchronization because synchronization is not active
2026-01-14T15:39:34.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725460333 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:39:34.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143754945 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:39:34.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:39:34.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:39:34.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:39:34.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:39:34.439+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:39:34.439+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:39:34.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77df8b52]
2026-01-14T15:39:34.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36770c64]
2026-01-14T15:39:34.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:39:34.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:39:34.457+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105bc4c7] was not registered for synchronization because synchronization is not active
2026-01-14T15:39:34.457+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbee26b] was not registered for synchronization because synchronization is not active
2026-01-14T15:39:34.458+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@458578053 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:39:34.466+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931793812 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:39:34.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:39:34.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:39:34.471+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:39:34.472+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:39:34.490+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:39:34.490+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:39:34.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbee26b]
2026-01-14T15:39:34.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105bc4c7]
2026-01-14T15:39:34.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:39:34.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:39:34.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6d46d3] was not registered for synchronization because synchronization is not active
2026-01-14T15:39:34.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156e94a] was not registered for synchronization because synchronization is not active
2026-01-14T15:39:34.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615486031 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:39:34.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340434523 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:39:34.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:39:34.540+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:39:34.541+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:39:34.541+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:39:34.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:39:34.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:39:34.553+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6d46d3]
2026-01-14T15:39:34.554+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156e94a]
2026-01-14T15:39:34.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:39:34.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:39:34.557+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:39:34.557+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:39:34.563+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:39:34.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:55.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:40:55.062+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-14T15:40:55.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-14T15:40:55.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:40:55.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:40:55.064+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/companies/pending
2026-01-14T15:40:55.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-14T15:40:55.066+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/companies
2026-01-14T15:40:55.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:40:55.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-14T15:40:55.071+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-14T15:40:55.071+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-14T15:40:55.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcb67d8] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:55.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-14T15:40:55.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-14T15:40:55.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-14T15:40:55.081+09:00  INFO 42568 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 4, companyId: 1
2026-01-14T15:40:55.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4f09b3] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:55.070+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:40:55.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:40:55.070+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:40:55.320+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:40:55.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2e4013] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:55.309+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:40:55.348+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.349+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4db3a0] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:55.310+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738219592 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:40:55.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:40:55.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:40:55.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@220381973 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:40:55.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634731885 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:40:55.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1326234317 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:40:55.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:40:55.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:40:55.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:40:55.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 4(Long), PENDING(String)
2026-01-14T15:40:55.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:40:55.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-14T15:40:55.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:40:55.420+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4f09b3]
2026-01-14T15:40:55.423+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.421+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-14T15:40:55.421+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-14T15:40:55.422+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:40:55.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d0794e] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:55.427+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4db3a0]
2026-01-14T15:40:55.427+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcb67d8]
2026-01-14T15:40:55.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2e4013]
2026-01-14T15:40:55.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@745253809 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:40:55.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:55.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:55.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.434+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:40:55.434+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=4, userId=4, companyId=1 (truncated)...]
2026-01-14T15:40:55.434+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:40:55.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa594f2] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:55.436+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-14T15:40:55.439+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:55.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:55.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@254505052 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:40:55.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:40:55.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-14T15:40:55.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:40:55.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d0794e]
2026-01-14T15:40:55.498+09:00  INFO 42568 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 4, companyId: 1, role: ACCOUNTANT
2026-01-14T15:40:55.499+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:55.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=4, username=test_user3, passw (truncated)...]
2026-01-14T15:40:55.526+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:40:55.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:55.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa594f2]
2026-01-14T15:40:55.530+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:55.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:40:55.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:55.638+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-14T15:40:55.665+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-14T15:40:55.688+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-14T15:40:55.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-14T15:40:55.789+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-14T15:40:55.803+09:00  INFO 42568 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 4, companyId: 1
2026-01-14T15:40:55.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:55.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dcf6fed] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:56.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879436845 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:40:56.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:40:56.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:40:56.261+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:40:56.274+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dcf6fed]
2026-01-14T15:40:56.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:56.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e5d0bc] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:56.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953973403 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:40:56.492+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:40:56.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-14T15:40:56.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-14T15:40:56.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e5d0bc]
2026-01-14T15:40:56.579+09:00  INFO 42568 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 4, companyId: 1, role: ACCOUNTANT
2026-01-14T15:40:56.579+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:56.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=4, username=test_user3, passw (truncated)...]
2026-01-14T15:40:56.720+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:58.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:40:58.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-14T15:40:58.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:40:58.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:40:58.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-14T15:40:58.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:40:58.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-14T15:40:58.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:40:58.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:58.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15746899] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:58.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-14T15:40:58.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-14T15:40:58.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:58.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47388d8e] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:58.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588815458 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:40:58.222+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:40:58.229+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:40:58.238+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@227752488 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:40:58.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-14T15:40:58.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:40:58.262+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-14T15:40:58.263+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:40:58.263+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47388d8e]
2026-01-14T15:40:58.264+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15746899]
2026-01-14T15:40:58.265+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:58.265+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:58.266+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-14T15:40:58.267+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@636a8c4e] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:58.267+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:58.268+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752366576 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:40:58.268+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:40:58.269+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:40:58.282+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-14T15:40:58.285+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:40:58.288+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@636a8c4e]
2026-01-14T15:40:58.293+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:58.286+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-14T15:40:58.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:40:58.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-14T15:40:58.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:58.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-14T15:40:58.298+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-14T15:40:58.299+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:58.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194c65ee] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:58.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007054107 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:40:58.311+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-14T15:40:58.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:40:58.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-14T15:40:58.315+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194c65ee]
2026-01-14T15:40:58.316+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:58.316+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-14T15:40:58.317+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:59.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-14T15:40:59.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:40:59.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-14T15:40:59.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:40:59.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-14T15:40:59.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:40:59.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-14T15:40:59.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:40:59.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-14T15:40:59.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:40:59.486+09:00  INFO 42568 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-14T15:40:59.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:59.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:59.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de051c6] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:59.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@116364fe] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:59.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1928904413 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:40:59.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1280064004 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:40:59.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:40:59.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-14T15:40:59.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:40:59.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:40:59.505+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-14T15:40:59.506+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@116364fe]
2026-01-14T15:40:59.516+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:59.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-14T15:40:59.518+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:59.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:40:59.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-14T15:40:59.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de051c6]
2026-01-14T15:40:59.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:59.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-14T15:40:59.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5550e9] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:59.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-14T15:40:59.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988698252 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:40:59.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-14T15:40:59.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:40:59.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-14T15:40:59.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:40:59.549+09:00  INFO 42568 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-14T15:40:59.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:40:59.552+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dc6172] was not registered for synchronization because synchronization is not active
2026-01-14T15:40:59.554+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:40:59.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5550e9]
2026-01-14T15:40:59.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:59.556+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:40:59.557+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@575693600 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:40:59.559+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:40:59.561+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-14T15:40:59.563+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:40:59.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-14T15:40:59.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dc6172]
2026-01-14T15:40:59.587+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:40:59.587+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-14T15:40:59.588+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:00.447+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:00.447+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers
2026-01-14T15:41:00.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:00.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:00.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:00.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers
2026-01-14T15:41:00.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:00.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers
2026-01-14T15:41:00.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:00.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers", parameters={}
2026-01-14T15:41:00.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc64c7a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:00.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-14T15:41:00.452+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:41:00.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657422198 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:00.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:00.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:41:00.456+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:00.461+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:00.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68299e87] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:00.469+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:00.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc64c7a]
2026-01-14T15:41:00.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:00.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291c4781] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:00.471+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683175746 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:00.471+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471827253 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:00.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-14T15:41:00.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:00.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:00.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:00.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:00.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-01-14T15:41:00.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291c4781]
2026-01-14T15:41:00.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68299e87]
2026-01-14T15:41:00.494+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:00.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:00.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:00.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=7, userId=4, approve (truncated)...]
2026-01-14T15:41:00.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:00.503+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:00.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers
2026-01-14T15:41:00.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-14T15:41:00.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers
2026-01-14T15:41:00.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/approvers
2026-01-14T15:41:00.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers
2026-01-14T15:41:00.525+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-14T15:41:00.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers", parameters={}
2026-01-14T15:41:00.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-14T15:41:00.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-14T15:41:00.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-14T15:41:00.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:41:00.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:00.530+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:41:00.530+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470e2a54] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:00.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@949051961 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:00.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-14T15:41:00.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:00.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-14T15:41:00.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1f734f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:00.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736379629 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:00.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-14T15:41:00.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-14T15:41:00.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470e2a54]
2026-01-14T15:41:00.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:00.538+09:00  INFO 42568 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-14T15:41:00.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:00.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-14T15:41:00.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:00.554+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-01-14T15:41:00.565+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1f734f]
2026-01-14T15:41:00.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:00.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=7, userId=4, approve (truncated)...]
2026-01-14T15:41:00.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:00.599+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-14T15:41:00.602+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/approvers
2026-01-14T15:41:00.603+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-14T15:41:00.604+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-14T15:41:00.604+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-14T15:41:00.605+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:00.605+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ac234a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:00.605+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321781418 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:00.606+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-14T15:41:00.611+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-14T15:41:00.615+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-14T15:41:00.615+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ac234a]
2026-01-14T15:41:00.617+09:00  INFO 42568 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-14T15:41:00.618+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:00.619+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-14T15:41:00.621+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:01.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-14T15:41:01.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:01.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expense-categories/merged
2026-01-14T15:41:01.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:01.406+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-14T15:41:01.406+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:01.406+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-14T15:41:01.406+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:01.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-14T15:41:01.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:01.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:41:01.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:01.409+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:41:01.409+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf24150] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:01.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:01.412+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11947afc] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:01.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107435862 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:01.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693239546 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:01.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:01.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-14T15:41:01.420+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:01.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:41:01.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:01.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-14T15:41:01.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf24150]
2026-01-14T15:41:01.449+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11947afc]
2026-01-14T15:41:01.449+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:01.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:01.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc8d863] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:01.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-14T15:41:01.452+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1240478136 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:01.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:01.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:01.465+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:01.467+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-14T15:41:01.471+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expense-categories/merged
2026-01-14T15:41:01.472+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-14T15:41:01.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-14T15:41:01.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:01.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-14T15:41:01.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc8d863]
2026-01-14T15:41:01.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:41:01.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:01.481+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:41:01.481+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:01.481+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:01.481+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf3ba7d] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:01.482+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:01.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532538827 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:01.492+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-14T15:41:01.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:41:01.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-14T15:41:01.503+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf3ba7d]
2026-01-14T15:41:01.504+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:01.504+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-14T15:41:01.507+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:02.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:02.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:02.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:02.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:02.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:02.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:02.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:02.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:02.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:02.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:02.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:02.330+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.330+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:02.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b5b9741] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61028837] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbb9c19] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.337+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1295272657 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.338+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137415366 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.338+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@579478306 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.338+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.342+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.342+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:02.343+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.344+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.344+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:02.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61028837]
2026-01-14T15:41:02.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbb9c19]
2026-01-14T15:41:02.348+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d864d8] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:02.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1900682440 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b5b9741]
2026-01-14T15:41:02.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@983df32] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.353+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040254814 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30641fca] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.359+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415403399 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.368+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.369+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d864d8]
2026-01-14T15:41:02.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b022e60] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30641fca]
2026-01-14T15:41:02.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@983df32]
2026-01-14T15:41:02.372+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967735676 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.372+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.372+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.373+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.373+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:02.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e3d59] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.377+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.377+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.379+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375588885 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.389+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:02.392+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.392+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:02.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:02.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:02.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b022e60]
2026-01-14T15:41:02.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:02.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:02.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739c3f62] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e3d59]
2026-01-14T15:41:02.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552412dc] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160919135 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14528238] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.404+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682313502 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1159464880 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:02.406+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.409+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:02.409+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.409+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.412+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:02.413+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739c3f62]
2026-01-14T15:41:02.413+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e92844] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14528238]
2026-01-14T15:41:02.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1427929332 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce00858] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:02.416+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1008930494 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552412dc]
2026-01-14T15:41:02.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:41:02.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a2260d0] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.420+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.421+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1583143219 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:02.422+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.422+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e92844]
2026-01-14T15:41:02.423+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60e8ea2c] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:41:02.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858946429 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce00858]
2026-01-14T15:41:02.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e15b777] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1653331493 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.438+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.438+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.439+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a2260d0]
2026-01-14T15:41:02.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.446+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.447+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:02.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.449+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60e8ea2c]
2026-01-14T15:41:02.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.456+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:02.459+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6758e6f3] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.460+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e15b777]
2026-01-14T15:41:02.461+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:02.461+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086769598 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.461+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.462+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67577b20] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.462+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:02.462+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@336250546 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:02.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.464+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.465+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:02.466+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.466+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:02.467+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.469+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385b651b] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.469+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.469+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246527182 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6758e6f3]
2026-01-14T15:41:02.471+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67577b20]
2026-01-14T15:41:02.472+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:02.472+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.472+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.477+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:02.477+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e82f571] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e93f0f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1053681452 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033962729 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:02.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:41:02.481+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385b651b]
2026-01-14T15:41:02.482+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.483+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e4c1fdd] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:41:02.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306313906 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e82f571]
2026-01-14T15:41:02.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e93f0f]
2026-01-14T15:41:02.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a71638] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7305e4ea] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.487+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@562517792 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:02.487+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528006338 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.491+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e4c1fdd]
2026-01-14T15:41:02.494+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.494+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.494+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:02.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a71638]
2026-01-14T15:41:02.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7305e4ea]
2026-01-14T15:41:02.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:02.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:02.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.503+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.508+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.509+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:02.512+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:02.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:02.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:02.514+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:02.515+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:02.514+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:02.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:02.521+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7abb0f9e] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.521+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@994887152 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae7a511] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.524+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@489547481 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.523+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.533+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.542+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.544+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:02.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7abb0f9e]
2026-01-14T15:41:02.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:02.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:02.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10090d12] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.550+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:02.550+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845948786 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:02.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.552+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.552+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.552+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae7a511]
2026-01-14T15:41:02.554+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.554+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1e3b75] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.553+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eaa1ab9] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.554+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053558506 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.556+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@760563183 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:02.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10090d12]
2026-01-14T15:41:02.558+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.559+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:02.559+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.561+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.562+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:02.562+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c1aa1] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.563+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1e3b75]
2026-01-14T15:41:02.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@900066189 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe2fdfc] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:02.571+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134273766 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.574+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eaa1ab9]
2026-01-14T15:41:02.575+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:02.575+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.577+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.577+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c1aa1]
2026-01-14T15:41:02.581+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d674ffc] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.585+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333901627 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:02.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@193038f5] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343203936 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.595+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.595+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.597+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.598+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe2fdfc]
2026-01-14T15:41:02.599+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.600+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.600+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d674ffc]
2026-01-14T15:41:02.600+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789c732a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.601+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.602+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.603+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284785880 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.604+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@193038f5]
2026-01-14T15:41:02.605+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:02.605+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.605+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.606+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.612+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.614+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b73a23] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.616+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2027438416 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.619+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.617+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:02.621+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:41:02.626+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:02.630+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:02.630+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:02.633+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789c732a]
2026-01-14T15:41:02.635+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:02.637+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:41:02.638+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.639+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.639+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b73a23]
2026-01-14T15:41:02.647+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bb2ba4] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.648+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397f5d1] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.648+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.649+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749013850 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.649+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797e08d0] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.651+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.652+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541152254 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.652+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117827867 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:02.654+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.654+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.654+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:02.658+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.662+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T15:41:02.662+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bb2ba4]
2026-01-14T15:41:02.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.665+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23db230d] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.665+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:02.665+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 10
2026-01-14T15:41:02.666+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305725657 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.666+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797e08d0]
2026-01-14T15:41:02.666+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397f5d1]
2026-01-14T15:41:02.666+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.667+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.667+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.668+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.668+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d68468] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.669+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d84295] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.670+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055335114 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.673+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538843600 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:02.675+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.676+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.677+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.677+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.680+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.680+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.680+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.680+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23db230d]
2026-01-14T15:41:02.681+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d84295]
2026-01-14T15:41:02.681+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d68468]
2026-01-14T15:41:02.683+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.685+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.685+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.685+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33de9f90] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.685+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=45, drafterId= (truncated)...]
2026-01-14T15:41:02.686+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4449acd2] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.688+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239876013 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.689+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.691+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203738103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.694+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.696+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.696+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.697+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:41:02.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:41:02.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33de9f90]
2026-01-14T15:41:02.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4449acd2]
2026-01-14T15:41:02.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1428fc09] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e96c7fa] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397609219 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202773446 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:02.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.714+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.714+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e96c7fa]
2026-01-14T15:41:02.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1428fc09]
2026-01-14T15:41:02.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.720+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.720+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:02.721+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340bca61] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.721+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.722+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1729146973 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340bca61]
2026-01-14T15:41:02.746+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.750+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:02.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.761+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:02.764+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:02.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:02.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278826e2] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.770+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115230284 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.770+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.771+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.776+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278826e2]
2026-01-14T15:41:02.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.780+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430d9c61] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.782+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877226760 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.785+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.785+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.787+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.787+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430d9c61]
2026-01-14T15:41:02.787+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.787+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea55487] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.788+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@837041574 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.789+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.791+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.797+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.798+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea55487]
2026-01-14T15:41:02.798+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.798+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3726787] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@935795202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3726787]
2026-01-14T15:41:02.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68605777] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.802+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017352611 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.802+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.806+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68605777]
2026-01-14T15:41:02.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.809+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20edcb89] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.809+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1255996172 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.810+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.812+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20edcb89]
2026-01-14T15:41:02.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51b8824] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1273281165 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.820+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51b8824]
2026-01-14T15:41:02.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.823+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c87faf2] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.826+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426328046 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.827+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.827+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c87faf2]
2026-01-14T15:41:02.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fb5400] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@127432711 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:02.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.833+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.834+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.835+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fb5400]
2026-01-14T15:41:02.835+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:02.836+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:02.837+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:02.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.853+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:02.853+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T15:41:02.854+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:02.855+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:02.856+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1bed79] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.871+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140222751 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.887+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1bed79]
2026-01-14T15:41:02.887+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.888+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@99f2769] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.893+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@962552582 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.894+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.894+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.901+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.901+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@99f2769]
2026-01-14T15:41:02.902+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.904+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2547ed0b] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.906+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1435710117 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.907+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.910+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:02.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:02.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2547ed0b]
2026-01-14T15:41:02.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4a4137] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1191170048 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:02.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:02.922+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:02.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4a4137]
2026-01-14T15:41:02.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce71d58] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@581607946 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.932+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:02.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:02.953+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:02.962+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce71d58]
2026-01-14T15:41:02.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:02.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edfc866] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:02.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@717627192 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:02.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:02.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:03.003+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T15:41:03.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edfc866]
2026-01-14T15:41:03.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.009+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd889c7] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.009+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1870981282 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:03.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:03.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:03.016+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:03.017+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd889c7]
2026-01-14T15:41:03.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7239060b] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423903034 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:03.019+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:41:03.022+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T15:41:03.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T15:41:03.054+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7239060b]
2026-01-14T15:41:03.054+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbcae69] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378535083 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:03.061+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:03.062+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T15:41:03.072+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:03.085+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbcae69]
2026-01-14T15:41:03.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:03.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:03.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:03.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:03.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:41:03.424+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T15:41:03.425+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:03.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:03.422+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:03.424+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T15:41:03.425+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:03.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T15:41:03.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T15:41:03.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:41:03.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T15:41:03.427+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:03.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:03.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T15:41:03.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4bcf0f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.427+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:03.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:03.427+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T15:41:03.436+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T15:41:03.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T15:41:03.438+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.438+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.439+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671f3e86] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.446+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:03.446+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694384463 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:03.446+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d13ed8d] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:03.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:03.457+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@369a9d82] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:03.458+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T15:41:03.468+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@828929158 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:03.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T15:41:03.471+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T15:41:03.477+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@815804989 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:03.477+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203684588 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:03.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T15:41:03.482+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:41:03.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:03.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T15:41:03.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:03.494+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671f3e86]
2026-01-14T15:41:03.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:03.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T15:41:03.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T15:41:03.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4bcf0f]
2026-01-14T15:41:03.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:03.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:03.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T15:41:03.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T15:41:03.509+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T15:41:03.511+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d13ed8d]
2026-01-14T15:41:03.511+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@369a9d82]
2026-01-14T15:41:03.512+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:03.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:03.514+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:03.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=312000, totalCou (truncated)...]
2026-01-14T15:41:03.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=8000 (truncated)...]
2026-01-14T15:41:03.518+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:03.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:03.669+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-14T15:41:03.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-14T15:41:03.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-14T15:41:03.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-14T15:41:03.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-14T15:41:03.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI0IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-14T15:41:03.703+09:00  INFO 42568 --- [http-nio-8080-exec-9] SECURITY                                 : LOGOUT userId=4
2026-01-14T15:41:03.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:03.704+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-14T15:41:03.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:06.392+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-14T15:41:06.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-14T15:41:06.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-14T15:41:06.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-14T15:41:06.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-14T15:41:06.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-01-14T15:41:06.397+09:00  INFO 42568 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-01-14T15:41:06.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e5101c] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@560490251 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:06.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-14T15:41:06.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-01-14T15:41:06.404+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-14T15:41:06.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e5101c]
2026-01-14T15:41:06.487+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ec3dad] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681327255 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:06.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:06.490+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:06.491+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:06.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ec3dad]
2026-01-14T15:41:06.493+09:00  INFO 42568 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1
2026-01-14T15:41:06.494+09:00  INFO 42568 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=12 username=test_tax role=TAX_ACCOUNTANT
2026-01-14T15:41:06.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:06.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=12, username=test_tax, password= (truncated)...]
2026-01-14T15:41:06.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:06.815+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T15:41:06.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-14T15:41:06.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T15:41:06.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T15:41:06.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T15:41:06.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.820+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74af150f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1298204611 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:06.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T15:41:06.838+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 12(Long)
2026-01-14T15:41:06.846+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-14T15:41:06.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74af150f]
2026-01-14T15:41:06.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:06.852+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T15:41:06.888+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:06.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:06.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:06.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:06.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.936+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:06.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:06.937+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.938+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:06.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:06.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.955+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:06.957+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:06.963+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:06.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:06.975+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:06.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:06.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.970+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:06.971+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:06.977+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:06.977+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:06.977+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:06.977+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:06.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:06.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:06.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:06.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:06.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:06.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f9a345] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.989+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76378942 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:06.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:06.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47db518f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.987+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70adf3c8] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.988+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:06.995+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:06.997+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d48b63] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:06.997+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:06.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:06.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62158d9c] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1946440749 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:07.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773893370 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:07.004+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.004+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465127860 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.004+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:07.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936474051 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:07.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:07.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c07f1c6] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.009+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:41:07.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:07.012+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:07.013+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-14T15:41:07.013+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f9a345]
2026-01-14T15:41:07.017+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.021+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.021+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c77b3c9] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897882072 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538563008 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:41:07.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:07.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:07.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:07.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47db518f]
2026-01-14T15:41:07.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70adf3c8]
2026-01-14T15:41:07.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d48b63]
2026-01-14T15:41:07.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.036+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:07.037+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.038+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:41:07.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62158d9c]
2026-01-14T15:41:07.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b59454] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:07.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598426227 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:07.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.058+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=13, pendingCoun (truncated)...]
2026-01-14T15:41:07.061+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:07.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-14T15:41:07.071+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.071+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-14T15:41:07.072+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:07.074+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c77b3c9]
2026-01-14T15:41:07.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c07f1c6]
2026-01-14T15:41:07.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:07.089+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:07.091+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:07.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:07.089+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:07.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-14T15:41:07.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:07.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a4123f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b59454]
2026-01-14T15:41:07.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:07.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.097+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.097+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890320953 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:07.103+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.104+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.105+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:07.105+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:07.106+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=교통비, totalAmount (truncated)...]
2026-01-14T15:41:07.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:07.107+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.108+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:07.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.114+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.118+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aeb00ac] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.119+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.120+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2608752f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.121+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.127+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.128+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@551129938 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:07.128+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661173553 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:07.130+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:07.137+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:07.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:07.133+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.136+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:07.137+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ae9176] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.138+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:07.139+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-14T15:41:07.141+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.142+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a4123f]
2026-01-14T15:41:07.142+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@996734505 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:07.145+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.145+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.146+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:41:07.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:41:07.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:07.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ec0ae8] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c32127a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aeb00ac]
2026-01-14T15:41:07.153+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2608752f]
2026-01-14T15:41:07.153+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927863616 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.155+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.155+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@192786095 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:07.156+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.158+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.158+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:07.165+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ae9176]
2026-01-14T15:41:07.163+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.163+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efba494] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.164+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:07.164+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:41:07.165+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:07.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343034282 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:07.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:07.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.171+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.172+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=13, pendingCoun (truncated)...]
2026-01-14T15:41:07.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.179+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:07.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:07.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:07.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ec0ae8]
2026-01-14T15:41:07.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:07.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3815db7c] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:07.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462237148 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:07.216+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-14T15:41:07.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:07.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c32127a]
2026-01-14T15:41:07.223+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:07.226+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f79dd2a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.228+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:07.229+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@887128275 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:07.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efba494]
2026-01-14T15:41:07.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-14T15:41:07.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:07.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.232+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.236+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-14T15:41:07.239+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f06e6f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911333793 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:07.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:07.250+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-14T15:41:07.260+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:07.260+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:07.260+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:41:07.263+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f06e6f]
2026-01-14T15:41:07.264+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3815db7c]
2026-01-14T15:41:07.264+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f79dd2a]
2026-01-14T15:41:07.264+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.265+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.265+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.267+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=교통비, totalAmount (truncated)...]
2026-01-14T15:41:07.267+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6096c2fd] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.268+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:41:07.269+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.270+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1993223080 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.271+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.280+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:07.281+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.294+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:07.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:07.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:07.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:07.298+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1c8176] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.301+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246028694 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:07.305+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.306+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-14T15:41:07.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6096c2fd]
2026-01-14T15:41:07.308+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.309+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749d48aa] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@575340014 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.318+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.318+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.319+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:41:07.319+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1c8176]
2026-01-14T15:41:07.320+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.321+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:41:07.321+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.321+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.321+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749d48aa]
2026-01-14T15:41:07.333+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.334+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:07.335+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.336+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.338+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:07.345+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.345+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.345+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:07.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f62223d] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498894970 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f62223d]
2026-01-14T15:41:07.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8f8172] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309476116 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8f8172]
2026-01-14T15:41:07.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368285e7] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1449526868 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.356+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:07.359+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:07.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:07.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.372+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368285e7]
2026-01-14T15:41:07.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.376+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:07.377+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.379+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.379+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:07.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:07.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a07fe98] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:07.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.381+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.381+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@940113282 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.381+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:07.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:07.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.383+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.384+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:07.384+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:07.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:07.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.386+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.386+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5db474] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.388+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a07fe98]
2026-01-14T15:41:07.391+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.393+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24bf7148] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1335959827 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:07.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d4ea41] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a52f9f8] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17651391 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:07.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:07.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b12124] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219175801 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474814676 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:07.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332933861 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:41:07.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:07.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:07.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:07.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:07.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:07.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:07.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:07.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24bf7148]
2026-01-14T15:41:07.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5db474]
2026-01-14T15:41:07.404+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.404+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:07.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-14T15:41:07.406+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:07.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=13, pendingCoun (truncated)...]
2026-01-14T15:41:07.413+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:07.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d4ea41]
2026-01-14T15:41:07.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a52f9f8]
2026-01-14T15:41:07.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b12124]
2026-01-14T15:41:07.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-14T15:41:07.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@254ff1ad] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@268b9db9] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.420+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787199911 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.421+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:07.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573400653 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:07.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:07.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:07.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:07.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-14T15:41:07.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:07.436+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.438+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.440+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:07.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:07.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.449+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:07.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.450+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@268b9db9]
2026-01-14T15:41:07.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@254ff1ad]
2026-01-14T15:41:07.452+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.453+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.453+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66404fa3] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.453+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.456+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b02ee07] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.459+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179334174 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:07.454+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707604691 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:07.455+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a68a156] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.456+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=교통비, totalAmount (truncated)...]
2026-01-14T15:41:07.461+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:07.462+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac6da7f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:41:07.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@16027127 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.464+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.464+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.465+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541917312 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:07.470+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:07.472+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.467+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.468+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.478+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.479+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:07.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:07.487+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:07.487+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-14T15:41:07.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.488+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66404fa3]
2026-01-14T15:41:07.489+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b02ee07]
2026-01-14T15:41:07.491+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:07.491+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac6da7f]
2026-01-14T15:41:07.491+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a68a156]
2026-01-14T15:41:07.492+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:07.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:07.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.495+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=13, pendingCoun (truncated)...]
2026-01-14T15:41:07.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.498+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.499+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-14T15:41:07.499+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:07.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.504+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.504+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.505+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.515+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26b77bf] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T15:41:07.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@562579198 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:07.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:07.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:41:07.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:07.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59260ab4] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26b77bf]
2026-01-14T15:41:07.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205911842 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.538+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6030454a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.540+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960430204 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.542+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:07.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-14T15:41:07.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59260ab4]
2026-01-14T15:41:07.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:07.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67b093be] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6030454a]
2026-01-14T15:41:07.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246044246 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.550+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=교통비, totalAmount (truncated)...]
2026-01-14T15:41:07.550+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.550+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.552+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.553+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67b093be]
2026-01-14T15:41:07.553+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.553+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a8ad224] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432309160 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.555+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:07.561+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:07.564+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:07.564+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a8ad224]
2026-01-14T15:41:07.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1925600f] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898800381 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.569+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.569+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.571+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1925600f]
2026-01-14T15:41:07.571+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.571+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec18874] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.572+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086055099 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.572+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:41:07.576+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:41:07.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:41:07.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec18874]
2026-01-14T15:41:07.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6149ee8a] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.581+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@587815167 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.581+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.581+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.582+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.583+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6149ee8a]
2026-01-14T15:41:07.583+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.583+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ad75d5] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222225044 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:07.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:41:07.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-14T15:41:07.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:41:07.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ad75d5]
2026-01-14T15:41:07.587+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.587+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:41:07.588+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.873+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.874+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:07.875+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.875+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:07.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:07.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:07.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:07.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-14T15:41:07.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:41:07.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:07.886+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:41:07.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:07.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:07.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:07.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@772f8744] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.901+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.902+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.902+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684035544 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:07.904+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:41:07.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:07.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.905+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.906+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.911+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.912+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc582a6] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.913+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a0a347] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.913+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e82603] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.914+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453733822 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:07.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618662066 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:07.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723428339 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:07.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:07.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:07.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:07.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:07.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.920+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:07.921+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:41:07.921+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@772f8744]
2026-01-14T15:41:07.925+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=13, pendingCoun (truncated)...]
2026-01-14T15:41:07.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:07.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:07.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:07.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-14T15:41:07.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc582a6]
2026-01-14T15:41:07.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a0a347]
2026-01-14T15:41:07.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e82603]
2026-01-14T15:41:07.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:07.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:07.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:07.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7361e36c] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:07.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-14T15:41:07.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:08.025+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262655196 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:08.025+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:08.026+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:08.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-14T15:41:08.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:08.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7361e36c]
2026-01-14T15:41:08.054+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:08.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=교통비, totalAmount (truncated)...]
2026-01-14T15:41:08.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:09.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-14T15:41:09.813+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-14T15:41:09.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:09.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.825+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-14T15:41:09.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-14T15:41:09.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-14T15:41:09.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:09.823+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-14T15:41:09.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:09.836+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:09.841+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.843+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-14T15:41:09.844+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-14T15:41:09.846+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.847+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:41:09.847+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:41:09.849+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:41:09.849+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:09.853+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.854+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:41:09.855+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:09.857+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:09.858+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:09.859+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.859+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:41:09.862+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:41:09.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:41:09.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:09.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:09.864+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:41:09.864+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:41:09.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:41:09.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:09.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:41:09.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:41:09.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:09.871+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:09.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:09.870+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:09.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.870+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:09.871+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.872+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.872+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c23b3d] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:09.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:09.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:09.947+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:09.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:09.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bb45e5] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:09.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff70dcc] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dff66a7] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618239226 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:10.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6149700e] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.004+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:41:10.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495587568 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:10.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242496874 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:10.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912673875 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:10.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847572186 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:10.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-14T15:41:10.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:41:10.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:10.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:10.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:10.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:41:10.016+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.022+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:10.024+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:41:10.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c23b3d]
2026-01-14T15:41:10.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:10.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:41:10.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:41:10.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:10.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:10.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bb45e5]
2026-01-14T15:41:10.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dff66a7]
2026-01-14T15:41:10.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6149700e]
2026-01-14T15:41:10.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff70dcc]
2026-01-14T15:41:10.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.054+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:41:10.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:10.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:41:10.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.059+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69253787] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.059+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.061+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629595765 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:10.062+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:10.062+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:41:10.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:41:10.064+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:10.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:41:10.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:41:10.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:10.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:10.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:41:10.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:41:10.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:41:10.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69253787]
2026-01-14T15:41:10.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:10.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:10.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:41:10.085+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:10.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:41:10.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25099692] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.105+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450158964 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:10.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:10.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4502cb54] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.118+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.119+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:10.121+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:10.122+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5324eddc] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.126+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:10.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@939363660 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:10.130+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:10.130+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:41:10.132+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:10.133+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:41:10.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610954396 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:41:10.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:10.136+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.137+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:41:10.138+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.139+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.139+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25099692]
2026-01-14T15:41:10.139+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:10.139+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa1aa2c] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.142+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5324eddc]
2026-01-14T15:41:10.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602444421 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:10.146+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:10.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:41:10.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.151+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:10.151+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4502cb54]
2026-01-14T15:41:10.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.155+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:41:10.159+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:10.160+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.161+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.163+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:10.165+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.165+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:41:10.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:41:10.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.186+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:10.186+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:10.186+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.186+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:41:10.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:10.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:41:10.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:41:10.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:41:10.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa1aa2c]
2026-01-14T15:41:10.188+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:41:10.188+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:10.188+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:10.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:10.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2494a8c5] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1444320945 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:10.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:10.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b66618e] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35d98308] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:41:10.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72aec776] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236755815 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:10.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1015757276 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:10.204+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:10.204+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656924748 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:41:10.204+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:10.205+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:41:10.208+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:10.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:41:10.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:10.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2494a8c5]
2026-01-14T15:41:10.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35d98308]
2026-01-14T15:41:10.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:41:10.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:10.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:41:10.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:10.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b66618e]
2026-01-14T15:41:10.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72aec776]
2026-01-14T15:41:10.226+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:10.222+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:41:10.222+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.228+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:41:10.229+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:10.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:41:10.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:41:10.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:10.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:41:10.232+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:41:10.234+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.236+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:10.236+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:41:10.244+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:41:10.238+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:41:10.239+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.242+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:10.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:41:10.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:41:10.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:41:10.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:41:10.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.253+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2241114d] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.250+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:41:10.250+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:41:10.253+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.254+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343467833 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:10.260+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:41:10.255+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.256+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.257+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181cf841] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.262+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.262+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.266+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.268+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14808737 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:10.269+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.270+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.270+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:10.281+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:10.271+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fb37656] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.271+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36be79b2] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.284+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795536680 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:41:10.287+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600832753 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:41:10.288+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:41:10.287+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:41:10.291+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:41:10.293+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:41:10.293+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:10.294+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:41:10.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181cf841]
2026-01-14T15:41:10.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2241114d]
2026-01-14T15:41:10.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16bef7d2] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:41:10.299+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763695540 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:41:10.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:41:10.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:41:10.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:10.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36be79b2]
2026-01-14T15:41:10.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fb37656]
2026-01-14T15:41:10.304+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:41:10.304+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.305+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.305+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:41:10.306+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:41:10.306+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.311+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.317+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:10.318+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16bef7d2]
2026-01-14T15:41:10.319+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.320+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:41:10.320+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:41:10.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:10.344+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:41:10.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:41:10.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:41:10.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:41:10.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.361+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:41:10.363+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.363+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275a8936] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1399114252 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:10.367+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:41:10.368+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:41:10.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:41:10.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275a8936]
2026-01-14T15:41:10.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:41:10.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5023b0c4] was not registered for synchronization because synchronization is not active
2026-01-14T15:41:10.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@600019151 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:41:10.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:41:10.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:41:10.377+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:41:10.378+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5023b0c4]
2026-01-14T15:41:10.379+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:41:10.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:41:10.383+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:01.836+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:42:01.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:42:01.837+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:42:01.851+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:42:01.840+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:42:01.841+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:42:01.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:42:01.851+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:42:01.852+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:42:01.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:42:01.853+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:42:01.900+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:42:01.914+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:42:01.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:42:01.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:42:01.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:42:01.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:42:01.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:42:01.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:42:01.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:42:01.936+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.937+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.944+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.946+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:01.945+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.945+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:01.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d65b3d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:01.946+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:01.947+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21b5646e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:01.948+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:01.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffe0a0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:01.952+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:01.953+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e896356] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:01.958+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203836752 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:01.963+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:42:01.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031785299 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:01.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034806663 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:01.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676484448 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:01.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:42:01.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:42:01.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:01.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:42:01.973+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:42:01.977+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:42:01.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:42:01.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:42:01.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:42:01.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:42:01.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:42:01.991+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d65b3d]
2026-01-14T15:42:01.991+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e896356]
2026-01-14T15:42:01.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffe0a0]
2026-01-14T15:42:01.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21b5646e]
2026-01-14T15:42:01.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:01.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:01.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:01.997+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:01.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:42:01.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:42:01.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:42:01.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346d5704] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:02.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@122139376 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:02.003+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:42:02.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:42:02.024+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:42:02.026+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:42:02.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:42:02.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:42:02.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:42:02.036+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:42:02.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:42:02.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:42:02.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:42:02.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:42:02.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:42:02.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:42:02.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:42:02.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:42:02.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:42:02.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:42:02.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346d5704]
2026-01-14T15:42:02.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:02.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.104+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:02.104+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:02.107+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:42:02.108+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:02.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbfdb92] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:02.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0c0722] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:02.112+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.112+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e06da8] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:02.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129772847 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:02.137+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:42:02.141+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:42:02.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:42:02.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:42:02.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:42:02.151+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:42:02.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:42:02.155+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637521484 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:02.159+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@562259517 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:02.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:42:02.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:42:02.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:42:02.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:42:02.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:02.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:42:02.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e06da8]
2026-01-14T15:42:02.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:02.205+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:42:02.208+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:02.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5b3c78] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:02.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0c0722]
2026-01-14T15:42:02.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:42:02.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756293219 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:02.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:02.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:02.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:42:02.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:42:02.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.238+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:42:02.240+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:42:02.245+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbfdb92]
2026-01-14T15:42:02.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5b3c78]
2026-01-14T15:42:02.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:02.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:02.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:42:02.247+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bdcc0f4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:02.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:02.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237079819 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:02.252+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:42:02.252+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:42:02.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:42:02.330+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bdcc0f4]
2026-01-14T15:42:02.344+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:02.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:42:02.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:09.217+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-14T15:42:09.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-14T15:42:09.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:42:09.221+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-14T15:42:09.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-14T15:42:09.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-14T15:42:09.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-14T15:42:09.221+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-14T15:42:09.222+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-14T15:42:09.222+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-14T15:42:09.223+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-14T15:42:09.223+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-14T15:42:09.224+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-14T15:42:09.225+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-14T15:42:09.225+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-14T15:42:09.226+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-14T15:42:09.226+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-14T15:42:09.226+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-14T15:42:09.226+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-14T15:42:09.227+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.227+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-14T15:42:09.242+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.242+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:09.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:09.251+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:09.252+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:09.267+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bb1ccb2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:09.252+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0edc83] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:09.253+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:09.253+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3bb111] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:09.268+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7a1bf3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:09.278+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@659458055 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:09.278+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772313980 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:09.278+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1195902638 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:09.278+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143618903 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:09.278+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:42:09.279+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-14T15:42:09.279+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:09.279+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-14T15:42:09.280+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-14T15:42:09.281+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-14T15:42:09.281+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-14T15:42:09.282+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-14T15:42:09.287+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 2
2026-01-14T15:42:09.288+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-14T15:42:09.292+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bb1ccb2]
2026-01-14T15:42:09.293+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7a1bf3]
2026-01-14T15:42:09.293+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:09.294+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:09.294+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafte (truncated)...]
2026-01-14T15:42:09.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-14T15:42:09.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:09.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:09.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-14T15:42:09.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T15:42:09.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3bb111]
2026-01-14T15:42:09.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0edc83]
2026-01-14T15:42:09.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:09.315+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:09.316+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=23, pendingCoun (truncated)...]
2026-01-14T15:42:09.318+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c95cbb4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:09.319+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:09.320+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1398612123 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:09.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-14T15:42:09.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-14T15:42:09.343+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-14T15:42:09.344+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c95cbb4]
2026-01-14T15:42:09.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:09.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-14T15:42:09.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:13.769+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-14T15:42:13.783+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-14T15:42:13.788+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-14T15:42:13.793+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-14T15:42:13.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-14T15:42:13.937+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMiIsInVzZXJuYW1lIjo (truncated)...]
2026-01-14T15:42:14.018+09:00  INFO 42568 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=12
2026-01-14T15:42:14.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:14.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-14T15:42:14.148+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:16.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-14T15:42:17.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-14T15:42:17.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-14T15:42:17.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-14T15:42:17.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-14T15:42:17.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-14T15:42:17.001+09:00  INFO 42568 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-14T15:42:17.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe88084] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136609233 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:17.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-14T15:42:17.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-14T15:42:17.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-14T15:42:17.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe88084]
2026-01-14T15:42:17.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1dbd88] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@673758429 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:17.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:17.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:17.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:17.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1dbd88]
2026-01-14T15:42:17.101+09:00  INFO 42568 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-14T15:42:17.102+09:00  INFO 42568 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-14T15:42:17.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-14T15:42:17.103+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T15:42:17.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-14T15:42:17.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T15:42:17.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T15:42:17.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T15:42:17.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4619e77d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110025998 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.440+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T15:42:17.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-14T15:42:17.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-14T15:42:17.448+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4619e77d]
2026-01-14T15:42:17.449+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.451+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T15:42:17.452+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T15:42:17.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T15:42:17.497+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T15:42:17.504+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T15:42:17.507+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T15:42:17.510+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:17.514+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:17.510+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:17.511+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:17.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T15:42:17.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T15:42:17.515+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:17.515+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:17.515+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:17.516+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:17.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:17.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:17.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:17.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:17.518+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:17.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:17.518+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:17.518+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:17.518+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:17.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:17.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:17.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:17.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:17.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:17.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:17.523+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:17.523+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:17.523+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:17.524+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:17.524+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.526+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:17.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:17.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6540c292] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2be3ca46] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:17.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476ceb26] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:17.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a33ef8a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.530+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:17.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598977107 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81721506 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:17.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18979298 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:17.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:17.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874547273 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:17.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:17.533+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:17.533+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:17.533+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:17.533+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:17.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:17.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:17.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:17.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af60dc3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:17.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108479c8] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.537+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:17.544+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:17.544+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:17.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6540c292]
2026-01-14T15:42:17.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476ceb26]
2026-01-14T15:42:17.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2be3ca46]
2026-01-14T15:42:17.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:17.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356438746 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:17.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a33ef8a]
2026-01-14T15:42:17.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623596540 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:17.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:17.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:17.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f03d68a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.547+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0e8a89] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.548+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:17.549+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.550+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:17.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140550039 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@286468530 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:17.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:17.552+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:17.553+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:17.562+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:17.562+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:17.563+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:17.564+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:17.564+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.565+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:17.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:17.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:17.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:17.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:17.576+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:17.577+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.577+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:17.577+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:17.578+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef86f37] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.578+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0e8a89]
2026-01-14T15:42:17.578+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f03d68a]
2026-01-14T15:42:17.579+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664810074 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:17.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:17.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:17.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:17.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:17.581+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108479c8]
2026-01-14T15:42:17.581+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:17.582+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c001410] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.582+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:17.582+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.582+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.583+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af60dc3]
2026-01-14T15:42:17.583+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576412828 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.593+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:17.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:17.586+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:17.591+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.592+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:17.595+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:17.596+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:17.596+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.597+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:17.598+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef86f37]
2026-01-14T15:42:17.601+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:17.601+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:17.603+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.612+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.612+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:17.613+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:17.620+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:17.621+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:17.626+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:17.627+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.628+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.644+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ee4395] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.645+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@312346413 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:17.630+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:17.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:17.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:17.674+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:17.691+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:17.693+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:17.697+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:17.693+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:17.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:17.694+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:17.694+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c001410]
2026-01-14T15:42:17.695+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:17.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:17.700+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:17.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:17.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:17.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d8d4093] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.708+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20019110 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:17.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:17.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:17.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:17.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:17.704+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:17.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:17.720+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.720+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ee4395]
2026-01-14T15:42:17.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108219cc] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.731+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59190603] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d94791] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:17.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74eb7a1a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883997857 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:17.731+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308558430 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:17.731+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@37308831 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:17.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d8d4093]
2026-01-14T15:42:17.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714542424 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:17.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:17.733+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:17.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:17.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:17.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4ae11b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.735+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:17.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:17.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:17.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:17.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481606969 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.745+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:17.747+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:17.747+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:17.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:17.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:17.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:17.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59190603]
2026-01-14T15:42:17.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:17.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108219cc]
2026-01-14T15:42:17.761+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.761+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:17.762+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d94791]
2026-01-14T15:42:17.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.764+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:17.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:17.754+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:17.754+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4ae11b]
2026-01-14T15:42:17.775+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:17.791+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74eb7a1a]
2026-01-14T15:42:17.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:17.791+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.792+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.792+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.792+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2545e1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.795+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:17.796+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:17.809+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:17.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:17.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:17.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012608711 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.809+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:17.810+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:17.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:17.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:17.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:17.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:17.813+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:17.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:17.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:17.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:17.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:17.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:17.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:17.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:17.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:17.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:17.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:17.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb20606] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.824+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:17.825+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:17.825+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.825+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:17.826+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@394484825 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:17.826+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2545e1]
2026-01-14T15:42:17.826+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:17.826+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2303bee3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.827+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.827+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:17.828+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.829+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a20cfc] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.828+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:17.828+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1298132430 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:17.828+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dae3ee1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.829+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:17.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@704793412 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:17.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:17.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975300383 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:17.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:17.837+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:17.833+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.840+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79503f64] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.835+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:17.835+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:17.837+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:17.843+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702052824 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:17.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:17.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:17.846+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb20606]
2026-01-14T15:42:17.847+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:17.847+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:17.847+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a20cfc]
2026-01-14T15:42:17.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.849+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:17.849+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2303bee3]
2026-01-14T15:42:17.849+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:17.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.851+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:17.852+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.852+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dae3ee1]
2026-01-14T15:42:17.852+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32805a2d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.853+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.858+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576025965 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.853+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6296fa] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.854+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:17.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1697173459 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:17.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:17.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:17.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:17.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:17.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:17.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:17.902+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:17.911+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32805a2d]
2026-01-14T15:42:17.912+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.912+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64df846] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.913+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:17.913+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:17.914+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908893072 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:17.914+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6296fa]
2026-01-14T15:42:17.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:17.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:17.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79503f64]
2026-01-14T15:42:17.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:17.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:17.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:17.923+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:17.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:17.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:17.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:17.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64df846]
2026-01-14T15:42:17.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:17.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:17.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:17.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:17.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:17.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:17.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e411364] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:17.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1944931916 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:17.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:17.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:18.025+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:18.016+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:18.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.028+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:18.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:18.041+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:18.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264d9f5d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e411364]
2026-01-14T15:42:18.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637648417 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@361de57c] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.054+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1620122344 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:18.056+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.058+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:18.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:18.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:18.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@361de57c]
2026-01-14T15:42:18.064+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264d9f5d]
2026-01-14T15:42:18.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:18.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30bfeab0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.066+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.066+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2059545741 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.070+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:18.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:18.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:18.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:18.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:18.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30bfeab0]
2026-01-14T15:42:18.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20abc638] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039998579 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410cd095] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.085+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:18.085+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237590638 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:18.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:18.092+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:18.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:18.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20abc638]
2026-01-14T15:42:18.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.097+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@893ee40] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.097+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987539820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:18.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:18.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:18.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410cd095]
2026-01-14T15:42:18.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fcdf1e9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1482825469 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:18.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@893ee40]
2026-01-14T15:42:18.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.103+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.103+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:18.104+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:18.118+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fcdf1e9]
2026-01-14T15:42:18.119+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.118+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:18.119+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c3340e7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.120+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:18.120+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1289859121 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.120+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:18.123+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:18.123+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:18.124+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:18.125+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.126+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34bcb608] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.126+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629446530 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:18.127+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:18.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:18.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:18.133+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c3340e7]
2026-01-14T15:42:18.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:18.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34bcb608]
2026-01-14T15:42:18.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb7c4f9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944080816 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6982e2fb] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:18.136+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@954139957 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:18.143+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:18.143+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:18.145+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:18.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:18.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:18.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6982e2fb]
2026-01-14T15:42:18.148+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb7c4f9]
2026-01-14T15:42:18.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:18.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1befd4d1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1539267417 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.153+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.160+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.161+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:18.163+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1befd4d1]
2026-01-14T15:42:18.163+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:18.167+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.167+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:18.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10add782] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:18.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963053082 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:18.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:18.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:18.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e85a9ac] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.172+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1994794547 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:18.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:18.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:18.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:18.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10add782]
2026-01-14T15:42:18.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bcfa96] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.180+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085829764 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.180+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.180+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.181+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:18.181+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e85a9ac]
2026-01-14T15:42:18.182+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.182+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.182+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17406c5] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bcfa96]
2026-01-14T15:42:18.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@839845774 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:18.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:18.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:18.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:18.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.186+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:18.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:18.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17406c5]
2026-01-14T15:42:18.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:18.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:18.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:18.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@796b3eb7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:18.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933725610 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:18.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:18.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:18.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:18.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ebf2dc] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.217+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@226399542 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:18.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:18.225+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:18.227+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@796b3eb7]
2026-01-14T15:42:18.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.231+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:18.232+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766debdd] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.232+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ebf2dc]
2026-01-14T15:42:18.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456733473 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.234+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@325a1597] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.234+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.234+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@741964818 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:18.235+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:18.284+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:18.289+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.294+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766debdd]
2026-01-14T15:42:18.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:18.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4c3253] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@325a1597]
2026-01-14T15:42:18.297+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627442948 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.298+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.298+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:18.299+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:18.310+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:18.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.345+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:18.345+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4c3253]
2026-01-14T15:42:18.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@244b4de2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043166098 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.348+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.348+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.353+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@244b4de2]
2026-01-14T15:42:18.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e379c4a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1349378099 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.507+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:18.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:18.590+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:18.592+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e379c4a]
2026-01-14T15:42:18.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.598+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ed8388c] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.599+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211759825 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.601+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:18.603+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:18.627+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:18.631+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ed8388c]
2026-01-14T15:42:18.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5046231a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.632+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@252018118 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.633+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.634+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.648+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.648+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:18.649+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.649+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.650+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.686+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5046231a]
2026-01-14T15:42:18.666+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T15:42:18.667+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:18.670+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T15:42:18.678+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T15:42:18.687+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@285f4b74] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239475094 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:18.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:18.714+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:18.715+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:18.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T15:42:18.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:18.722+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:18.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:18.727+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T15:42:18.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T15:42:18.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T15:42:18.733+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T15:42:18.733+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.744+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.745+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba2c0a4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.735+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.740+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.750+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:18.751+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:18.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38189ae] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@348a6ffd] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@285f4b74]
2026-01-14T15:42:18.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f30deb] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:18.764+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@399334255 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:18.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5918e56e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:18.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:42:18.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198054354 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:18.770+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:42:18.773+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688245053 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:18.773+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425753505 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:18.773+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370630413 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:18.774+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:18.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T15:42:18.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:42:18.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T15:42:18.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:18.779+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T15:42:18.780+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T15:42:18.780+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:42:18.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T15:42:18.785+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:18.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba2c0a4]
2026-01-14T15:42:18.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5918e56e]
2026-01-14T15:42:18.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.787+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.790+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=312000, totalCou (truncated)...]
2026-01-14T15:42:18.793+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T15:42:18.793+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T15:42:18.794+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T15:42:18.795+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:18.795+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.797+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@348a6ffd]
2026-01-14T15:42:18.798+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38189ae]
2026-01-14T15:42:18.798+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f30deb]
2026-01-14T15:42:18.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.810+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.810+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:18.814+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T15:42:18.815+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T15:42:18.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=8000 (truncated)...]
2026-01-14T15:42:18.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.825+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:18.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:19.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:19.167+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:19.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:19.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:19.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:19.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T15:42:19.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T15:42:19.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:19.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T15:42:19.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:19.172+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:19.172+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T15:42:19.172+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:19.173+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:19.174+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:19.174+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T15:42:19.174+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:19.175+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T15:42:19.175+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T15:42:19.175+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.175+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T15:42:19.176+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.176+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.179+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:19.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.181+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cabf8f5] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:19.181+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:19.182+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:19.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:19.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:19.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50342599] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:19.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad29c39] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:19.189+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299389ce] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:19.191+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1195515953 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:19.192+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1920340833 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:19.193+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534749631 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:19.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T15:42:19.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141619223 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:19.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:42:19.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:42:19.195+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T15:42:19.196+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T15:42:19.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:42:19.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T15:42:19.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:42:19.204+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T15:42:19.204+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T15:42:19.205+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T15:42:19.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad29c39]
2026-01-14T15:42:19.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cabf8f5]
2026-01-14T15:42:19.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T15:42:19.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50342599]
2026-01-14T15:42:19.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:19.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:19.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299389ce]
2026-01-14T15:42:19.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:19.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T15:42:19.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T15:42:19.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:19.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=312000, totalCou (truncated)...]
2026-01-14T15:42:19.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:19.217+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:19.217+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=8000 (truncated)...]
2026-01-14T15:42:19.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:19.225+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:21.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:21.057+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:21.058+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:21.058+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:21.059+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:21.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:21.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:21.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:21.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:21.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:21.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:21.066+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d988d2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:21.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:21.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:21.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49947a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a5bda4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.141+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2107622427 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:21.157+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.157+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@934533577 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:21.157+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442754812 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:21.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:21.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:21.204+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.233+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:21.237+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d988d2]
2026-01-14T15:42:21.237+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a5bda4]
2026-01-14T15:42:21.239+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49947a]
2026-01-14T15:42:21.240+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.240+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.240+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42cbcb67] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:21.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:21.250+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1695683790 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:21.251+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.252+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.252+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:21.258+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:21.276+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:21.277+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:21.312+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42cbcb67]
2026-01-14T15:42:21.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:21.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.280+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-14T15:42:21.318+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-14T15:42:21.319+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-14T15:42:21.319+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-14T15:42:21.320+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-14T15:42:21.281+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-14T15:42:21.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:21.323+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:21.324+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:21.324+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-14T15:42:21.324+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:21.325+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:21.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-14T15:42:21.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:21.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-14T15:42:21.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3934c1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-14T15:42:21.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5842bd] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.330+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:21.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:21.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976815177 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:21.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529211472 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:21.334+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3195e056] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.334+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.336+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.336+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1476728729 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:21.336+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.337+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3934c1]
2026-01-14T15:42:21.341+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.343+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b318e74] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.349+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429949465 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:21.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-14T15:42:21.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5842bd]
2026-01-14T15:42:21.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-14T15:42:21.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.359+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3195e056]
2026-01-14T15:42:21.360+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:21.360+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.361+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec40bc7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.363+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956027479 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:21.367+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-14T15:42:21.368+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-14T15:42:21.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-14T15:42:21.371+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b318e74]
2026-01-14T15:42:21.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.375+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:21.376+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.376+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-14T15:42:21.380+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec40bc7]
2026-01-14T15:42:21.381+09:00  INFO 42568 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-14T15:42:21.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-14T15:42:21.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-14T15:42:21.386+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-14T15:42:21.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-14T15:42:21.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-14T15:42:21.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-14T15:42:21.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-14T15:42:21.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-14T15:42:21.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-14T15:42:21.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:21.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-14T15:42:21.411+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:21.411+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-14T15:42:21.412+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.412+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:21.415+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30fe3d8b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.416+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:21.416+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1587764473 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:21.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8ad49a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1561279180 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:21.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:21.423+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:21.427+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30fe3d8b]
2026-01-14T15:42:21.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:21.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e42616c] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8ad49a]
2026-01-14T15:42:21.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871778634 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:21.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:21.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-14T15:42:21.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebbf16d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:21.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-14T15:42:21.432+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965998628 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:21.433+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-14T15:42:21.435+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-14T15:42:21.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-14T15:42:21.437+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-14T15:42:21.442+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e42616c]
2026-01-14T15:42:21.442+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebbf16d]
2026-01-14T15:42:21.442+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.443+09:00  INFO 42568 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-14T15:42:21.443+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:21.443+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:21.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:21.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-14T15:42:21.453+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:26.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/7/applications
2026-01-14T15:42:26.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/7
2026-01-14T15:42:26.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/7/applications
2026-01-14T15:42:26.066+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/7
2026-01-14T15:42:26.072+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/7
2026-01-14T15:42:26.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/7/applications
2026-01-14T15:42:26.073+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/7
2026-01-14T15:42:26.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/7/applications
2026-01-14T15:42:26.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/7", parameters={}
2026-01-14T15:42:26.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/7/applications", parameters={}
2026-01-14T15:42:26.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-14T15:42:26.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-14T15:42:26.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:26.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:26.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:26.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:26.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:26.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f825db] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:26.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:26.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6823c055] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:26.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914540905 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:26.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1299965150 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:26.089+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:26.091+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:26.092+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:26.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:26.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:26.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:26.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6823c055]
2026-01-14T15:42:26.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f825db]
2026-01-14T15:42:26.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:26.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:26.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb3f479] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:26.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2827eddd] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:26.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278947552 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:26.103+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129274357 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:26.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-14T15:42:26.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-14T15:42:26.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 7(Long)
2026-01-14T15:42:26.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 7(Long)
2026-01-14T15:42:26.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-14T15:42:26.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 1
2026-01-14T15:42:26.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb3f479]
2026-01-14T15:42:26.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2827eddd]
2026-01-14T15:42:26.114+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:26.115+09:00  INFO 42568 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 7, count: 1
2026-01-14T15:42:26.115+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:26.115+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:26.116+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:26.116+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-14T15:42:26.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:27.952+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-14T15:42:27.952+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-14T15:42:27.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-14T15:42:27.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-14T15:42:27.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-14T15:42:27.955+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-14T15:42:27.955+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-14T15:42:27.956+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-14T15:42:27.956+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-14T15:42:27.956+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:27.957+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-14T15:42:27.957+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:27.958+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:27.958+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:27.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:27.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd797dd] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:27.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:27.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf5caeb] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:27.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93992802 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:27.962+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:27.963+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@923942116 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:27.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:27.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:27.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:27.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:27.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd797dd]
2026-01-14T15:42:27.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:27.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:27.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46c52524] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:27.970+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf5caeb]
2026-01-14T15:42:27.970+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778370910 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:27.970+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:27.973+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-14T15:42:27.976+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63dfb8f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:27.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-14T15:42:27.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@522230932 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:27.979+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-14T15:42:27.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-14T15:42:27.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-14T15:42:27.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46c52524]
2026-01-14T15:42:27.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-14T15:42:27.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:27.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63dfb8f]
2026-01-14T15:42:27.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:27.984+09:00  INFO 42568 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-14T15:42:27.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:27.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:27.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-14T15:42:27.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:29.309+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:29.311+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:29.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:29.313+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:29.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:29.314+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:29.381+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:29.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:29.384+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:29.357+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:29.359+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:29.367+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:29.369+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:29.383+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:29.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:29.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:29.386+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:29.387+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:29.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:29.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:29.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:29.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:29.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:29.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:29.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:29.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:29.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:29.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:29.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:29.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:29.400+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:29.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:29.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6046633b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:29.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:29.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:29.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:29.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:29.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cda989b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:29.409+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9a8946] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:29.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9c6bae8] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:29.465+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:29.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1215808512 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:29.515+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:29.636+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:29.637+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:29.640+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:29.642+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:29.640+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d2a245] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:29.642+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14553f9a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:29.648+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1984758350 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:29.656+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:29.660+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:29.694+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407106338 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:29.694+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@349859087 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:29.695+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:29.697+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:29.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:29.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6046633b]
2026-01-14T15:42:29.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:29.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523569747 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:29.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@858341194 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:29.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:29.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:30.189+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cda989b]
2026-01-14T15:42:30.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.191+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:30.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:29.840+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.206+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:30.206+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:29.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:30.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:29.990+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9c6bae8]
2026-01-14T15:42:30.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab1433b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765637835 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.224+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:30.228+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:30.242+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:30.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:30.290+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab1433b]
2026-01-14T15:42:30.296+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.298+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c942d1a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.291+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9a8946]
2026-01-14T15:42:30.291+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:30.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@486278440 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.301+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:30.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:30.392+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:30.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1641cef] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:30.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14553f9a]
2026-01-14T15:42:30.602+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:30.603+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@605053469 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:30.606+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.607+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d2a245]
2026-01-14T15:42:30.608+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:30.608+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:30.609+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.611+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:30.612+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.622+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:30.629+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.634+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:30.644+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:30.651+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c942d1a]
2026-01-14T15:42:30.652+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.653+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367a6e1e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.654+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1274767670 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.652+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:30.657+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.657+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:30.657+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:30.659+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.659+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1641cef]
2026-01-14T15:42:30.660+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:30.661+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:30.662+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:30.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:30.677+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:30.677+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:30.678+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:30.679+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.680+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:30.682+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:30.692+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:30.692+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.693+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:30.693+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc4bb19] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.694+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:30.695+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321700580 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:30.695+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.695+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:30.695+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fca45e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.696+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:30.696+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141382041 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:30.697+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367a6e1e]
2026-01-14T15:42:30.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:30.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:30.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.714+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:30.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:30.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:30.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60cb2bf] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:30.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc4bb19]
2026-01-14T15:42:30.727+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675831038 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.727+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:30.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:30.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:30.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:30.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:30.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:30.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:30.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.731+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0b4a35] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629713493 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:30.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:30.733+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:30.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:30.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:30.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:30.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:30.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0b4a35]
2026-01-14T15:42:30.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.736+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60cb2bf]
2026-01-14T15:42:30.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fca45e]
2026-01-14T15:42:30.739+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dacd10] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.739+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.741+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b2dce1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.740+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.741+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234202364 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:30.741+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@810026338 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.741+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:30.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:30.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:30.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:30.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:30.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:30.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:30.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dacd10]
2026-01-14T15:42:30.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b2dce1]
2026-01-14T15:42:30.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:30.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33556b5b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992686596 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.754+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33556b5b]
2026-01-14T15:42:30.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c40f12b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683444299 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:30.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:30.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:30.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:30.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:30.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:30.769+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:30.769+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.770+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ca01c90] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.770+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168669448 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:30.772+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:30.774+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:30.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:30.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c40f12b]
2026-01-14T15:42:30.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6a8fcb] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1951985316 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:30.778+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.779+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:30.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ca01c90]
2026-01-14T15:42:30.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c127165] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.782+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350215403 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:30.782+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:30.782+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:30.783+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.783+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6a8fcb]
2026-01-14T15:42:30.783+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.784+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:30.785+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.800+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:30.800+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c127165]
2026-01-14T15:42:30.800+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:30.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.804+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:30.806+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:30.806+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:30.807+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:30.807+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:30.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e2de35] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332724397 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.829+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e2de35]
2026-01-14T15:42:30.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.836+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f7938b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.837+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442559562 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.839+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.840+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.861+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:30.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:30.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:30.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:30.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:30.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3425b1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f7938b]
2026-01-14T15:42:30.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7f2f56] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.870+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047967481 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.871+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:30.872+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:30.876+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@133324475 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:30.876+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:30.876+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:30.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:30.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:30.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3425b1]
2026-01-14T15:42:30.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7f2f56]
2026-01-14T15:42:30.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33134f21] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bf3f21] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555397501 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:30.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681697215 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:30.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:30.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:30.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33134f21]
2026-01-14T15:42:30.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bf3f21]
2026-01-14T15:42:30.887+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.887+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.889+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44eb4c6] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.888+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:30.890+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529782105 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.891+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.893+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:30.896+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:30.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:30.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:30.904+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:30.908+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:30.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:30.912+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:30.913+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.914+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44eb4c6]
2026-01-14T15:42:30.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a77d2e7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428594725 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:30.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b96d6b3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:30.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445622147 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:30.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:30.925+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:30.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:30.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a77d2e7]
2026-01-14T15:42:30.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-14T15:42:30.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f9e54b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b96d6b3]
2026-01-14T15:42:30.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084435033 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:30.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:30.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a671c6b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:30.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192846042 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.936+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.942+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:30.942+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.942+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f9e54b]
2026-01-14T15:42:30.942+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a671c6b]
2026-01-14T15:42:30.943+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.943+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.944+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:30.944+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d961ba] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.945+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:30.945+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637514094 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.947+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:30.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T15:42:30.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T15:42:30.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d961ba]
2026-01-14T15:42:30.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:30.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@624a2edd] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:30.962+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@785536927 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:30.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:30.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:30.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:30.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@624a2edd]
2026-01-14T15:42:30.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:30.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:30.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:31.325+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:31.325+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:31.325+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:31.325+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:31.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T15:42:31.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T15:42:31.325+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:31.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T15:42:31.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:31.326+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:31.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T15:42:31.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T15:42:31.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:31.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:31.327+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T15:42:31.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T15:42:31.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T15:42:31.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T15:42:31.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T15:42:31.328+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T15:42:31.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.329+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.330+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.331+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.332+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T15:42:31.335+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:31.336+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:31.336+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:31.337+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:31.342+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d157e77] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:31.337+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26be24f1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:31.337+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1832f8ea] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:31.338+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc47032] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:31.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2129042497 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:31.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074083928 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:31.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738744527 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:31.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074134787 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:31.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T15:42:31.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T15:42:31.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T15:42:31.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T15:42:31.355+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:42:31.353+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T15:42:31.353+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T15:42:31.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T15:42:31.360+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T15:42:31.360+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T15:42:31.361+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc47032]
2026-01-14T15:42:31.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T15:42:31.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1832f8ea]
2026-01-14T15:42:31.363+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:31.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d157e77]
2026-01-14T15:42:31.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:31.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T15:42:31.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T15:42:31.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:31.364+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=8000 (truncated)...]
2026-01-14T15:42:31.365+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26be24f1]
2026-01-14T15:42:31.365+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:31.365+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=312000, totalCou (truncated)...]
2026-01-14T15:42:31.366+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:31.367+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:31.370+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:31.379+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T15:42:31.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:34.917+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:34.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:34.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-14T15:42:34.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:34.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-14T15:42:34.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:34.920+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies/pending
2026-01-14T15:42:34.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:34.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-14T15:42:34.920+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:34.920+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:34.924+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:34.921+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-14T15:42:34.922+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:34.922+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-14T15:42:34.923+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:34.927+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:34.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:34.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:34.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a549c5b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:34.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:34.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-14T15:42:34.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:34.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:34.927+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-14T15:42:34.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-14T15:42:34.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a77be05] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:34.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:34.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-14T15:42:34.935+09:00  INFO 42568 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-14T15:42:34.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:34.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:34.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76433915 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:35.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:35.059+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3441e120] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.020+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258419165 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:35.041+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f93fdd6] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab0c650] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:35.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:35.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1593806823 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:35.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733153251 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:35.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:35.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585231695 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:35.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:35.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:35.072+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:35.073+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:35.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:35.074+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:35.087+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-14T15:42:35.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-14T15:42:35.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:35.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:35.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:35.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:35.103+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f93fdd6]
2026-01-14T15:42:35.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a77be05]
2026-01-14T15:42:35.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a549c5b]
2026-01-14T15:42:35.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3441e120]
2026-01-14T15:42:35.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab0c650]
2026-01-14T15:42:35.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:35.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:35.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:35.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:35.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:35.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:35.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:35.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:35.112+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548fdd8e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.112+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d244809] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.112+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:35.112+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:35.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:35.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@921062156 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:35.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877789291 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:35.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:35.128+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:35.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:35.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:35.143+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:35.145+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:35.146+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548fdd8e]
2026-01-14T15:42:35.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d244809]
2026-01-14T15:42:35.147+09:00  INFO 42568 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-14T15:42:35.148+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:35.148+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:35.148+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:35.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-14T15:42:35.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:35.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:35.162+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-14T15:42:35.165+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-14T15:42:35.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-14T15:42:35.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-14T15:42:35.169+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-14T15:42:35.172+09:00  INFO 42568 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-14T15:42:35.174+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:35.175+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f0e805c] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.179+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@819178758 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:35.179+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:35.182+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:35.186+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:35.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f0e805c]
2026-01-14T15:42:35.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:35.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a54b75f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:35.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109671918 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:35.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:35.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:35.205+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:35.216+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a54b75f]
2026-01-14T15:42:35.219+09:00  INFO 42568 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-14T15:42:35.220+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:35.224+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-14T15:42:35.224+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:39.699+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:39.700+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-14T15:42:39.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-14T15:42:39.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:39.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:39.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:39.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:39.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-14T15:42:39.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:39.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:39.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:39.704+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-14T15:42:39.704+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-14T15:42:39.704+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:39.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:39.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:39.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-14T15:42:39.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-14T15:42:39.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:39.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:39.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:39.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:39.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-14T15:42:39.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.708+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1465024e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:39.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.710+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a27e4d2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.708+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.710+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.710+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580008142 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:39.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f1b2f4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.711+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d66a748] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1170164f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165379992 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:39.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.715+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:39.717+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@448667884 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.717+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.717+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600833361 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737273822 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:39.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:39.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.719+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.720+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:39.724+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:39.725+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:39.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:39.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1465024e]
2026-01-14T15:42:39.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a27e4d2]
2026-01-14T15:42:39.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.735+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.735+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f1b2f4]
2026-01-14T15:42:39.737+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:39.741+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185e3477] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:39.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 8
2026-01-14T15:42:39.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992225789 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:39.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc2f255] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1170164f]
2026-01-14T15:42:39.744+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d66a748]
2026-01-14T15:42:39.745+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:39.747+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:39.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1311251762 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.750+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.757+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7942b4ee] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.751+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:39.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:39.754+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.756+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:39.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420776662 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:39.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.761+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.761+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:39.762+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:39.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:39.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185e3477]
2026-01-14T15:42:39.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.766+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.767+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc2f255]
2026-01-14T15:42:39.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d1625] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:39.768+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7942b4ee]
2026-01-14T15:42:39.769+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.769+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.770+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.774+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d25ada] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.776+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51919099] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187192559 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.779+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1025031041 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:39.781+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:39.782+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:39.785+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:39.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:39.787+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 39(Long), 36(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-14T15:42:39.791+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:39.792+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:39.793+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:39.797+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624889396 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:39.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 10
2026-01-14T15:42:39.812+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:39.813+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c19ddb8] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.814+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.814+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51919099]
2026-01-14T15:42:39.814+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d25ada]
2026-01-14T15:42:39.815+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1108576862 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:39.815+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.815+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.815+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:39.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce168fe] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.816+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7785bce7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:39.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:39.817+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556350115 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144142919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d1625]
2026-01-14T15:42:39.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.820+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:39.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.820+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:39.821+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.826+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c19ddb8]
2026-01-14T15:42:39.827+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:39.827+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.828+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.828+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.829+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f81c3d6] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:39.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7785bce7]
2026-01-14T15:42:39.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce168fe]
2026-01-14T15:42:39.830+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@230110083 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:39.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:39.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:39.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:39.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30678938] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-14T15:42:39.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:39.832+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:39.833+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784641879 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.833+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.835+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.840+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:39.840+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-14T15:42:39.842+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:39.843+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caa8e39] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.844+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:39.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f81c3d6]
2026-01-14T15:42:39.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-14T15:42:39.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598860197 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.846+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.846+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-14T15:42:39.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:39.848+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-14T15:42:39.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:39.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-14T15:42:39.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30678938]
2026-01-14T15:42:39.857+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:39.858+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.858+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.860+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:39.861+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18793041] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.861+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@163f7c31] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.861+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:39.862+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:39.862+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@850460013 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:39.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@446503303 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caa8e39]
2026-01-14T15:42:39.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:39.864+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.864+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:39.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:39.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:39.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:39.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.870+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7f86c3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541997116 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:39.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 8
2026-01-14T15:42:39.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:39.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:39.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@163f7c31]
2026-01-14T15:42:39.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:39.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18793041]
2026-01-14T15:42:39.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d8227] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.878+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:39.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:39.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342652795 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:39.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:39.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612b5f36] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:39.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202926550 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:39.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:39.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7f86c3]
2026-01-14T15:42:39.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f01f78a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.889+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0d3ef7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.888+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123565391 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:39.889+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d8227]
2026-01-14T15:42:39.889+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.890+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061678635 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:39.890+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.890+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.891+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612b5f36]
2026-01-14T15:42:39.891+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:39.892+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.892+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766dac] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.892+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f91b238] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.892+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:39.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1831336767 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:39.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:39.896+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83396627 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.900+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:39.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:39.900+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f01f78a]
2026-01-14T15:42:39.902+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:39.902+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:39.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 39(Long), 36(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-14T15:42:39.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0d3ef7]
2026-01-14T15:42:39.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:39.910+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:39.910+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.911+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.923+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:39.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f91b238]
2026-01-14T15:42:39.932+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 10
2026-01-14T15:42:39.932+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:39.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766dac]
2026-01-14T15:42:39.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:39.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3b629c] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.937+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1602817393 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:39.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:39.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.943+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:39.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:39.942+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.943+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ead3b8f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.944+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:39.944+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:39.944+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.945+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495270139 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:39.945+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:39.946+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:39.947+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:39.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:39.947+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:39.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@533f85ad] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edd74d6] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:39.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ead3b8f]
2026-01-14T15:42:39.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984346161 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233850598 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:39.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3b629c]
2026-01-14T15:42:39.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:39.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:39.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-14T15:42:39.973+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:39.976+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:39.976+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:39.976+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.980+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:39.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:39.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edd74d6]
2026-01-14T15:42:39.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-14T15:42:39.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@533f85ad]
2026-01-14T15:42:39.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:39.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:39.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:39.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@205f1f16] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:39.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:39.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-14T15:42:39.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258143325 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:39.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:39.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-14T15:42:39.995+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:39.997+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:39.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:40.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c74de2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.005+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179730418 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.007+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:40.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:40.009+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:40.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@205f1f16]
2026-01-14T15:42:40.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:40.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:40.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c74de2]
2026-01-14T15:42:40.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:40.012+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.012+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:40.012+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa54c67] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.014+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:40.015+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927654028 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.017+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:40.019+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:40.019+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:40.019+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:40.026+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:40.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:40.028+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.028+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676aa7ec] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.029+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272336231 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:40.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:40.031+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:40.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa54c67]
2026-01-14T15:42:40.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:40.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30760a26] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48699 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:40.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:40.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676aa7ec]
2026-01-14T15:42:40.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:40.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b84e7a9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@962819314 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:40.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:40.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:40.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:40.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:40.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b84e7a9]
2026-01-14T15:42:40.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30760a26]
2026-01-14T15:42:40.055+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:40.056+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.056+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:40.057+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c155c0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.058+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:40.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483101124 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:40.065+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:40.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:40.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c155c0]
2026-01-14T15:42:40.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74feac77] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641964157 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:40.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:40.074+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:40.074+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74feac77]
2026-01-14T15:42:40.075+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.075+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4176a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115904247 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:40.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:40.085+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:40.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4176a]
2026-01-14T15:42:40.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787f97a8] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1595375754 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:40.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:40.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:40.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787f97a8]
2026-01-14T15:42:40.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c64471] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905987926 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:40.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:40.109+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:40.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c64471]
2026-01-14T15:42:40.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:40.111+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e3adb1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:40.114+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428246832 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:40.114+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:40.115+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:40.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:40.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e3adb1]
2026-01-14T15:42:40.133+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:40.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:40.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:43.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:43.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:43.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-14T15:42:43.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:43.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:43.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/cards/company
2026-01-14T15:42:43.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:43.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:43.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-14T15:42:43.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-14T15:42:43.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:43.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:43.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:43.708+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-14T15:42:43.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:43.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:43.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:43.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55170dee] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:43.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410d4660] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:43.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:43.715+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4889f3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:43.724+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885830214 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:43.724+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@376134356 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:43.725+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:43.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445341946 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:43.732+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-14T15:42:43.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:43.734+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:43.735+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:43.742+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:43.745+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:43.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410d4660]
2026-01-14T15:42:43.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:43.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:43.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-14T15:42:43.750+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:43.750+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4889f3]
2026-01-14T15:42:43.750+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55170dee]
2026-01-14T15:42:43.751+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:43.752+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:43.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:43.759+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40753d04] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:43.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-14T15:42:43.760+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781852532 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:43.762+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:43.763+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:43.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:43.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-14T15:42:43.792+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/cards/company
2026-01-14T15:42:43.793+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:43.794+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-14T15:42:43.795+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40753d04]
2026-01-14T15:42:43.795+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-14T15:42:43.795+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:43.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:43.800+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:43.796+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-14T15:42:43.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:43.821+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167780f3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:43.829+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1139701418 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:43.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-14T15:42:43.833+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:43.852+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-14T15:42:43.859+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167780f3]
2026-01-14T15:42:43.862+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:43.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-14T15:42:43.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:44.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:44.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:44.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-14T15:42:44.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:44.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:44.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:44.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-14T15:42:44.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:44.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:44.867+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-14T15:42:44.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:44.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:44.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-14T15:42:44.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:44.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:44.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-14T15:42:44.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:44.870+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cef7fe1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:44.871+09:00  INFO 42568 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-14T15:42:44.879+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ff3e40] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:44.885+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:44.886+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364fe24e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:44.893+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097394632 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:44.893+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@817870433 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:44.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:44.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:44.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:44.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:44.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206174837 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:44.901+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-14T15:42:44.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:44.910+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:44.910+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:44.914+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ff3e40]
2026-01-14T15:42:44.915+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cef7fe1]
2026-01-14T15:42:44.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:44.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:44.918+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-14T15:42:44.922+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:44.923+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a37539] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:44.923+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364fe24e]
2026-01-14T15:42:44.925+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:44.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@339908742 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:44.927+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:44.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:44.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-14T15:42:44.935+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:44.936+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:44.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-14T15:42:44.954+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-14T15:42:44.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-14T15:42:44.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:44.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-14T15:42:44.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a37539]
2026-01-14T15:42:44.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-14T15:42:44.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:44.969+09:00  INFO 42568 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-14T15:42:44.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:44.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:44.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@186f8766] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:44.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:44.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1489524865 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:44.984+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-14T15:42:44.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:44.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-14T15:42:45.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@186f8766]
2026-01-14T15:42:45.009+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:45.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-14T15:42:45.012+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:45.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:45.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:45.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:45.880+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:45.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:45.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:45.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:45.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:45.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:45.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:45.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:45.882+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:45.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:45.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:45.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:45.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.883+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ddf103] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:45.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cbf483e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:45.884+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@caa398e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:45.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1081909399 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:45.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428642572 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:45.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033107585 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:45.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:45.896+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:45.896+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:45.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:45.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:45.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:45.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:45.903+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:45.906+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cbf483e]
2026-01-14T15:42:45.905+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@caa398e]
2026-01-14T15:42:45.906+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:45.906+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.907+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:45.907+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ddf103]
2026-01-14T15:42:45.907+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf5848f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:45.908+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:45.908+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:45.908+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802949416 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:45.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:45.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:45.909+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:45.910+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:45.920+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:45.925+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:45.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-14T15:42:45.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-14T15:42:45.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:45.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-14T15:42:45.939+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-14T15:42:45.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:45.949+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:45.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-14T15:42:45.951+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-14T15:42:45.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-14T15:42:45.950+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf5848f]
2026-01-14T15:42:45.951+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:45.951+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-14T15:42:45.952+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-14T15:42:45.953+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:45.958+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:45.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:45.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-14T15:42:45.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:45.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:45.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b58643] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:45.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:45.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:45.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:45.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:45.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1902d3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:45.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c1d2b4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.026+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100645941 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:46.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2120962355 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:46.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055265713 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:46.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:46.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:46.081+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:46.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:46.086+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:46.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:46.132+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:46.133+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b58643]
2026-01-14T15:42:46.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:46.134+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:46.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:46.135+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1902d3]
2026-01-14T15:42:46.136+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c1d2b4]
2026-01-14T15:42:46.136+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:46.142+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:46.144+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613e8cb8] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.145+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551c3f8e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.153+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346346412 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:46.154+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330775019 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:46.158+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-14T15:42:46.159+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-14T15:42:46.159+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-14T15:42:46.160+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-14T15:42:46.162+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-14T15:42:46.162+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-14T15:42:46.164+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551c3f8e]
2026-01-14T15:42:46.164+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613e8cb8]
2026-01-14T15:42:46.165+09:00  INFO 42568 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-14T15:42:46.165+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:46.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:46.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:46.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-14T15:42:46.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:46.167+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:46.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-14T15:42:46.171+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-14T15:42:46.176+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-14T15:42:46.172+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-14T15:42:46.182+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-14T15:42:46.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-14T15:42:46.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-14T15:42:46.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:46.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-14T15:42:46.187+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-14T15:42:46.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-14T15:42:46.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a70a801] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.191+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-14T15:42:46.192+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@501252764 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:46.192+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:46.192+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:46.194+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:46.193+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-14T15:42:46.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:46.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@89b9c2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a70a801]
2026-01-14T15:42:46.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118917373 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:46.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:46.199+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4681b18b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:46.201+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1237199354 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:46.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-14T15:42:46.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-14T15:42:46.203+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:46.205+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@89b9c2]
2026-01-14T15:42:46.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-14T15:42:46.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f536fcf] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4681b18b]
2026-01-14T15:42:46.208+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658426446 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:46.208+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:46.208+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-14T15:42:46.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:46.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-14T15:42:46.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:46.217+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-14T15:42:46.217+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f536fcf]
2026-01-14T15:42:46.217+09:00  INFO 42568 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-14T15:42:46.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:46.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-14T15:42:46.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:46.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/1/approvers
2026-01-14T15:42:46.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:46.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/1/approvers
2026-01-14T15:42:46.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:46.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:46.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:46.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1/approvers
2026-01-14T15:42:46.987+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:46.988+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:46.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:46.989+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/1/approvers
2026-01-14T15:42:46.991+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:46.995+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:46.996+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1/approvers
2026-01-14T15:42:46.996+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:46.997+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.997+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1/approvers", parameters={}
2026-01-14T15:42:46.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:46.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa74ee9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:46.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-14T15:42:47.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@400fbc9b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:47.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:47.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:47.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:47.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509538b0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:47.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1876482878 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:47.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030674886 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:47.041+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:47.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:47.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:47.097+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:47.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493255536 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:47.200+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-14T15:42:47.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:47.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:47.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@400fbc9b]
2026-01-14T15:42:47.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:47.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:47.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa74ee9]
2026-01-14T15:42:47.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:47.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-01-14T15:42:47.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509538b0]
2026-01-14T15:42:47.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:47.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:47.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:47.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca4755e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:47.259+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=13, userId=1, approv (truncated)...]
2026-01-14T15:42:47.259+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409349901 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:47.261+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:47.262+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:47.263+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:47.269+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-14T15:42:47.269+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1/approvers
2026-01-14T15:42:47.283+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/approvers
2026-01-14T15:42:47.283+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/1/approvers
2026-01-14T15:42:47.283+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1/approvers
2026-01-14T15:42:47.283+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-14T15:42:47.284+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1/approvers", parameters={}
2026-01-14T15:42:47.284+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-14T15:42:47.285+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-14T15:42:47.285+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-14T15:42:47.285+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:47.286+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:47.288+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:47.290+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46b4d3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:47.291+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:47.291+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2073166586 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:47.294+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-14T15:42:47.295+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-14T15:42:47.292+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe2470f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:47.298+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:47.300+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca4755e]
2026-01-14T15:42:47.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044391275 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:47.303+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-14T15:42:47.306+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:47.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-14T15:42:47.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46b4d3]
2026-01-14T15:42:47.307+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:47.308+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:47.309+09:00  INFO 42568 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-14T15:42:47.309+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:47.311+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:47.317+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-14T15:42:47.330+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:47.348+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-01-14T15:42:47.348+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe2470f]
2026-01-14T15:42:47.351+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:47.352+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=13, userId=1, approv (truncated)...]
2026-01-14T15:42:47.361+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:47.377+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-14T15:42:47.381+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/approvers
2026-01-14T15:42:47.382+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-14T15:42:47.383+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-14T15:42:47.384+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-14T15:42:47.385+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:47.386+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2634b4e4] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:47.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@520396536 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:47.395+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-14T15:42:47.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-14T15:42:47.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-14T15:42:47.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2634b4e4]
2026-01-14T15:42:47.415+09:00  INFO 42568 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-14T15:42:47.420+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:47.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-14T15:42:47.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:48.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:48.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:48.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:48.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-14T15:42:48.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:48.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expense-categories/merged
2026-01-14T15:42:48.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:48.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:48.731+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-14T15:42:48.741+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:48.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:48.744+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:48.743+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-14T15:42:48.744+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:48.745+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:48.747+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455dbee0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:48.745+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-14T15:42:48.746+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:48.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:48.769+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:48.771+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:48.762+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd466c7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:48.782+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b1ef318] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:48.783+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603345681 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:48.785+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:48.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1557889998 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:48.786+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749119177 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:48.789+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:48.790+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:48.791+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-14T15:42:48.793+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:48.799+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:48.801+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:48.802+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455dbee0]
2026-01-14T15:42:48.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-14T15:42:48.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:48.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:48.803+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b1ef318]
2026-01-14T15:42:48.807+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be896a1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:48.807+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd466c7]
2026-01-14T15:42:48.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:48.808+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782085467 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:48.809+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:48.809+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-14T15:42:48.810+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:48.810+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:48.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:48.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:48.811+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:48.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:48.818+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-14T15:42:48.819+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be896a1]
2026-01-14T15:42:48.825+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:48.829+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:48.831+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:48.824+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expense-categories/merged
2026-01-14T15:42:48.841+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-14T15:42:48.842+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-14T15:42:48.842+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-14T15:42:48.843+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:48.845+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:48.850+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:48.851+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@624efe44] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:48.861+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@31138180 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:48.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-14T15:42:48.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:48.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-14T15:42:48.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@624efe44]
2026-01-14T15:42:48.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:48.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-14T15:42:48.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.346+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-01-14T15:42:50.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-01-14T15:42:50.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-01-14T15:42:50.347+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-01-14T15:42:50.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:50.360+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:50.350+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:50.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:50.354+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:50.361+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:50.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:50.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:50.374+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:50.376+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:50.376+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.377+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66334ab7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:50.379+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:50.362+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:50.363+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:50.366+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-01-14T15:42:50.367+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-01-14T15:42:50.383+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:50.383+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:50.392+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:50.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits
2026-01-14T15:42:50.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/plans
2026-01-14T15:42:50.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:50.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:50.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.405+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2536b1c9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.394+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-01-14T15:42:50.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@320160479 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:50.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:50.410+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:50.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-01-14T15:42:50.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:50.403+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:50.408+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-01-14T15:42:50.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-01-14T15:42:50.414+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:50.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.417+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-01-14T15:42:50.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2019312490 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:50.418+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:50.425+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-01-14T15:42:50.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f9e96f9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:50.430+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66334ab7]
2026-01-14T15:42:50.431+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.434+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.442+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.443+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:50.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.444+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9a7aef] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504e220b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.445+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.458+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:50.459+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@514854925 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:50.465+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:50.466+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1aed30] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.466+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.468+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:50.469+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2536b1c9]
2026-01-14T15:42:50.474+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829209593 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:50.475+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513234399 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:50.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:50.485+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-01-14T15:42:50.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:50.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd26f99] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.493+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-01-14T15:42:50.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:50.503+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530040651 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:50.503+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:50.511+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38579149 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:50.511+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:50.512+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:50.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-01-14T15:42:50.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:50.514+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 1(Long)
2026-01-14T15:42:50.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:50.517+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-01-14T15:42:50.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504e220b]
2026-01-14T15:42:50.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9a7aef]
2026-01-14T15:42:50.520+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.522+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:50.523+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-01-14T15:42:50.524+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:50.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 1
2026-01-14T15:42:50.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:50.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T15:42:50.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-01-14T15:42:50.542+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd26f99]
2026-01-14T15:42:50.543+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1aed30]
2026-01-14T15:42:50.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:50.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-14T15:42:50.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/plans
2026-01-14T15:42:50.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.546+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f9e96f9]
2026-01-14T15:42:50.561+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.551+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T15:42:50.560+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-01-14T15:42:50.560+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:50.564+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CreditDto(creditId=8, companyId=1, amount=5145, reaso (truncated)...]
2026-01-14T15:42:50.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:50.570+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T15:42:50.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-01-14T15:42:50.568+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.569+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.579+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-01-14T15:42:50.613+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits
2026-01-14T15:42:50.613+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-01-14T15:42:50.613+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-01-14T15:42:50.614+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-01-14T15:42:50.614+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.580+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T15:42:50.582+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T15:42:50.619+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-14T15:42:50.593+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-01-14T15:42:50.617+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.619+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.623+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T15:42:50.623+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.623+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.660+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d9c879] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.649+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T15:42:50.649+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T15:42:50.659+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b04b0da] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.661+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054707481 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:50.662+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.662+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T15:42:50.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@208737761 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:50.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-01-14T15:42:50.663+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297bbdfc] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.664+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:50.664+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-01-14T15:42:50.666+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 1(Long)
2026-01-14T15:42:50.668+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163711473 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:50.705+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T15:42:50.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-01-14T15:42:50.708+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T15:42:50.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:50.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T15:42:50.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3695ae52] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:50.717+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1284465791 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:50.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 1
2026-01-14T15:42:50.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-01-14T15:42:50.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T15:42:50.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d9c879]
2026-01-14T15:42:50.726+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b04b0da]
2026-01-14T15:42:50.727+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T15:42:50.727+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.727+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CreditDto(creditId=8, companyId=1, amount=5145, reaso (truncated)...]
2026-01-14T15:42:50.728+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-01-14T15:42:50.729+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.730+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.731+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T15:42:50.748+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T15:42:50.749+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297bbdfc]
2026-01-14T15:42:50.753+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T15:42:50.761+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.762+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T15:42:50.765+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:50.773+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T15:42:50.776+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T15:42:50.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3695ae52]
2026-01-14T15:42:50.777+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:50.783+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T15:42:50.784+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:52.031+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:52.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:52.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:52.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-14T15:42:52.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:52.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:52.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:52.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expense-categories/merged
2026-01-14T15:42:52.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:52.036+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:52.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:52.036+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-14T15:42:52.038+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:52.040+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:52.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-14T15:42:52.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-14T15:42:52.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:52.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1127668] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:52.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:52.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e1dad7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:52.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:52.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472235139 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:52.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:52.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:52.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474142531 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:52.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e50e24] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:52.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:52.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:52.059+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:52.061+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1029016491 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:52.061+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:52.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-14T15:42:52.067+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1127668]
2026-01-14T15:42:52.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:52.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:52.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:52.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e1dad7]
2026-01-14T15:42:52.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:52.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:52.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444f28f7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:52.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:52.079+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116644560 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:52.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:52.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:52.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:52.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-14T15:42:52.092+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444f28f7]
2026-01-14T15:42:52.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e50e24]
2026-01-14T15:42:52.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:52.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:52.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:52.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-14T15:42:52.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:52.098+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:52.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-14T15:42:52.110+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expense-categories/merged
2026-01-14T15:42:52.113+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-14T15:42:52.115+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-14T15:42:52.115+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-14T15:42:52.115+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:52.116+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-14T15:42:52.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:52.117+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7d08b2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:52.120+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2004014778 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:52.121+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-14T15:42:52.127+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:52.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-14T15:42:52.129+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7d08b2]
2026-01-14T15:42:52.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:52.131+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-14T15:42:52.132+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:53.376+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:53.390+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:53.390+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1/approvers
2026-01-14T15:42:53.396+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:53.397+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:53.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/1/approvers
2026-01-14T15:42:53.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:53.398+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:53.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1/approvers
2026-01-14T15:42:53.399+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:53.401+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:53.402+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1/approvers", parameters={}
2026-01-14T15:42:53.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:53.419+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:53.422+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-14T15:42:53.423+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.425+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a14a24f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.425+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:53.426+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9467ac] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.428+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:53.429+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.443+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c98a29] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.462+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110721158 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:53.463+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985892702 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:53.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1900032680 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:53.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:53.480+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:53.481+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-14T15:42:53.483+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:53.484+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:53.486+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:53.496+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:53.499+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a14a24f]
2026-01-14T15:42:53.500+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.500+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-01-14T15:42:53.500+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:53.500+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f484f9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.500+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c98a29]
2026-01-14T15:42:53.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9467ac]
2026-01-14T15:42:53.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:53.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843758816 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:53.501+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:53.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=13, userId=1, approv (truncated)...]
2026-01-14T15:42:53.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:53.502+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:53.503+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:53.508+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:53.509+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:53.513+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1/approvers
2026-01-14T15:42:53.519+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/1/approvers
2026-01-14T15:42:53.516+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-14T15:42:53.525+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1/approvers
2026-01-14T15:42:53.526+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/approvers
2026-01-14T15:42:53.526+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-14T15:42:53.526+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1/approvers", parameters={}
2026-01-14T15:42:53.526+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-14T15:42:53.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-14T15:42:53.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-14T15:42:53.527+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:53.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-14T15:42:53.528+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf269b1] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.529+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.531+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287522ec] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.532+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144251254 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:53.534+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-14T15:42:53.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:53.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369533692 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:53.535+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:53.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-14T15:42:53.539+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f484f9]
2026-01-14T15:42:53.540+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-14T15:42:53.541+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:53.541+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:53.545+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:53.562+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-14T15:42:53.562+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-01-14T15:42:53.564+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf269b1]
2026-01-14T15:42:53.565+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287522ec]
2026-01-14T15:42:53.565+09:00  INFO 42568 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-14T15:42:53.565+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:53.565+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:53.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=13, userId=1, approv (truncated)...]
2026-01-14T15:42:53.566+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-14T15:42:53.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:53.567+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:53.584+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-14T15:42:53.585+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/approvers
2026-01-14T15:42:53.593+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-14T15:42:53.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-14T15:42:53.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-14T15:42:53.594+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:53.595+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1860f5d6] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:53.596+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@31653386 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:53.597+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-14T15:42:53.598+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-14T15:42:53.601+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-14T15:42:53.601+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1860f5d6]
2026-01-14T15:42:53.603+09:00  INFO 42568 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-14T15:42:53.611+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:53.611+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-14T15:42:53.612+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:55.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:55.698+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:55.700+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:55.700+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:55.700+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:55.700+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-14T15:42:55.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:55.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:55.701+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-14T15:42:55.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-14T15:42:55.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:55.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:55.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:55.702+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-14T15:42:55.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-14T15:42:55.703+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-14T15:42:55.704+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:55.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2d7f87] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.706+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-14T15:42:55.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-14T15:42:55.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-14T15:42:55.707+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.710+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc603a2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-14T15:42:55.709+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-14T15:42:55.710+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:55.712+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-14T15:42:55.713+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-14T15:42:55.714+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.715+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.718+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68dcfdbf] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.715+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.716+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a7ec5d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.717+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333321139 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:55.717+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953086969 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:55.822+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44da25d3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.823+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:55.842+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@201595153 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:55.859+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:55.860+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938142587 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:55.863+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:55.864+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:55.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:55.865+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:55.866+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:55.868+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:55.869+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1030637920 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:55.874+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:55.877+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:55.881+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:55.886+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2d7f87]
2026-01-14T15:42:55.886+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc603a2]
2026-01-14T15:42:55.892+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:55.894+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:55.894+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.895+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:55.897+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d6ab5a] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.898+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:55.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710605213 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:55.899+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:55.904+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:55.904+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 8
2026-01-14T15:42:55.912+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:55.912+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a7ec5d]
2026-01-14T15:42:55.916+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:55.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68dcfdbf]
2026-01-14T15:42:55.919+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.922+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:55.925+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44da25d3]
2026-01-14T15:42:55.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.926+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a51f5d0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.927+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:55.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:55.928+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:55.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421b5f7e] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199133368 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:55.929+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:55.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d6ab5a]
2026-01-14T15:42:55.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-14T15:42:55.930+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@963264569 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:55.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:55.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:55.931+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:55.932+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:55.932+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:55.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:55.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:55.933+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:55.934+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:55.941+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.941+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:55.942+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bf6b986] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.952+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:55.957+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a51f5d0]
2026-01-14T15:42:55.958+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:55.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071667963 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:55.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:55.959+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:55.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:55.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421b5f7e]
2026-01-14T15:42:55.963+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:55.960+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d95d46] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.961+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:55.963+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.964+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488883448 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:55.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:55.965+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735adca7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:55.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:55.966+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:55.967+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1797426461 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:55.968+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bf6b986]
2026-01-14T15:42:55.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:55.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.969+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:55.972+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:55.974+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5fbb6f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.975+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 39(Long), 36(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-14T15:42:55.975+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:55.976+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773682545 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:55.976+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:55.977+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:55.978+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:55.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:55.981+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d95d46]
2026-01-14T15:42:55.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.982+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 10
2026-01-14T15:42:55.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419c1253] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735adca7]
2026-01-14T15:42:55.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335369291 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:55.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:55.983+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:55.985+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:55.986+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5fbb6f]
2026-01-14T15:42:55.987+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@453987e2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.988+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:55.989+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:55.989+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.990+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621349382 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:55.990+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:55.991+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b7e3ef] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.991+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:55.991+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:55.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@940816213 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:55.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:55.992+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:55.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:55.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:55.993+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419c1253]
2026-01-14T15:42:55.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:55.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:55.994+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:55.996+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d210917] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@453987e2]
2026-01-14T15:42:55.998+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a42420f] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:55.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824662557 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:55.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:55.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:55.999+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802358686 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:56.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:56.000+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b7e3ef]
2026-01-14T15:42:56.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-14T15:42:56.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:56.001+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:56.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:56.002+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:56.008+09:00 DEBUG 42568 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.010+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-14T15:42:56.011+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:56.016+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d210917]
2026-01-14T15:42:56.017+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-14T15:42:56.017+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.017+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-14T15:42:56.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:56.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:56.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-14T15:42:56.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:56.018+09:00 DEBUG 42568 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.019+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:56.023+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-14T15:42:56.023+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a42420f]
2026-01-14T15:42:56.026+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:56.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.028+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c5d933] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:56.027+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41517abe] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.028+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:56.028+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@147827486 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:56.029+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:56.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537360949 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:56.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:56.030+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:56.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:56.032+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:56.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:56.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c2bf7f7] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.033+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:56.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219167829 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:56.034+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:56.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:56.039+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.035+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:56.041+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d3496e9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.041+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 8
2026-01-14T15:42:56.041+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:56.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:56.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@382408711 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:56.042+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41517abe]
2026-01-14T15:42:56.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c5d933]
2026-01-14T15:42:56.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:56.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.043+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43537298] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:56.044+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:56.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6000daf2] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.045+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1033971584 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:56.046+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c2bf7f7]
2026-01-14T15:42:56.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@718198982 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:56.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.047+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bde4002] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:56.048+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149528257 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:56.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d3496e9]
2026-01-14T15:42:56.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:56.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.049+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.050+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:56.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6000daf2]
2026-01-14T15:42:56.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43537298]
2026-01-14T15:42:56.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:56.051+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.052+09:00 DEBUG 42568 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b0bad3d] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ec2f6b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.053+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:56.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109350884 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:56.062+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:56.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T15:42:56.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1098074492 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:56.060+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bde4002]
2026-01-14T15:42:56.062+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 39(Long), 36(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-14T15:42:56.063+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T15:42:56.066+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:56.068+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.069+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T15:42:56.075+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:56.075+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:56.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T15:42:56.076+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 10
2026-01-14T15:42:56.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T15:42:56.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.077+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b0bad3d]
2026-01-14T15:42:56.080+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673e5c84] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.078+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:56.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:56.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@563771163 wrapping com.mysql.cj.jdbc.ConnectionImpl@7111bfc5] will not be managed by Spring
2026-01-14T15:42:56.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.082+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@114904b9] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ec2f6b]
2026-01-14T15:42:56.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:56.083+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@52959996 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a05031] will not be managed by Spring
2026-01-14T15:42:56.084+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.085+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:56.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T15:42:56.088+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ad315b] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:56.090+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.091+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-14T15:42:56.092+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522717970 wrapping com.mysql.cj.jdbc.ConnectionImpl@579e8944] will not be managed by Spring
2026-01-14T15:42:56.092+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:56.092+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673e5c84]
2026-01-14T15:42:56.093+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.094+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.095+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-14T15:42:56.099+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@114904b9]
2026-01-14T15:42:56.096+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7802bf] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.097+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-14T15:42:56.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ad315b]
2026-01-14T15:42:56.100+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119691825 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:56.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.101+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-14T15:42:56.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.102+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:56.116+09:00 DEBUG 42568 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.116+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:56.127+09:00 DEBUG 42568 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.118+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:56.145+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-14T15:42:56.147+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-14T15:42:56.149+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-14T15:42:56.150+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:56.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-14T15:42:56.152+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7802bf]
2026-01-14T15:42:56.157+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T15:42:56.158+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.160+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4209b432] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.160+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601776438 wrapping com.mysql.cj.jdbc.ConnectionImpl@481b5b9a] will not be managed by Spring
2026-01-14T15:42:56.161+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:56.162+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:56.159+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.163+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aadf6e6] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.164+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867838740 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.166+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.167+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:56.168+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4209b432]
2026-01-14T15:42:56.170+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.171+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.171+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:56.171+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aadf6e6]
2026-01-14T15:42:56.173+09:00 DEBUG 42568 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.175+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.176+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d6bebb] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T15:42:56.177+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1718188769 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.179+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.178+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-14T15:42:56.183+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T15:42:56.184+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T15:42:56.185+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T15:42:56.189+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb9eb73] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d6bebb]
2026-01-14T15:42:56.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@87456657 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:56.190+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.191+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31af37cf] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.191+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T15:42:56.192+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207596071 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.193+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-14T15:42:56.193+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:56.197+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-14T15:42:56.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:56.198+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb9eb73]
2026-01-14T15:42:56.202+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.203+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ce1971] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.206+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284131848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3c339a9c] will not be managed by Spring
2026-01-14T15:42:56.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T15:42:56.207+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:56.208+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T15:42:56.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31af37cf]
2026-01-14T15:42:56.209+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8facdc] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.210+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658255117 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T15:42:56.211+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.212+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ce1971]
2026-01-14T15:42:56.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.213+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.214+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T15:42:56.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T15:42:56.215+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.218+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8facdc]
2026-01-14T15:42:56.219+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.221+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d5f15c] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.224+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107695862 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.225+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:56.225+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:56.227+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:56.228+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d5f15c]
2026-01-14T15:42:56.228+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.228+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a91d1e3] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.229+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347116284 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T15:42:56.230+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T15:42:56.235+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-01-14T15:42:56.235+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a91d1e3]
2026-01-14T15:42:56.236+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.238+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e0b2122] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.238+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2062677449 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.239+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.239+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.241+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.241+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e0b2122]
2026-01-14T15:42:56.242+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.242+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ee3351] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722483839 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T15:42:56.243+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T15:42:56.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 44
2026-01-14T15:42:56.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ee3351]
2026-01-14T15:42:56.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T15:42:56.246+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6021c0] was not registered for synchronization because synchronization is not active
2026-01-14T15:42:56.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474277798 wrapping com.mysql.cj.jdbc.ConnectionImpl@571fbb90] will not be managed by Spring
2026-01-14T15:42:56.248+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T15:42:56.249+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-14T15:42:56.250+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T15:42:56.250+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6021c0]
2026-01-14T15:42:56.251+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T15:42:56.251+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T15:42:56.251+09:00 DEBUG 42568 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
