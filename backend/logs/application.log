2026-01-20T09:23:33.845+09:00  INFO 21808 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 21808 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-20T09:23:33.860+09:00 DEBUG 21808 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-20T09:23:33.866+09:00  INFO 21808 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-20T09:23:36.685+09:00 DEBUG 21808 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-20T09:23:36.688+09:00 DEBUG 21808 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-20T09:23:37.059+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-20T09:23:37.062+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-20T09:23:37.065+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-20T09:23:37.067+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-20T09:23:37.069+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-20T09:23:37.070+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-20T09:23:37.072+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-20T09:23:37.073+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-20T09:23:37.079+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-20T09:23:37.080+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-20T09:23:37.082+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-20T09:23:37.084+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-20T09:23:37.086+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-20T09:23:37.086+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-20T09:23:37.087+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-20T09:23:37.087+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-20T09:23:37.088+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-20T09:23:37.088+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-20T09:23:37.093+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-20T09:23:37.101+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-20T09:23:37.102+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-20T09:23:37.103+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-20T09:23:37.105+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-20T09:23:37.107+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-20T09:23:37.108+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-20T09:23:37.111+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-20T09:23:37.112+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-20T09:23:37.115+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-20T09:23:37.119+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-20T09:23:37.120+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-20T09:23:37.122+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-20T09:23:37.127+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-20T09:23:37.130+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-20T09:23:37.135+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-20T09:23:37.136+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-20T09:23:37.137+09:00 DEBUG 21808 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-20T09:23:38.084+09:00  INFO 21808 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-20T09:23:38.121+09:00  INFO 21808 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-20T09:23:38.148+09:00  INFO 21808 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-20T09:23:38.295+09:00  INFO 21808 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-20T09:23:38.296+09:00  INFO 21808 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4288 ms
2026-01-20T09:23:38.428+09:00 DEBUG 21808 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-20T09:23:38.431+09:00 DEBUG 21808 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-20T09:23:38.966+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-20T09:23:38.998+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-20T09:23:39.019+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-20T09:23:39.052+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-20T09:23:39.081+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-20T09:23:39.122+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-20T09:23:39.142+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-20T09:23:39.209+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-20T09:23:39.354+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-20T09:23:39.418+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-20T09:23:39.434+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-20T09:23:39.448+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-20T09:23:39.476+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-20T09:23:39.488+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-20T09:23:39.506+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-20T09:23:39.524+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-20T09:23:39.567+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-20T09:23:39.586+09:00 DEBUG 21808 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-20T09:23:40.857+09:00 DEBUG 21808 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 162 mappings in 'requestMappingHandlerMapping'
2026-01-20T09:23:41.080+09:00 DEBUG 21808 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-20T09:23:41.130+09:00  WARN 21808 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 015c88e1-276d-4803-b594-f989fb99522d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-20T09:23:41.146+09:00  INFO 21808 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-20T09:23:41.341+09:00 DEBUG 21808 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-20T09:23:41.492+09:00 DEBUG 21808 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-20T09:23:41.587+09:00 DEBUG 21808 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-20T09:23:41.593+09:00 DEBUG 21808 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-20T09:23:41.857+09:00  INFO 21808 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-20T09:23:41.881+09:00  INFO 21808 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 8.884 seconds (process running for 9.603)
2026-01-20T09:27:08.740+09:00  INFO 21808 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-20T09:27:08.741+09:00  INFO 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-20T09:27:08.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-20T09:27:08.743+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-20T09:27:08.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-20T09:27:08.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3ea84e01
2026-01-20T09:27:08.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@51f34185
2026-01-20T09:27:08.760+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-20T09:27:08.776+09:00  INFO 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 34 ms
2026-01-20T09:27:08.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-20T09:27:08.916+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-20T09:27:08.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-20T09:27:08.929+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-20T09:27:08.938+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-20T09:27:08.941+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-20T09:27:09.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-20T09:27:09.090+09:00  INFO 21808 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-20T09:27:09.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:09.126+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf63f91] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:09.156+09:00  INFO 21808 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-20T09:27:09.795+09:00  INFO 21808 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2010f496
2026-01-20T09:27:09.800+09:00  INFO 21808 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-20T09:27:09.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8209236 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:09.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-20T09:27:09.892+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-20T09:27:09.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-20T09:27:09.959+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf63f91]
2026-01-20T09:27:10.094+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:10.094+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3473f2ae] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:10.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002343730 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:10.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T09:27:10.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T09:27:10.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T09:27:10.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3473f2ae]
2026-01-20T09:27:10.327+09:00  INFO 21808 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 1
2026-01-20T09:27:10.329+09:00  INFO 21808 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-20T09:27:10.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:10.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-20T09:27:10.388+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:10.903+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T09:27:10.917+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T09:27:11.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-20T09:27:11.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T09:27:11.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T09:27:11.168+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T09:27:11.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:11.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbfda23] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:11.184+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799663693 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:11.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T09:27:11.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T09:27:11.195+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T09:27:11.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbfda23]
2026-01-20T09:27:11.200+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:11.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-20T09:27:11.297+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:12.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:12.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:12.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:12.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.400+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:12.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:12.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:12.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:12.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:12.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:12.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:12.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:12.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:12.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:12.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:12.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:12.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:12.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T09:27:12.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T09:27:12.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:12.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:12.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:12.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T09:27:12.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:12.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:12.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:12.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761130af] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:12.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:12.537+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:12.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.563+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74df2bd6] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2423153a] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e69569f] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17735666] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e16c1cf] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93463063 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:12.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:12.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485414595 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:12.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294889753 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:12.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@359149002 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:12.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478230196 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:12.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:12.612+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:12.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.615+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:12.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.625+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.667+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17735666]
2026-01-20T09:27:12.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104799458 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:12.679+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691b9ef8] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:12.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.681+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2423153a]
2026-01-20T09:27:12.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74df2bd6]
2026-01-20T09:27:12.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:12.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@767327552 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:12.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cc12e4] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f4b9ad] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@850618858 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:12.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.731+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691b9ef8]
2026-01-20T09:27:12.736+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:12.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:12.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:12.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698881811 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:12.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cc12e4]
2026-01-20T09:27:12.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761130af]
2026-01-20T09:27:12.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e69569f]
2026-01-20T09:27:12.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e16c1cf]
2026-01-20T09:27:12.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.762+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315b0e14] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce80a15] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.793+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12280deb] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.796+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644718146 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:12.805+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:12.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140250980 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:12.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711654186 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:12.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2048dc20] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.799+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326395ec] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:12.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:12.816+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:12.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.825+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104222595 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:12.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:12.841+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.889+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@983456727 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:12.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:12.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.987+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12280deb]
2026-01-20T09:27:12.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:12.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:12.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f4b9ad]
2026-01-20T09:27:12.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:12.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:12.994+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ff3a4b] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:13.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411634184 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.058+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2048dc20]
2026-01-20T09:27:13.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:13.088+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:13.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:13.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:13.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:13.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:13.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:13.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:13.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:13.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T09:27:13.145+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:13.149+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15e7572b] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326395ec]
2026-01-20T09:27:13.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@455125991 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:13.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:13.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:13.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:13.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.282+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.288+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315b0e14]
2026-01-20T09:27:13.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce80a15]
2026-01-20T09:27:13.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ff3a4b]
2026-01-20T09:27:13.384+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15e7572b]
2026-01-20T09:27:13.384+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.384+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.386+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7556e2d9] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68edb251] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33802ab1] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.388+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1da1dc] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@191058617 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:13.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1460301028 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:13.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2070246376 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970072507 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:13.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.400+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.407+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.412+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7556e2d9]
2026-01-20T09:27:13.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33802ab1]
2026-01-20T09:27:13.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6d2060] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1da1dc]
2026-01-20T09:27:13.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68edb251]
2026-01-20T09:27:13.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@670365207 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:13.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e91fefc] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d160dac] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653f0a55] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828094525 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976379539 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:13.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615152025 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:13.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:13.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:13.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.555+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6d2060]
2026-01-20T09:27:13.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.566+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e91fefc]
2026-01-20T09:27:13.566+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d160dac]
2026-01-20T09:27:13.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1262584e] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6efa9e40] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667525679 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:13.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd40124] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653f0a55]
2026-01-20T09:27:13.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:13.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062071165 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.582+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471199529 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:13.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:13.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:13.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646d2786] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:13.596+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2040395004 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:13.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:13.629+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:13.634+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.651+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1262584e]
2026-01-20T09:27:13.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.663+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.664+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6efa9e40]
2026-01-20T09:27:13.673+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd40124]
2026-01-20T09:27:13.674+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@377070c7] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.674+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.677+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.679+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635966512 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:13.679+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53378025] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646d2786]
2026-01-20T09:27:13.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e34d83] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658477033 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.687+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608493792 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:13.691+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.693+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d45433] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.693+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@956826680 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:13.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53378025]
2026-01-20T09:27:13.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@377070c7]
2026-01-20T09:27:13.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ac1706] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21527076] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.727+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d45433]
2026-01-20T09:27:13.727+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e34d83]
2026-01-20T09:27:13.730+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1727371454 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.733+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@353426131 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:13.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d263919] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36dda365] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.743+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2068159810 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:13.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1599364585 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:13.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:13.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:13.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:13.762+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:13.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ac1706]
2026-01-20T09:27:13.771+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21527076]
2026-01-20T09:27:13.772+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.772+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64de87d8] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.772+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@220444770 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:13.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c34397c] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018561410 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:13.776+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:13.781+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:13.783+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:13.789+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:13.791+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d263919]
2026-01-20T09:27:13.791+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36dda365]
2026-01-20T09:27:13.795+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.796+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:13.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.799+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5011c0] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a92c441] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:13.842+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:13.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64de87d8]
2026-01-20T09:27:13.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348603810 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:13.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508814979 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c34397c]
2026-01-20T09:27:14.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:14.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:14.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:14.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:14.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:14.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.070+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5011c0]
2026-01-20T09:27:14.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:14.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a92c441]
2026-01-20T09:27:14.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:14.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:14.093+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c0782e] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:14.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558977723 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:14.106+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:14.127+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:14.131+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c0782e]
2026-01-20T09:27:14.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:14.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:14.146+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.151+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b65faa0] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832995964 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.157+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.157+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:14.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:14.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:14.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:14.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:14.175+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T09:27:14.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T09:27:14.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T09:27:14.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b65faa0]
2026-01-20T09:27:14.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:14.183+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:14.183+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:14.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.199+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551b62f2] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.198+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.199+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:14.199+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361374345 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e1d9564] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:14.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@311042758 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.212+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.227+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551b62f2]
2026-01-20T09:27:14.266+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bfac6fb] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@628637060 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.276+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e1d9564]
2026-01-20T09:27:14.291+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.293+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4158a9c8] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.293+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.294+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53256754 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.296+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bfac6fb]
2026-01-20T09:27:14.296+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.297+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.298+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.298+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74099786] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.300+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154753762 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.308+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:14.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.312+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4158a9c8]
2026-01-20T09:27:14.312+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:14.313+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dfc42] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.316+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49218476 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:14.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:14.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74099786]
2026-01-20T09:27:14.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:14.326+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484a041e] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883705142 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:14.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dfc42]
2026-01-20T09:27:14.350+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7aa3d0] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410123729 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484a041e]
2026-01-20T09:27:14.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1012da95] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148919933 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:14.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7aa3d0]
2026-01-20T09:27:14.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:14.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.400+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a130e3a] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.407+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@35603595 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:14.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:14.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1012da95]
2026-01-20T09:27:14.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:14.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26368d79] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553004376 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:14.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:14.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:14.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a130e3a]
2026-01-20T09:27:14.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c737b6e] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323552772 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:14.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:14.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:14.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26368d79]
2026-01-20T09:27:14.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7876ae] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312253213 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T09:27:14.518+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c737b6e]
2026-01-20T09:27:14.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3cb454] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.537+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1488132310 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.544+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7876ae]
2026-01-20T09:27:14.545+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b65e1e0] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@339163940 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3cb454]
2026-01-20T09:27:14.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:14.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:14.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e3d5ed] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.557+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602359953 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.563+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:14.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T09:27:14.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:14.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b65e1e0]
2026-01-20T09:27:14.582+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e038b0a] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254952395 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:14.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T09:27:14.616+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e3d5ed]
2026-01-20T09:27:14.608+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.617+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:14.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fdf2ced] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:14.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211416646 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:14.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.629+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:14.630+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:14.666+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e038b0a]
2026-01-20T09:27:14.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:14.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:14.684+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fdf2ced]
2026-01-20T09:27:14.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:14.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:14.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:14.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:14.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:17.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T09:27:17.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:17.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:17.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T09:27:17.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:17.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T09:27:17.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:17.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T09:27:17.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T09:27:17.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T09:27:17.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:17.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:17.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T09:27:17.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:17.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T09:27:17.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:17.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:17.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:18.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T09:27:18.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:18.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T09:27:18.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T09:27:18.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:18.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:18.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T09:27:18.026+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:18.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T09:27:18.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T09:27:18.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:18.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:18.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T09:27:18.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:18.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:18.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T09:27:18.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:18.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:18.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T09:27:18.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:18.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T09:27:18.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b065255] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262777ba] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140f538f] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a02de1] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167fc3bd] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.060+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d55d6d] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992881247 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582387056 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:18.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1577862829 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388713767 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:18.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136435973 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:18.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@764698400 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:18.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.070+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.111+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.288+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.210+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.280+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.280+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d55d6d]
2026-01-20T09:27:18.293+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.304+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664cd4b3] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.304+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144489620 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.312+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.313+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b065255]
2026-01-20T09:27:18.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.331+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72704cc6] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:18.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:18.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:18.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T09:27:18.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365395347 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262777ba]
2026-01-20T09:27:18.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140f538f]
2026-01-20T09:27:18.368+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664cd4b3]
2026-01-20T09:27:18.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167fc3bd]
2026-01-20T09:27:18.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a02de1]
2026-01-20T09:27:18.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393f98af] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672c8ac1] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bafe38] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a15781] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308156672 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:18.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fe93f9] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322918307 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:18.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463951556 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:18.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678389553 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:18.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@4776554 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:18.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:18.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72704cc6]
2026-01-20T09:27:18.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d360891] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393f98af]
2026-01-20T09:27:18.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bafe38]
2026-01-20T09:27:18.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fe93f9]
2026-01-20T09:27:18.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672c8ac1]
2026-01-20T09:27:18.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1833984397 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:18.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:18.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:18.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c18e8f] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:18.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137213077 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:18.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:18.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:18.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T09:27:18.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T09:27:18.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:18.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T09:27:18.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T09:27:18.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:18.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T09:27:18.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a15781]
2026-01-20T09:27:18.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T09:27:18.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T09:27:18.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T09:27:18.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T09:27:18.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:18.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T09:27:18.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d360891]
2026-01-20T09:27:18.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c18e8f]
2026-01-20T09:27:18.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T09:27:18.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:18.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:18.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1421b747] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T09:27:18.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T09:27:18.607+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.609+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@515303197 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.611+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T09:27:18.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1278377c] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e890a9] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.616+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c783dd] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.625+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1067960098 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136263949 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d8b3d16] will not be managed by Spring
2026-01-20T09:27:18.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68f2e905] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.629+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1837305284 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:18.630+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.630+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19255ac9] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.633+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.635+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714752107 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:18.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.638+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546110857 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:18.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.647+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T09:27:18.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.657+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1421b747]
2026-01-20T09:27:18.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.661+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T09:27:18.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:18.664+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e890a9]
2026-01-20T09:27:18.665+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1278377c]
2026-01-20T09:27:18.666+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc1c4b8] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.666+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c783dd]
2026-01-20T09:27:18.668+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T09:27:18.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@650364808 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T09:27:18.681+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fbc620b] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68f2e905]
2026-01-20T09:27:18.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:18.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ed5ea59] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T09:27:18.685+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823240535 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.693+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T09:27:18.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436755253 wrapping com.mysql.cj.jdbc.ConnectionImpl@4e3b560f] will not be managed by Spring
2026-01-20T09:27:18.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19255ac9]
2026-01-20T09:27:18.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:18.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27080050] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.725+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T09:27:18.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1489862517 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:18.727+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T09:27:18.728+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.728+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db15b73] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.730+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T09:27:18.731+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc1c4b8]
2026-01-20T09:27:18.732+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592899358 wrapping com.mysql.cj.jdbc.ConnectionImpl@54913def] will not be managed by Spring
2026-01-20T09:27:18.733+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.734+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fbc620b]
2026-01-20T09:27:18.735+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f8438] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930767937 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@107102c6] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:18.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1275168505 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.756+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:18.757+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T09:27:18.759+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T09:27:18.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ed5ea59]
2026-01-20T09:27:18.776+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27080050]
2026-01-20T09:27:18.776+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db15b73]
2026-01-20T09:27:18.777+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.777+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:18.790+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T09:27:18.792+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@204a61c6] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.794+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T09:27:18.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f8438]
2026-01-20T09:27:18.808+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1193803551 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:18.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:18.816+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3caece59] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T09:27:18.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T09:27:18.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1528898415 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@107102c6]
2026-01-20T09:27:18.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.841+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c67f38] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.842+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800664628 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.848+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T09:27:18.848+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.849+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@204a61c6]
2026-01-20T09:27:18.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43694499] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3caece59]
2026-01-20T09:27:18.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664638051 wrapping com.mysql.cj.jdbc.ConnectionImpl@51b96b9c] will not be managed by Spring
2026-01-20T09:27:18.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.858+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc6ae0] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.859+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.861+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1231724736 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.862+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:18.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c67f38]
2026-01-20T09:27:18.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T09:27:18.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe0ab32] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.872+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1809528393 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43694499]
2026-01-20T09:27:18.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T09:27:18.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T09:27:18.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T09:27:18.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T09:27:18.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc6ae0]
2026-01-20T09:27:18.887+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef94d0] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.893+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T09:27:18.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646544135 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b11d019] will not be managed by Spring
2026-01-20T09:27:18.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe0ab32]
2026-01-20T09:27:18.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T09:27:18.903+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b4cbb3] was not registered for synchronization because synchronization is not active
2026-01-20T09:27:18.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927760556 wrapping com.mysql.cj.jdbc.ConnectionImpl@2010f496] will not be managed by Spring
2026-01-20T09:27:18.912+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T09:27:18.913+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T09:27:18.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef94d0]
2026-01-20T09:27:18.916+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.917+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:18.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T09:27:18.925+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T09:27:18.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b4cbb3]
2026-01-20T09:27:18.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T09:27:18.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T09:27:18.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:14.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:14.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.244+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:14.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:14.285+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:14.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:14.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.291+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:14.292+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.295+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.300+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T10:03:14.310+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:14.320+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:14.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T10:03:14.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:14.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:14.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:14.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:14.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eadc8c7] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T10:03:14.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3144e855] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T10:03:14.338+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:14.338+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6891b69d] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486f49dd] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:14.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecef1c5] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208168863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676381978 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@987594702 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064532348 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.356+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:14.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366686303 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:14.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:14.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486f49dd]
2026-01-20T10:03:14.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6891b69d]
2026-01-20T10:03:14.385+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.386+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3144e855]
2026-01-20T10:03:14.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eadc8c7]
2026-01-20T10:03:14.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecef1c5]
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fda51e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c030b] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7cb921] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251588b7] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1010464597 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@260551226 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409aa7b2] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390189086 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020740730 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@446778523 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.400+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.410+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c030b]
2026-01-20T10:03:14.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fda51e]
2026-01-20T10:03:14.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.412+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693784a8] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409aa7b2]
2026-01-20T10:03:14.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7cb921]
2026-01-20T10:03:14.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251588b7]
2026-01-20T10:03:14.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127f7a0c] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232249054 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:14.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1274279944 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f34a061] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46522b5f] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:14.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787178754 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136876805 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:14.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127f7a0c]
2026-01-20T10:03:14.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693784a8]
2026-01-20T10:03:14.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.471+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.471+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278982cc] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e17c44b] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f34a061]
2026-01-20T10:03:14.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1322201899 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077235173 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46522b5f]
2026-01-20T10:03:14.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595c2aff] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53587485 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fd801be] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1745341897 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e17c44b]
2026-01-20T10:03:14.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278982cc]
2026-01-20T10:03:14.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595c2aff]
2026-01-20T10:03:14.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6acaef18] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b8207b5] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054114198 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813068779 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.518+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393c3692] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.518+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17823896 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fd801be]
2026-01-20T10:03:14.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d143b1a] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925062391 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b8207b5]
2026-01-20T10:03:14.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393c3692]
2026-01-20T10:03:14.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6acaef18]
2026-01-20T10:03:14.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58eac9a4] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74555f03] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b589a3e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@320783011 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746946493 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725369442 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.554+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d143b1a]
2026-01-20T10:03:14.568+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fbb680e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333137928 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b589a3e]
2026-01-20T10:03:14.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74555f03]
2026-01-20T10:03:14.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58eac9a4]
2026-01-20T10:03:14.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f668314] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.589+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0753c6] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.589+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9ba2c9] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544241580 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74756802 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598927671 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fbb680e]
2026-01-20T10:03:14.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.599+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.601+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.602+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5d4d70] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581426989 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.607+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.610+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.610+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.610+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.610+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.612+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9ba2c9]
2026-01-20T10:03:14.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0753c6]
2026-01-20T10:03:14.615+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f668314]
2026-01-20T10:03:14.616+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.617+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.617+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.617+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.617+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768840f1] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.618+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a1406b] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.618+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ef886aa] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.618+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5d4d70]
2026-01-20T10:03:14.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116734211 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895000698 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@890100802 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd2f90] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.623+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.625+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1398527066 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.631+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.633+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a1406b]
2026-01-20T10:03:14.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768840f1]
2026-01-20T10:03:14.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.644+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.644+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d22f939] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ef886aa]
2026-01-20T10:03:14.652+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a0c428] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.651+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.651+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308234990 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:14.652+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8fed73] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@563839397 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:14.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd2f90]
2026-01-20T10:03:14.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.654+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1152971230 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:14.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.657+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.657+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e129122] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681522399 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.670+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.674+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.672+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d22f939]
2026-01-20T10:03:14.674+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a0c428]
2026-01-20T10:03:14.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e129122]
2026-01-20T10:03:14.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8fed73]
2026-01-20T10:03:14.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:14.677+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:14.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:14.730+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:14.732+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:14.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:14.750+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:14.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:14.755+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:14.758+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:14.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:14.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:14.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:14.902+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.903+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T10:03:14.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:14.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:14.905+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T10:03:14.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T10:03:14.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739d4e30] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:14.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@220859783 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66836d75] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1490340677 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.925+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.926+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.927+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739d4e30]
2026-01-20T10:03:14.934+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1741944a] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66836d75]
2026-01-20T10:03:14.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246723676 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322e9370] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329309829 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.938+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.939+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322e9370]
2026-01-20T10:03:14.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1741944a]
2026-01-20T10:03:14.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c122a4] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5d7da8] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364023487 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916803469 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:14.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:14.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.964+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:14.970+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c122a4]
2026-01-20T10:03:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5d7da8]
2026-01-20T10:03:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@689da2cf] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ab80cc] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840132986 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985809228 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:14.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:14.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:14.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@689da2cf]
2026-01-20T10:03:14.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ab80cc]
2026-01-20T10:03:14.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6e9c84] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3707b7ac] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:14.987+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256244348 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:14.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1539767392 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:14.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:14.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:14.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6e9c84]
2026-01-20T10:03:14.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:14.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:14.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3707b7ac]
2026-01-20T10:03:14.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2ec426] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b3d12a] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168113115 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:15.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644405063 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:15.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:15.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:15.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:15.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:15.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:15.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T10:03:15.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b3d12a]
2026-01-20T10:03:15.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2ec426]
2026-01-20T10:03:15.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f5900e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@630cd1c5] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1102658907 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:15.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795896950 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:15.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:15.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:15.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:15.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:15.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:15.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f5900e]
2026-01-20T10:03:15.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63fc605c] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.033+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022894029 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:15.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:15.035+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@630cd1c5]
2026-01-20T10:03:15.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:15.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:15.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c86673] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573848662 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:15.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:15.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T10:03:15.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:15.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T10:03:15.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c86673]
2026-01-20T10:03:15.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63fc605c]
2026-01-20T10:03:15.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:15.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da82639] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336899ef] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:15.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@650654721 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:15.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865530206 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:15.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:15.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:15.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:15.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:15.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:15.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:15.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336899ef]
2026-01-20T10:03:15.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da82639]
2026-01-20T10:03:15.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:15.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:15.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:15.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:15.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:15.058+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:18.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:18.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-20T10:03:18.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-20T10:03:18.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-20T10:03:18.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-20T10:03:18.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:18.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-20T10:03:18.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-20T10:03:18.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-20T10:03:18.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-20T10:03:18.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:18.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me
2026-01-20T10:03:18.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/companies
2026-01-20T10:03:18.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-20T10:03:18.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me
2026-01-20T10:03:18.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:18.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-20T10:03:18.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-20T10:03:18.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-20T10:03:18.267+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-20T10:03:18.267+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:18.268+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-20T10:03:18.268+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-20T10:03:18.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-20T10:03:18.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-20T10:03:18.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:18.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-20T10:03:18.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-20T10:03:18.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-20T10:03:18.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-20T10:03:18.276+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.277+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 1
2026-01-20T10:03:18.281+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.282+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.282+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 1
2026-01-20T10:03:18.284+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1163f8be] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.285+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71620517] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665523cd] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c858d2f] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@458bed8e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1408456275 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:18.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1173732879 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:18.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:18.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:03:18.365+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:18.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T10:03:18.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591857640 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:18.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@354248310 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:18.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780454395 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:18.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:18.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:03:18.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:18.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:18.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 2(Long), PENDING(String)
2026-01-20T10:03:18.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:18.386+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:18.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1163f8be]
2026-01-20T10:03:18.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:18.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:18.402+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-20T10:03:18.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c858d2f]
2026-01-20T10:03:18.410+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@458bed8e]
2026-01-20T10:03:18.410+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665523cd]
2026-01-20T10:03:18.410+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f8dfe4] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:18.412+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:18.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1191283236 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:18.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1791640a] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d5c971] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:18.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-20T10:03:18.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:18.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016557907 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:18.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T10:03:18.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157416129 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:18.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:18.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:18.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:03:18.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71620517]
2026-01-20T10:03:18.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:03:18.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T10:03:18.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:18.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:18.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T10:03:18.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=2, userId=2, companyId=1 (truncated)...]
2026-01-20T10:03:18.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f8dfe4]
2026-01-20T10:03:18.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:18.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:18.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:18.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:18.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T10:03:18.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1791640a]
2026-01-20T10:03:18.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T10:03:18.555+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 1, role: USER
2026-01-20T10:03:18.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d5c971]
2026-01-20T10:03:18.557+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 1, role: USER
2026-01-20T10:03:18.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:18.557+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:18.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-20T10:03:18.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-20T10:03:18.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:18.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:23.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:23.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T10:03:23.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T10:03:23.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:23.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T10:03:23.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T10:03:23.266+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:23.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T10:03:23.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:23.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T10:03:23.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T10:03:23.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:23.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T10:03:23.288+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T10:03:23.289+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:23.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T10:03:23.298+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:23.291+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T10:03:23.298+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T10:03:23.299+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68486485] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:23.299+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:23.299+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:23.303+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b0530e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:23.309+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b9e340a] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:23.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@103898199 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:23.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:23.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1866053596 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:23.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@408261428 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:23.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:23.326+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T10:03:23.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T10:03:23.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T10:03:23.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T10:03:23.344+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:23.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68486485]
2026-01-20T10:03:23.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:23.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ff01943] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:23.356+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206080481 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:23.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T10:03:23.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T10:03:23.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:23.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b0530e]
2026-01-20T10:03:23.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b9e340a]
2026-01-20T10:03:23.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:23.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:23.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:23.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T10:03:23.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T10:03:23.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:23.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:23.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:23.412+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ff01943]
2026-01-20T10:03:23.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:23.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:23.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:24.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:24.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T10:03:24.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T10:03:24.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:24.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T10:03:24.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T10:03:24.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:24.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T10:03:24.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T10:03:24.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:24.905+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T10:03:24.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T10:03:24.905+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T10:03:24.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:24.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T10:03:24.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T10:03:24.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:24.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:24.916+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5064377e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:24.908+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T10:03:24.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T10:03:24.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:24.922+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T10:03:24.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@707b4f82] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:24.927+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:24.934+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f65135f] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:24.939+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176400647 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:24.941+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:24.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816841284 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:24.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290185626 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:24.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:24.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T10:03:24.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T10:03:24.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:24.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:24.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:24.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5064377e]
2026-01-20T10:03:24.971+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:24.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a60f36] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:24.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619032070 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:24.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:24.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:24.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:24.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T10:03:24.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T10:03:24.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a60f36]
2026-01-20T10:03:24.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f65135f]
2026-01-20T10:03:24.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@707b4f82]
2026-01-20T10:03:24.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:24.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:24.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:24.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:24.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T10:03:24.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T10:03:24.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:25.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:25.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:27.299+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:27.303+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers
2026-01-20T10:03:27.305+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers
2026-01-20T10:03:27.334+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:27.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers
2026-01-20T10:03:27.338+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers
2026-01-20T10:03:27.344+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers
2026-01-20T10:03:27.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:27.350+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers
2026-01-20T10:03:27.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers
2026-01-20T10:03:27.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:27.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers", parameters={}
2026-01-20T10:03:27.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers
2026-01-20T10:03:27.356+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:27.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-20T10:03:27.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers", parameters={}
2026-01-20T10:03:27.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-20T10:03:27.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:27.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:27.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-20T10:03:27.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-20T10:03:27.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367e1b84] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:27.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-20T10:03:27.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-20T10:03:27.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76159622 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:27.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:27.408+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:27.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:27.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d55afad] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:27.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c729c9] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:27.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:27.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:27.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2062300187 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:27.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207496738 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:27.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367e1b84]
2026-01-20T10:03:27.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-20T10:03:27.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-20T10:03:27.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:27.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:27.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:27.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a1fd395] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:27.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778662321 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:27.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:27.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:27.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:27.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a1fd395]
2026-01-20T10:03:27.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:27.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:27.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-01-20T10:03:27.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-01-20T10:03:27.588+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:27.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c729c9]
2026-01-20T10:03:27.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d55afad]
2026-01-20T10:03:27.607+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:27.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:27.623+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=1, userId=2, approve (truncated)...]
2026-01-20T10:03:27.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=1, userId=2, approve (truncated)...]
2026-01-20T10:03:27.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:27.631+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:27.639+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-20T10:03:27.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-20T10:03:27.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-20T10:03:27.673+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-20T10:03:27.681+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/approvers
2026-01-20T10:03:27.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/approvers
2026-01-20T10:03:27.687+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-20T10:03:27.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-20T10:03:27.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-20T10:03:27.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-20T10:03:27.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-20T10:03:27.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:27.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-20T10:03:27.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da42008] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:27.702+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:27.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68348f77] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:27.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108120191 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:27.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@505149327 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:27.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-20T10:03:27.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-20T10:03:27.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-20T10:03:27.771+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-20T10:03:27.821+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-20T10:03:27.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-20T10:03:27.852+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68348f77]
2026-01-20T10:03:27.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da42008]
2026-01-20T10:03:27.867+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-20T10:03:27.866+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-20T10:03:27.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:27.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-20T10:03:27.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:27.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-20T10:03:27.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:27.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:30.371+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:30.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2
2026-01-20T10:03:30.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T10:03:30.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2
2026-01-20T10:03:30.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T10:03:30.386+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:30.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T10:03:30.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T10:03:30.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:30.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T10:03:30.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T10:03:30.400+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T10:03:30.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T10:03:30.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:30.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T10:03:30.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T10:03:30.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T10:03:30.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T10:03:30.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:30.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T10:03:30.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T10:03:30.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T10:03:30.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T10:03:30.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:30.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T10:03:30.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T10:03:30.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T10:03:30.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T10:03:30.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T10:03:30.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T10:03:30.451+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T10:03:30.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f10cad0] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.454+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T10:03:30.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a269ed] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efff0cc] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4229f218] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57549b7c] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084170008 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:30.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@426185271 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:30.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777219108 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:30.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T10:03:30.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T10:03:30.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:30.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334358771 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:30.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787248469 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:30.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T10:03:30.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T10:03:30.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T10:03:30.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:30.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T10:03:30.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efff0cc]
2026-01-20T10:03:30.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f10cad0]
2026-01-20T10:03:30.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a269ed]
2026-01-20T10:03:30.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8c85bd] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e757525] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644453844 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:30.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec55583] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T10:03:30.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T10:03:30.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354116551 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:30.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T10:03:30.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982590832 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:30.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57549b7c]
2026-01-20T10:03:30.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4229f218]
2026-01-20T10:03:30.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:30.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T10:03:30.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:30.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:30.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T10:03:30.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:30.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T10:03:30.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:30.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:30.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T10:03:30.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T10:03:30.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:30.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8c85bd]
2026-01-20T10:03:30.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec55583]
2026-01-20T10:03:30.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e757525]
2026-01-20T10:03:30.600+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:30.611+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:30.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:30.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982790954 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will be managed by Spring
2026-01-20T10:03:30.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@242701887 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will be managed by Spring
2026-01-20T10:03:30.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:30.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:30.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T10:03:30.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T10:03:30.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T10:03:30.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T10:03:30.756+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.757+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.758+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453] from current transaction
2026-01-20T10:03:30.758+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9] from current transaction
2026-01-20T10:03:30.760+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T10:03:30.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T10:03:30.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T10:03:30.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T10:03:30.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453] from current transaction
2026-01-20T10:03:30.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9] from current transaction
2026-01-20T10:03:30.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T10:03:30.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T10:03:30.835+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.835+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T10:03:30.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T10:03:30.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453] from current transaction
2026-01-20T10:03:30.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9] from current transaction
2026-01-20T10:03:30.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T10:03:30.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T10:03:30.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T10:03:30.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T10:03:30.871+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.872+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2803c453]
2026-01-20T10:03:30.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc57fd9]
2026-01-20T10:03:30.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.904+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.905+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@161e0998] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7d4bc9] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993993616 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:30.908+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1882514730 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:30.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T10:03:30.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T10:03:30.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T10:03:30.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T10:03:30.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@161e0998]
2026-01-20T10:03:30.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7d4bc9]
2026-01-20T10:03:30.922+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1463f041] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c80a8b4] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926719900 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:30.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496748526 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:30.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T10:03:30.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T10:03:30.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:30.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T10:03:30.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T10:03:30.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1463f041]
2026-01-20T10:03:30.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c80a8b4]
2026-01-20T10:03:30.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.977+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:30.977+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cedb261] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.977+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d07590] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:30.978+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728558661 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:30.978+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323088086 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:30.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:30.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:30.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:30.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:31.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:31.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:31.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d07590]
2026-01-20T10:03:31.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cedb261]
2026-01-20T10:03:31.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:31.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:31.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T10:03:31.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T10:03:31.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:31.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:31.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2/receipts
2026-01-20T10:03:31.288+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2/receipts
2026-01-20T10:03:31.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2/receipts
2026-01-20T10:03:31.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2/receipts
2026-01-20T10:03:31.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/receipts
2026-01-20T10:03:31.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2/receipts
2026-01-20T10:03:31.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/receipts
2026-01-20T10:03:31.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2/receipts", parameters={}
2026-01-20T10:03:31.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2/receipts
2026-01-20T10:03:31.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-20T10:03:31.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2/receipts", parameters={}
2026-01-20T10:03:31.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 2, userId: 2
2026-01-20T10:03:31.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-20T10:03:31.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 2, userId: 2
2026-01-20T10:03:31.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7ea085] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147731437 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:31.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T10:03:31.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487e344e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558824367 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:31.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T10:03:31.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.462+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T10:03:31.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7ea085]
2026-01-20T10:03:31.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.471+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7347ea20] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T10:03:31.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033649221 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:31.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487e344e]
2026-01-20T10:03:31.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T10:03:31.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2b9028] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1649283911 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:31.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T10:03:31.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T10:03:31.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7347ea20]
2026-01-20T10:03:31.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e8f4568] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112909939 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:31.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:03:31.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T10:03:31.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T10:03:31.490+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2b9028]
2026-01-20T10:03:31.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746a3d92] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675357930 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:31.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T10:03:31.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:03:31.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e8f4568]
2026-01-20T10:03:31.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T10:03:31.495+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c88ea6] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2050075228 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:31.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T10:03:31.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T10:03:31.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746a3d92]
2026-01-20T10:03:31.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T10:03:31.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202c64ec] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c88ea6]
2026-01-20T10:03:31.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93281238 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:31.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T10:03:31.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d21fe6] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@71177796 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:31.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T10:03:31.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T10:03:31.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202c64ec]
2026-01-20T10:03:31.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:31.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71644679] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:31.517+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T10:03:31.517+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@850155453 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:31.518+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d21fe6]
2026-01-20T10:03:31.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T10:03:31.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:31.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:31.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-20T10:03:31.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:31.554+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T10:03:31.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71644679]
2026-01-20T10:03:31.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:31.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-20T10:03:31.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:33.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T10:03:33.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:33.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T10:03:33.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:33.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T10:03:33.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:33.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:03:33.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T10:03:33.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:33.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T10:03:33.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T10:03:33.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:33.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:33.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:33.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T10:03:33.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T10:03:33.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:33.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:33.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T10:03:33.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T10:03:33.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:33.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T10:03:33.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T10:03:33.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:33.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T10:03:33.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:33.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T10:03:33.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T10:03:33.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:33.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T10:03:33.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e976587] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T10:03:33.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T10:03:33.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:33.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T10:03:33.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e109a01] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T10:03:33.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:33.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T10:03:33.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223479810 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:33.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2023574] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.490+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T10:03:33.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460190540 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:33.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18bf3398] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c958ac0] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238951914 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:33.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1865393273 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ef07371] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414572233 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:33.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:33.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e976587]
2026-01-20T10:03:33.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T10:03:33.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500705951 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:33.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e109a01]
2026-01-20T10:03:33.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2023574]
2026-01-20T10:03:33.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62daea1e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:33.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T10:03:33.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c958ac0]
2026-01-20T10:03:33.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@577021258 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:33.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18bf3398]
2026-01-20T10:03:33.517+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.518+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f1d9c4] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f50292] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b23ef7e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed98e62] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1561499551 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214213590 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:33.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381488508 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:33.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.534+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ef07371]
2026-01-20T10:03:33.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796907903 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:33.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62daea1e]
2026-01-20T10:03:33.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5182ae06] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332252266 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:33.544+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.544+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f50292]
2026-01-20T10:03:33.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b23ef7e]
2026-01-20T10:03:33.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f1d9c4]
2026-01-20T10:03:33.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:33.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.554+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b350ea6] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a66f34a] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a0c4156] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:33.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960538816 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:33.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed98e62]
2026-01-20T10:03:33.568+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860871015 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:33.568+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364754474 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:33.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:33.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:33.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:33.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T10:03:33.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:33.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:33.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:33.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T10:03:33.589+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:33.589+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5182ae06]
2026-01-20T10:03:33.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:33.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:33.596+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5014007f] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d32e7ca] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.601+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:33.603+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346191589 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:33.610+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:33.603+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938444583 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:33.604+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T10:03:33.604+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T10:03:33.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b350ea6]
2026-01-20T10:03:33.605+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:33.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T10:03:33.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:33.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a0c4156]
2026-01-20T10:03:33.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:33.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a66f34a]
2026-01-20T10:03:33.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T10:03:33.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765b13e9] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.627+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:33.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5014007f]
2026-01-20T10:03:33.634+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ecfe6fc] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.635+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@633889722 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:33.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767fc485] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:33.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1720784514 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.638+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.639+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b49267c] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.639+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064549283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ad83913] will not be managed by Spring
2026-01-20T10:03:33.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf52e35] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d32e7ca]
2026-01-20T10:03:33.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515818897 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:33.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795195909 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c92c22c] will not be managed by Spring
2026-01-20T10:03:33.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.644+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.645+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.650+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca6f7ab] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455446850 wrapping com.mysql.cj.jdbc.ConnectionImpl@23d5735f] will not be managed by Spring
2026-01-20T10:03:33.664+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765b13e9]
2026-01-20T10:03:33.665+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.667+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.669+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767fc485]
2026-01-20T10:03:33.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ecfe6fc]
2026-01-20T10:03:33.673+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T10:03:33.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.685+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.686+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:33.687+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T10:03:33.687+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115f2ef3] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:03:33.693+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf52e35]
2026-01-20T10:03:33.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b49267c]
2026-01-20T10:03:33.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1357300258 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.702+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.702+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T10:03:33.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:33.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f95b96b] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19448e9] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:03:33.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca6f7ab]
2026-01-20T10:03:33.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T10:03:33.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1173131031 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c92c22c] will not be managed by Spring
2026-01-20T10:03:33.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931277409 wrapping com.mysql.cj.jdbc.ConnectionImpl@3d3c00d7] will not be managed by Spring
2026-01-20T10:03:33.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:03:33.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:33.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:03:33.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:33.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T10:03:33.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29113f2e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1939927044 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:33.733+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:03:33.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T10:03:33.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T10:03:33.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115f2ef3]
2026-01-20T10:03:33.752+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.759+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.762+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f2ff16] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19448e9]
2026-01-20T10:03:33.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236428141 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.771+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:33.771+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:33.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:33.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.778+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T10:03:33.783+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T10:03:33.791+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29113f2e]
2026-01-20T10:03:33.792+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f95b96b]
2026-01-20T10:03:33.792+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.793+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.793+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb411] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.793+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a682d78] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.794+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389028660 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c92c22c] will not be managed by Spring
2026-01-20T10:03:33.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057343316 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cf4d2a8] will not be managed by Spring
2026-01-20T10:03:33.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:03:33.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T10:03:33.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T10:03:33.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f2ff16]
2026-01-20T10:03:33.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.835+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0287ce] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.836+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220468055 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:33.840+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T10:03:33.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb411]
2026-01-20T10:03:33.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:33.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44cd432] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:33.877+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a682d78]
2026-01-20T10:03:33.887+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693463702 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c92c22c] will not be managed by Spring
2026-01-20T10:03:33.889+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:33.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:33.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T10:03:33.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:33.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:33.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:33.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0287ce]
2026-01-20T10:03:34.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:34.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44cd432]
2026-01-20T10:03:34.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:34.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:34.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a6adc5] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:34.060+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68478c2e] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:34.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1299210760 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:34.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:34.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T10:03:34.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180893776 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c92c22c] will not be managed by Spring
2026-01-20T10:03:34.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T10:03:34.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T10:03:34.218+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T10:03:34.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a6adc5]
2026-01-20T10:03:34.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:34.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b1ef887] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:34.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432321700 wrapping com.mysql.cj.jdbc.ConnectionImpl@771f3636] will not be managed by Spring
2026-01-20T10:03:34.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:34.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:34.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T10:03:34.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68478c2e]
2026-01-20T10:03:34.239+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:03:34.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:34.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f23fc21] was not registered for synchronization because synchronization is not active
2026-01-20T10:03:34.250+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b1ef887]
2026-01-20T10:03:34.250+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1003563799 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c92c22c] will not be managed by Spring
2026-01-20T10:03:34.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:34.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T10:03:34.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:34.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T10:03:34.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:03:34.307+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T10:03:34.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f23fc21]
2026-01-20T10:03:34.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:03:34.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T10:03:34.350+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:29.298+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-20T10:50:29.305+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-20T10:50:29.310+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/logout
2026-01-20T10:50:29.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-20T10:50:29.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-20T10:50:29.314+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-20T10:50:29.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-20T10:50:29.349+09:00  INFO 21808 --- [http-nio-8080-exec-1] SECURITY                                 : LOGOUT userId=2
2026-01-20T10:50:29.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:29.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-20T10:50:29.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:34.388+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-20T10:50:34.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-20T10:50:34.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-20T10:50:34.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-20T10:50:34.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-20T10:50:34.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-20T10:50:34.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_admin, password=1234)]
2026-01-20T10:50:34.402+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 시도 - username: test_admin
2026-01-20T10:50:34.408+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:34.410+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f91f3f5] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:34.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1776171285 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:34.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-20T10:50:34.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_admin(String)
2026-01-20T10:50:34.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-20T10:50:34.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f91f3f5]
2026-01-20T10:50:34.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:34.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283bf0aa] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:34.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@184633843 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:34.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T10:50:34.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-01-20T10:50:34.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-20T10:50:34.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283bf0aa]
2026-01-20T10:50:34.530+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: SUPERADMIN, companyId: null
2026-01-20T10:50:34.531+09:00  INFO 21808 --- [http-nio-8080-exec-9] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_admin role=SUPERADMIN
2026-01-20T10:50:34.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:34.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_admin, password (truncated)...]
2026-01-20T10:50:34.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:35.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T10:50:35.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T10:50:35.568+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/companies
2026-01-20T10:50:35.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T10:50:35.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T10:50:35.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T10:50:35.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:35.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4879bf39] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:35.582+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047840821 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:35.599+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T10:50:35.604+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-01-20T10:50:35.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-20T10:50:35.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4879bf39]
2026-01-20T10:50:35.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:35.661+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=4, companyCode=JIIST3, companyNa (truncated)...]
2026-01-20T10:50:35.663+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:35.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T10:50:35.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-01-20T10:50:35.959+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-01-20T10:50:35.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-01-20T10:50:35.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-01-20T10:50:35.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-01-20T10:50:35.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-01-20T10:50:35.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-01-20T10:50:35.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-01-20T10:50:36.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-01-20T10:50:36.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-20T10:50:36.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-01-20T10:50:36.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-01-20T10:50:36.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-01-20T10:50:36.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T10:50:36.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-20T10:50:36.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-01-20T10:50:36.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-20T10:50:36.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-20T10:50:36.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-01-20T10:50:36.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-01-20T10:50:36.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-01-20T10:50:36.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-20T10:50:36.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-01-20T10:50:36.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-20T10:50:36.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-20T10:50:36.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T10:50:36.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-20T10:50:36.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-20T10:50:36.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-20T10:50:36.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-20T10:50:36.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T10:50:36.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-20T10:50:36.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-20T10:50:36.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-20T10:50:36.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-20T10:50:36.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T10:50:36.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-20T10:50:36.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-20T10:50:36.067+09:00  INFO 21808 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-20T10:50:36.070+09:00  INFO 21808 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-20T10:50:36.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1230125] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.084+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-20T10:50:36.074+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-01-20T10:50:36.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7685db35] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179549445 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:36.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.085+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-20T10:50:36.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-20T10:50:36.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19036569] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.088+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T10:50:36.088+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa02b4] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-20T10:50:36.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918106090 wrapping com.mysql.cj.jdbc.ConnectionImpl@36fe2bc6] will not be managed by Spring
2026-01-20T10:50:36.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), null
2026-01-20T10:50:36.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294934663 wrapping com.mysql.cj.jdbc.ConnectionImpl@49a3eec2] will not be managed by Spring
2026-01-20T10:50:36.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78cffaa] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-20T10:50:36.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-20T10:50:36.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1724600327 wrapping com.mysql.cj.jdbc.ConnectionImpl@718d0f9c] will not be managed by Spring
2026-01-20T10:50:36.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-20T10:50:36.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-20T10:50:36.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-20T10:50:36.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.107+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-20T10:50:36.116+09:00  INFO 21808 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-20T10:50:36.120+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1197369963 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:50:36.127+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-20T10:50:36.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d0665a] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-20T10:50:36.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T10:50:36.139+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-20T10:50:36.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-20T10:50:36.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1230125]
2026-01-20T10:50:36.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78cffaa]
2026-01-20T10:50:36.154+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa02b4]
2026-01-20T10:50:36.154+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453891519 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:36.154+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.155+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-20T10:50:36.155+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-20T10:50:36.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-20T10:50:36.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T10:50:36.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-20T10:50:36.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-20T10:50:36.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-20T10:50:36.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-20T10:50:36.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-20T10:50:36.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-20T10:50:36.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-01-20T10:50:36.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-01-20T10:50:36.188+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-20T10:50:36.190+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-20T10:50:36.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-01-20T10:50:36.262+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-20T10:50:36.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-20T10:50:36.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19036569]
2026-01-20T10:50:36.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d0665a]
2026-01-20T10:50:36.344+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-20T10:50:36.344+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-20T10:50:36.365+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-20T10:50:36.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.371+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-20T10:50:36.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-20T10:50:36.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-20T10:50:36.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-20T10:50:36.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653632bb] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70811644] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-20T10:50:36.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519545429 wrapping com.mysql.cj.jdbc.ConnectionImpl@718d0f9c] will not be managed by Spring
2026-01-20T10:50:36.384+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016187473 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:36.385+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.386+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.386+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-20T10:50:36.388+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-20T10:50:36.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-20T10:50:36.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.401+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-20T10:50:36.402+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.402+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.404+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-20T10:50:36.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-20T10:50:36.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64cee98c] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5b9176] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1373684569 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:50:36.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f5004d] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203644156 wrapping com.mysql.cj.jdbc.ConnectionImpl@49a3eec2] will not be managed by Spring
2026-01-20T10:50:36.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-20T10:50:36.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-20T10:50:36.433+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1209962198 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:36.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-20T10:50:36.433+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-20T10:50:36.433+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7685db35]
2026-01-20T10:50:36.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-20T10:50:36.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-20T10:50:36.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-20T10:50:36.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-20T10:50:36.446+09:00  INFO 21808 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-20T10:50:36.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70811644]
2026-01-20T10:50:36.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653632bb]
2026-01-20T10:50:36.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-20T10:50:36.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-20T10:50:36.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654dc412] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aab1819] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151321319 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:36.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309210733 wrapping com.mysql.cj.jdbc.ConnectionImpl@718d0f9c] will not be managed by Spring
2026-01-20T10:50:36.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-20T10:50:36.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-20T10:50:36.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-20T10:50:36.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-01-20T10:50:36.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-20T10:50:36.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-20T10:50:36.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-20T10:50:36.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-20T10:50:36.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-20T10:50:36.495+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f5004d]
2026-01-20T10:50:36.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-20T10:50:36.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-20T10:50:36.497+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-20T10:50:36.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-20T10:50:36.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-20T10:50:36.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5b9176]
2026-01-20T10:50:36.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64cee98c]
2026-01-20T10:50:36.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.506+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-20T10:50:36.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.510+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-20T10:50:36.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-20T10:50:36.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-20T10:50:36.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.517+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-20T10:50:36.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-20T10:50:36.517+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-20T10:50:36.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-20T10:50:36.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-20T10:50:36.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:50:36.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-20T10:50:36.537+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-20T10:50:36.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:50:36.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b9b087] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.543+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-20T10:50:36.544+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584446394 wrapping com.mysql.cj.jdbc.ConnectionImpl@36fe2bc6] will not be managed by Spring
2026-01-20T10:50:36.545+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-20T10:50:36.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48e56408] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1542747665 wrapping com.mysql.cj.jdbc.ConnectionImpl@49a3eec2] will not be managed by Spring
2026-01-20T10:50:36.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-20T10:50:36.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-20T10:50:36.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-20T10:50:36.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-20T10:50:36.555+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-01-20T10:50:36.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-20T10:50:36.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:50:36.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-20T10:50:36.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-20T10:50:36.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-20T10:50:36.563+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-20T10:50:36.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:50:36.564+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-20T10:50:36.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.566+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b78a3da] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031505289 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:50:36.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:36.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-20T10:50:36.569+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-20T10:50:36.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e4d51d] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1460587702 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:36.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-20T10:50:36.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-20T10:50:36.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-20T10:50:36.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-20T10:50:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-20T10:50:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-20T10:50:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654dc412]
2026-01-20T10:50:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aab1819]
2026-01-20T10:50:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32574a3a] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e236e4] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266859032 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:36.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@387736403 wrapping com.mysql.cj.jdbc.ConnectionImpl@718d0f9c] will not be managed by Spring
2026-01-20T10:50:36.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-20T10:50:36.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-20T10:50:36.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:36.611+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.611+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-20T10:50:36.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-20T10:50:36.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-20T10:50:36.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-20T10:50:36.627+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.630+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.634+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.638+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.639+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-20T10:50:36.645+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:50:36.647+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-20T10:50:36.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-20T10:50:36.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-20T10:50:36.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:50:36.651+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48e56408]
2026-01-20T10:50:36.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e4d51d]
2026-01-20T10:50:36.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:36.661+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66eb8667] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e43d98] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:36.663+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888434953 wrapping com.mysql.cj.jdbc.ConnectionImpl@49a3eec2] will not be managed by Spring
2026-01-20T10:50:36.664+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432968740 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:36.664+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:50:36.665+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:50:36.668+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.670+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-20T10:50:36.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-20T10:50:36.672+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-20T10:50:36.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.684+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.685+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-20T10:50:36.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-20T10:50:36.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-20T10:50:36.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66eb8667]
2026-01-20T10:50:36.699+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 48
2026-01-20T10:50:36.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:36.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-20T10:50:36.702+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-20T10:50:36.702+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-20T10:50:36.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-20T10:50:36.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:50:36.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-20T10:50:36.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e43d98]
2026-01-20T10:50:36.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-20T10:50:36.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-20T10:50:36.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:36.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-20T10:50:36.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.728+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-20T10:50:36.721+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 48
2026-01-20T10:50:36.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.725+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-20T10:50:36.732+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b9b087]
2026-01-20T10:50:36.734+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.735+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-20T10:50:36.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e236e4]
2026-01-20T10:50:36.735+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-20T10:50:36.737+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-20T10:50:36.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:50:36.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32574a3a]
2026-01-20T10:50:36.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.752+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-20T10:50:36.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-20T10:50:36.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-20T10:50:36.756+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:36.787+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-20T10:50:36.796+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:36.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-20T10:50:36.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b78a3da]
2026-01-20T10:50:36.798+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-20T10:50:36.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:36.848+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-20T10:50:36.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:39.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-01-20T10:50:39.912+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-01-20T10:50:39.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-01-20T10:50:39.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-01-20T10:50:39.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-01-20T10:50:39.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-01-20T10:50:39.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-01-20T10:50:39.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-01-20T10:50:39.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-01-20T10:50:39.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-01-20T10:50:39.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-01-20T10:50:39.955+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-01-20T10:50:39.955+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:50:39.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:50:39.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:50:39.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:50:39.964+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-01-20T10:50:39.965+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-01-20T10:50:39.970+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:39.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:39.971+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6880dee3] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:39.971+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1908d342] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:39.994+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666421913 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:50:39.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-01-20T10:50:39.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1785772390 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:39.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-01-20T10:50:39.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-01-20T10:50:39.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-01-20T10:50:40.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-01-20T10:50:40.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-01-20T10:50:40.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6880dee3]
2026-01-20T10:50:40.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1908d342]
2026-01-20T10:50:40.038+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-01-20T10:50:40.038+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-01-20T10:50:40.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-01-20T10:50:40.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-01-20T10:50:40.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-01-20T10:50:40.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-01-20T10:50:40.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-01-20T10:50:40.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-01-20T10:50:40.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=3, active=true
2026-01-20T10:50:40.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=3, active=true
2026-01-20T10:50:40.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=4, active=true
2026-01-20T10:50:40.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=4, active=true
2026-01-20T10:50:40.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=5, active=true
2026-01-20T10:50:40.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=5, active=true
2026-01-20T10:50:40.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-01-20T10:50:40.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-01-20T10:50:40.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-01-20T10:50:40.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-01-20T10:50:40.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-01-20T10:50:40.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-01-20T10:50:40.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-01-20T10:50:40.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-01-20T10:50:40.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-01-20T10:50:40.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-01-20T10:50:40.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-01-20T10:50:40.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-01-20T10:50:40.058+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:40.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:40.060+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-20T10:50:40.062+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-20T10:50:40.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:40.067+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:52.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20
2026-01-20T10:50:52.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-20T10:50:52.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:50:52.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-20T10:50:52.316+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-20T10:50:52.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:50:52.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:52.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:52.353+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-20T10:50:52.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:52.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b22b3c2] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:52.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@286832202 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:52.365+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-20T10:50:52.366+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-20T10:50:52.368+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:50:52.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b22b3c2]
2026-01-20T10:50:52.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:52.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51dd56f9] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:52.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624464984 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:52.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:50:52.371+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-20T10:50:52.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-20T10:50:52.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51dd56f9]
2026-01-20T10:50:52.382+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 48
2026-01-20T10:50:52.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:52.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:50:52.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:53.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/user-signups?from=2025-12-21&to=2026-01-20
2026-01-20T10:50:53.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/revenue?from=2025-12-21&to=2026-01-20
2026-01-20T10:50:53.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/user-signups?from=2025-12-21&to=2026-01-20
2026-01-20T10:50:53.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/revenue?from=2025-12-21&to=2026-01-20
2026-01-20T10:50:53.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/user-signups
2026-01-20T10:50:53.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/revenue
2026-01-20T10:50:53.227+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/user-signups?from=2025-12-21&to=2026-01-20
2026-01-20T10:50:53.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/revenue?from=2025-12-21&to=2026-01-20
2026-01-20T10:50:53.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/user-signups?from=2025-12-21&to=2026-01-20", parameters={masked}
2026-01-20T10:50:53.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/revenue?from=2025-12-21&to=2026-01-20", parameters={masked}
2026-01-20T10:50:53.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getUserSignupTrend(LocalDate, LocalDate)
2026-01-20T10:50:53.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getRevenueTrend(LocalDate, LocalDate)
2026-01-20T10:50:53.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:53.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:53.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:53.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:53.237+09:00  INFO 21808 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 사용자 가입 추이 조회 요청 - userId: 9, from: 2025-12-21, to: 2026-01-20
2026-01-20T10:50:53.237+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 매출 추이 조회 요청 - userId: 9, from: 2025-12-21, to: 2026-01-20
2026-01-20T10:50:53.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:53.239+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:53.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5d436f] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:53.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c7a573] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:53.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459885813 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:50:53.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1422452378 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:50:53.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUserSignupTrend          : ==>  Preparing: SELECT DATE(created_at) AS date, COUNT(*) AS count FROM user_tb WHERE DATE(created_at) BETWEEN ? AND ? GROUP BY DATE(created_at) ORDER BY date ASC
2026-01-20T10:50:53.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-20T10:50:53.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUserSignupTrend          : ==> Parameters: 2025-12-21(LocalDate), 2026-01-20(LocalDate)
2026-01-20T10:50:53.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-20T10:50:53.298+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:53.305+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-20T10:50:53.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:53.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUserSignupTrend          : <==      Total: 3
2026-01-20T10:50:53.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:53.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5d436f]
2026-01-20T10:50:53.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-20T10:50:53.331+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:53.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자 가입 추이 조회 성공, data=[AdminReportService.UserSignupTrendDto(date= (truncated)...]
2026-01-20T10:50:53.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:53.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:53.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-20T10:50:53.355+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-20T10:50:53.366+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-20T10:50:53.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-20T10:50:53.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-20T10:50:53.371+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-20T10:50:53.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-20T10:50:53.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c7a573]
2026-01-20T10:50:53.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:53.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=매출 추이 조회 성공, data=[AdminReportService.RevenueTrendDto(date=2025-12 (truncated)...]
2026-01-20T10:50:53.385+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:50:54.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20
2026-01-20T10:50:54.152+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-20T10:50:54.160+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:50:54.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-20T10:50:54.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-20T10:50:54.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:50:54.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:54.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:50:54.167+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-20T10:50:54.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:54.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d8a9b6] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:54.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411447642 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:54.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-20T10:50:54.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-20T10:50:54.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:50:54.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d8a9b6]
2026-01-20T10:50:54.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:50:54.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf35ad] was not registered for synchronization because synchronization is not active
2026-01-20T10:50:54.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926205012 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:50:54.185+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:50:54.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-20T10:50:54.204+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-20T10:50:54.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf35ad]
2026-01-20T10:50:54.206+09:00  INFO 21808 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 48
2026-01-20T10:50:54.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:50:54.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:50:54.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:51:02.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20&companyId=1
2026-01-20T10:51:02.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20&companyId=1
2026-01-20T10:51:02.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:51:02.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20&companyId=1
2026-01-20T10:51:02.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20&companyId=1", parameters={masked}
2026-01-20T10:51:02.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:51:02.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:02.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:03.002+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: 1, page: 1, size: 20
2026-01-20T10:51:03.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:03.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e78463] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:03.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@234745967 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:51:03.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ?
2026-01-20T10:51:03.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 1(Long)
2026-01-20T10:51:03.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:51:03.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e78463]
2026-01-20T10:51:03.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:03.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e1533b] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:03.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@401568773 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:51:03.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:51:03.021+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Long), 20(Integer), 0(Integer)
2026-01-20T10:51:03.026+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-20T10:51:03.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e1533b]
2026-01-20T10:51:03.029+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 41
2026-01-20T10:51:03.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:51:03.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:51:03.033+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:51:06.736+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=2&size=20&companyId=1
2026-01-20T10:51:06.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=2&size=20&companyId=1
2026-01-20T10:51:06.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:51:06.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=2&size=20&companyId=1
2026-01-20T10:51:06.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=2&size=20&companyId=1", parameters={masked}
2026-01-20T10:51:06.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:51:06.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:06.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:06.753+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: 1, page: 2, size: 20
2026-01-20T10:51:06.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:06.755+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e154dc5] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:06.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1715493930 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:51:06.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ?
2026-01-20T10:51:06.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 1(Long)
2026-01-20T10:51:06.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:51:06.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e154dc5]
2026-01-20T10:51:06.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:06.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59bb5074] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:06.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@22402555 wrapping com.mysql.cj.jdbc.ConnectionImpl@344842dc] will not be managed by Spring
2026-01-20T10:51:06.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:51:06.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Long), 20(Integer), 20(Integer)
2026-01-20T10:51:06.782+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-20T10:51:06.785+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59bb5074]
2026-01-20T10:51:06.785+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 41
2026-01-20T10:51:06.787+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:51:06.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:51:06.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:51:08.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=3&size=20&companyId=1
2026-01-20T10:51:08.804+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=3&size=20&companyId=1
2026-01-20T10:51:08.805+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:51:08.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=3&size=20&companyId=1
2026-01-20T10:51:08.808+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=3&size=20&companyId=1", parameters={masked}
2026-01-20T10:51:08.808+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:51:08.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:08.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:08.812+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: 1, page: 3, size: 20
2026-01-20T10:51:08.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:08.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64665340] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:08.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802052920 wrapping com.mysql.cj.jdbc.ConnectionImpl@36fe2bc6] will not be managed by Spring
2026-01-20T10:51:08.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ?
2026-01-20T10:51:08.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 1(Long)
2026-01-20T10:51:08.920+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:51:08.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64665340]
2026-01-20T10:51:08.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:08.922+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251cc394] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:08.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1172351897 wrapping com.mysql.cj.jdbc.ConnectionImpl@36fe2bc6] will not be managed by Spring
2026-01-20T10:51:08.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:51:08.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Long), 20(Integer), 40(Integer)
2026-01-20T10:51:08.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-20T10:51:08.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251cc394]
2026-01-20T10:51:08.950+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 41
2026-01-20T10:51:08.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:51:08.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:51:08.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:51:10.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=2&size=20&companyId=1
2026-01-20T10:51:10.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=2&size=20&companyId=1
2026-01-20T10:51:10.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-01-20T10:51:10.644+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=2&size=20&companyId=1
2026-01-20T10:51:10.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=2&size=20&companyId=1", parameters={masked}
2026-01-20T10:51:10.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-01-20T10:51:10.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:10.651+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-20T10:51:10.661+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: 1, page: 2, size: 20
2026-01-20T10:51:10.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:10.663+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c28740c] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:10.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064702394 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:51:10.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ?
2026-01-20T10:51:10.685+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 1(Long)
2026-01-20T10:51:10.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-20T10:51:10.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c28740c]
2026-01-20T10:51:10.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:10.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627c5493] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:10.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@531281719 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:51:10.702+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T10:51:10.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Long), 20(Integer), 20(Integer)
2026-01-20T10:51:10.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-20T10:51:10.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627c5493]
2026-01-20T10:51:10.712+09:00  INFO 21808 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 41
2026-01-20T10:51:10.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:51:10.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-20T10:51:10.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:51:11.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-01-20T10:51:11.977+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-01-20T10:51:11.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-01-20T10:51:12.001+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-01-20T10:51:12.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-01-20T10:51:12.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-01-20T10:51:12.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-01-20T10:51:12.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-01-20T10:51:12.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-01-20T10:51:12.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-01-20T10:51:12.013+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-01-20T10:51:12.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:51:12.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:51:12.018+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-01-20T10:51:12.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:12.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26303532] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:12.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-01-20T10:51:12.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:51:12.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-20T10:51:12.035+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890950176 wrapping com.mysql.cj.jdbc.ConnectionImpl@50624a6c] will not be managed by Spring
2026-01-20T10:51:12.035+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-01-20T10:51:12.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-01-20T10:51:12.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T10:51:12.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-01-20T10:51:12.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@520a38e6] was not registered for synchronization because synchronization is not active
2026-01-20T10:51:12.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-01-20T10:51:12.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26303532]
2026-01-20T10:51:12.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301911541 wrapping com.mysql.cj.jdbc.ConnectionImpl@30f26d6b] will not be managed by Spring
2026-01-20T10:51:12.050+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-01-20T10:51:12.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-01-20T10:51:12.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-01-20T10:51:12.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-01-20T10:51:12.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-01-20T10:51:12.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-01-20T10:51:12.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=3, active=true
2026-01-20T10:51:12.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=4, active=true
2026-01-20T10:51:12.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=5, active=true
2026-01-20T10:51:12.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-01-20T10:51:12.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-01-20T10:51:12.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-01-20T10:51:12.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-01-20T10:51:12.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-01-20T10:51:12.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-01-20T10:51:12.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@520a38e6]
2026-01-20T10:51:12.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-01-20T10:51:12.055+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-01-20T10:51:12.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:51:12.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-01-20T10:51:12.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-20T10:51:12.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-01-20T10:51:12.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-01-20T10:51:12.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:51:12.067+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=3, active=true
2026-01-20T10:51:12.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=4, active=true
2026-01-20T10:51:12.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=5, active=true
2026-01-20T10:51:12.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-01-20T10:51:12.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-01-20T10:51:12.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-01-20T10:51:12.085+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-01-20T10:51:12.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-01-20T10:51:12.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-01-20T10:51:12.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:51:12.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-20T10:51:12.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T10:53:28.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-20T10:53:28.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-20T10:53:28.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: null, uri: /api/logout
2026-01-20T10:53:28.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-20T10:53:28.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-20T10:53:28.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-20T10:53:28.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI5IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-20T10:53:28.601+09:00  INFO 21808 --- [http-nio-8080-exec-10] SECURITY                                 : LOGOUT userId=9
2026-01-20T10:53:28.605+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T10:53:28.609+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-20T10:53:28.610+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:19.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-20T11:28:19.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-20T11:28:19.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-20T11:28:19.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-20T11:28:19.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-20T11:28:19.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-20T11:28:19.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-20T11:28:19.027+09:00  INFO 21808 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-20T11:28:19.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:19.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58631119] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:19.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034286689 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:19.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-20T11:28:19.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-20T11:28:19.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-20T11:28:19.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58631119]
2026-01-20T11:28:19.136+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:19.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b0ad6b] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:19.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599755092 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:19.139+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T11:28:19.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T11:28:19.146+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T11:28:19.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b0ad6b]
2026-01-20T11:28:19.148+09:00  INFO 21808 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 1
2026-01-20T11:28:19.149+09:00  INFO 21808 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-20T11:28:19.151+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:19.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-20T11:28:19.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:19.841+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T11:28:19.848+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T11:28:19.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-20T11:28:19.852+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T11:28:19.853+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T11:28:19.854+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T11:28:19.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:19.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634a7e08] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:19.862+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313032877 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:19.863+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T11:28:19.864+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T11:28:19.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T11:28:19.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634a7e08]
2026-01-20T11:28:19.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:19.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-20T11:28:19.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:19.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:19.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:19.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.959+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:19.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.963+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:19.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:19.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:19.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:19.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:19.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:19.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:19.987+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:19.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:19.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:19.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:20.001+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:20.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:20.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:20.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:19.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:19.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:19.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:19.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:20.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8fac8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aa69ef5] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.062+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:20.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1752510505 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.060+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.073+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:20.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315599262 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@366e9199] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7749dd6c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:20.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:20.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584bf708] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.094+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:20.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138f8d43] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317424010 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233278881 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737276317 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.106+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.108+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.108+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:20.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:20.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:20.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8fac8]
2026-01-20T11:28:20.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502516527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:20.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d8e97a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aa69ef5]
2026-01-20T11:28:20.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584bf708]
2026-01-20T11:28:20.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@320227187 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:20.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@366e9199]
2026-01-20T11:28:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab79d12] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eae5fe6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7749dd6c]
2026-01-20T11:28:20.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.126+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.127+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@857849986 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1225666394 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138f8d43]
2026-01-20T11:28:20.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63377ace] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233579378 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581bfb54] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.139+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@467286305 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52cb049f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.145+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d8e97a]
2026-01-20T11:28:20.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348613159 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.149+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.152+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:20.154+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eae5fe6]
2026-01-20T11:28:20.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab79d12]
2026-01-20T11:28:20.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63377ace]
2026-01-20T11:28:20.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.157+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a588c63] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:20.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:20.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c7dce3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308375276 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617861668 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.175+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581bfb54]
2026-01-20T11:28:20.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.186+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:20.193+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.195+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.195+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.198+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.199+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:20.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:20.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52cb049f]
2026-01-20T11:28:20.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.208+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.215+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:20.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b92e0ad] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cef0413] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454885623 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:20.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@51300563 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.237+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:20.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:20.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:20.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.245+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b2a9e5f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.248+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760312660 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.253+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.253+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44873138] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342211051 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.255+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:20.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:20.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b92e0ad]
2026-01-20T11:28:20.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a588c63]
2026-01-20T11:28:20.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b2a9e5f]
2026-01-20T11:28:20.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c7dce3]
2026-01-20T11:28:20.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cef0413]
2026-01-20T11:28:20.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:20.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44873138]
2026-01-20T11:28:20.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152dcbe0] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b47ea20] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5501b8ab] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6741fb70] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2154d94e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161924704 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1978817215 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2062945330 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338573759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898600683 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d29c5ff] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1088040339 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.386+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.388+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2154d94e]
2026-01-20T11:28:20.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152dcbe0]
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b47ea20]
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6741fb70]
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5501b8ab]
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.394+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d29c5ff]
2026-01-20T11:28:20.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f5933a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1372263a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436b583d] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e1d272] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1ca60f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761316223 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1710008451 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129612954 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569924549 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1921029895 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:20.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.402+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.407+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f5933a]
2026-01-20T11:28:20.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436b583d]
2026-01-20T11:28:20.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e9bcb5] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e1d272]
2026-01-20T11:28:20.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66656bc8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@122391281 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136370569 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10165f6c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1372263a]
2026-01-20T11:28:20.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736066910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7516db9c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.462+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1ca60f]
2026-01-20T11:28:20.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002215154 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e09f7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e9bcb5]
2026-01-20T11:28:20.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66656bc8]
2026-01-20T11:28:20.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212017613 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10165f6c]
2026-01-20T11:28:20.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47ae8d46] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5a4ee4] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126599954 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370246540 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b505b3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7516db9c]
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@393920854 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e09f7]
2026-01-20T11:28:20.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a653f59] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500306866 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aede20f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495673108 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5a4ee4]
2026-01-20T11:28:20.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47ae8d46]
2026-01-20T11:28:20.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b505b3]
2026-01-20T11:28:20.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b8edd0] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308a068] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea722d4] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826335245 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813681138 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@52573230 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308a068]
2026-01-20T11:28:20.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b8edd0]
2026-01-20T11:28:20.554+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.554+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.555+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ef9a2c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10fd2b37] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@354581465 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:20.557+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976472213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.557+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.560+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aede20f]
2026-01-20T11:28:20.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a653f59]
2026-01-20T11:28:20.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea722d4]
2026-01-20T11:28:20.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.566+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb216a5] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.563+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449475270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a84542a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6bc27e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2041062868 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501429477 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:20.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10fd2b37]
2026-01-20T11:28:20.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ef9a2c]
2026-01-20T11:28:20.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.582+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.588+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.589+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.590+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.616+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6bc27e]
2026-01-20T11:28:20.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb216a5]
2026-01-20T11:28:20.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.623+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.623+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a11bac4] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.627+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362385437 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.631+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.647+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a84542a]
2026-01-20T11:28:20.663+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.665+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a11bac4]
2026-01-20T11:28:20.666+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.671+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.673+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.673+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:20.674+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504434df] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:20.677+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b3cf92] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.679+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.679+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948510713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:28:20.682+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1633917978 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.685+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:28:20.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:20.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.691+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0c9923] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab9a858] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@559870044 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113879296 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504434df]
2026-01-20T11:28:20.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b3cf92]
2026-01-20T11:28:20.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab9a858]
2026-01-20T11:28:20.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e02bb7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7657b1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7539608 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0c9923]
2026-01-20T11:28:20.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fbadb46] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750189938 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:20.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1492538753 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d114e8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066372848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.720+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.725+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.726+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fbadb46]
2026-01-20T11:28:20.727+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7657b1]
2026-01-20T11:28:20.728+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e02bb7]
2026-01-20T11:28:20.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.730+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.733+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc1a4e9] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d114e8]
2026-01-20T11:28:20.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a71ddc] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654142012 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.760+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669e1206] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946481900 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:20.772+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723856489 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.776+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a71ddc]
2026-01-20T11:28:20.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669e1206]
2026-01-20T11:28:20.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc1a4e9]
2026-01-20T11:28:20.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb6b1f3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1f0a70] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.816+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034848417 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@690950038 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.820+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.823+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.841+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb6b1f3]
2026-01-20T11:28:20.841+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1f0a70]
2026-01-20T11:28:20.842+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e09ef5] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43290419] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.845+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@734501011 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.846+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155717766 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.846+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.846+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.853+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.853+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.854+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e09ef5]
2026-01-20T11:28:20.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43290419]
2026-01-20T11:28:20.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80d9dfa] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ca8ceb] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.858+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967552312 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.859+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@994598695 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.859+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.860+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:20.862+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.863+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:20.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:28:20.877+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ca8ceb]
2026-01-20T11:28:20.877+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80d9dfa]
2026-01-20T11:28:20.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.879+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d29be92] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a1d925] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@425777160 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@128412390 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a1d925]
2026-01-20T11:28:20.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d29be92]
2026-01-20T11:28:20.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3021e3e0] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.912+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da898c7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.913+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571060784 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573217998 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:20.917+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:28:20.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:28:20.927+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3021e3e0]
2026-01-20T11:28:20.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da898c7]
2026-01-20T11:28:20.929+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.930+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:20.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e07af] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6299b3e0] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:20.940+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@858770217 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:20.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272865236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:20.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:20.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.955+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:20.965+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:20.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6299b3e0]
2026-01-20T11:28:20.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e07af]
2026-01-20T11:28:20.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:20.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:20.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:20.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.285+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:27.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T11:28:27.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:27.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T11:28:27.321+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:27.295+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T11:28:27.297+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:27.297+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T11:28:27.302+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:27.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:27.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:28:27.336+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:27.336+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:28:27.338+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:28:27.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:28:27.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:27.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:27.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:27.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:28:27.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:27.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:28:27.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:27.355+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:28:27.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:27.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:28:27.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:28:27.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:28:27.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:27.373+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:28:27.373+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:27.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:28:27.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:28:27.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:28:27.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:27.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:27.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:27.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:28:27.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:27.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:28:27.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280ea653] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d20177b] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9eba5f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a326107] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322147a1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599046b8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23406605 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555093656 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:27.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1533470688 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:27.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716811941 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:27.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@979311612 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682819819 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:27.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:27.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:27.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a326107]
2026-01-20T11:28:27.412+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280ea653]
2026-01-20T11:28:27.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:28:27.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:28:27.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7b4d91] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6765576a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322147a1]
2026-01-20T11:28:27.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599046b8]
2026-01-20T11:28:27.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9eba5f]
2026-01-20T11:28:27.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d20177b]
2026-01-20T11:28:27.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@853312791 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:27.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465190725 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339b55bd] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185137df] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a1c89] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5775de7f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898818120 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:27.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401299697 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:27.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960629927 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@399205939 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:27.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339b55bd]
2026-01-20T11:28:27.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185137df]
2026-01-20T11:28:27.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6765576a]
2026-01-20T11:28:27.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7b4d91]
2026-01-20T11:28:27.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@478cc204] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7985fb31] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:27.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:27.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@777212405 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:27.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761330193 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:27.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:27.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:27.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:27.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:27.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:27.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:28:27.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:27.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:27.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:27.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:27.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:27.481+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:27.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5775de7f]
2026-01-20T11:28:27.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a1c89]
2026-01-20T11:28:27.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:27.490+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:27.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:28:27.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7985fb31]
2026-01-20T11:28:27.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b82d7c6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:27.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506a8f2c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100f5eed] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6e2626] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1383949039 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:27.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@478cc204]
2026-01-20T11:28:27.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@55001084 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@811013792 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:27.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847601851 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:27.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b51cff] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:27.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:27.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@843005739 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:27.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:28:27.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1ab7e6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:27.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:27.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814548643 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100f5eed]
2026-01-20T11:28:27.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cb817c6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177214090 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:27.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:27.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1ab7e6]
2026-01-20T11:28:27.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b51cff]
2026-01-20T11:28:27.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6e2626]
2026-01-20T11:28:27.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc7f696] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.532+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:28:27.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f48aeda] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954208111 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355328515 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:27.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:27.537+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:27.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:27.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:27.544+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:27.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:27.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:27.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cb817c6]
2026-01-20T11:28:27.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c541df7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:27.554+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@271135988 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:27.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:27.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:27.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:27.567+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506a8f2c]
2026-01-20T11:28:27.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b51df6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1445133155 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:27.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc7f696]
2026-01-20T11:28:27.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a397d1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f48aeda]
2026-01-20T11:28:27.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384362549 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:27.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:27.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:27.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:28:27.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b82d7c6]
2026-01-20T11:28:27.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c372573] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639380436 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:27.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b51df6]
2026-01-20T11:28:27.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:27.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c372573]
2026-01-20T11:28:27.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a397d1]
2026-01-20T11:28:27.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fea2603] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976221861 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:27.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:28:27.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38535d7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:27.596+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.597+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503658345 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.599+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.611+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:27.611+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c541df7]
2026-01-20T11:28:27.612+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e5a55d] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245884883 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:27.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.614+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.618+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38535d7]
2026-01-20T11:28:27.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247893f6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@242819363 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.623+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:27.623+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:27.625+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:27.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fea2603]
2026-01-20T11:28:27.627+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.627+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0e7020] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34246556 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:27.629+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:27.631+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e5a55d]
2026-01-20T11:28:27.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.633+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:27.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.647+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:27.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247893f6]
2026-01-20T11:28:27.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295c564e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239123888 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:27.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.650+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295c564e]
2026-01-20T11:28:27.659+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.659+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:27.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:27.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:27.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0e7020]
2026-01-20T11:28:27.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.677+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312ce04] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@741482806 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.685+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312ce04]
2026-01-20T11:28:27.686+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ea438b9] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077469063 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:27.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:27.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:27.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ea438b9]
2026-01-20T11:28:27.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:27.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d46c9f6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:27.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659391255 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:27.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:27.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:27.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:27.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d46c9f6]
2026-01-20T11:28:27.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:27.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:27.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:30.195+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/69
2026-01-20T11:28:30.195+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:30.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T11:28:30.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T11:28:30.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/69
2026-01-20T11:28:30.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/69
2026-01-20T11:28:30.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:30.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T11:28:30.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/69
2026-01-20T11:28:30.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T11:28:30.215+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/69
2026-01-20T11:28:30.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:30.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T11:28:30.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/69
2026-01-20T11:28:30.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/69
2026-01-20T11:28:30.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T11:28:30.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:30.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T11:28:30.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/69
2026-01-20T11:28:30.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/69", parameters={}
2026-01-20T11:28:30.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T11:28:30.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:30.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T11:28:30.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/69", parameters={}
2026-01-20T11:28:30.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T11:28:30.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T11:28:30.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:30.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T11:28:30.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T11:28:30.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T11:28:30.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.239+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d083e72] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.238+09:00  INFO 21808 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T11:28:30.239+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.239+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7253edf] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.239+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T11:28:30.244+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ad1897] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@784322178 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:30.245+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a483448] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389461192 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:30.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169f32c0] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:30.248+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T11:28:30.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@850942556 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:30.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366958679 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:30.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1861957692 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:30.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:30.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.260+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T11:28:30.260+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T11:28:30.260+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T11:28:30.262+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:30.262+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:30.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T11:28:30.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:30.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7253edf]
2026-01-20T11:28:30.266+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d083e72]
2026-01-20T11:28:30.266+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1310a5df] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64189f3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T11:28:30.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T11:28:30.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970513060 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:30.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914993730 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:30.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a483448]
2026-01-20T11:28:30.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T11:28:30.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ad1897]
2026-01-20T11:28:30.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:30.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:30.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:30.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169f32c0]
2026-01-20T11:28:30.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e72e3d2] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.276+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.276+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:30.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T11:28:30.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:30.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T11:28:30.280+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676722544 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:30.282+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:30.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:30.290+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:30.291+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:30.291+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:30.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64189f3]
2026-01-20T11:28:30.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1310a5df]
2026-01-20T11:28:30.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:30.336+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:30.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:30.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e72e3d2]
2026-01-20T11:28:30.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:30.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.355+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043760317 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will be managed by Spring
2026-01-20T11:28:30.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:30.361+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T11:28:30.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741380014 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will be managed by Spring
2026-01-20T11:28:30.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:30.366+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T11:28:30.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T11:28:30.372+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca] from current transaction
2026-01-20T11:28:30.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:30.375+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T11:28:30.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:30.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a] from current transaction
2026-01-20T11:28:30.381+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:30.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca] from current transaction
2026-01-20T11:28:30.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.388+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:30.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:30.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a] from current transaction
2026-01-20T11:28:30.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-20T11:28:30.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:30.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca] from current transaction
2026-01-20T11:28:30.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:30.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 111(Long), 1(Long)
2026-01-20T11:28:30.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-20T11:28:30.407+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a] from current transaction
2026-01-20T11:28:30.409+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T11:28:30.410+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:30.411+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.412+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 111(Long), 1(Long)
2026-01-20T11:28:30.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747edca]
2026-01-20T11:28:30.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T11:28:30.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b70f51a]
2026-01-20T11:28:30.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ab354d] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841947840 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:30.562+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:30.564+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79707e2b] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.565+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1844519536 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:30.568+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:30.569+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-20T11:28:30.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ab354d]
2026-01-20T11:28:30.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7956344f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.573+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-20T11:28:30.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114400629 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:30.574+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79707e2b]
2026-01-20T11:28:30.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:30.575+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9694faa] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930619274 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:30.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:30.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 69(Long), 1(Long)
2026-01-20T11:28:30.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T11:28:30.582+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T11:28:30.582+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7956344f]
2026-01-20T11:28:30.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9694faa]
2026-01-20T11:28:30.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:30.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea8aab6] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd6a9f1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:30.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989416288 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:30.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1484894526 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:30.587+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:30.588+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:30.588+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:30.589+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:30.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:30.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:30.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd6a9f1]
2026-01-20T11:28:30.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea8aab6]
2026-01-20T11:28:30.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:30.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:30.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=69, drafterId=2, r (truncated)...]
2026-01-20T11:28:30.595+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=69, drafterId=2, r (truncated)...]
2026-01-20T11:28:30.597+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:30.599+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:33.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:33.913+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T11:28:33.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:33.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T11:28:33.920+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:33.921+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T11:28:33.925+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:33.925+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T11:28:33.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:33.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:33.938+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:28:33.939+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:33.940+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:33.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:33.941+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:33.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:33.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:28:33.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:33.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:28:33.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:33.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:28:33.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:28:33.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:33.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:33.949+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:33.949+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ae2d8a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:28:33.955+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:33.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:33.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:33.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:28:33.958+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:28:33.958+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb9b334] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.958+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:33.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:33.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:33.958+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:33.959+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:28:33.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:28:33.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.970+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5762e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:28:33.968+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:33.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1293322c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.971+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@740308153 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:33.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@239202083 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:33.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e8ef1a1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4985feb4] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:33.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1678201012 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:33.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856457814 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:33.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:33.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:33.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362628397 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:33.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:33.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:33.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318514800 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:33.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:33.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:33.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:33.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:33.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:33.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:33.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:33.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:33.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb9b334]
2026-01-20T11:28:33.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:33.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ae2d8a]
2026-01-20T11:28:33.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:33.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:33.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:28:33.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1293322c]
2026-01-20T11:28:33.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:33.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5762e]
2026-01-20T11:28:33.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4313db6e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe8e178] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:33.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e8ef1a1]
2026-01-20T11:28:33.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4985feb4]
2026-01-20T11:28:33.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:33.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987419965 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.004+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28077712 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:34.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a26aac8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52490c65] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757b86a3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484783082 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:34.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393259bb] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@636957431 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:34.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725880825 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:34.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719296171 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.013+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4313db6e]
2026-01-20T11:28:34.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe8e178]
2026-01-20T11:28:34.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.025+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e5b55a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.026+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:34.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a26aac8]
2026-01-20T11:28:34.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217111715 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757b86a3]
2026-01-20T11:28:34.035+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52490c65]
2026-01-20T11:28:34.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393259bb]
2026-01-20T11:28:34.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:34.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:34.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:28:34.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb8c80e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:34.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:28:34.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002715620 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:34.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:34.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ab9f77] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:34.059+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:28:34.060+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:34.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:34.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.062+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224736056 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:28:34.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:28:34.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:34.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e5b55a]
2026-01-20T11:28:34.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:34.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:34.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:28:34.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:34.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@628afc4d] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:34.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:34.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:34.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:28:34.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@515492387 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:34.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5783b058] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:34.088+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb8c80e]
2026-01-20T11:28:34.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:34.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002318743 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:34.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:34.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:34.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:34.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ab9f77]
2026-01-20T11:28:34.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae63586] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54993962] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.094+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:34.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.097+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5247d85f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1013445262 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:34.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283023687 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:34.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@628afc4d]
2026-01-20T11:28:34.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e21ee8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839772999 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:34.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:28:34.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1399423789 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:34.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:34.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5783b058]
2026-01-20T11:28:34.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73d481fe] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.105+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:34.105+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.106+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.107+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1175020381 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.108+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:34.108+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:34.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d6e0898] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:34.111+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae63586]
2026-01-20T11:28:34.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925201949 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:34.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:34.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54993962]
2026-01-20T11:28:34.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:34.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5247d85f]
2026-01-20T11:28:34.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e21ee8]
2026-01-20T11:28:34.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.120+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd1474e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:34.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:28:34.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711277943 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:34.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af1b311] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73d481fe]
2026-01-20T11:28:34.126+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efe1926] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.127+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.132+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721243440 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.132+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.133+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2098742095 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:34.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:34.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f721b8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d6e0898]
2026-01-20T11:28:34.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:34.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702600041 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.148+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.148+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.149+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:34.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb00f10] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd1474e]
2026-01-20T11:28:34.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:34.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@597158038 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:34.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:34.160+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:34.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:28:34.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.167+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:34.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af1b311]
2026-01-20T11:28:34.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:28:34.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:34.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efe1926]
2026-01-20T11:28:34.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb00f10]
2026-01-20T11:28:34.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b22023] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f721b8]
2026-01-20T11:28:34.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bf1976] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1599895839 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:34.186+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416892990 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:34.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:34.188+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c30748] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:34.192+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133987977 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.192+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:34.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.204+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b22023]
2026-01-20T11:28:34.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bf1976]
2026-01-20T11:28:34.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c30748]
2026-01-20T11:28:34.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2392949d] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:28:34.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f66489] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793592308 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.208+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.208+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784924760 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.210+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:34.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:34.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2392949d]
2026-01-20T11:28:34.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719eace0] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:34.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184884786 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f66489]
2026-01-20T11:28:34.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:34.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:34.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ebb671] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@739007465 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:34.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:34.227+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719eace0]
2026-01-20T11:28:34.227+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:34.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8d83a2] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:34.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055969727 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:34.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ebb671]
2026-01-20T11:28:34.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:34.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:34.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:34.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:34.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:34.237+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8d83a2]
2026-01-20T11:28:34.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:34.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:34.244+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:36.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:36.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/67
2026-01-20T11:28:36.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T11:28:36.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/67
2026-01-20T11:28:36.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T11:28:36.312+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:36.313+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-20T11:28:36.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T11:28:36.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:36.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/67
2026-01-20T11:28:36.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T11:28:36.362+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:36.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-20T11:28:36.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-20T11:28:36.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T11:28:36.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T11:28:36.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T11:28:36.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:36.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-20T11:28:36.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/67
2026-01-20T11:28:36.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T11:28:36.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-20T11:28:36.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T11:28:36.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:36.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T11:28:36.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T11:28:36.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-20T11:28:36.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T11:28:36.428+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T11:28:36.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T11:28:36.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T11:28:36.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26972e51] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b700cab] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7b2ac1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.444+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T11:28:36.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce919f7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.456+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1288d614] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@444867609 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:36.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@928409603 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:36.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T11:28:36.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:36.462+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.462+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107522001 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:36.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342955103 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:36.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:36.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T11:28:36.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T11:28:36.471+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:36.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248704058 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:36.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T11:28:36.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T11:28:36.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b700cab]
2026-01-20T11:28:36.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:36.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd837c9] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:36.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891764961 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:36.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26972e51]
2026-01-20T11:28:36.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:36.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6f3025] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1088267044 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:36.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:36.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:36.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T11:28:36.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce919f7]
2026-01-20T11:28:36.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5179e776] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849231658 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:36.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:36.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T11:28:36.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T11:28:36.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7b2ac1]
2026-01-20T11:28:36.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1288d614]
2026-01-20T11:28:36.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:36.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:36.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T11:28:36.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T11:28:36.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:36.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:36.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:36.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6f3025]
2026-01-20T11:28:36.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:36.510+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:36.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:36.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:36.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:36.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5179e776]
2026-01-20T11:28:36.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd837c9]
2026-01-20T11:28:36.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.540+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@42364703 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will be managed by Spring
2026-01-20T11:28:36.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:36.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1647457776 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will be managed by Spring
2026-01-20T11:28:36.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T11:28:36.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:36.544+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T11:28:36.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T11:28:36.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T11:28:36.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd] from current transaction
2026-01-20T11:28:36.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:36.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f] from current transaction
2026-01-20T11:28:36.555+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.556+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T11:28:36.557+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:36.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f] from current transaction
2026-01-20T11:28:36.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:36.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T11:28:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd] from current transaction
2026-01-20T11:28:36.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:36.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T11:28:36.602+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.603+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f] from current transaction
2026-01-20T11:28:36.604+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:36.604+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 112(Long), 1(Long)
2026-01-20T11:28:36.605+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T11:28:36.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd] from current transaction
2026-01-20T11:28:36.606+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:36.607+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 112(Long), 1(Long)
2026-01-20T11:28:36.615+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T11:28:36.615+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T11:28:36.618+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.620+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4a3b4f]
2026-01-20T11:28:36.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec9eacd]
2026-01-20T11:28:36.631+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8ddf93] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.633+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523662334 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:36.633+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.635+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:36.636+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd79feb] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559981898 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:36.637+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T11:28:36.638+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.639+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T11:28:36.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T11:28:36.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8ddf93]
2026-01-20T11:28:36.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd79feb]
2026-01-20T11:28:36.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.640+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5550b157] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee25666] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.642+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361415465 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:36.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1506648726 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:36.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:36.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T11:28:36.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 1(Long)
2026-01-20T11:28:36.645+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T11:28:36.645+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T11:28:36.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee25666]
2026-01-20T11:28:36.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5550b157]
2026-01-20T11:28:36.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:36.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618a254] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.647+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a80472] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:36.647+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250264471 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:36.648+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1906492185 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:36.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:36.650+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:36.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:36.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:36.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:36.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:36.656+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618a254]
2026-01-20T11:28:36.657+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a80472]
2026-01-20T11:28:36.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:36.659+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:36.661+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=2, r (truncated)...]
2026-01-20T11:28:36.662+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=2, r (truncated)...]
2026-01-20T11:28:36.663+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:36.665+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:40.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T11:28:40.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:40.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T11:28:40.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:40.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T11:28:40.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:40.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T11:28:40.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T11:28:40.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:40.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:28:40.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:40.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:40.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:40.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:28:40.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:28:40.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:40.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:40.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:40.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:40.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:40.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:28:40.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:40.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:28:40.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:28:40.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:40.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:40.062+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:28:40.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:28:40.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:40.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:28:40.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:28:40.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:40.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:40.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:40.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:28:40.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:28:40.074+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.074+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:40.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@781bfa93] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:28:40.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7420230e] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea490d7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dacfcc] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fdb2794] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570598406 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:40.088+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7710de9b] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922535895 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.094+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895142068 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:40.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976460462 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:40.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:40.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18233510 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960821682 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:40.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@781bfa93]
2026-01-20T11:28:40.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.105+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.106+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.107+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.107+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.107+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:40.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7420230e]
2026-01-20T11:28:40.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469b5966] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fdb2794]
2026-01-20T11:28:40.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:40.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787502782 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:40.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117911c3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:28:40.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea490d7]
2026-01-20T11:28:40.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dacfcc]
2026-01-20T11:28:40.117+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e589a59] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432619202 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7710de9b]
2026-01-20T11:28:40.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c900d1] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@508102384 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:40.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.120+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.120+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3973143f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@979603199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21af512b] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@9957235 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:40.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463573603 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:40.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.126+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469b5966]
2026-01-20T11:28:40.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.132+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.132+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117911c3]
2026-01-20T11:28:40.139+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e589a59]
2026-01-20T11:28:40.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:40.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3973143f]
2026-01-20T11:28:40.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21af512b]
2026-01-20T11:28:40.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.149+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c900d1]
2026-01-20T11:28:40.157+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7083c8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@90072716 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:40.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a81a54f] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:40.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:40.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:40.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149bc4cb] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1937238854 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:40.183+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:40.185+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:28:40.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.192+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332144506 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:40.193+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:40.194+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:40.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:40.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:28:40.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:28:40.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:40.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:40.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:28:40.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:40.208+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:28:40.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:28:40.210+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:40.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:28:40.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7083c8]
2026-01-20T11:28:40.212+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:40.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:28:40.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.213+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:28:40.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:28:40.216+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149bc4cb]
2026-01-20T11:28:40.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a81a54f]
2026-01-20T11:28:40.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:28:40.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541015ab] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.215+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.216+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@722cc7de] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.218+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706372752 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:28:40.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230992482 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:40.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e6f765c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f40d31] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5da7ae] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@447859351 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154572716 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:40.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266891864 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f34303a] will not be managed by Spring
2026-01-20T11:28:40.226+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0b060a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566669079 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:40.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@722cc7de]
2026-01-20T11:28:40.243+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:28:40.244+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5da7ae]
2026-01-20T11:28:40.244+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:40.245+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:28:40.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:28:40.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541015ab]
2026-01-20T11:28:40.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66524c80] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f40d31]
2026-01-20T11:28:40.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e6f765c]
2026-01-20T11:28:40.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f51d2b8] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.255+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918137763 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:28:40.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@520183851 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db653fc] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:40.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:28:40.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e404d47] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0b060a]
2026-01-20T11:28:40.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:40.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1767875756 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:28:40.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:40.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532499269 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:40.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.262+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.260+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.260+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:40.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a72be31] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:40.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244173347 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:28:40.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66524c80]
2026-01-20T11:28:40.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:40.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e404d47]
2026-01-20T11:28:40.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67939973] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db653fc]
2026-01-20T11:28:40.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f51d2b8]
2026-01-20T11:28:40.276+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332529485 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce2912c] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:40.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:40.280+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:40.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0d10c3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a72be31]
2026-01-20T11:28:40.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104024552 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@542427522 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:40.281+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:28:40.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:40.289+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:28:40.305+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:28:40.306+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:40.308+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:28:40.308+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.308+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67939973]
2026-01-20T11:28:40.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.316+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f02772] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:28:40.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802387102 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:28:40.320+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce2912c]
2026-01-20T11:28:40.320+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.321+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0d10c3]
2026-01-20T11:28:40.321+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.321+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.321+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed5a228] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a132d3] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@110505263 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e0b3c7d] will not be managed by Spring
2026-01-20T11:28:40.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369353644 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f02772]
2026-01-20T11:28:40.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.326+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5bcc8a] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.326+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.326+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed5a228]
2026-01-20T11:28:40.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1866839812 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a132d3]
2026-01-20T11:28:40.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:40.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:28:40.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:40.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6482c4a2] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140068171 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:28:40.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:28:40.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:40.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5bcc8a]
2026-01-20T11:28:40.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e1ae605] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@717311184 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:28:40.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:28:40.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6482c4a2]
2026-01-20T11:28:40.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:28:40.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53bc4fa7] was not registered for synchronization because synchronization is not active
2026-01-20T11:28:40.344+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@568927910 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:28:40.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:28:40.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e1ae605]
2026-01-20T11:28:40.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:28:40.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:40.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:28:40.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:28:40.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53bc4fa7]
2026-01-20T11:28:40.355+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:28:40.356+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:28:40.357+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:01.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:37:01.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:01.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:37:01.167+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.167+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:37:01.168+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:01.168+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:37:01.168+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:01.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:37:01.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.172+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f1d4d5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433340f3] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085875966 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744721949 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:01.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:01.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:37:01.190+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f1d4d5]
2026-01-20T11:37:01.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433340f3]
2026-01-20T11:37:01.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ddeca2b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.192+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4afdaf7] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.193+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449626113 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.194+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741661341 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.194+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.200+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.204+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4afdaf7]
2026-01-20T11:37:01.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ddeca2b]
2026-01-20T11:37:01.207+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:01.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.210+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:37:01.210+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8981124] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.211+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:01.212+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60558734 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.217+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.228+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8981124]
2026-01-20T11:37:01.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a116bc1] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@46678678 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a116bc1]
2026-01-20T11:37:01.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e211f9a] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068444924 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.245+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e211f9a]
2026-01-20T11:37:01.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402e8798] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.248+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906333640 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.261+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402e8798]
2026-01-20T11:37:01.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17747429] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@600974104 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.274+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17747429]
2026-01-20T11:37:01.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.276+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157d3b24] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555532446 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.282+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.282+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157d3b24]
2026-01-20T11:37:01.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36696ef4] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1253164806 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:01.285+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.285+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.296+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.296+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36696ef4]
2026-01-20T11:37:01.297+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:01.300+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:01.301+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:01.313+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:01.317+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.317+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:01.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:01.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de9e1b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946471674 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de9e1b]
2026-01-20T11:37:01.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.334+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544ef468] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654796328 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.336+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544ef468]
2026-01-20T11:37:01.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42caa1b5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.363+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627709488 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.368+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42caa1b5]
2026-01-20T11:37:01.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240ac396] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.415+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861538731 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240ac396]
2026-01-20T11:37:01.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5da621] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@221891631 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5da621]
2026-01-20T11:37:01.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50be31d1] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1111550281 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50be31d1]
2026-01-20T11:37:01.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf10c8] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585009625 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.485+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf10c8]
2026-01-20T11:37:01.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7f40df] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1171082888 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7f40df]
2026-01-20T11:37:01.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.534+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d47d1c4] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.534+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964304651 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:01.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d47d1c4]
2026-01-20T11:37:01.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:01.551+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:01.552+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:01.558+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.566+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:01.613+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.644+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:01.661+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:01.684+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c58fdf5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1696368555 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.778+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.790+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.794+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c58fdf5]
2026-01-20T11:37:01.796+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4f7bc1] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1892523450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.825+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.827+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4f7bc1]
2026-01-20T11:37:01.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b96682] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1844216071 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.834+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.840+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b96682]
2026-01-20T11:37:01.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc9b975] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.845+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161894392 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.845+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.845+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.847+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc9b975]
2026-01-20T11:37:01.848+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.849+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e740bf] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.849+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354976519 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.853+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.853+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e740bf]
2026-01-20T11:37:01.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33294ffd] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.858+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131170207 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.859+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.861+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33294ffd]
2026-01-20T11:37:01.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56af3f88] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796967943 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.867+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56af3f88]
2026-01-20T11:37:01.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b29e02f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146474941 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.879+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b29e02f]
2026-01-20T11:37:01.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6081715d] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141759482 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:01.882+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.882+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.884+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6081715d]
2026-01-20T11:37:01.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:01.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:01.891+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:01.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.901+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:01.903+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:01.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:01.912+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:01.913+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.913+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22189324] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233433052 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.926+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.927+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22189324]
2026-01-20T11:37:01.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33f35dc5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@676270653 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.929+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33f35dc5]
2026-01-20T11:37:01.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c978421] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891547395 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c978421]
2026-01-20T11:37:01.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f49b85] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044897814 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f49b85]
2026-01-20T11:37:01.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58de8801] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@621479980 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58de8801]
2026-01-20T11:37:01.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.964+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@243899c] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.964+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787584853 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.965+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:01.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:01.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:01.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@243899c]
2026-01-20T11:37:01.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.977+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d3679a] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.978+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@700581781 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.978+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:01.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:01.983+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:01.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d3679a]
2026-01-20T11:37:01.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:01.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0defa5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:01.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095674409 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:01.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:01.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:01.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:01.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0defa5]
2026-01-20T11:37:02.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c42fa2] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708218328 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:02.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.013+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c42fa2]
2026-01-20T11:37:02.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:02.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:02.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:02.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:02.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:02.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:02.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:02.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:02.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f12d37] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011989857 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f12d37]
2026-01-20T11:37:02.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b047eec] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@935897786 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.085+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b047eec]
2026-01-20T11:37:02.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c1e708] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.091+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567935938 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:02.093+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:02.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:02.097+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c1e708]
2026-01-20T11:37:02.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48712ed3] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248412530 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48712ed3]
2026-01-20T11:37:02.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b32c94] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1115004295 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:02.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:02.109+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:02.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b32c94]
2026-01-20T11:37:02.111+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.111+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1daf01b6] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132274459 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:02.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:02.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:02.120+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1daf01b6]
2026-01-20T11:37:02.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d86d64c] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480704763 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d86d64c]
2026-01-20T11:37:02.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f079d4e] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70782548 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:02.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:02.133+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:02.133+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f079d4e]
2026-01-20T11:37:02.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ceb8f36] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605734920 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:02.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.135+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.139+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ceb8f36]
2026-01-20T11:37:02.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:02.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:02.142+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:02.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:02.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:02.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T11:37:02.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:02.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:02.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac18fd5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1986641640 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.159+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac18fd5]
2026-01-20T11:37:02.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@684447b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746287951 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@684447b]
2026-01-20T11:37:02.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c9452f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2102031857 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:02.183+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:02.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:02.192+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c9452f]
2026-01-20T11:37:02.193+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.195+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d53cf27] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124423071 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.215+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d53cf27]
2026-01-20T11:37:02.216+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.216+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed92e26] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.217+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291904045 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:02.227+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:02.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:02.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed92e26]
2026-01-20T11:37:02.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0349e6] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.239+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1289550014 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:02.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:02.248+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-20T11:37:02.250+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0349e6]
2026-01-20T11:37:02.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27033759] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.253+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107873830 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.259+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.262+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27033759]
2026-01-20T11:37:02.263+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.264+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11332d1e] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800352670 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:02.266+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-20T11:37:02.268+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-20T11:37:02.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11332d1e]
2026-01-20T11:37:02.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:02.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b697e9] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:02.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476386236 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:02.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:02.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:02.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:02.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b697e9]
2026-01-20T11:37:02.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:02.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:02.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:04.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:04.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:04.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:04.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719407ce] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@35358441 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719407ce]
2026-01-20T11:37:04.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.456+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51bf7f09] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.456+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091372599 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.457+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51bf7f09]
2026-01-20T11:37:04.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a0b4c14] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@275131243 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.462+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a0b4c14]
2026-01-20T11:37:04.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598dd695] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@956717660 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598dd695]
2026-01-20T11:37:04.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c126752] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186394427 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c126752]
2026-01-20T11:37:04.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480afaf1] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737305173 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480afaf1]
2026-01-20T11:37:04.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17de55ce] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136112310 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17de55ce]
2026-01-20T11:37:04.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c766921] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2036547396 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.490+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c766921]
2026-01-20T11:37:04.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c516f9a] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405169232 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.493+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.495+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c516f9a]
2026-01-20T11:37:04.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:04.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:04.497+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:04.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:04.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:04.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:04.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481d58ec] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686750456 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.511+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481d58ec]
2026-01-20T11:37:04.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcd20e1] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88176313 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.512+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcd20e1]
2026-01-20T11:37:04.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2df293] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1069749055 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.517+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2df293]
2026-01-20T11:37:04.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d13cd9] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@605873466 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d13cd9]
2026-01-20T11:37:04.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7855c19f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@565910968 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.527+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7855c19f]
2026-01-20T11:37:04.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba6df9c] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034527310 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.534+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba6df9c]
2026-01-20T11:37:04.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0dae87] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327865061 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.535+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.536+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.538+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.539+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0dae87]
2026-01-20T11:37:04.541+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16469920] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.542+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@899441913 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.545+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.545+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16469920]
2026-01-20T11:37:04.545+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e237bbc] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007582913 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:04.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.547+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e237bbc]
2026-01-20T11:37:04.549+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:04.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:04.550+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:04.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:04.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:04.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:04.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39d4a4c8] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144484808 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.581+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39d4a4c8]
2026-01-20T11:37:04.583+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a59da58] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714934591 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.592+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a59da58]
2026-01-20T11:37:04.593+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.594+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e6fc6c] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.643+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103010322 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.660+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e6fc6c]
2026-01-20T11:37:04.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f5665f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217325425 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f5665f]
2026-01-20T11:37:04.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c1ae65] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.714+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958128956 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c1ae65]
2026-01-20T11:37:04.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b9b008] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520601756 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.731+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.743+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b9b008]
2026-01-20T11:37:04.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302b4e48] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246190517 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.745+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302b4e48]
2026-01-20T11:37:04.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@485d7d5b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@586031894 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.750+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.752+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@485d7d5b]
2026-01-20T11:37:04.752+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.752+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28357af9] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.752+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186744065 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:04.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.758+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.758+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28357af9]
2026-01-20T11:37:04.759+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:04.759+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:04.760+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:04.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:04.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1
2026-01-20T11:37:04.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:04.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:04.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5915c409] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945383169 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.774+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.774+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.776+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.777+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5915c409]
2026-01-20T11:37:04.777+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.778+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d4a8e5] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.778+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303465990 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.781+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.782+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d4a8e5]
2026-01-20T11:37:04.782+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.782+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7015c508] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.784+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@575981679 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.784+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.786+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7015c508]
2026-01-20T11:37:04.799+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.799+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e1de52] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.799+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552049795 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.801+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e1de52]
2026-01-20T11:37:04.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.805+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0795af] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914226547 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.808+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.808+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0795af]
2026-01-20T11:37:04.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf0eb17] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689479979 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:04.814+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:04.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T11:37:04.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf0eb17]
2026-01-20T11:37:04.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28554d31] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1142006655 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28554d31]
2026-01-20T11:37:04.823+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.824+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b41e0ee] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.824+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1233064050 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.825+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:04.826+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:04.827+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T11:37:04.828+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b41e0ee]
2026-01-20T11:37:04.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:04.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a83967a] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:04.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243353940 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:04.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:04.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:04.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:04.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a83967a]
2026-01-20T11:37:04.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:04.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:04.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:05.635+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.641+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.667+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.673+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:05.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.676+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:05.677+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:05.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.680+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b021583] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224104276 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:05.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.710+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.711+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b021583]
2026-01-20T11:37:05.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d0ec91] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.712+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763492584 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:05.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d0ec91]
2026-01-20T11:37:05.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757071c8] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641066387 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:05.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.720+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.728+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757071c8]
2026-01-20T11:37:05.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.729+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dda45ea] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.730+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540530088 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:05.730+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.731+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.733+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.734+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dda45ea]
2026-01-20T11:37:05.734+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:05.735+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-20T11:37:05.735+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:05.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:05.743+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.743+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:05.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:05.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.744+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21161088] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905173476 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.750+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21161088]
2026-01-20T11:37:05.750+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff3c9a2] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1076353010 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff3c9a2]
2026-01-20T11:37:05.755+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.756+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@459bbc97] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.756+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686426463 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.757+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.759+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.762+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.762+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@459bbc97]
2026-01-20T11:37:05.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.763+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ee269f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762218801 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ee269f]
2026-01-20T11:37:05.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:05.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-20T11:37:05.771+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:05.801+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:05.805+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:05.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:05.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f14565b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085457910 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.814+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.816+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f14565b]
2026-01-20T11:37:05.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6934dbb] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1809348028 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.825+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.826+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.834+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6934dbb]
2026-01-20T11:37:05.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.852+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae4f44d] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.853+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369528383 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.861+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.882+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae4f44d]
2026-01-20T11:37:05.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1feb5af9] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838898645 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.912+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1feb5af9]
2026-01-20T11:37:05.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:05.926+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-20T11:37:05.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:05.930+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.938+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:05.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1
2026-01-20T11:37:05.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-11-01&endDate=2025-11-30&drafterName=test_user1", parameters={masked}
2026-01-20T11:37:05.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:05.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4daf6adf] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817988537 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.949+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.949+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4daf6adf]
2026-01-20T11:37:05.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5257544] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862592685 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:05.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:05.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:05.958+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5257544]
2026-01-20T11:37:05.958+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.959+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102e861b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049579023 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.961+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102e861b]
2026-01-20T11:37:05.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:05.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d51551b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:05.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699079924 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:05.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:05.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-11-01(LocalDate), 2025-11-30(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:05.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-20T11:37:05.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d51551b]
2026-01-20T11:37:05.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:05.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-20T11:37:05.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:06.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:37:06.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:37:06.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:37:06.867+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:37:06.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:06.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:37:06.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:37:06.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:37:06.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:37:06.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:37:06.869+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:37:06.871+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:06.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:37:06.871+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:37:06.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:37:06.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed9b021] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5e7c93] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.877+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393ece30] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947552542 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@569245091 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:06.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@974529139 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:06.883+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.883+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:06.883+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:06.884+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:06.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:06.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:37:06.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:37:06.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed9b021]
2026-01-20T11:37:06.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5e7c93]
2026-01-20T11:37:06.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393ece30]
2026-01-20T11:37:06.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76dc6068] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f5ac46] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da5eef2] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1531306052 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960067954 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:06.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266058083 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:06.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.901+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.901+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.902+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76dc6068]
2026-01-20T11:37:06.902+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.903+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f5ac46]
2026-01-20T11:37:06.903+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da5eef2]
2026-01-20T11:37:06.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:06.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9a9094] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.907+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.908+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:37:06.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693135439 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8e01a4] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:06.911+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:06.912+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259963033 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:06.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:37:06.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:06.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:06.922+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:37:06.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:37:06.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:37:06.926+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:37:06.927+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:37:06.927+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:37:06.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9a9094]
2026-01-20T11:37:06.929+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.929+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.930+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68ec0e91] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.930+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d515c76] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.930+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:37:06.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1715496 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8e01a4]
2026-01-20T11:37:06.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713b9242] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@267911739 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:06.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@744832736 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:06.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:06.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.934+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:06.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68ec0e91]
2026-01-20T11:37:06.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.939+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d46c23] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.940+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615097646 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.941+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:06.941+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:37:06.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:06.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713b9242]
2026-01-20T11:37:06.943+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d515c76]
2026-01-20T11:37:06.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:06.944+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:37:06.945+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6acac85] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:06.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874915201 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:06.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:37:06.948+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T11:37:06.950+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d46c23]
2026-01-20T11:37:06.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a04bda4] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T11:37:06.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1106931123 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T11:37:06.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:06.960+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T11:37:06.962+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:06.963+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T11:37:06.964+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:06.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6acac85]
2026-01-20T11:37:06.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c4b611] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.968+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:06.968+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1277435949 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:06.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:37:06.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:06.970+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:06.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:06.977+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:37:06.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:37:06.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a04bda4]
2026-01-20T11:37:06.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:37:06.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b2feb] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:06.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:37:06.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@801983427 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:06.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:37:06.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:06.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T11:37:06.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:37:06.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:06.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c4b611]
2026-01-20T11:37:06.997+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:06.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293a458f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31231eb0] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.001+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537577013 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861229755 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b2feb]
2026-01-20T11:37:07.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:07.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:07.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd12dd7] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1157410289 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:07.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:07.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.010+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:37:07.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:07.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31231eb0]
2026-01-20T11:37:07.011+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293a458f]
2026-01-20T11:37:07.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.013+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e435a1f] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:37:07.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8eaaf0] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008816121 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd12dd7]
2026-01-20T11:37:07.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@811833395 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:07.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T11:37:07.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d7d826b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1767290758 wrapping com.mysql.cj.jdbc.ConnectionImpl@7de8e158] will not be managed by Spring
2026-01-20T11:37:07.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T11:37:07.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e435a1f]
2026-01-20T11:37:07.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8eaaf0]
2026-01-20T11:37:07.029+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598289ce] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:07.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492151619 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:37:07.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:07.035+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:37:07.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d7d826b]
2026-01-20T11:37:07.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598289ce]
2026-01-20T11:37:07.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:07.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:07.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:07.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:37:07.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T11:37:07.070+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:37:07.070+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:07.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:07.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:37:07.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:37:07.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T11:37:07.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e20d6e9] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.160+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T11:37:07.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564805074 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:07.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T11:37:07.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T11:37:07.178+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T11:37:07.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bedfa4] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:07.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@560259026 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.184+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:07.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.293+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:37:07.302+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e20d6e9]
2026-01-20T11:37:07.307+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.308+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c48a90] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.309+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493930975 wrapping com.mysql.cj.jdbc.ConnectionImpl@5b74537d] will not be managed by Spring
2026-01-20T11:37:07.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bedfa4]
2026-01-20T11:37:07.326+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.327+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9d561] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1431136609 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c48a90]
2026-01-20T11:37:07.350+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:07.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9d561]
2026-01-20T11:37:07.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:37:07.351+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c395b2b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:07.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@545777936 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.359+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:07.360+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:07.364+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T11:37:07.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T11:37:07.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T11:37:07.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T11:37:07.395+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:37:07.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T11:37:07.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c395b2b]
2026-01-20T11:37:07.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@750d77dc] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@498a759c] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821352214 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867288453 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T11:37:07.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T11:37:07.401+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T11:37:07.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@498a759c]
2026-01-20T11:37:07.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@750d77dc]
2026-01-20T11:37:07.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1291cf8c] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a137385] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137195223 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616448140 wrapping com.mysql.cj.jdbc.ConnectionImpl@24166425] will not be managed by Spring
2026-01-20T11:37:07.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:07.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:07.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:37:07.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a137385]
2026-01-20T11:37:07.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1291cf8c]
2026-01-20T11:37:07.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:07.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T11:37:07.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bb480b] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T11:37:07.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@239736959 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T11:37:07.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T11:37:07.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T11:37:07.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bb480b]
2026-01-20T11:37:07.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.528+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5917b091] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.529+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295977128 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.530+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.545+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5917b091]
2026-01-20T11:37:07.546+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.548+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36dd5976] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.553+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378546692 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.559+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T11:37:07.561+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T11:37:07.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T11:37:07.576+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36dd5976]
2026-01-20T11:37:07.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T11:37:07.577+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c54bee] was not registered for synchronization because synchronization is not active
2026-01-20T11:37:07.578+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796190857 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a1f23bd] will not be managed by Spring
2026-01-20T11:37:07.579+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T11:37:07.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T11:37:07.584+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T11:37:07.585+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c54bee]
2026-01-20T11:37:07.586+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T11:37:07.591+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T11:37:07.598+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:19:47.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T13:19:47.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:19:47.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T13:19:47.736+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:19:47.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:19:47.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:19:47.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:19:47.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:19:47.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:19:47.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:19:47.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:19:47.755+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:19:47.755+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:19:47.759+09:00  INFO 21808 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:19:47.761+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:19:47.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e79ba0d] was not registered for synchronization because synchronization is not active
2026-01-20T13:19:47.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:19:47.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11813b7f] was not registered for synchronization because synchronization is not active
2026-01-20T13:19:47.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832723417 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:19:47.781+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:19:47.783+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1673860907 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:19:47.785+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:19:47.787+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:19:47.787+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:19:47.804+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T13:19:47.805+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11813b7f]
2026-01-20T13:19:47.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:19:47.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:19:47.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T13:19:47.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e79ba0d]
2026-01-20T13:19:47.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:19:47.817+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7500d3b8] was not registered for synchronization because synchronization is not active
2026-01-20T13:19:47.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099034888 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:19:47.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:19:47.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:19:47.821+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:19:47.821+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:19:47.824+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:19:47.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7500d3b8]
2026-01-20T13:19:47.828+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:19:47.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:19:47.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:19:47.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:19:47.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:19:47.834+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:19:47.837+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:19:47.840+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:19:47.846+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:19:47.849+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57fa4684] was not registered for synchronization because synchronization is not active
2026-01-20T13:19:47.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985251493 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:19:47.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:19:47.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:19:47.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-20T13:19:47.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57fa4684]
2026-01-20T13:19:47.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:19:47.856+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-20T13:19:47.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:00.798+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T13:20:00.806+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/me/signatures
2026-01-20T13:20:00.818+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:20:00.826+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/me/signatures
2026-01-20T13:20:00.834+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/me/signatures", parameters={}
2026-01-20T13:20:00.835+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#createSignature(UserSignatureDto)
2026-01-20T13:20:00.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserSignatureDto(signatureId=null, userId=null, signatureName=기본 서명, signatureType=SIGNATURE, signat (truncated)...]
2026-01-20T13:20:01.135+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 서명/도장 생성 요청 - userId: 2, companyId: 1, signatureName: 기본 서명
2026-01-20T13:20:01.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:01.167+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453728979 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will be managed by Spring
2026-01-20T13:20:01.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.clearDefaultByUserId           : ==>  Preparing: UPDATE user_signature_tb SET is_default = 0, updated_at = NOW() WHERE user_id = ? AND company_id = ? AND is_default = 1
2026-01-20T13:20:01.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.clearDefaultByUserId           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:01.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.clearDefaultByUserId           : <==    Updates: 1
2026-01-20T13:20:01.218+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057] from current transaction
2026-01-20T13:20:01.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserSignatureMapper.insert  : ==>  Preparing: INSERT INTO user_signature_tb (user_id, signature_name, signature_type, signature_data, is_default, company_id, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 0), ?, NOW(), NOW())
2026-01-20T13:20:01.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserSignatureMapper.insert  : ==> Parameters: 2(Long), 기본 서명(String), SIGNATURE(String), data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAAAsSAAALEgHS3X78AAAVr0lEQVR4nO2de1yb9b3Hv+TJPeRacgUCJSkIBFpuFUtX1NpWbTu7aq13j869urnjcD1O59Ht6KabL6fHqnXTzUvb487mar2sameP9dbW4qBQKBcJBEII4RKakJCEJ5cnOX9YOuxFeG55kvZ5/0XC8720+fA8v98vv+/3l5FIJICFhSgcphNgSW9YAbGQghUQCylYAbGQghUQCylYAbGQghUQCylYAbGQghUQCylYAbGQghUQCylYAbGQgst0AqlAJBpDJv0BNQDoolhM5fUFpCd/JQaAEADENSrFJACcAIBRzQKFh6lcU40LSkAe31S+xzdV6fVPlfoDoYvCkajJHwzlAYAaABAcrkIAMKKUZQ5JRMI+Waa4UyYRdyjl0lZ5puQEPdmnJhnn83aOEben3O2dvMLt8dW7vb5L4Guh0EkC4XD61Cr5YbVS8alerfpIJZcO0xyTUc4rAQWnUcnQqHvlhNd39Yjbsw6Lx7MZTikh4PHacnRZf8/Rqnfr1aoOhvOhnLQXUAzDMpyj7pV219jtoxPe7wGAhOmczgUXQfqztVlvmnL1r2hUCivT+VBB2gooOI3KeuzO7w8Oj90djkbNTOeDk4RMIv7UlKt/3mQ0vMtFkDjTCREl7QTkCwS1XTbHvYOusR8BgJzpfMgi4PF6TUb97wrzc3YI+fwo0/ngJW0E5AsEFV02xwODrrF7IIUfU0RBOBx7iSnv0aKFObvS6Y6U8gKKYRjSbh242+Zw/RcWjy9gOh+6EfB47RXFpq352boDTOcyH1JaQH0O11XHrQNPhKPRcqZzSTZKWebfahcX/1SeKXExncu3kZIC8vimchrbul/yB0NXM50Lw0yWmIxbywsLXmM6kXORcgLq7Bu8ocs2+AIWj6uYziVVkIpFX1SWLNqSiutIKSMgNBIRNbZ1Pz864f0+w6l4lbLMFgGf55CIhFF/ICQJTqPmEBpeAgACBvOaLjEZ7y0vLPgjgzmcQUoIyB8MSQ82H983FZquYyoHoYDfbDHn/zrPoHmfx+Vip//eHwzJegaG7hh0jT8YwzAtEzkCABjUC363orrsfqbinw7jAhr3TOY1tnW/c/IvPOkIeLyOssKFD+Zna9/nIsic/xloJJLZ3GF9yDk2sRUA+ElI8QzUSvlr9TXlP+QiSISJ+LNhVEAjbk/1oZaOv2PxuJ6J+GqlfFddZekWIZ+P4rUdHp8oPtrZ+9cQGmZkhigWCj5fWVuxQSISepmIPwNjAupzuFY1d1r3AIB0zotpQK2U/2FlbcXdZHwEp1HlgcbWj5m6e4qFgs7axcVXalQKJxPxARgSUJ/Dtb6507obGBqUyiTiA6vrqtZwEeSMsQ5ePL6pnAONrS1YPE73VpGzgnA4/fU15as1KoWNifhJ39La53Bd09xpfQuYm9EEaxcX/xsV4gEAUMmlzhJT3k+p8EUELB4v+Kyp/ZNxz6SJifhJFVCfw3Vlc6f1DWBwJ2SeQfu8Si6l9JZfas77s4DHa6XSJx6weDz3s6b2/R7fVE6yYydNQF8NDK0+OeZhci0lXpSf8wIdjgvzc7bT4Xe+YPF4waGWjn3BaVSZzLhJEVCfw7Xm2Fe29+DrTeqMIRYKmqi++8yQo8t6FwAY/RY9hIYtBxpb345hWNKWF2gX0Lhn8qKTjy0e3bHmQq1SHKHLtzxTckLA4zG+yzCEhus/a2p/MVnxaBVQcBqVHW7pfAdSZOOXRCSgdaYiFgn66fQ/X9xe3x2fNx//bTJi0SqgQy0dr4Sj0SI6Y+BBLBQGaA4xSbP/eeNyn/h5u7X/Lrrj0Cagdmv/j7z+wHV0+SdCOBKlewyWSbN/XHTZHM+OuD0ldMagRUAe35S2y+Z4kg7fZAihqIFO/9PhCNNlRKcjbunqfYnOALQIqKmj5zlIsb9GAAB/IFRGl280EuGh4UgxXf6JMhWaXt5u7b+DLv+UC6hnYOgarz9wPdV+qcDt9V2GRiJCOnyPuj31wPAyxbnoGXA+5QsEdXT4plRAaCQiabcOPE+lT4qR2hwjtIjbNjTC9Ea4c4LF46rmDut/0+GbUgG1dtsexuLxXCp9Uo3V7vzPGIZRuiY14vaUur2+lJownI7b67vBPjxaT7VfygQ07pnMH3SN3UuVP7oIR6NFTR3WB6nyF8MwpKmj50VI/U4nGa3dtmdiGJZBpVPKBHTcOvBrAKBlfEE1g66xX/Q5XJRUfDS2dT8VQsPLqfBFN+FotMLmcN1EpU9KBDTumbS4vb4bqfCVJLjNndbdfQ7XWqIOorEY50hb95POsYmUv+vOpsvmeCSGYXh6IX0rlAjouHXgIcDXoCkVEDd3Wt891NLx2DQaxnXnHHF7KvYfPnp40DX2M7qSo4twNGq2OVy3UOWP9I7Ecc+k6eMvj/VA+gloNm5Trv4FU67hTyq59JyVoEOj7iqr3XmP2+u7BdL43yvg8brXX1ZbOp8igrkgLaBDLR3bnWMTPyabSIoQFwsFrSq5tEnA5zkAIAwA0uA0usjt8S3D4vGFTCdIFdWlhevMRsP7ZP2QElBwGpXt/bTRCQxtjGchjkwi/vDqFUuvJOuH1BjINuS6CVjxpCX+YGjVuGeygKwfUgLqd46m08yL5ZtwhscmNpN2QtTQ45vSo+HIMrIJsDCHfXiM9Oo5YQE5x9ybIfVXX1m+hXA0Wjni9lxExgdhAdmHxzaSCcySGjjH3NeSsSckII9vSh9Cw+zj6zxgxO35Lhl7QgKyDbluhDReSGP5FyE0XO0LBAmXZRMS0PD4iU1EA7KkHJxRt2clYWO8Br5AMAsNRy4mGpAl9XB7fZcStcUtILfHVwcAlO4pYWGWk58pIXBPw73+qaVEg6UJAZlEfAxBOE5ZpiTgDwSVoenwonA0Wgrn6bgvHI0WB6dRqUQknMJri1tAHt9UJV6bNCCuVsrfzTNoX8rRZX18tiMHgtOo0j489j2r3dlwHvatRjy+qcUSkfAQXkPcX6b+dd+nTgBItfonwihlme9VXGTeqlmg6J3P9TEMy+gZcN7W3e94MoZhGrrzSxYlJuOPywsLfo/XDtcYyBcIyuD8EU/ClKt/eE1d9fr5igcAgIsgiVJz3s7VdVXFSlnmPjoTTCbB6TChFWlcAgqHo+fNfhiDesFTNZaix4nayyRiz+UXL9koFYuOUpkXU/gDQUKfLS4B+YOhlC7ZmS9ioeDQsoqSh8j64XG5aE1Z0SZIoaYKRAlNhwl1N8N3B4pEk95CjQaml1dabuciCCVnc2lUioESk/E/qPDFJOFo1EjEDpeAQihKS3lsMskzaP+gkksp7eNTYsp7TcDjpdw5FjhR+YMh3O0H8S4kpvt5XXFTrp7y0msugiRMRj2jPRKpAEUjuG8Q+MZAgZACb4BUQiwUHNWoFHY6fOcZtG8Bwz0SKQD3DQKXgGIYlnItW/BAc49Et4DHm/dyQIqCe3873kdYWi/lS0SCPjr9i2nuwUg3Hv8U7rNok96pnknEQiHd0+20ns7HYvi7llxQAgKAGNMJpDi4x3B4BcT86XQstKFRKfx4bfAKiO42uSzMEsJrgEtAskwJboWypBW4D6/DJSAuwmH0dDwW2nHjNcAlIARBJvAGYEkbUM0ChQ+vEb5HmER8zt45LGnPMBEjXAIS8HmDRIKwpD5KWaaDiB0uAUlEwrReaWU5NxKRkNDXMLgEpJJLxwHAQyQQS2ojFgl7iNjhXomWScTpvu+F5SyoZJmEPlfcAlLKpYwdLstCH0Q/V9wCUsky/0kkEEvqgnA4dnmmBPcaEACBwkKlXErbnhqW5CPg8dpNRj3uerAZcAtIo1IMcBGkN4Zhi4gGZWEemUT8QYnJ+Gh+to7UE4XQdg6DZsGbZIKyMAfC4YyVLVq44eoVS9eSFQ8AQQHlGTSvkw3MknxkEvEnq+uqFpea8949/XfjwUHDeHBwiWd6RInHJ6EmmdmarC4ugthiGGYiYs+SfKRi0durllVez+Nyv7GprnnkwOrWsQO/nY56KzMyEsCBRKxAUfbMyoV3PcBHhHPu/yK8I1GXpfyAqC1LclEr5a+tWV69ebZ4fGGP8i9dz77++dA7/whGfbM7rnAHfe0/+6j/xXmdcEhYQHkG7d+I2rIkD1Ou/vGVtRV3zq7E7fG0L32l/TfHhqdsN8M5moU5/R0N9smWOVv5EBaQXq06jHA4lFZ4slBKwpSrv6/GUvTw7Dc/dXxw+1vWVz+PxucsZc7o8xy5fa4ghAXERZBEfrZ2J1F7FloJWcz5m2osRU/PfvO9/t2/Ouz66DUAmFcJcyByYs5j0klVZZhyDa8CW+mQavirSwtXWRbl75l5I4JFMl7reOHFlrHGXwC+/pZzHsRHSkAqudSpVsrfJuODhVL81aWFV5mNhi9m3ohgEWRX9yuvD04NbMHrjMsROOe6hnRdmClX/wxZHyzkQTgcz9nEs7Pr1T8P+gcIHbSry1x0eK5rSB+Wkp+tO9Jlc3zuD4ZWkPV1oSAWCo6qVYp9aqW8RSISuhCEE/cHQhp/MLTEOeq+MoSGcbVSRjic8fqa8is1KsWpb9TDWFi4o2vH3xz+gfUcYk2ZI/mKyjfmuoiS03ZKTMbHG9u/YgX07WBKWeYbJaa8p3J16jO2TmhUCgCA9yuLzY+PeybLmjusT/iDoTmPJkc4HPtJ8ZzaEOZFvdqXO1/dewJ11xBtZpAjs7ycJc4fnes6Skqb87N1+2US8WdU+DofQTic4bqK0hVr6qpvPpt4TkejUhy/esXStSUm4w8AAD3XdWKhoHl1XdUls8XT77PnbDv2+0/d6EQN0Xy5HP7wd4y3Pjz3lRSe91ViMt7f2P5VI7Bd7L8BwuH019eU12tUijMGpF96XaaBoGcRBxIcs0Q1WCzTdIkQ3qmvD8oLC16WScRdzZ29b8YwTD/bVq2U76qrLN0i5PNPCczms5v+2LlzPxaPFBB8bAEARFYYb7lRKlgwrxpAygSUn637p21o5C9ur4/QgO08ZXp5pWX9bPGEsCj3sd4vt7zj6mkIREOL+BkJEEAC+BkAUg4ydG2O5ekt5rrtQoSHAQDkZ+u+UClkZUeOde3w+gPrAGCybNHCn5Sa8/5ndqC2ia6a13ve3BuLR7UIcfHEq/RX3VW4oPbgfA0oPXGwotj8wP4vjq4H9iBeAADIM2hf1KtVXTOve4OTORua9u4eQadq+Rlx4J92PRqP5r4x1LLtoLt3wwtVmzdpRbIJAACZRHxiTV31evvw6GVKubRLnikZm233sfPIxrf69+1CMhISEmOS0FLDutsuNqzbM/el/4LS9i4qudTJTuv/hUGt2jvzc29wUnnZkbeODKFTtXPZjaH+S7/fuONjZ9DzjZaC+dm6T04Xz+vWvT98s//D3QCAuznULBJExANAQ3+gElPe7xAOhy1ABACpRDwy8/NBj6t+Mjb/XswhLFL282O7P+/wDp115+dUJCTe1v7nFw6OHP09kPscExZ1XUNt9lrc4gGSgc+KRCQMVBSb74L0bzhJmtnd37+rXfiRFOHNubI7m3HUX3Z/y19aH2vb83Trif7yMBbNmEB9kg+Hvrz1Z43PHe/w2O4GcpOWRJl6WcMV+TcR7lxLy6nLZqPho9EJz7POsYmf0uE/XbANjdyUn63bBwCQxRcFXl18xfrNLR8cBAA8zUolTSf6trae6N3Ky0igXEjwEYhzkIwE2b/+RLlmWcOqhTeQantMW4u7akvhg2KhoIUu/+mA2+u7YcTtWTLz+ipN/rFfLrr4RyRcCoGazyyxWLOsYTVJ8QBFyZwVIZ8frl1cvAnhXNA9hbhNHT070Ujk1Lfa95mqXr9Eqd/FYE6JJZplDVcu3ExJw3Vam2xqVIr+imLzTXABb/kIoeHyxrbubbPfe7H8irtzhFImSsQTSzSXNFxVcD1l3fpp79JqNhr+YcrV30d3nFRmdMK7pbNv8LqZ17kiaXB72aprIbltgROVmtqGtQWbKD3qISltfmssRc8a9ZoH4ALu8nq8d+BPw+MTlpnXtSqD9YmSy5J1d05UaWob1pmoFQ9AEvtEL1tS8qQpV39/suKlIIojx7o/GvdMnpra35Rr2XdDjoXuu3OiWntxw3rTdZSLByDJjcZrLEVPmXL1jyYzZioRwzBtY1v3O8Fp9NQ0/rGSy59dviDvOZpCJmp0FzdcY7qWFvEAMNCpvsZS9IgpV/9IsuOmCiE0XH6opeN/Yxh26v9+25K191YqDLspDpVYql3asMG0kTbxADB01EGNpejRkwPrC3JM5PUH1h9q6ThVuCdCeIntlRtuWaLI3vttdjgIrcpduWmjmV7xADB4VkaNpehpo15zwY6JRie8DR299ptnXosQXuSZig3XG8XKJpKusVXGy69fZbyC0HdbeGH0sJVlS0qeMuXqG+ACXSfq6LO/1OdwLZt5LeHy0W0V167TCWVERRTaZL5m0xrjyvcpSnFOGD+tp8ZS9Fx1aeFahMO5EJt3Slq7+94b90xWzLyhE8nGn6/afGm5IhtXCx0+hzdwZ/GNK5bpa5JaZsW4gAAAzEbD/vqa8mqxUNDMdC7JBovHlZ81tR+YfSfSiWShbdU3btqYW/UTAJiew0WiWGna9XD1PZWLs0qSfoZ9SggI4OvOZ6vrqupytFlPwwW2FQSLx5XNndb/63O4vjv7/R8WXv78k1U3ltcsMO+AswhJL846dOdFGy+7p+zW21VCBSOH3WUkEqk3EbIPj17a1GF9BYvHC6j0W11auNlsNNDWVeRAY+tOt9d3GwkX8TyD9pc1lsLfcBHkGx+MG/Up2jz9KwenRvLUQpl/oVR/sExlItTbmUpSUkAAAGgkIjluHdhqGxq5DwBkVPisry5foler2qjwdTZauvsestqdj5H1I5OI99dVlt4uz5TMWZfFNCnzCDsdIZ8frLEU/fqq79RcpFbKdwHJxxrC4djVKnk7RemdFX2W6ozWcQTwq1XyjwV8XlpMKlL2DnQ6Q6PuquPWgSf8wdAVROxLTMYflBcWvEx1Xqfz4eHmd7z+wDUETCO6LOXLFcXmX52+cT6VSRsBzWAfHq3vsjl+4Q+GVs7XRq2U71lZW3Hd3FeSxxcIavcfPvpPLB6fq4HTDGG1Ur6zrHDhbzQqRdoVI6SdgGYYGnVXWe3OrW6v7zqAM0qsZkjospQvL6+0/DsXQSLJym3cM5nX2Na9J4SGq851DcLhuHN06j+VmIzb5ZmSkXNdl+qkrYBm8AWCWqvdeadzdOKGcDRaDF8XCrh0WcrP8g3a7fnZOkY668cwDLE5XDfbhkZu8wdD1QAgBwCfTCJuyjNod5iM+j2zy5LTlbQXEAuzpOwsjCU9YAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCyk+H9+hrhPceyKDgAAAABJRU5ErkJggg==(String), true(Boolean), 1(Long)
2026-01-20T13:20:01.305+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserSignatureMapper.insert  : <==    Updates: 1
2026-01-20T13:20:01.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.313+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.b.service.UserSignatureService       : 서명/도장 생성 완료 - signatureId: 9, userId: 2, signatureName: 기본 서명
2026-01-20T13:20:01.314+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057] from current transaction
2026-01-20T13:20:01.314+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : ==>  Preparing: SELECT * FROM user_signature_tb WHERE signature_id = ? AND company_id = ? LIMIT 1
2026-01-20T13:20:01.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : ==> Parameters: 9(Long), 1(Long)
2026-01-20T13:20:01.317+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : <==      Total: 1
2026-01-20T13:20:01.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.320+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7190a057]
2026-01-20T13:20:01.338+09:00  INFO 21808 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 서명/도장 생성 완료 - signatureId: 9
2026-01-20T13:20:01.338+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:01.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장이 생성되었습니다., data=UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-20T13:20:01.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:02.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:20:02.199+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:20:02.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:20:02.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:20:02.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:20:02.201+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:20:02.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:02.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2326d7] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:02.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463518446 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:02.205+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:20:02.206+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:02.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-20T13:20:02.212+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2326d7]
2026-01-20T13:20:02.214+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:02.215+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-20T13:20:02.216+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.322+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T13:20:09.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:09.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T13:20:09.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T13:20:09.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T13:20:09.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T13:20:09.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T13:20:09.331+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:09.336+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T13:20:09.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T13:20:09.336+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:09.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T13:20:09.337+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T13:20:09.338+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:09.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T13:20:09.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T13:20:09.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:09.339+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T13:20:09.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T13:20:09.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab3051f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.349+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31362891] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.389+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d895faf] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1476058752 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.399+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1723740623 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48444927 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.406+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.407+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.416+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:09.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab3051f]
2026-01-20T13:20:09.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8cfecb] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404649696 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d895faf]
2026-01-20T13:20:09.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552d45c] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@477383628 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8cfecb]
2026-01-20T13:20:09.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:09.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T13:20:09.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552d45c]
2026-01-20T13:20:09.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:09.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31362891]
2026-01-20T13:20:09.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:09.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6184b681] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:09.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2253e] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:09.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919385305 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592120475 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T13:20:09.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:09.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T13:20:09.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.456+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d643c16] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1357087855 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.458+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2253e]
2026-01-20T13:20:09.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd8ea9] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1597086045 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.471+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T13:20:09.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T13:20:09.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:09.481+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d643c16]
2026-01-20T13:20:09.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f0ecfd4] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130812079 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.490+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.490+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T13:20:09.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd8ea9]
2026-01-20T13:20:09.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a800a3] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459896505 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f0ecfd4]
2026-01-20T13:20:09.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:09.508+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.518+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:09.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.523+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:09.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a800a3]
2026-01-20T13:20:09.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:09.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.525+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:09.526+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T13:20:09.580+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.531+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:09.596+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.596+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c97f373] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.597+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517256403 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.601+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T13:20:09.603+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.649+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-20T13:20:09.652+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T13:20:09.653+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T13:20:09.655+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T13:20:09.657+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:09.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447dbb30] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c97f373]
2026-01-20T13:20:09.659+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.661+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508cda6e] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.658+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155526197 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.669+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1672718183 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.669+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.672+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.675+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.686+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.686+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T13:20:09.687+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-20T13:20:09.686+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508cda6e]
2026-01-20T13:20:09.687+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6184b681]
2026-01-20T13:20:09.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447dbb30]
2026-01-20T13:20:09.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:09.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550249d5] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@292998474 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b884180] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.690+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.691+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.694+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644550138 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:09.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.701+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:09.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:09.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:09.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550249d5]
2026-01-20T13:20:09.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:09.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b884180]
2026-01-20T13:20:09.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f81fa8d] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.706+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a3c2c41] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3192c96a] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043947266 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217021513 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941562521 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.708+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T13:20:09.709+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T13:20:09.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T13:20:09.713+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-20T13:20:09.715+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-20T13:20:09.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:09.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3192c96a]
2026-01-20T13:20:09.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a3c2c41]
2026-01-20T13:20:09.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T13:20:09.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.716+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f81fa8d]
2026-01-20T13:20:09.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3f5b48] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75347915] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128678358 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:09.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197201468 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.718+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f08dd2] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1076183763 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.720+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T13:20:09.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3f5b48]
2026-01-20T13:20:09.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T13:20:09.722+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75347915]
2026-01-20T13:20:09.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-20T13:20:09.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:09.725+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.725+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.736+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:09.753+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T13:20:09.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:09.754+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f08dd2]
2026-01-20T13:20:09.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:09.764+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:09.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2384f9] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:09.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138640466 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6516dfea] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113090377 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.770+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:09.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:09.775+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2384f9]
2026-01-20T13:20:09.779+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.780+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a6ebfc] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.784+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459993949 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.785+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:09.785+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T13:20:09.785+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6516dfea]
2026-01-20T13:20:09.786+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T13:20:09.786+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.787+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78ce8f90] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.788+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737470188 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.797+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T13:20:09.801+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a6ebfc]
2026-01-20T13:20:09.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78ce8f90]
2026-01-20T13:20:09.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ce9384] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.803+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@904949546 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:09.803+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:09.803+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.804+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.804+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ce9384]
2026-01-20T13:20:09.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.809+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T13:20:09.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:09.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T13:20:09.820+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-20T13:20:09.820+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T13:20:09.821+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T13:20:09.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T13:20:09.822+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.823+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20600dc5] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.823+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216968186 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.823+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.824+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.826+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.827+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20600dc5]
2026-01-20T13:20:09.828+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d63dfb7] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1028519931 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d63dfb7]
2026-01-20T13:20:09.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2568ca5f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.834+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@653600546 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.835+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T13:20:09.836+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T13:20:09.849+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T13:20:09.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2568ca5f]
2026-01-20T13:20:09.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196b01d3] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2058492563 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.854+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.854+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196b01d3]
2026-01-20T13:20:09.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0e6af8] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1873449843 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.858+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T13:20:09.858+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T13:20:09.864+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T13:20:09.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0e6af8]
2026-01-20T13:20:09.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fdb038d] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585101092 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T13:20:09.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T13:20:09.872+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-20T13:20:09.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fdb038d]
2026-01-20T13:20:09.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f116268] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@150063980 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.874+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f116268]
2026-01-20T13:20:09.879+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.879+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e00dc6] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.882+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179005392 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.882+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T13:20:09.883+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 67(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-20T13:20:09.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 28
2026-01-20T13:20:09.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e00dc6]
2026-01-20T13:20:09.887+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:09.887+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@407c5d20] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:09.887+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@571537108 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:09.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:09.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:09.889+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:09.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@407c5d20]
2026-01-20T13:20:09.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:09.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T13:20:09.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:11.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2
2026-01-20T13:20:11.688+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2
2026-01-20T13:20:11.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:11.689+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:20:11.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T13:20:11.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:20:11.692+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:11.695+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T13:20:11.696+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:20:11.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:11.697+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T13:20:11.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:20:11.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:11.698+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T13:20:11.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:20:11.699+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:11.700+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T13:20:11.702+09:00  INFO 21808 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:20:11.703+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7c1663] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.704+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4d1e42] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.705+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38b146ec] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308429769 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:11.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805003930 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:11.717+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890497037 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.719+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:11.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:20:11.721+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:11.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.723+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.724+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.737+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:11.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38b146ec]
2026-01-20T13:20:11.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:11.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc05347] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4d1e42]
2026-01-20T13:20:11.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108165013 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-20T13:20:11.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:11.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8bd7a3] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7c1663]
2026-01-20T13:20:11.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536759700 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:11.750+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:11.750+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:11.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:11.751+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-20T13:20:11.757+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:11.758+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:20:11.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:11.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:11.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8bd7a3]
2026-01-20T13:20:11.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc05347]
2026-01-20T13:20:11.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:20:11.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:11.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:20:11.772+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:11.773+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:20:11.774+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:11.774+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:20:11.787+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:20:11.789+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.790+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.795+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7299fd89] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.800+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.801+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606735753 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:11.801+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29936102 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will be managed by Spring
2026-01-20T13:20:11.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:20:11.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:11.802+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.803+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T13:20:11.810+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-20T13:20:11.819+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7299fd89]
2026-01-20T13:20:11.824+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:11.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-20T13:20:11.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T13:20:11.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:11.833+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.837+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062] from current transaction
2026-01-20T13:20:11.838+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:11.841+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:11.855+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062] from current transaction
2026-01-20T13:20:11.858+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:11.859+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:11.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.872+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062] from current transaction
2026-01-20T13:20:11.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:11.873+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:11.876+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b06e062]
2026-01-20T13:20:11.884+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.884+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3241c983] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285273840 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:11.886+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:11.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3241c983]
2026-01-20T13:20:11.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c745e5] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.889+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888576175 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.889+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:11.889+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.892+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T13:20:11.893+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c745e5]
2026-01-20T13:20:11.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb15b55] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550570251 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:11.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:11.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:11.906+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb15b55]
2026-01-20T13:20:11.908+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:11.910+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T13:20:11.914+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:11.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2/receipts
2026-01-20T13:20:11.928+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T13:20:11.934+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T13:20:11.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T13:20:11.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T13:20:11.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2/receipts
2026-01-20T13:20:11.955+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T13:20:11.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.956+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/receipts
2026-01-20T13:20:11.965+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cdc95f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2/receipts
2026-01-20T13:20:11.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560711593 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:11.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2/receipts", parameters={}
2026-01-20T13:20:11.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:11.968+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-20T13:20:11.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 2, userId: 2
2026-01-20T13:20:11.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e144ab] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739958688 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:11.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:11.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cdc95f]
2026-01-20T13:20:11.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.983+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247af5e7] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.983+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:11.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491017990 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:11.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e144ab]
2026-01-20T13:20:11.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:11.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:11.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309243dd] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:11.987+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1530760568 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:11.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:11.990+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:11.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:11.992+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247af5e7]
2026-01-20T13:20:12.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:12.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309243dd]
2026-01-20T13:20:12.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@109e5e7f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.013+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942762118 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will be managed by Spring
2026-01-20T13:20:12.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:12.015+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842038042 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:12.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T13:20:12.016+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T13:20:12.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T13:20:12.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T13:20:12.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.033+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9] from current transaction
2026-01-20T13:20:12.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:12.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T13:20:12.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@109e5e7f]
2026-01-20T13:20:12.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c57c2e] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081768420 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:12.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:12.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:12.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9] from current transaction
2026-01-20T13:20:12.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:12.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:12.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c57c2e]
2026-01-20T13:20:12.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa727fc] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:12.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476053546 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:12.058+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.058+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:12.060+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9] from current transaction
2026-01-20T13:20:12.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.062+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:12.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:12.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa727fc]
2026-01-20T13:20:12.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:12.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-20T13:20:12.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:12.096+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:12.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.105+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7454e5b9]
2026-01-20T13:20:12.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@588fcc2c] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@226516943 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:12.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:12.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@588fcc2c]
2026-01-20T13:20:12.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f95b07f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702407437 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.131+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:12.132+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.136+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T13:20:12.136+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f95b07f]
2026-01-20T13:20:12.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341dde97] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@371820067 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:12.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:12.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:12.140+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341dde97]
2026-01-20T13:20:12.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:12.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T13:20:12.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:12.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2/receipts
2026-01-20T13:20:12.175+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/receipts
2026-01-20T13:20:12.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2/receipts
2026-01-20T13:20:12.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2/receipts", parameters={}
2026-01-20T13:20:12.183+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-20T13:20:12.185+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 2, userId: 2
2026-01-20T13:20:12.186+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.186+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4492ed5d] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713716658 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.188+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:12.189+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.191+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:12.197+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4492ed5d]
2026-01-20T13:20:12.198+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aff1a54] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.202+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961866323 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:12.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.209+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:12.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aff1a54]
2026-01-20T13:20:12.219+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f4e29] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.230+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288410038 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T13:20:12.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T13:20:12.236+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T13:20:12.247+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f4e29]
2026-01-20T13:20:12.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d2069a] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483779087 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:12.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:12.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d2069a]
2026-01-20T13:20:12.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:12.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a096bb] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:12.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875802307 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:12.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:12.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:12.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:12.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a096bb]
2026-01-20T13:20:12.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:12.282+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-20T13:20:12.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:14.901+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2/approve
2026-01-20T13:20:14.916+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/2/approve
2026-01-20T13:20:14.924+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/approve
2026-01-20T13:20:14.931+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/2/approve
2026-01-20T13:20:14.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/2/approve", parameters={}
2026-01-20T13:20:14.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#approveExpense(Long, ApprovalLineDto)
2026-01-20T13:20:14.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ApprovalLineDto(approvalLineId=null, expenseReportId=null, approverId=2, stepOrder=null, status=null (truncated)...]
2026-01-20T13:20:14.950+09:00  INFO 21808 --- [http-nio-8080-exec-10] c.i.b.controller.ExpenseController       : 결재 승인 요청 - expenseId: 2, approverId: 2
2026-01-20T13:20:14.971+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959508025 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will be managed by Spring
2026-01-20T13:20:14.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:14.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:14.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:14.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:14.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693] from current transaction
2026-01-20T13:20:14.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.updateApprovalLine             : ==>  Preparing: UPDATE approval_line_tb SET status = 'APPROVED', signature_data = ?, approval_date = NOW() WHERE expense_report_id = ? AND approver_id = ? AND company_id = ?
2026-01-20T13:20:14.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.updateApprovalLine             : ==> Parameters: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAAAsSAAALEgHS3X78AAAVr0lEQVR4nO2de1yb9b3Hv+TJPeRacgUCJSkIBFpuFUtX1NpWbTu7aq13j869urnjcD1O59Ht6KabL6fHqnXTzUvb487mar2sameP9dbW4qBQKBcJBEII4RKakJCEJ5cnOX9YOuxFeG55kvZ5/0XC8720+fA8v98vv+/3l5FIJICFhSgcphNgSW9YAbGQghUQCylYAbGQghUQCylYAbGQghUQCylYAbGQghUQCylYAbGQghUQCylYAbGQgst0AqlAJBpDJv0BNQDoolhM5fUFpCd/JQaAEADENSrFJACcAIBRzQKFh6lcU40LSkAe31S+xzdV6fVPlfoDoYvCkajJHwzlAYAaABAcrkIAMKKUZQ5JRMI+Waa4UyYRdyjl0lZ5puQEPdmnJhnn83aOEben3O2dvMLt8dW7vb5L4Guh0EkC4XD61Cr5YbVS8alerfpIJZcO0xyTUc4rAQWnUcnQqHvlhNd39Yjbsw6Lx7MZTikh4PHacnRZf8/Rqnfr1aoOhvOhnLQXUAzDMpyj7pV219jtoxPe7wGAhOmczgUXQfqztVlvmnL1r2hUCivT+VBB2gooOI3KeuzO7w8Oj90djkbNTOeDk4RMIv7UlKt/3mQ0vMtFkDjTCREl7QTkCwS1XTbHvYOusR8BgJzpfMgi4PF6TUb97wrzc3YI+fwo0/ngJW0E5AsEFV02xwODrrF7IIUfU0RBOBx7iSnv0aKFObvS6Y6U8gKKYRjSbh242+Zw/RcWjy9gOh+6EfB47RXFpq352boDTOcyH1JaQH0O11XHrQNPhKPRcqZzSTZKWebfahcX/1SeKXExncu3kZIC8vimchrbul/yB0NXM50Lw0yWmIxbywsLXmM6kXORcgLq7Bu8ocs2+AIWj6uYziVVkIpFX1SWLNqSiutIKSMgNBIRNbZ1Pz864f0+w6l4lbLMFgGf55CIhFF/ICQJTqPmEBpeAgACBvOaLjEZ7y0vLPgjgzmcQUoIyB8MSQ82H983FZquYyoHoYDfbDHn/zrPoHmfx+Vip//eHwzJegaG7hh0jT8YwzAtEzkCABjUC363orrsfqbinw7jAhr3TOY1tnW/c/IvPOkIeLyOssKFD+Zna9/nIsic/xloJJLZ3GF9yDk2sRUA+ElI8QzUSvlr9TXlP+QiSISJ+LNhVEAjbk/1oZaOv2PxuJ6J+GqlfFddZekWIZ+P4rUdHp8oPtrZ+9cQGmZkhigWCj5fWVuxQSISepmIPwNjAupzuFY1d1r3AIB0zotpQK2U/2FlbcXdZHwEp1HlgcbWj5m6e4qFgs7axcVXalQKJxPxARgSUJ/Dtb6507obGBqUyiTiA6vrqtZwEeSMsQ5ePL6pnAONrS1YPE73VpGzgnA4/fU15as1KoWNifhJ39La53Bd09xpfQuYm9EEaxcX/xsV4gEAUMmlzhJT3k+p8EUELB4v+Kyp/ZNxz6SJifhJFVCfw3Vlc6f1DWBwJ2SeQfu8Si6l9JZfas77s4DHa6XSJx6weDz3s6b2/R7fVE6yYydNQF8NDK0+OeZhci0lXpSf8wIdjgvzc7bT4Xe+YPF4waGWjn3BaVSZzLhJEVCfw7Xm2Fe29+DrTeqMIRYKmqi++8yQo8t6FwAY/RY9hIYtBxpb345hWNKWF2gX0Lhn8qKTjy0e3bHmQq1SHKHLtzxTckLA4zG+yzCEhus/a2p/MVnxaBVQcBqVHW7pfAdSZOOXRCSgdaYiFgn66fQ/X9xe3x2fNx//bTJi0SqgQy0dr4Sj0SI6Y+BBLBQGaA4xSbP/eeNyn/h5u7X/Lrrj0Cagdmv/j7z+wHV0+SdCOBKlewyWSbN/XHTZHM+OuD0ldMagRUAe35S2y+Z4kg7fZAihqIFO/9PhCNNlRKcjbunqfYnOALQIqKmj5zlIsb9GAAB/IFRGl280EuGh4UgxXf6JMhWaXt5u7b+DLv+UC6hnYOgarz9wPdV+qcDt9V2GRiJCOnyPuj31wPAyxbnoGXA+5QsEdXT4plRAaCQiabcOPE+lT4qR2hwjtIjbNjTC9Ea4c4LF46rmDut/0+GbUgG1dtsexuLxXCp9Uo3V7vzPGIZRuiY14vaUur2+lJownI7b67vBPjxaT7VfygQ07pnMH3SN3UuVP7oIR6NFTR3WB6nyF8MwpKmj50VI/U4nGa3dtmdiGJZBpVPKBHTcOvBrAKBlfEE1g66xX/Q5XJRUfDS2dT8VQsPLqfBFN+FotMLmcN1EpU9KBDTumbS4vb4bqfCVJLjNndbdfQ7XWqIOorEY50hb95POsYmUv+vOpsvmeCSGYXh6IX0rlAjouHXgIcDXoCkVEDd3Wt891NLx2DQaxnXnHHF7KvYfPnp40DX2M7qSo4twNGq2OVy3UOWP9I7Ecc+k6eMvj/VA+gloNm5Trv4FU67hTyq59JyVoEOj7iqr3XmP2+u7BdL43yvg8brXX1ZbOp8igrkgLaBDLR3bnWMTPyabSIoQFwsFrSq5tEnA5zkAIAwA0uA0usjt8S3D4vGFTCdIFdWlhevMRsP7ZP2QElBwGpXt/bTRCQxtjGchjkwi/vDqFUuvJOuH1BjINuS6CVjxpCX+YGjVuGeygKwfUgLqd46m08yL5ZtwhscmNpN2QtTQ45vSo+HIMrIJsDCHfXiM9Oo5YQE5x9ybIfVXX1m+hXA0Wjni9lxExgdhAdmHxzaSCcySGjjH3NeSsSckII9vSh9Cw+zj6zxgxO35Lhl7QgKyDbluhDReSGP5FyE0XO0LBAmXZRMS0PD4iU1EA7KkHJxRt2clYWO8Br5AMAsNRy4mGpAl9XB7fZcStcUtILfHVwcAlO4pYWGWk58pIXBPw73+qaVEg6UJAZlEfAxBOE5ZpiTgDwSVoenwonA0Wgrn6bgvHI0WB6dRqUQknMJri1tAHt9UJV6bNCCuVsrfzTNoX8rRZX18tiMHgtOo0j489j2r3dlwHvatRjy+qcUSkfAQXkPcX6b+dd+nTgBItfonwihlme9VXGTeqlmg6J3P9TEMy+gZcN7W3e94MoZhGrrzSxYlJuOPywsLfo/XDtcYyBcIyuD8EU/ClKt/eE1d9fr5igcAgIsgiVJz3s7VdVXFSlnmPjoTTCbB6TChFWlcAgqHo+fNfhiDesFTNZaix4nayyRiz+UXL9koFYuOUpkXU/gDQUKfLS4B+YOhlC7ZmS9ioeDQsoqSh8j64XG5aE1Z0SZIoaYKRAlNhwl1N8N3B4pEk95CjQaml1dabuciCCVnc2lUioESk/E/qPDFJOFo1EjEDpeAQihKS3lsMskzaP+gkksp7eNTYsp7TcDjpdw5FjhR+YMh3O0H8S4kpvt5XXFTrp7y0msugiRMRj2jPRKpAEUjuG8Q+MZAgZACb4BUQiwUHNWoFHY6fOcZtG8Bwz0SKQD3DQKXgGIYlnItW/BAc49Et4DHm/dyQIqCe3873kdYWi/lS0SCPjr9i2nuwUg3Hv8U7rNok96pnknEQiHd0+20ns7HYvi7llxQAgKAGNMJpDi4x3B4BcT86XQstKFRKfx4bfAKiO42uSzMEsJrgEtAskwJboWypBW4D6/DJSAuwmH0dDwW2nHjNcAlIARBJvAGYEkbUM0ChQ+vEb5HmER8zt45LGnPMBEjXAIS8HmDRIKwpD5KWaaDiB0uAUlEwrReaWU5NxKRkNDXMLgEpJJLxwHAQyQQS2ojFgl7iNjhXomWScTpvu+F5SyoZJmEPlfcAlLKpYwdLstCH0Q/V9wCUsky/0kkEEvqgnA4dnmmBPcaEACBwkKlXErbnhqW5CPg8dpNRj3uerAZcAtIo1IMcBGkN4Zhi4gGZWEemUT8QYnJ+Gh+to7UE4XQdg6DZsGbZIKyMAfC4YyVLVq44eoVS9eSFQ8AQQHlGTSvkw3MknxkEvEnq+uqFpea8949/XfjwUHDeHBwiWd6RInHJ6EmmdmarC4ugthiGGYiYs+SfKRi0durllVez+Nyv7GprnnkwOrWsQO/nY56KzMyEsCBRKxAUfbMyoV3PcBHhHPu/yK8I1GXpfyAqC1LclEr5a+tWV69ebZ4fGGP8i9dz77++dA7/whGfbM7rnAHfe0/+6j/xXmdcEhYQHkG7d+I2rIkD1Ou/vGVtRV3zq7E7fG0L32l/TfHhqdsN8M5moU5/R0N9smWOVv5EBaQXq06jHA4lFZ4slBKwpSrv6/GUvTw7Dc/dXxw+1vWVz+PxucsZc7o8xy5fa4ghAXERZBEfrZ2J1F7FloJWcz5m2osRU/PfvO9/t2/Ouz66DUAmFcJcyByYs5j0klVZZhyDa8CW+mQavirSwtXWRbl75l5I4JFMl7reOHFlrHGXwC+/pZzHsRHSkAqudSpVsrfJuODhVL81aWFV5mNhi9m3ohgEWRX9yuvD04NbMHrjMsROOe6hnRdmClX/wxZHyzkQTgcz9nEs7Pr1T8P+gcIHbSry1x0eK5rSB+Wkp+tO9Jlc3zuD4ZWkPV1oSAWCo6qVYp9aqW8RSISuhCEE/cHQhp/MLTEOeq+MoSGcbVSRjic8fqa8is1KsWpb9TDWFi4o2vH3xz+gfUcYk2ZI/mKyjfmuoiS03ZKTMbHG9u/YgX07WBKWeYbJaa8p3J16jO2TmhUCgCA9yuLzY+PeybLmjusT/iDoTmPJkc4HPtJ8ZzaEOZFvdqXO1/dewJ11xBtZpAjs7ycJc4fnes6Skqb87N1+2US8WdU+DofQTic4bqK0hVr6qpvPpt4TkejUhy/esXStSUm4w8AAD3XdWKhoHl1XdUls8XT77PnbDv2+0/d6EQN0Xy5HP7wd4y3Pjz3lRSe91ViMt7f2P5VI7Bd7L8BwuH019eU12tUijMGpF96XaaBoGcRBxIcs0Q1WCzTdIkQ3qmvD8oLC16WScRdzZ29b8YwTD/bVq2U76qrLN0i5PNPCczms5v+2LlzPxaPFBB8bAEARFYYb7lRKlgwrxpAygSUn637p21o5C9ur4/QgO08ZXp5pWX9bPGEsCj3sd4vt7zj6mkIREOL+BkJEEAC+BkAUg4ydG2O5ekt5rrtQoSHAQDkZ+u+UClkZUeOde3w+gPrAGCybNHCn5Sa8/5ndqC2ia6a13ve3BuLR7UIcfHEq/RX3VW4oPbgfA0oPXGwotj8wP4vjq4H9iBeAADIM2hf1KtVXTOve4OTORua9u4eQadq+Rlx4J92PRqP5r4x1LLtoLt3wwtVmzdpRbIJAACZRHxiTV31evvw6GVKubRLnikZm233sfPIxrf69+1CMhISEmOS0FLDutsuNqzbM/el/4LS9i4qudTJTuv/hUGt2jvzc29wUnnZkbeODKFTtXPZjaH+S7/fuONjZ9DzjZaC+dm6T04Xz+vWvT98s//D3QCAuznULBJExANAQ3+gElPe7xAOhy1ABACpRDwy8/NBj6t+Mjb/XswhLFL282O7P+/wDp115+dUJCTe1v7nFw6OHP09kPscExZ1XUNt9lrc4gGSgc+KRCQMVBSb74L0bzhJmtnd37+rXfiRFOHNubI7m3HUX3Z/y19aH2vb83Trif7yMBbNmEB9kg+Hvrz1Z43PHe/w2O4GcpOWRJl6WcMV+TcR7lxLy6nLZqPho9EJz7POsYmf0uE/XbANjdyUn63bBwCQxRcFXl18xfrNLR8cBAA8zUolTSf6trae6N3Ky0igXEjwEYhzkIwE2b/+RLlmWcOqhTeQantMW4u7akvhg2KhoIUu/+mA2+u7YcTtWTLz+ipN/rFfLrr4RyRcCoGazyyxWLOsYTVJ8QBFyZwVIZ8frl1cvAnhXNA9hbhNHT070Ujk1Lfa95mqXr9Eqd/FYE6JJZplDVcu3ExJw3Vam2xqVIr+imLzTXABb/kIoeHyxrbubbPfe7H8irtzhFImSsQTSzSXNFxVcD1l3fpp79JqNhr+YcrV30d3nFRmdMK7pbNv8LqZ17kiaXB72aprIbltgROVmtqGtQWbKD3qISltfmssRc8a9ZoH4ALu8nq8d+BPw+MTlpnXtSqD9YmSy5J1d05UaWob1pmoFQ9AEvtEL1tS8qQpV39/suKlIIojx7o/GvdMnpra35Rr2XdDjoXuu3OiWntxw3rTdZSLByDJjcZrLEVPmXL1jyYzZioRwzBtY1v3O8Fp9NQ0/rGSy59dviDvOZpCJmp0FzdcY7qWFvEAMNCpvsZS9IgpV/9IsuOmCiE0XH6opeN/Yxh26v9+25K191YqDLspDpVYql3asMG0kTbxADB01EGNpejRkwPrC3JM5PUH1h9q6ThVuCdCeIntlRtuWaLI3vttdjgIrcpduWmjmV7xADB4VkaNpehpo15zwY6JRie8DR299ptnXosQXuSZig3XG8XKJpKusVXGy69fZbyC0HdbeGH0sJVlS0qeMuXqG+ACXSfq6LO/1OdwLZt5LeHy0W0V167TCWVERRTaZL5m0xrjyvcpSnFOGD+tp8ZS9Fx1aeFahMO5EJt3Slq7+94b90xWzLyhE8nGn6/afGm5IhtXCx0+hzdwZ/GNK5bpa5JaZsW4gAAAzEbD/vqa8mqxUNDMdC7JBovHlZ81tR+YfSfSiWShbdU3btqYW/UTAJiew0WiWGna9XD1PZWLs0qSfoZ9SggI4OvOZ6vrqupytFlPwwW2FQSLx5XNndb/63O4vjv7/R8WXv78k1U3ltcsMO+AswhJL846dOdFGy+7p+zW21VCBSOH3WUkEqk3EbIPj17a1GF9BYvHC6j0W11auNlsNNDWVeRAY+tOt9d3GwkX8TyD9pc1lsLfcBHkGx+MG/Up2jz9KwenRvLUQpl/oVR/sExlItTbmUpSUkAAAGgkIjluHdhqGxq5DwBkVPisry5foler2qjwdTZauvsestqdj5H1I5OI99dVlt4uz5TMWZfFNCnzCDsdIZ8frLEU/fqq79RcpFbKdwHJxxrC4djVKnk7RemdFX2W6ozWcQTwq1XyjwV8XlpMKlL2DnQ6Q6PuquPWgSf8wdAVROxLTMYflBcWvEx1Xqfz4eHmd7z+wDUETCO6LOXLFcXmX52+cT6VSRsBzWAfHq3vsjl+4Q+GVs7XRq2U71lZW3Hd3FeSxxcIavcfPvpPLB6fq4HTDGG1Ur6zrHDhbzQqRdoVI6SdgGYYGnVXWe3OrW6v7zqAM0qsZkjospQvL6+0/DsXQSLJym3cM5nX2Na9J4SGq851DcLhuHN06j+VmIzb5ZmSkXNdl+qkrYBm8AWCWqvdeadzdOKGcDRaDF8XCrh0WcrP8g3a7fnZOkY668cwDLE5XDfbhkZu8wdD1QAgBwCfTCJuyjNod5iM+j2zy5LTlbQXEAuzpOwsjCU9YAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCykYAXEQgpWQCyk+H9+hrhPceyKDgAAAABJRU5ErkJggg==(String), 2(Long), 2(Long), 1(Long)
2026-01-20T13:20:15.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.updateApprovalLine             : <==    Updates: 1
2026-01-20T13:20:15.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:15.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693] from current transaction
2026-01-20T13:20:15.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:15.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:15.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:15.006+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:15.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:15.007+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6588693]
2026-01-20T13:20:15.017+09:00  INFO 21808 --- [http-nio-8080-exec-10] c.i.b.controller.ExpenseController       : 결재 승인 완료 - expenseId: 2
2026-01-20T13:20:15.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:15.018+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결제 승인 완료, data=null)]
2026-01-20T13:20:15.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:15.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T13:20:15.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T13:20:15.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T13:20:15.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T13:20:15.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T13:20:15.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:15.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59abb114] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:15.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2028204041 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:15.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:15.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:15.054+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59abb114]
2026-01-20T13:20:15.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:15.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64744d49] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:15.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335098330 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:15.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:15.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.059+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:15.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64744d49]
2026-01-20T13:20:15.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:15.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330987810 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will be managed by Spring
2026-01-20T13:20:15.070+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:15.070+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T13:20:15.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T13:20:15.083+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e] from current transaction
2026-01-20T13:20:15.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:15.085+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.087+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:15.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e] from current transaction
2026-01-20T13:20:15.089+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:15.090+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:15.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e] from current transaction
2026-01-20T13:20:15.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:15.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:15.105+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.105+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.106+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.106+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcffc9e]
2026-01-20T13:20:15.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:15.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a08787] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:15.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734539315 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:15.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:15.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:15.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a08787]
2026-01-20T13:20:15.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:15.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f555282] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:15.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@501966416 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:15.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:15.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:15.141+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T13:20:15.143+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f555282]
2026-01-20T13:20:15.148+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:15.149+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49441720] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:15.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552977352 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:15.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:15.151+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:15.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:15.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49441720]
2026-01-20T13:20:15.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:15.157+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T13:20:15.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:18.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/2/cancel-approval
2026-01-20T13:20:18.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/2/cancel-approval
2026-01-20T13:20:18.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/cancel-approval
2026-01-20T13:20:18.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/2/cancel-approval
2026-01-20T13:20:18.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/2/cancel-approval", parameters={}
2026-01-20T13:20:18.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#cancelApproval(Long)
2026-01-20T13:20:18.429+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 결재 취소 요청 - expenseId: 2, approverId: 2
2026-01-20T13:20:18.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:18.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@407603217 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will be managed by Spring
2026-01-20T13:20:18.438+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:18.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:18.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:18.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872] from current transaction
2026-01-20T13:20:18.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:18.450+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:18.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:18.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872] from current transaction
2026-01-20T13:20:18.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.cancelApprovalLine             : ==>  Preparing: UPDATE approval_line_tb SET status = 'WAIT', signature_data = NULL, approval_date = NULL WHERE expense_report_id = ? AND approver_id = ? AND company_id = ?
2026-01-20T13:20:18.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.cancelApprovalLine             : ==> Parameters: 2(Long), 2(Long), 1(Long)
2026-01-20T13:20:18.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.cancelApprovalLine             : <==    Updates: 1
2026-01-20T13:20:18.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872] from current transaction
2026-01-20T13:20:18.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:18.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:18.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:18.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872] from current transaction
2026-01-20T13:20:18.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.updateExpenseReportStatus      : ==>  Preparing: UPDATE expense_report_tb SET status = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:18.470+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.updateExpenseReportStatus      : ==> Parameters: WAIT(String), 2(Long), 1(Long)
2026-01-20T13:20:18.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.updateExpenseReportStatus      : <==    Updates: 1
2026-01-20T13:20:18.474+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.475+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353b872]
2026-01-20T13:20:18.500+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 결재 취소 완료 - expenseId: 2
2026-01-20T13:20:18.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:18.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재 취소 완료, data=null)]
2026-01-20T13:20:18.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:19.790+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T13:20:19.792+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:19.846+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T13:20:19.849+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:19.850+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-20T13:20:19.851+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:19.852+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T13:20:19.852+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:19.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T13:20:19.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:19.857+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T13:20:19.860+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:19.862+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:19.863+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264ece99] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:19.863+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cc60f4c] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:19.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1076900398 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:19.878+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747964966 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:19.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T13:20:19.881+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:19.883+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T13:20:19.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:19.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T13:20:19.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:19.890+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264ece99]
2026-01-20T13:20:19.892+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cc60f4c]
2026-01-20T13:20:19.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:19.898+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:19.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-20T13:20:19.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b02fb69] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:19.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:19.901+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541962170 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:19.909+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:19.913+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:19.918+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:19.919+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b02fb69]
2026-01-20T13:20:19.920+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:19.922+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:19.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:19.930+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:19.933+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:19.938+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:19.940+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:19.941+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:19.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:19.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db0bbee] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:19.946+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728688995 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:19.947+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:19.949+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:19.952+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:19.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db0bbee]
2026-01-20T13:20:19.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:19.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5754d5] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:19.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1993401146 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:19.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:19.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:19.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:19.957+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5754d5]
2026-01-20T13:20:19.959+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:19.965+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:20.014+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:20.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:20.024+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:20.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:20.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:20.028+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cba7192] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:20:20.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T13:20:20.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:20:20.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T13:20:20.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:20:20.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T13:20:20.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:20:20.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T13:20:20.114+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:20:20.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141488687 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:20.115+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T13:20:20.117+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.115+09:00  INFO 21808 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:20:20.117+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414eac83] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.118+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7324c757] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460220615 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:20.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@913605318 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:20:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cba7192]
2026-01-20T13:20:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:20.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.124+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512f5868] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.125+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@729305319 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.127+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:20.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:20.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7324c757]
2026-01-20T13:20:20.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:20.131+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.131+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-20T13:20:20.132+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37cbe829] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.133+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414eac83]
2026-01-20T13:20:20.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:20.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644208120 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512f5868]
2026-01-20T13:20:20.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:20.135+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.135+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-20T13:20:20.136+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.136+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:20.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.139+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:20.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T13:20:20.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37cbe829]
2026-01-20T13:20:20.150+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-20T13:20:20.151+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:20.153+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T13:20:20.155+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T13:20:20.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:20.157+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T13:20:20.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:20.158+09:00  INFO 21808 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-20T13:20:20.158+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:20.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.161+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:20.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f67572c] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@586479122 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will be managed by Spring
2026-01-20T13:20:20.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.163+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1779409843 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.164+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:20.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322a6145] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T13:20:20.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T13:20:20.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1530826039 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.166+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.167+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:20.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-20T13:20:20.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T13:20:20.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f67572c]
2026-01-20T13:20:20.173+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:20.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322a6145]
2026-01-20T13:20:20.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130] from current transaction
2026-01-20T13:20:20.179+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643fbc03] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=9, userId=2, si (truncated)...]
2026-01-20T13:20:20.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:20.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@92195208 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.183+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.188+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:20.190+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:20.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:20.196+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:20.200+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643fbc03]
2026-01-20T13:20:20.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130] from current transaction
2026-01-20T13:20:20.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.201+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:20.202+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:20.203+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.204+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.216+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:20.220+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:20.221+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130] from current transaction
2026-01-20T13:20:20.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:20.222+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:20.223+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:20.224+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:20.225+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:20.227+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.231+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@223980d] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:20.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.232+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1079472421 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.233+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:20.234+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0f6130]
2026-01-20T13:20:20.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.237+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:20.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@223980d]
2026-01-20T13:20:20.238+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.240+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ca40e6] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232d0e16] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1957517082 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.241+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1028659598 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:20.242+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:20.245+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:20.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:20.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:20.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232d0e16]
2026-01-20T13:20:20.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ca40e6]
2026-01-20T13:20:20.255+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:20.256+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78da2daf] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.257+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.258+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@326934306 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.270+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:20.271+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.275+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T13:20:20.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78da2daf]
2026-01-20T13:20:20.284+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.284+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299bad04] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.285+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8739533 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:20.286+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:20.292+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:20.299+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299bad04]
2026-01-20T13:20:20.300+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.301+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T13:20:20.302+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.304+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2
2026-01-20T13:20:20.307+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2
2026-01-20T13:20:20.308+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2
2026-01-20T13:20:20.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2/receipts
2026-01-20T13:20:20.311+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2", parameters={}
2026-01-20T13:20:20.314+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/receipts
2026-01-20T13:20:20.314+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T13:20:20.314+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2/receipts
2026-01-20T13:20:20.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2/receipts", parameters={}
2026-01-20T13:20:20.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-20T13:20:20.316+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1247e177] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.316+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 2, userId: 2
2026-01-20T13:20:20.317+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@954835455 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.317+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.317+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:20.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c40c8a8] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.318+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155464484 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.320+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:20.320+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:20.324+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:20.325+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1247e177]
2026-01-20T13:20:20.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c40c8a8]
2026-01-20T13:20:20.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.331+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5936c21f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.331+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee2be29] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960299543 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74265301 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.334+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:20.334+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:20.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:20.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:20.350+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5936c21f]
2026-01-20T13:20:20.350+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee2be29]
2026-01-20T13:20:20.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.352+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4214c801] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.353+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1495016860 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.354+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T13:20:20.355+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.356+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T13:20:20.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.358+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97636207 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will be managed by Spring
2026-01-20T13:20:20.367+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:20.368+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T13:20:20.368+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-20T13:20:20.368+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4214c801]
2026-01-20T13:20:20.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddfb510] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.369+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@695150698 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:20.370+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.373+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:20.373+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 41
2026-01-20T13:20:20.374+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddfb510]
2026-01-20T13:20:20.376+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.377+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7774701d] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.378+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0] from current transaction
2026-01-20T13:20:20.379+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202924758 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:20.380+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:20.382+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:20.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.383+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:20.387+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:20.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7774701d]
2026-01-20T13:20:20.390+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0] from current transaction
2026-01-20T13:20:20.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.391+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:20.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-20T13:20:20.392+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.393+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:20.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.423+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0] from current transaction
2026-01-20T13:20:20.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:20.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:20.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.427+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e51dc0]
2026-01-20T13:20:20.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee57dca] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@458402246 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:20.437+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:20.439+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee57dca]
2026-01-20T13:20:20.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189e5a2c] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.440+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835036632 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:20.441+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.443+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-20T13:20:20.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189e5a2c]
2026-01-20T13:20:20.444+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceb5e1] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340851278 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:20.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:20.448+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:20.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:20.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceb5e1]
2026-01-20T13:20:20.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=2, drafterId=2, re (truncated)...]
2026-01-20T13:20:20.455+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:20.473+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/2/receipts
2026-01-20T13:20:20.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/2/receipts
2026-01-20T13:20:20.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/2/receipts
2026-01-20T13:20:20.479+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/2/receipts", parameters={}
2026-01-20T13:20:20.480+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-20T13:20:20.481+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 2, userId: 2
2026-01-20T13:20:20.481+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dc5a68] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503919337 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T13:20:20.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.486+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T13:20:20.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dc5a68]
2026-01-20T13:20:20.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.487+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9a7901] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835368384 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T13:20:20.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-20T13:20:20.491+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9a7901]
2026-01-20T13:20:20.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf8451] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79933050 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.494+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T13:20:20.496+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T13:20:20.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T13:20:20.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf8451]
2026-01-20T13:20:20.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5b378f] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@705742169 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T13:20:20.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.502+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T13:20:20.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5b378f]
2026-01-20T13:20:20.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:20.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@345e697] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:20.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181175359 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:20.506+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T13:20:20.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:20.509+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-20T13:20:20.513+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@345e697]
2026-01-20T13:20:20.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:20.514+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-20T13:20:20.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:58.966+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:20:58.967+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:20:58.968+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:20:58.971+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:20:58.972+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:20:58.973+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:20:58.974+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:20:58.976+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:20:58.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:20:58.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:20:58.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:58.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:20:58.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8392e] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:58.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:20:58.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:58.991+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e729cf7] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:59.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1444268692 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:59.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:20:59.021+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@740555376 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:20:59.023+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:20:59.026+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:20:59.027+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:20:59.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:20:59.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8392e]
2026-01-20T13:20:59.035+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:59.035+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e77548] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:59.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:20:59.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958857528 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:20:59.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e729cf7]
2026-01-20T13:20:59.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:20:59.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:20:59.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:59.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:20:59.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:59.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:20:59.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:20:59.051+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e77548]
2026-01-20T13:20:59.056+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:20:59.057+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:59.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:20:59.063+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:20:59.066+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:20:59.067+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:20:59.067+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:20:59.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:20:59.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf2113d] was not registered for synchronization because synchronization is not active
2026-01-20T13:20:59.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108384931 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:20:59.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:20:59.085+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:20:59.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:20:59.102+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf2113d]
2026-01-20T13:20:59.103+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:20:59.104+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:20:59.108+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:00.088+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-20T13:21:00.110+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-20T13:21:00.119+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-20T13:21:00.120+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-20T13:21:00.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-20T13:21:00.121+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-20T13:21:00.122+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:00.123+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424b48d1] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:00.134+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481646903 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:21:00.137+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-20T13:21:00.138+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-20T13:21:00.156+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-20T13:21:00.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424b48d1]
2026-01-20T13:21:00.167+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:00.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-20T13:21:00.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:09.732+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user/2
2026-01-20T13:21:09.738+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing PUT /api/cards/user/2
2026-01-20T13:21:09.740+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user/2
2026-01-20T13:21:09.771+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured PUT /api/cards/user/2
2026-01-20T13:21:09.782+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/api/cards/user/2", parameters={}
2026-01-20T13:21:09.790+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#updateUserCard(Long, UserCardDto)
2026-01-20T13:21:09.806+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserCardDto(cardId=null, userId=null, cardName=개인카드1, cardNumber=1111222244443333, cardNumberEncrypt (truncated)...]
2026-01-20T13:21:09.823+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.controller.CardController    : 개인 카드 수정 요청 - cardId: 2, userId: 2
2026-01-20T13:21:09.866+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:09.868+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:09.870+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655789458 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will be managed by Spring
2026-01-20T13:21:09.875+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.findById     : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.card_id = ? LIMIT 1
2026-01-20T13:21:09.880+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.findById     : ==> Parameters: 2(Long)
2026-01-20T13:21:09.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.findById     : <==      Total: 1
2026-01-20T13:21:09.923+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:09.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde] from current transaction
2026-01-20T13:21:09.940+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.clearDefaultByUserId           : ==>  Preparing: UPDATE user_card_tb SET is_default = 0, updated_at = NOW() WHERE user_id = ? AND is_default = 1
2026-01-20T13:21:09.942+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.clearDefaultByUserId           : ==> Parameters: 2(Long)
2026-01-20T13:21:09.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.m.U.clearDefaultByUserId           : <==    Updates: 1
2026-01-20T13:21:09.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:09.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde] from current transaction
2026-01-20T13:21:09.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.update       : ==>  Preparing: UPDATE user_card_tb SET card_name = ?, card_number_encrypted = ?, card_last_four = ?, is_active = ?, is_default = ?, updated_at = NOW() WHERE card_id = ?
2026-01-20T13:21:09.999+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.update       : ==> Parameters: 개인카드1(String), 62h6hFMLSkyDGybEBnSzG8CDqIMn1WdKWfXWtIIkIRI=(String), 3333(String), null, true(Boolean), 2(Long)
2026-01-20T13:21:10.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.update       : <==    Updates: 1
2026-01-20T13:21:10.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:10.035+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.service.UserCardService      : 개인 카드 수정 완료 - cardId: 2
2026-01-20T13:21:10.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde] from current transaction
2026-01-20T13:21:10.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.findById     : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.card_id = ? LIMIT 1
2026-01-20T13:21:10.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.findById     : ==> Parameters: 2(Long)
2026-01-20T13:21:10.062+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] c.i.b.mapper.UserCardMapper.findById     : <==      Total: 1
2026-01-20T13:21:10.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:10.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:10.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:10.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f562dde]
2026-01-20T13:21:10.111+09:00  INFO 21808 --- [http-nio-8080-exec-8] c.i.backend.controller.CardController    : 개인 카드 수정 완료 - cardId: 2
2026-01-20T13:21:10.112+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:10.113+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드가 수정되었습니다., data=UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-20T13:21:10.116+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:10.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-20T13:21:10.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-20T13:21:10.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-20T13:21:10.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-20T13:21:10.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-20T13:21:11.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:11.012+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64745cc] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:11.021+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@760873610 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:21:11.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-20T13:21:11.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-20T13:21:11.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-20T13:21:11.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64745cc]
2026-01-20T13:21:11.065+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:11.100+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-20T13:21:11.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:58.626+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:21:58.627+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T13:21:58.628+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:21:58.707+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:21:58.734+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T13:21:58.739+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:21:58.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:21:58.741+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:21:58.742+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-20T13:21:58.747+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T13:21:58.746+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:21:58.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:21:58.748+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T13:21:58.749+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:21:58.761+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:21:58.761+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T13:21:58.765+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.767+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a903311] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:21:58.766+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49193921] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.768+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:21:58.769+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.776+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c7fdfd] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.780+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674800813 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:21:58.781+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814506556 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:21:58.783+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T13:21:58.784+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:21:58.784+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845992614 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:21:58.786+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T13:21:58.788+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:21:58.789+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:21:58.799+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:21:58.801+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T13:21:58.803+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:21:58.804+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49193921]
2026-01-20T13:21:58.804+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a903311]
2026-01-20T13:21:58.806+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:58.807+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:21:58.811+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-20T13:21:58.812+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c7fdfd]
2026-01-20T13:21:58.813+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de164dd] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.814+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:58.815+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.816+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057270545 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:21:58.829+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e1dc18] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.830+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:21:58.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157615554 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:21:58.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:21:58.831+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:21:58.832+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:21:58.837+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:21:58.837+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:21:58.838+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de164dd]
2026-01-20T13:21:58.839+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e1dc18]
2026-01-20T13:21:58.840+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:58.843+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:58.844+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:21:58.845+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:21:58.846+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:58.848+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:58.882+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:21:58.885+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:21:58.888+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:21:58.892+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:21:58.893+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:21:58.894+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:21:58.896+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.897+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644f3758] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.899+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355916774 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:21:58.900+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:21:58.902+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:21:58.915+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:21:58.916+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644f3758]
2026-01-20T13:21:58.917+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:58.936+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763ef4b6] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:58.937+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1809246430 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:21:58.953+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:21:58.954+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:21:58.968+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:21:58.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:21:58.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:21:58.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:21:58.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:21:58.981+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:21:58.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:21:58.983+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:21:58.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:21:58.995+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:21:58.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:21:58.988+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:21:58.993+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763ef4b6]
2026-01-20T13:21:58.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:58.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:21:58.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:21:58.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:21:58.996+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:21:58.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:21:58.998+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:21:59.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:21:59.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:21:59.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:21:59.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:21:59.001+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:59.002+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:21:59.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:21:59.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:21:59.003+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:21:59.008+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:59.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:59.009+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:59.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:59.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74feb918] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:59.030+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7a3c20] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:59.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fd3a575] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:59.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598256259 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:21:59.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65320f39] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:59.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2010761249 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:21:59.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696449502 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:21:59.032+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:21:59.033+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:21:59.033+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:21:59.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:21:59.036+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:21:59.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@785834545 wrapping com.mysql.cj.jdbc.ConnectionImpl@1b20f4d8] will not be managed by Spring
2026-01-20T13:21:59.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:21:59.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:21:59.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:21:59.042+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:21:59.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74feb918]
2026-01-20T13:21:59.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:21:59.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:21:59.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7a3c20]
2026-01-20T13:21:59.044+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:59.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fd3a575]
2026-01-20T13:21:59.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:59.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:21:59.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0c6860] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:59.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:59.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:59.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280676573 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:21:59.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:21:59.049+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:21:59.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:59.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:21:59.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:21:59.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0c6860]
2026-01-20T13:21:59.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:59.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:21:59.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:21:59.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65320f39]
2026-01-20T13:21:59.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:21:59.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:21:59.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e33e60c] was not registered for synchronization because synchronization is not active
2026-01-20T13:21:59.085+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849957158 wrapping com.mysql.cj.jdbc.ConnectionImpl@1b20f4d8] will not be managed by Spring
2026-01-20T13:21:59.085+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:21:59.086+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:21:59.093+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:21:59.095+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e33e60c]
2026-01-20T13:21:59.098+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:21:59.099+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:21:59.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:00.041+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-20T13:22:00.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-20T13:22:00.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-20T13:22:00.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-20T13:22:00.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-20T13:22:00.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-20T13:22:00.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:00.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de9e317] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:00.077+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664725008 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:00.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-20T13:22:00.079+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-20T13:22:00.080+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-20T13:22:00.081+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de9e317]
2026-01-20T13:22:00.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:00.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-20T13:22:00.084+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:01.895+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:01.902+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T13:22:01.905+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:01.932+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:01.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T13:22:01.935+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:01.969+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:01.975+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-20T13:22:01.978+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:01.978+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T13:22:01.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:01.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:01.979+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T13:22:01.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:01.983+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:01.984+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:01.985+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:01.986+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6075cad6] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:01.980+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:01.982+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T13:22:01.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:01.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.000+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6a0a9c] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:01.989+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e93ded] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.005+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2094890530 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:22:02.017+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:02.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572825834 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:22:02.019+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017926138 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:02.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:02.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:02.020+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T13:22:02.021+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:02.022+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T13:22:02.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T13:22:02.037+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:02.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:02.038+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6a0a9c]
2026-01-20T13:22:02.039+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6075cad6]
2026-01-20T13:22:02.040+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e93ded]
2026-01-20T13:22:02.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.043+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.045+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-20T13:22:02.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbd849b] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.046+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e699ff0] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11833983 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:22:02.047+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.048+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278138829 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:22:02.050+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:02.052+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:02.053+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:02.055+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:02.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:02.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:02.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e699ff0]
2026-01-20T13:22:02.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbd849b]
2026-01-20T13:22:02.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:02.076+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.078+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.082+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:02.092+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:02.101+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:02.266+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:02.267+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:22:02.268+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:02.268+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:22:02.287+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:02.289+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:02.330+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:02.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:02.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:02.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:22:02.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:22:02.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:02.348+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:02.385+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:02.396+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:22:02.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:02.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:22:02.397+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:02.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.398+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:22:02.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:02.403+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:22:02.404+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:02.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a354e7b] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.405+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:22:02.417+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:02.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:22:02.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:02.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:22:02.421+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@569632627 wrapping com.mysql.cj.jdbc.ConnectionImpl@1b20f4d8] will not be managed by Spring
2026-01-20T13:22:02.459+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:22:02.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.461+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2260e6ff] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.462+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:02.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57607de3] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a86edc] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459210597 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:02.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:02.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40603156 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:22:02.465+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@94cc939] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@92073926 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:22:02.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:02.466+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:02.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:22:02.468+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:02.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:02.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:22:02.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:22:02.482+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:02.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:02.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:02.483+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1679358915 wrapping com.mysql.cj.jdbc.ConnectionImpl@1167390e] will not be managed by Spring
2026-01-20T13:22:02.495+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:22:02.484+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a86edc]
2026-01-20T13:22:02.488+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2260e6ff]
2026-01-20T13:22:02.489+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57607de3]
2026-01-20T13:22:02.492+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a354e7b]
2026-01-20T13:22:02.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:22:02.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:02.503+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:22:02.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ad0d13] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527f0bd4] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b992b37] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:02.507+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.515+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474251431 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:02.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@103086877 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:22:02.516+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336375262 wrapping com.mysql.cj.jdbc.ConnectionImpl@1b20f4d8] will not be managed by Spring
2026-01-20T13:22:02.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:02.520+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:02.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:02.524+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:02.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:02.522+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:02.570+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:02.571+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:02.572+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ad0d13]
2026-01-20T13:22:02.604+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:02.605+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b992b37]
2026-01-20T13:22:02.605+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.605+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527f0bd4]
2026-01-20T13:22:02.619+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.624+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:02.632+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.621+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:02.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:22:02.622+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.646+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.650+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@94cc939]
2026-01-20T13:22:02.652+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:02.667+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:02.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:02.678+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:22:02.683+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:03.865+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-20T13:22:03.951+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-20T13:22:04.026+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-20T13:22:04.031+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-20T13:22:04.034+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-20T13:22:04.059+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-20T13:22:04.061+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:04.064+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac7e269] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:04.068+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826636304 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:04.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-20T13:22:04.069+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-20T13:22:04.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-20T13:22:04.071+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac7e269]
2026-01-20T13:22:04.072+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:04.073+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-20T13:22:04.075+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.128+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:29.129+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T13:22:29.130+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:29.144+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:29.147+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T13:22:29.149+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:29.162+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:29.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:29.165+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-20T13:22:29.169+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:29.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:29.170+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T13:22:29.174+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T13:22:29.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:29.171+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:29.175+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T13:22:29.176+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:29.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:29.177+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.180+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.182+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e471cf] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.181+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@457f770d] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.187+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554ae765] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655852141 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:29.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660985522 wrapping com.mysql.cj.jdbc.ConnectionImpl@1b20f4d8] will not be managed by Spring
2026-01-20T13:22:29.229+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870251551 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:22:29.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:29.235+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T13:22:29.237+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:29.244+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:29.245+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T13:22:29.246+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:29.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:29.249+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T13:22:29.250+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554ae765]
2026-01-20T13:22:29.250+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:29.250+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@457f770d]
2026-01-20T13:22:29.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e471cf]
2026-01-20T13:22:29.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd462d] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.251+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1699791987 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:29.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-20T13:22:29.252+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f455b6] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.253+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:29.253+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.253+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1664326106 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:22:29.254+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:29.255+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:29.265+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:29.268+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:29.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:29.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd462d]
2026-01-20T13:22:29.269+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f455b6]
2026-01-20T13:22:29.272+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.273+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.277+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:29.278+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:29.279+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.283+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.315+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:29.319+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:29.321+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:29.323+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:29.328+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:29.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:29.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.329+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c3d4307] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.332+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813637603 wrapping com.mysql.cj.jdbc.ConnectionImpl@1167390e] will not be managed by Spring
2026-01-20T13:22:29.333+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:29.335+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:29.340+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:29.341+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c3d4307]
2026-01-20T13:22:29.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.342+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d02f112] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532937454 wrapping com.mysql.cj.jdbc.ConnectionImpl@1167390e] will not be managed by Spring
2026-01-20T13:22:29.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:29.343+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:29.345+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:29.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d02f112]
2026-01-20T13:22:29.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.346+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:29.347+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.407+09:00 DEBUG 21808 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:29.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T13:22:29.413+09:00 DEBUG 21808 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:22:29.414+09:00 DEBUG 21808 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-20T13:22:29.418+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:29.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:22:29.419+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T13:22:29.420+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-20T13:22:29.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:22:29.422+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:29.424+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T13:22:29.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:22:29.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-20T13:22:29.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-20T13:22:29.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:29.425+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T13:22:29.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:22:29.426+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-20T13:22:29.428+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:29.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T13:22:29.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:22:29.429+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-20T13:22:29.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:29.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T13:22:29.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.430+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.431+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53538d5b] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@229e8683] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c39e3f] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677ca876] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.432+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845888354 wrapping com.mysql.cj.jdbc.ConnectionImpl@463be08a] will not be managed by Spring
2026-01-20T13:22:29.433+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550681034 wrapping com.mysql.cj.jdbc.ConnectionImpl@1b20f4d8] will not be managed by Spring
2026-01-20T13:22:29.433+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@174945946 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:29.433+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:22:29.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-20T13:22:29.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:29.434+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434962491 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:22:29.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:22:29.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-20T13:22:29.435+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:29.436+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T13:22:29.446+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-20T13:22:29.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:29.447+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:22:29.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677ca876]
2026-01-20T13:22:29.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53538d5b]
2026-01-20T13:22:29.449+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757ce5ea] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.451+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009193515 wrapping com.mysql.cj.jdbc.ConnectionImpl@31a44bf7] will not be managed by Spring
2026-01-20T13:22:29.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:22:29.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-20T13:22:29.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-20T13:22:29.452+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:29.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@229e8683]
2026-01-20T13:22:29.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c39e3f]
2026-01-20T13:22:29.453+09:00 DEBUG 21808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.454+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:29.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-20T13:22:29.460+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:29.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61560ea5] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:29.495+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862109801 wrapping com.mysql.cj.jdbc.ConnectionImpl@33076262] will not be managed by Spring
2026-01-20T13:22:29.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T13:22:29.498+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:29.499+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T13:22:29.500+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757ce5ea]
2026-01-20T13:22:29.501+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.504+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:29.505+09:00 DEBUG 21808 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:29.519+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T13:22:29.521+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61560ea5]
2026-01-20T13:22:29.533+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:29.537+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-20T13:22:29.543+09:00 DEBUG 21808 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T13:22:30.442+09:00 DEBUG 21808 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-20T13:22:30.445+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-20T13:22:30.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-20T13:22:30.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-20T13:22:30.463+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-20T13:22:30.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-20T13:22:30.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T13:22:30.464+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2c8226] was not registered for synchronization because synchronization is not active
2026-01-20T13:22:30.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@426288989 wrapping com.mysql.cj.jdbc.ConnectionImpl@1167390e] will not be managed by Spring
2026-01-20T13:22:30.467+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-20T13:22:30.469+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-20T13:22:30.472+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-20T13:22:30.476+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2c8226]
2026-01-20T13:22:30.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T13:22:30.477+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-20T13:22:30.478+09:00 DEBUG 21808 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
