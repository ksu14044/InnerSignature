2026-02-05T12:41:01.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:01.857+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T12:41:01.857+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:01.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T12:41:01.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T12:41:01.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:01.873+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:01.873+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:01.873+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:01.873+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T12:41:01.874+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:01.892+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:01.874+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:01.876+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:01.876+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:01.877+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:01.877+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T12:41:01.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T12:41:01.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T12:41:01.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T12:41:01.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:01.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:01.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52073e7a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:01.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e578f31] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb016a0] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:01.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:01.911+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:01.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.914+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfc680e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.914+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795fe1e0] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0e068e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@86131814 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:01.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184897156 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:01.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049364903 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:01.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839542083 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:01.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1427355977 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:01.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738211330 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:01.924+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T12:41:01.924+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:01.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:01.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T12:41:01.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T12:41:01.926+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T12:41:01.926+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T12:41:01.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:01.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:01.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T12:41:01.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T12:41:01.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T12:41:01.939+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-02-05T12:41:01.940+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:01.942+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-02-05T12:41:01.943+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:01.943+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T12:41:01.943+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0e068e]
2026-02-05T12:41:01.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e578f31]
2026-02-05T12:41:01.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795fe1e0]
2026-02-05T12:41:01.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52073e7a]
2026-02-05T12:41:01.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb016a0]
2026-02-05T12:41:01.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:01.947+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T12:41:01.947+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:01.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:01.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-02-05T12:41:01.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfc680e]
2026-02-05T12:41:01.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cba042e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-02-05T12:41:01.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c2bd70b] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f713240] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:01.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:01.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:01.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@307821313 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:01.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:01.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1604102133 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:01.965+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@999178674 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:01.973+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:01.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=29, userName=te (truncated)...]
2026-02-05T12:41:01.981+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:01.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:01.991+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:01.992+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:01.993+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:01.993+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:01.994+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:01.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:01.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:01.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.010+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.019+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.044+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:02.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:02.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:02.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:02.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cba042e]
2026-02-05T12:41:02.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c2bd70b]
2026-02-05T12:41:02.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f713240]
2026-02-05T12:41:02.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:02.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:02.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733ff416] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d7b8a3b] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T12:41:02.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090869190 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749788473 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@136ea549] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T12:41:02.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T12:41:02.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T12:41:02.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T12:41:02.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@771486416 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T12:41:02.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T12:41:02.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.107+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:02.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T12:41:02.110+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T12:41:02.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:02.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:02.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:02.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733ff416]
2026-02-05T12:41:02.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d7b8a3b]
2026-02-05T12:41:02.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3295b4db] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T12:41:02.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3452429 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@136ea549]
2026-02-05T12:41:02.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4260b738] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef1a051] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a45ae5] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T12:41:02.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166633562 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48397021 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@379527800 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T12:41:02.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df516c2] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:02.139+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.139+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.139+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.141+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1264040664 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e4a6ea6] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:02.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.144+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566483306 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T12:41:02.154+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.156+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T12:41:02.156+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3295b4db]
2026-02-05T12:41:02.156+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.157+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.157+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:02.158+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T12:41:02.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef1a051]
2026-02-05T12:41:02.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.163+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a45ae5]
2026-02-05T12:41:02.163+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4260b738]
2026-02-05T12:41:02.173+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e8b052] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.176+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.177+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df516c2]
2026-02-05T12:41:02.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766121784 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-02-05T12:41:02.180+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@120b1888] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3978b886] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc08572] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e4a6ea6]
2026-02-05T12:41:02.189+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293327280 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.189+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501ac57a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472825406 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215888453 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.192+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1440520893 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.192+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.193+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:02.193+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-02-05T12:41:02.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:02.208+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.211+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e8b052]
2026-02-05T12:41:02.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T12:41:02.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T12:41:02.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.239+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.244+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T12:41:02.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T12:41:02.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:02.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.254+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:02.256+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.258+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.258+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3978b886]
2026-02-05T12:41:02.259+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@120b1888]
2026-02-05T12:41:02.259+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501ac57a]
2026-02-05T12:41:02.259+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc08572]
2026-02-05T12:41:02.260+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.260+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.260+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.261+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.261+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.261+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.262+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.262+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T12:41:02.262+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9a919b] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.263+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c21505d] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.263+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7f7bed] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:02.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7de04c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356505094 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908384265 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1497912429 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532389688 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.273+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.275+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T12:41:02.275+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-05T12:41:02.276+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.278+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.278+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.278+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.279+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T12:41:02.280+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-05T12:41:02.280+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd569b9] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-05T12:41:02.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470267801 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:02.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c21505d]
2026-02-05T12:41:02.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-05T12:41:02.292+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T12:41:02.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9a919b]
2026-02-05T12:41:02.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-02-05T12:41:02.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7f7bed]
2026-02-05T12:41:02.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-05T12:41:02.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T12:41:02.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7de04c]
2026-02-05T12:41:02.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1ee32a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-05T12:41:02.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=5, totalElem (truncated)...]
2026-02-05T12:41:02.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10fe047a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.297+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085349772 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-05T12:41:02.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T12:41:02.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-02-05T12:41:02.306+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888841627 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.306+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.308+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.309+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd569b9]
2026-02-05T12:41:02.310+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-05T12:41:02.310+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.312+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45869e8a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.322+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.323+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-05T12:41:02.324+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.324+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.325+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@543485081 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.325+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=29, userName=te (truncated)...]
2026-02-05T12:41:02.325+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-05T12:41:02.326+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:02.326+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-05T12:41:02.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-05T12:41:02.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-05T12:41:02.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.338+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10fe047a]
2026-02-05T12:41:02.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-05T12:41:02.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1ee32a]
2026-02-05T12:41:02.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:02.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-05T12:41:02.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b7d943] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-05T12:41:02.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e79523e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638244923 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2ff033] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50588008 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1249836800 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@742aad9] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-05T12:41:02.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@718326729 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.346+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-05(LocalDate)
2026-02-05T12:41:02.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4dc734] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.352+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756326031 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.353+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.353+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45869e8a]
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e79523e]
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b7d943]
2026-02-05T12:41:02.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@742aad9]
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309c3ae7] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be91b72] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@314e4010] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79717992 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131196557 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@591929474 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.361+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.361+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.361+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T12:41:02.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T12:41:02.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T12:41:02.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T12:41:02.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T12:41:02.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4dc734]
2026-02-05T12:41:02.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a31e3b] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.369+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948716540 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28012d59] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1730528830 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T12:41:02.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-05T12:41:02.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2ff033]
2026-02-05T12:41:02.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T12:41:02.372+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.372+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-05T12:41:02.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.375+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:02.375+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.377+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.377+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.377+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242533ba] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.378+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1556834540 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.378+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.378+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@314e4010]
2026-02-05T12:41:02.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be91b72]
2026-02-05T12:41:02.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a31e3b]
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309c3ae7]
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667eed6e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7e672a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bce3db] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3909421] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@636714865 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824513340 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1039299345 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384832438 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T12:41:02.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28012d59]
2026-02-05T12:41:02.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4256374b] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671213501 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242533ba]
2026-02-05T12:41:02.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb56ef] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206441865 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:02.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bce3db]
2026-02-05T12:41:02.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7e672a]
2026-02-05T12:41:02.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4256374b]
2026-02-05T12:41:02.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3909421]
2026-02-05T12:41:02.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667eed6e]
2026-02-05T12:41:02.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9d341c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42b00bc0] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@989438575 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T12:41:02.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696faa38] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a40906] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773550987 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1859721896 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144736961 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.408+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.409+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.410+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.410+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.411+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-05T12:41:02.412+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.422+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-05T12:41:02.423+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-05T12:41:02.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-05T12:41:02.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-05T12:41:02.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-05T12:41:02.425+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-05T12:41:02.425+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.426+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32715fa3] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.426+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1115596321 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.427+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-05T12:41:02.427+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-05T12:41:02.430+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb56ef]
2026-02-05T12:41:02.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-05T12:41:02.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:02.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e6634e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696faa38]
2026-02-05T12:41:02.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a40906]
2026-02-05T12:41:02.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32715fa3]
2026-02-05T12:41:02.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9d341c]
2026-02-05T12:41:02.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42b00bc0]
2026-02-05T12:41:02.443+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678502387 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.445+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.445+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.445+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T12:41:02.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195fe303] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-05T12:41:02.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=5, totalElem (truncated)...]
2026-02-05T12:41:02.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T12:41:02.450+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.450+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@545924375 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.460+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.461+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.464+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-05T12:41:02.464+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.472+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-05T12:41:02.480+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.480+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-05T12:41:02.481+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-05T12:41:02.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-05T12:41:02.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-05T12:41:02.511+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e6634e]
2026-02-05T12:41:02.590+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.524+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T12:41:02.558+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-05T12:41:02.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T12:41:02.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:02.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-05T12:41:02.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.590+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:02.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-05T12:41:02.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.594+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195fe303]
2026-02-05T12:41:02.595+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@738addf8] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.596+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:02.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-05T12:41:02.670+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.674+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.674+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867577044 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.675+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-05T12:41:02.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c1087c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@148f5eaf] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3232822] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340121532 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.690+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737543450 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321589598 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:02.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-05T12:41:02.706+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.708+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-05(LocalDate)
2026-02-05T12:41:02.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:02.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T12:41:02.710+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T12:41:02.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.728+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T12:41:02.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@738addf8]
2026-02-05T12:41:02.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T12:41:02.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c1087c]
2026-02-05T12:41:02.730+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-05T12:41:02.730+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:02.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:02.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:02.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3232822]
2026-02-05T12:41:02.738+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@148f5eaf]
2026-02-05T12:41:02.738+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:02.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c710261] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:02.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c5bf34] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.742+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:02.744+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@431058186 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.744+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:02.744+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870766584 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.744+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-05T12:41:02.744+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479e8745] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.745+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688571199 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:02.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5986fd14] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f74311c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:02.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639071168 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.762+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541307552 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T12:41:02.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:02.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:02.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:02.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:02.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:02.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T12:41:02.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c710261]
2026-02-05T12:41:02.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:02.779+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c5bf34]
2026-02-05T12:41:02.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479e8745]
2026-02-05T12:41:02.783+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:02.783+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:02.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4937345d] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f74311c]
2026-02-05T12:41:02.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5986fd14]
2026-02-05T12:41:02.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bee385c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103526672 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:02.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.794+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693253642 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5381fcc2] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:02.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47993472] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a515642] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177100154 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:02.805+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688591180 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:02.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146183745 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:02.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:02.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T12:41:02.821+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:02.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T12:41:02.826+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:02.828+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T12:41:02.829+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:02.829+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:02.842+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T12:41:02.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-02-05T12:41:02.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:02.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:02.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bee385c]
2026-02-05T12:41:02.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:02.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4937345d]
2026-02-05T12:41:02.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5381fcc2]
2026-02-05T12:41:02.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47993472]
2026-02-05T12:41:02.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a515642]
2026-02-05T12:41:02.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.880+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e95182] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd8d118] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-02-05T12:41:02.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:02.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@963618683 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:02.890+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:02.890+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490571042 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.890+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ecec3c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.891+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.895+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002444490 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.906+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.930+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T12:41:02.936+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T12:41:02.940+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T12:41:02.938+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T12:41:02.938+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:02.939+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T12:41:02.942+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:02.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T12:41:02.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:02.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T12:41:02.947+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T12:41:02.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:02.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T12:41:02.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-02-05T12:41:02.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:02.957+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.958+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:02.958+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9ccd43] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ecec3c]
2026-02-05T12:41:02.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd8d118]
2026-02-05T12:41:02.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e95182]
2026-02-05T12:41:02.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d484d6c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.963+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1244022719 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:02.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:02.965+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-02-05T12:41:02.965+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:02.968+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1999637215 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:02.969+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f42fa4] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:02.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50672f6d] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:02.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T12:41:02.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T12:41:02.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631186121 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:02.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:02.974+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065458280 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:02.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:02.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T12:41:02.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:02.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T12:41:02.993+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:02.994+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:03.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T12:41:03.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T12:41:03.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:03.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:03.012+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:03.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:03.011+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.011+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T12:41:03.013+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:03.013+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:03.019+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9ccd43]
2026-02-05T12:41:03.023+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:03.023+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T12:41:03.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d484d6c]
2026-02-05T12:41:03.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T12:41:03.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50672f6d]
2026-02-05T12:41:03.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f42fa4]
2026-02-05T12:41:03.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.027+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5c8e5a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15811cfc] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5879d1d5] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.027+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.027+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959824240 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638977446 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:03.029+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.029+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376123212 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785a2039] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=29, userName=te (truncated)...]
2026-02-05T12:41:03.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T12:41:03.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.031+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.031+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.031+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288322584 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:03.034+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T12:41:03.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c52ce12] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.039+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:03.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@275336374 wrapping com.mysql.cj.jdbc.ConnectionImpl@47e23f5b] will not be managed by Spring
2026-02-05T12:41:03.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T12:41:03.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T12:41:03.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:03.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T12:41:03.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15811cfc]
2026-02-05T12:41:03.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T12:41:03.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.075+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:03.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5c8e5a]
2026-02-05T12:41:03.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5879d1d5]
2026-02-05T12:41:03.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T12:41:03.086+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785a2039]
2026-02-05T12:41:03.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82040bd] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-02-05T12:41:03.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366730169 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:03.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T12:41:03.089+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df273d9] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T12:41:03.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c52ce12]
2026-02-05T12:41:03.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.091+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.092+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@999553227 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.092+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.095+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.095+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:03.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T12:41:03.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db957c2] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-02-05T12:41:03.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:03.107+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:03.110+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:03.110+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1393414819 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T12:41:03.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:03.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T12:41:03.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:03.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:03.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T12:41:03.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T12:41:03.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T12:41:03.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df273d9]
2026-02-05T12:41:03.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82040bd]
2026-02-05T12:41:03.140+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T12:41:03.142+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:03.142+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.144+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T12:41:03.144+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-02-05T12:41:03.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e674893] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4f5fb6] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T12:41:03.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db957c2]
2026-02-05T12:41:03.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a43c4d8] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1622512701 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23118794 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:03.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T12:41:03.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@340804768 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34344ec8] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.154+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.154+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.155+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.155+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-02-05T12:41:03.155+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.156+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343403850 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:03.156+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.158+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e473b47] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.158+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.159+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.164+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T12:41:03.164+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125502540 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:03.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-05T12:41:03.180+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T12:41:03.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.194+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-05T12:41:03.195+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:03.195+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T12:41:03.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4f5fb6]
2026-02-05T12:41:03.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-05T12:41:03.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e674893]
2026-02-05T12:41:03.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a43c4d8]
2026-02-05T12:41:03.210+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.211+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34344ec8]
2026-02-05T12:41:03.212+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.213+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-05T12:41:03.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e473b47]
2026-02-05T12:41:03.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.218+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd25ad7] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.218+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-05T12:41:03.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe5d66d] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741c847a] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=29, userName=te (truncated)...]
2026-02-05T12:41:03.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-05T12:41:03.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244390004 wrapping com.mysql.cj.jdbc.ConnectionImpl@503d9e4f] will not be managed by Spring
2026-02-05T12:41:03.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805792466 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617816357 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c83cbb] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:03.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.224+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639096870 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:03.228+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T12:41:03.246+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:03.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.268+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.260+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd18b5d] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.275+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379989219 wrapping com.mysql.cj.jdbc.ConnectionImpl@165c1df5] will not be managed by Spring
2026-02-05T12:41:03.276+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T12:41:03.280+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-05T12:41:03.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:03.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.288+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:03.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c83cbb]
2026-02-05T12:41:03.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe5d66d]
2026-02-05T12:41:03.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741c847a]
2026-02-05T12:41:03.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd25ad7]
2026-02-05T12:41:03.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-02-05T12:41:03.292+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.292+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b8854e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40330625] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3262a6fd] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd18b5d]
2026-02-05T12:41:03.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=5, totalElem (truncated)...]
2026-02-05T12:41:03.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1674729606 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:03.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1640294128 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@583912351 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.297+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.298+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.298+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-05T12:41:03.310+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.311+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.315+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:03.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:03.353+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40330625]
2026-02-05T12:41:03.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b8854e]
2026-02-05T12:41:03.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.361+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ebad547] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:03.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db289d3] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912323739 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3262a6fd]
2026-02-05T12:41:03.372+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832976350 wrapping com.mysql.cj.jdbc.ConnectionImpl@496278ee] will not be managed by Spring
2026-02-05T12:41:03.372+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.375+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d4e33e4] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.379+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.379+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171720190 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T12:41:03.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db289d3]
2026-02-05T12:41:03.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ebad547]
2026-02-05T12:41:03.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=5, totalElem (truncated)...]
2026-02-05T12:41:03.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39733cdf] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.410+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.410+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@31184475 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.411+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d4e33e4]
2026-02-05T12:41:03.412+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:03.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:03.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aca19d1] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113758335 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.430+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:03.430+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:03.445+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:03.459+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39733cdf]
2026-02-05T12:41:03.459+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.460+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:03.476+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9ebc7c] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aca19d1]
2026-02-05T12:41:03.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1261166612 wrapping com.mysql.cj.jdbc.ConnectionImpl@772dab26] will not be managed by Spring
2026-02-05T12:41:03.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2724f408] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@757757356 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T12:41:03.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T12:41:03.494+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.494+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9ebc7c]
2026-02-05T12:41:03.495+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.496+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T12:41:03.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T12:41:03.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-05T12:41:03.503+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2724f408]
2026-02-05T12:41:03.505+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.507+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64efb0e] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.508+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105565051 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.509+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.509+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.522+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.524+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64efb0e]
2026-02-05T12:41:03.525+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.525+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d220eaf] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.526+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751110286 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.529+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T12:41:03.529+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-05T12:41:03.545+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-05T12:41:03.561+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d220eaf]
2026-02-05T12:41:03.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T12:41:03.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e9d7ae4] was not registered for synchronization because synchronization is not active
2026-02-05T12:41:03.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1392986350 wrapping com.mysql.cj.jdbc.ConnectionImpl@78cada37] will not be managed by Spring
2026-02-05T12:41:03.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T12:41:03.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T12:41:03.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T12:41:03.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e9d7ae4]
2026-02-05T12:41:03.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T12:41:03.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T12:41:03.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
