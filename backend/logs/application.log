2026-02-05T14:30:13.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T14:30:13.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:13.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:13.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1484803329 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:13.880+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T14:30:13.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb52928]
2026-02-05T14:30:13.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@498a6f23]
2026-02-05T14:30:13.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:13.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:13.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T14:30:13.891+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.892+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.894+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:13.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T14:30:13.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:13.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f32775] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c85a346] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644620418 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:13.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T14:30:13.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:13.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604550730 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:13.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:13.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:13.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:13.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:13.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 31(Long), 10(Long), 6(Long), 1(Long)
2026-02-05T14:30:13.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7751740d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:13.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8555b1]
2026-02-05T14:30:13.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:13.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:13.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c0abb3e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5729c514] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795512275 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:13.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117912419 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:13.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28185029 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:13.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-02-05T14:30:13.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:13.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:13.960+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:13.961+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:13.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c85a346]
2026-02-05T14:30:13.963+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:13.963+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T14:30:13.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f32775]
2026-02-05T14:30:13.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T14:30:13.967+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15fb5bd8] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.975+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3104e873] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74798514 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:13.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@192330153 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:13.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:13.981+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:13.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:13.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:13.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:13.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:13.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T14:30:13.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7751740d]
2026-02-05T14:30:13.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c0abb3e]
2026-02-05T14:30:13.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5729c514]
2026-02-05T14:30:13.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:13.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:13.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:13.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7876958d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:30:13.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4827dd7a] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:13.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:13.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15fb5bd8]
2026-02-05T14:30:13.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946950008 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:13.993+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:13.994+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1363124239 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:13.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3104e873]
2026-02-05T14:30:13.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-05T14:30:13.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:13.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T14:30:13.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T14:30:14.014+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-02-05T14:30:14.015+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T14:30:14.015+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f19bcf] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-05T14:30:14.029+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:30:14.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1881186322 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:14.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-05T14:30:14.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:14.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:30:14.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:14.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:30:14.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T14:30:14.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:30:14.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7876958d]
2026-02-05T14:30:14.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4827dd7a]
2026-02-05T14:30:14.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:30:14.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:30:14.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5717f02d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:30:14.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f19bcf]
2026-02-05T14:30:14.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757977623 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:14.075+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T14:30:14.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T14:30:14.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4baecf5d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f691ea] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@560663044 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:14.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:14.099+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:14.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1753018320 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.083+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T14:30:14.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:14.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:14.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T14:30:14.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T14:30:14.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:14.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T14:30:14.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:14.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T14:30:14.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:14.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T14:30:14.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:14.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-02-05T14:30:14.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:14.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@acc0e65] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1ceb97] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5717f02d]
2026-02-05T14:30:14.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f691ea]
2026-02-05T14:30:14.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4baecf5d]
2026-02-05T14:30:14.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@650424870 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:14.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069226673 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:14.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:14.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:14.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b87ab0] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e9d6cd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35580756] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T14:30:14.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T14:30:14.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1262907506 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:14.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367092347 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145879687 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:14.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:14.139+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T14:30:14.140+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@acc0e65]
2026-02-05T14:30:14.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1ceb97]
2026-02-05T14:30:14.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b87ab0]
2026-02-05T14:30:14.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35580756]
2026-02-05T14:30:14.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65da09e0] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd8db40] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e9d6cd]
2026-02-05T14:30:14.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@261065752 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:14.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1415634207 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:14.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3380a6b8] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551964cc] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T14:30:14.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e2195d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.154+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1393375106 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:14.160+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@546225038 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:14.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T14:30:14.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@983038514 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:14.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:14.163+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:14.164+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:14.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:30:14.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 31(Long), 10(Long), 6(Long), 1(Long)
2026-02-05T14:30:14.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T14:30:14.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd8db40]
2026-02-05T14:30:14.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65da09e0]
2026-02-05T14:30:14.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.177+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T14:30:14.177+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-02-05T14:30:14.177+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:14.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:30:14.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T14:30:14.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e2195d]
2026-02-05T14:30:14.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3380a6b8]
2026-02-05T14:30:14.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551964cc]
2026-02-05T14:30:14.182+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.183+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:14.183+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T14:30:14.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.196+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:14.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e86fb9b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T14:30:14.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2f4b13] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49243892] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:14.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588472295 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T14:30:14.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772917544 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:14.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1468336766 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:14.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:14.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T14:30:14.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:14.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.212+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:14.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:14.207+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.207+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T14:30:14.212+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.213+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30eabb5d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256203284 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:14.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56955a53] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.229+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:14.229+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340066036 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:14.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:14.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T14:30:14.232+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:14.232+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e86fb9b]
2026-02-05T14:30:14.232+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49243892]
2026-02-05T14:30:14.233+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2f4b13]
2026-02-05T14:30:14.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T14:30:14.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-02-05T14:30:14.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:14.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T14:30:14.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:14.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:30:14.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30eabb5d]
2026-02-05T14:30:14.248+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56955a53]
2026-02-05T14:30:14.255+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.254+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f36f] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746761cc] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.269+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296881230 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:14.268+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090362618 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:14.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.279+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:30:14.280+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T14:30:14.282+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.283+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T14:30:14.284+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T14:30:14.285+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:30:14.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:30:14.288+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:14.292+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746761cc]
2026-02-05T14:30:14.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T14:30:14.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f36f]
2026-02-05T14:30:14.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14263f66] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T14:30:14.297+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T14:30:14.297+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.297+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540133793 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.298+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.299+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:14.311+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.304+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-05T14:30:14.312+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:14.313+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-05T14:30:14.313+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:14.314+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-05T14:30:14.314+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:14.315+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-05T14:30:14.315+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:14.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-05T14:30:14.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1644035d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a72974] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523726053 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:14.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832434423 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:14.319+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:14.319+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:14.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-05T14:30:14.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.323+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14263f66]
2026-02-05T14:30:14.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-05T14:30:14.327+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.328+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@661fd0eb] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.328+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130827329 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-05T14:30:14.330+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1644035d]
2026-02-05T14:30:14.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:14.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a72974]
2026-02-05T14:30:14.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238d08ce] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358988041 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:14.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@577064f4] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694291431 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:14.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@661fd0eb]
2026-02-05T14:30:14.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-05T14:30:14.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-05T14:30:14.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbfa9c4] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170186768 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:14.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.346+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238d08ce]
2026-02-05T14:30:14.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:14.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-05T14:30:14.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@577064f4]
2026-02-05T14:30:14.348+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-05T14:30:14.349+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.349+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.351+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-05T14:30:14.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:14.362+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:14.369+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbfa9c4]
2026-02-05T14:30:14.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c0a2359] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752573077 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.377+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c0a2359]
2026-02-05T14:30:14.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2761e7fc] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049706146 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:14.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:30:14.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:30:14.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2761e7fc]
2026-02-05T14:30:14.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e7a8414] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1452065312 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:14.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:14.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:14.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e7a8414]
2026-02-05T14:30:14.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5dcbae] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160624245 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5dcbae]
2026-02-05T14:30:14.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4404b528] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.410+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166345917 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.411+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:14.411+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:30:14.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:30:14.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4404b528]
2026-02-05T14:30:14.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:14.428+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc87b8d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:14.429+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114203817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:14.430+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:14.431+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:14.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:14.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc87b8d]
2026-02-05T14:30:14.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:14.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:14.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:17.516+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-05T14:30:17.517+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T14:30:17.517+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-05T14:30:17.518+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-05T14:30:17.518+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:17.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:17.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2c0b81] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:17.521+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43938413 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:17.522+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:17.525+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:17.528+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:17.529+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2c0b81]
2026-02-05T14:30:17.530+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:17.530+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8ca0dd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:17.531+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@135556222 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:17.531+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:17.532+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:17.534+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:17.535+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8ca0dd]
2026-02-05T14:30:17.536+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:17.537+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be2f272] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:17.537+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886596507 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:17.543+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:17.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:17.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:17.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be2f272]
2026-02-05T14:30:17.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:17.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612dc92b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:17.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@497075742 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:17.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:17.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:17.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:17.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612dc92b]
2026-02-05T14:30:17.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:17.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:30:17.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:18.516+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:30:18.518+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-05T14:30:18.518+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:30:18.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:30:18.520+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:18.522+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.524+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a79dad7] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.532+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084955102 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.536+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:18.536+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:18.557+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:18.561+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a79dad7]
2026-02-05T14:30:18.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e539fcd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@189009327 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:18.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:18.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:18.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e539fcd]
2026-02-05T14:30:18.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2095f337] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919597855 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:18.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:18.584+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:18.585+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2095f337]
2026-02-05T14:30:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63be9cbb] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824380848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:18.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:18.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:18.590+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63be9cbb]
2026-02-05T14:30:18.591+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.591+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5592af39] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113500276 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:18.594+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:30:18.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:30:18.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5592af39]
2026-02-05T14:30:18.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.598+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba46b4b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.598+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@185597537 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:18.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:18.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:18.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba46b4b]
2026-02-05T14:30:18.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be0a805] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945527809 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:18.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:18.620+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:18.620+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be0a805]
2026-02-05T14:30:18.620+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b9c71] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170241639 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.623+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:30:18.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:30:18.629+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:30:18.630+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b9c71]
2026-02-05T14:30:18.630+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:18.630+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3e55c2] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:18.631+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980644960 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:18.631+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:18.631+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-05T14:30:18.633+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:18.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3e55c2]
2026-02-05T14:30:18.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:18.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:18.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:19.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-05T14:30:19.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/logout
2026-02-05T14:30:19.838+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-05T14:30:19.838+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-05T14:30:19.838+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-05T14:30:19.841+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI5IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-05T14:30:19.844+09:00  INFO 32176 --- [http-nio-8080-exec-2] SECURITY                                 : LOGOUT userId=9
2026-02-05T14:30:19.844+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:19.845+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-05T14:30:19.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:22.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-05T14:30:22.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-05T14:30:22.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-05T14:30:22.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-05T14:30:22.625+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-05T14:30:22.625+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-02-05T14:30:22.626+09:00  INFO 32176 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-02-05T14:30:22.626+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:22.627+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476d7389] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:22.629+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355553318 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:22.630+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-05T14:30:22.630+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-02-05T14:30:22.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-05T14:30:22.633+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476d7389]
2026-02-05T14:30:22.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:22.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4b4f45] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:22.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1815277201 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:22.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:22.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:30:22.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:22.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4b4f45]
2026-02-05T14:30:22.735+09:00  INFO 32176 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3
2026-02-05T14:30:22.735+09:00  INFO 32176 --- [http-nio-8080-exec-9] SECURITY                                 : LOGIN_SUCCESS userId=8 username=test_tax role=TAX_ACCOUNTANT
2026-02-05T14:30:22.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:22.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=8, username=test_tax, password=n (truncated)...]
2026-02-05T14:30:22.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.032+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-05T14:30:23.034+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-05T14:30:23.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-05T14:30:23.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-05T14:30:23.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-05T14:30:23.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787f613d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1343563692 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-05T14:30:23.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-05T14:30:23.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-05T14:30:23.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787f613d]
2026-02-05T14:30:23.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-05T14:30:23.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:23.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:30:23.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:23.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:30:23.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.163+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:30:23.163+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:30:23.164+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:23.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.166+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.166+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:23.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:30:23.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:30:23.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:23.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:30:23.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:30:23.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:30:23.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.175+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.176+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e920518] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3869ef09] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.178+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.180+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504583912 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.180+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186669244 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.180+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.180+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ddc8b61] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:23.181+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.182+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3348454] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.182+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635e0b37] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.183+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1acdcd1a] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321603194 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:30:23.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:23.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217563398 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281799945 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:23.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.192+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:30:23.194+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:23.195+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:30:23.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009746030 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:23.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:30:23.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:30:23.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e920518]
2026-02-05T14:30:23.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ddc8b61]
2026-02-05T14:30:23.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3869ef09]
2026-02-05T14:30:23.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:30:23.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:23.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:23.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:30:23.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29087d44] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3348454]
2026-02-05T14:30:23.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635e0b37]
2026-02-05T14:30:23.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584320203 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.207+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.209+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:30:23.216+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.216+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:30:23.217+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396a0fa] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.218+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1acdcd1a]
2026-02-05T14:30:23.218+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:23.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1580383638 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:23.227+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:23.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:23.234+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:30:23.234+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:30:23.235+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:30:23.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:23.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.240+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:30:23.240+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29087d44]
2026-02-05T14:30:23.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:23.243+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.244+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:30:23.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.246+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.246+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:30:23.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c397c6f] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:30:23.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61eb9399] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186060017 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.256+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.258+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:30:23.265+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396a0fa]
2026-02-05T14:30:23.262+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.263+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1025738810 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.263+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.265+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:30:23.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:23.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.268+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.268+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.269+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:30:23.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:23.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519f2d49] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.273+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.278+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9f207d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.281+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584714432 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.281+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.282+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:30:23.283+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.285+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1907891786 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.285+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:30:23.286+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c397c6f]
2026-02-05T14:30:23.286+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:23.286+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:30:23.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:30:23.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61eb9399]
2026-02-05T14:30:23.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d801720] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.297+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.298+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:30:23.298+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245564155 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.299+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:30:23.299+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:23.299+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22427e1b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:30:23.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:30:23.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519f2d49]
2026-02-05T14:30:23.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1265697771 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.304+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9f207d]
2026-02-05T14:30:23.304+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.314+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:30:23.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:30:23.306+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:23.306+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.313+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.314+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.315+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:23.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:30:23.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d801720]
2026-02-05T14:30:23.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4733da7f] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:23.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.327+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033691972 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.328+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:23.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66158fb7] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:23.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:30:23.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:23.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258405186 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:30:23.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22427e1b]
2026-02-05T14:30:23.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aebb475] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:30:23.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140424559 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:23.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:23.351+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:23.352+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4733da7f]
2026-02-05T14:30:23.352+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66158fb7]
2026-02-05T14:30:23.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b01927e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.362+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.362+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842554691 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.362+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:23.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71fa7924] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:30:23.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aebb475]
2026-02-05T14:30:23.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1004026011 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:30:23.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:23.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:23.379+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:23.379+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:30:23.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:23.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b01927e]
2026-02-05T14:30:23.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:23.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71fa7924]
2026-02-05T14:30:23.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:23.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:30:23.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dcc4dfe] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1339898426 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4170b19c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276683774 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:23.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:23.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dcc4dfe]
2026-02-05T14:30:23.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:23.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4170b19c]
2026-02-05T14:30:23.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:23.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:23.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.412+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:23.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:23.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:23.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:23.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469bd341] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055387940 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11ef75df] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@659068520 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:23.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:23.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:23.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469bd341]
2026-02-05T14:30:23.422+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.423+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7d2bdd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.423+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:23.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652535432 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11ef75df]
2026-02-05T14:30:23.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.426+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.425+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.427+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:23.428+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.431+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:23.432+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.432+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7d2bdd]
2026-02-05T14:30:23.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:23.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:23.434+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66783be6] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:23.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822921015 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:23.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a751b9b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129970199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:23.441+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:23.445+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66783be6]
2026-02-05T14:30:23.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:23.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a751b9b]
2026-02-05T14:30:23.448+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d28cb2] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.448+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1599225669 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:23.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.450+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.463+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.464+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d28cb2]
2026-02-05T14:30:23.465+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.465+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5509ecae] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.466+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970083745 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.466+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.468+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.470+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.473+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5509ecae]
2026-02-05T14:30:23.477+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.478+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c786a9e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.478+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712227619 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.479+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.480+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.482+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c786a9e]
2026-02-05T14:30:23.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d504dd1] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@574875775 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.485+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d504dd1]
2026-02-05T14:30:23.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.491+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.496+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.500+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.502+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.503+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92d052] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.503+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684671084 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.514+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92d052]
2026-02-05T14:30:23.514+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.515+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eeda614] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.515+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020338651 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.516+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.517+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.520+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eeda614]
2026-02-05T14:30:23.520+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.521+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51703eee] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.523+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378811858 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.529+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.538+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.541+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.547+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:30:23.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:30:23.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:30:23.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:30:23.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:30:23.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:30:23.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:30:23.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:30:23.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:30:23.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51703eee]
2026-02-05T14:30:23.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.560+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@770f149a] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.556+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.557+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.558+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.559+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.561+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@668521435 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.561+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e79d70] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253c91ed] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2294e25e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.562+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a09d91] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@663251180 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1587905851 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1053530971 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973746237 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:30:23.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:30:23.565+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:30:23.565+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:23.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@770f149a]
2026-02-05T14:30:23.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:30:23.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:30:23.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1018c4ac] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e79d70]
2026-02-05T14:30:23.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532462065 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:30:23.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:30:23.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:23.578+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:30:23.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253c91ed]
2026-02-05T14:30:23.578+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a09d91]
2026-02-05T14:30:23.578+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2294e25e]
2026-02-05T14:30:23.579+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.583+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:30:23.584+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:30:23.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2703992d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:30:23.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.591+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@578816385 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.594+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:30:23.598+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:30:23.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1018c4ac]
2026-02-05T14:30:23.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:30:23.601+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:30:23.601+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171b0108] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:30:23.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097898723 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.610+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.610+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:30:23.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:30:23.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2703992d]
2026-02-05T14:30:23.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:30:23.612+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.612+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.612+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.612+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.613+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.613+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.613+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d06513] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.613+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:30:23.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828484906 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:23.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171b0108]
2026-02-05T14:30:23.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5cd8da] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:30:23.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@860d53d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.628+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1649088611 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:23.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046772316 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.626+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:30:23.628+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.628+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afda5e3] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.628+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:30:23.628+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:30:23.629+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:23.629+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428284661 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:23.630+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:23.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:30:23.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:30:23.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.633+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d06513]
2026-02-05T14:30:23.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:30:23.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:30:23.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:30:23.636+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.636+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:30:23.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@860d53d]
2026-02-05T14:30:23.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5cd8da]
2026-02-05T14:30:23.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:23.638+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.638+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afda5e3]
2026-02-05T14:30:23.642+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.645+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:30:23.645+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:30:23.646+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3acf1c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1023520931 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.662+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.663+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:23.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:30:23.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.675+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.683+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:23.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3acf1c]
2026-02-05T14:30:23.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e6a11c2] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@827064091 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52e2a7c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081769450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:30:23.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:30:23.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.692+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e6a11c2]
2026-02-05T14:30:23.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb63444] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:30:23.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890369617 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52e2a7c]
2026-02-05T14:30:23.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:30:23.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb63444]
2026-02-05T14:30:23.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257664ea] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442327060 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.710+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257664ea]
2026-02-05T14:30:23.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d33c38] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236215036 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d33c38]
2026-02-05T14:30:23.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f57a3ee] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592026816 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.723+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f57a3ee]
2026-02-05T14:30:23.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bbd9377] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689373501 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.728+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.728+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.730+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bbd9377]
2026-02-05T14:30:23.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebb57b0] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496991035 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebb57b0]
2026-02-05T14:30:23.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.745+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6432fd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138914524 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6432fd]
2026-02-05T14:30:23.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33460082] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.761+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021535693 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.761+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.762+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33460082]
2026-02-05T14:30:23.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@422fc695] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097763906 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@422fc695]
2026-02-05T14:30:23.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5f624c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33034268 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.777+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.777+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.779+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5f624c]
2026-02-05T14:30:23.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424f956b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@80003692 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.782+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424f956b]
2026-02-05T14:30:23.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d03fc22] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129962020 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d03fc22]
2026-02-05T14:30:23.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.794+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eae8c26] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.795+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@741247805 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:23.796+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.796+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eae8c26]
2026-02-05T14:30:23.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.800+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.805+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.809+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.811+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171394ae] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.812+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1449249880 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.815+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171394ae]
2026-02-05T14:30:23.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d86244] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728052757 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d86244]
2026-02-05T14:30:23.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5328f232] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805400657 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.825+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.828+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5328f232]
2026-02-05T14:30:23.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308bb0fb] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606498234 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308bb0fb]
2026-02-05T14:30:23.834+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca5c653] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908711764 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.840+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.840+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca5c653]
2026-02-05T14:30:23.841+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.842+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97d7585] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.842+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1004060071 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.843+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.844+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.846+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.847+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97d7585]
2026-02-05T14:30:23.847+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.847+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bb52a0b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696696741 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:23.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.849+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.861+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.863+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bb52a0b]
2026-02-05T14:30:23.864+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.864+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.865+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:23.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.878+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:23.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:23.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:23.880+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:23.882+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16abb426] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.884+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@910688119 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.884+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16abb426]
2026-02-05T14:30:23.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7accdf3e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822959813 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.892+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.899+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7accdf3e]
2026-02-05T14:30:23.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cabbfa] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702785362 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cabbfa]
2026-02-05T14:30:23.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.911+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f980442] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877830432 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f980442]
2026-02-05T14:30:23.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3056f9c2] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141409694 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:23.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:23.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:23.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3056f9c2]
2026-02-05T14:30:23.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@248903b3] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@597063177 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.930+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@248903b3]
2026-02-05T14:30:23.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:23.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2121e737] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:23.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306131515 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:23.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:23.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:23.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:23.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2121e737]
2026-02-05T14:30:23.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:23.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:23.937+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:24.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.042+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:30:24.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:30:24.044+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:30:24.044+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:30:24.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:24.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:30:24.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:24.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:30:24.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:24.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:30:24.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:24.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:30:24.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:30:24.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:30:24.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:30:24.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:30:24.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:24.049+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.049+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.049+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.051+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.052+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:30:24.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654f988d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d934ef2] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317389690 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fbdc8a] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7807d25] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@515c34dd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912422044 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:24.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1105448283 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:24.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155687381 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:24.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1297787940 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:24.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:30:24.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:30:24.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:30:24.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:30:24.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:24.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:24.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:30:24.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:30:24.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:30:24.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:30:24.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:30:24.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:30:24.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654f988d]
2026-02-05T14:30:24.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7807d25]
2026-02-05T14:30:24.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d934ef2]
2026-02-05T14:30:24.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fbdc8a]
2026-02-05T14:30:24.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@515c34dd]
2026-02-05T14:30:24.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4622ebf3] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7290ed] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:30:24.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:30:24.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:30:24.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605404746 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798992883 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:24.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:30:24.095+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:30:24.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:30:24.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4622ebf3]
2026-02-05T14:30:24.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7290ed]
2026-02-05T14:30:24.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6713f368] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:30:24.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918548746 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:24.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:24.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:24.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6713f368]
2026-02-05T14:30:24.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5323bae1] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726895454 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5323bae1]
2026-02-05T14:30:24.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390add20] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.120+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008058962 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.120+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:24.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:24.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:30:24.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390add20]
2026-02-05T14:30:24.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a6d61ff] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627136079 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a6d61ff]
2026-02-05T14:30:24.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61fdf41c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086194501 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:24.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61fdf41c]
2026-02-05T14:30:24.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:24.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:24.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:24.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:24.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:30:24.930+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:24.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:30:24.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:24.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:24.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:24.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:30:24.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:30:24.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:24.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:24.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:30:24.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:30:24.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:24.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:24.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:24.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:30:24.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax", parameters={masked}
2026-02-05T14:30:24.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:30:24.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5999e51f] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:24.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bdfc3ea] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.936+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.937+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c709482] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.937+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f56528b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.943+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430238449 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:24.943+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982053978 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:24.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358748195 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:24.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841702977 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:24.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:24.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:24.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.947+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:24.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:24.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bdfc3ea]
2026-02-05T14:30:24.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-02-05T14:30:24.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:24.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f0d5a79] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c709482]
2026-02-05T14:30:24.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5999e51f]
2026-02-05T14:30:24.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f56528b]
2026-02-05T14:30:24.958+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877726577 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:24.960+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.961+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:24.961+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-02-05T14:30:24.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:24.963+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716aa30f] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.965+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.966+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:24.968+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@313919860 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:24.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:30:24.978+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:24.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:24.986+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:30:24.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:24.994+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:24.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:24.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:30:24.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f0d5a79]
2026-02-05T14:30:24.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:24.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:30:24.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:24.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:24.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:30:24.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f18c65] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:24.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:24.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1668994640 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:25.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062bf7e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716aa30f]
2026-02-05T14:30:25.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373567ab] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282378202 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:25.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:25.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125781836 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:25.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79dcfb40] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:25.010+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:25.011+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569349039 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:25.014+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:25.015+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-02-05T14:30:25.017+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:25.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:25.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062bf7e]
2026-02-05T14:30:25.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f18c65]
2026-02-05T14:30:25.019+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373567ab]
2026-02-05T14:30:25.019+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-02-05T14:30:25.023+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e75f91b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:25.027+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960691220 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:25.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:25.032+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:25.036+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.036+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79dcfb40]
2026-02-05T14:30:25.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:25.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fabecd] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1516395497 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:30:25.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:25.045+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:25.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:25.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e75f91b]
2026-02-05T14:30:25.051+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.051+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.052+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ccfa74b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.051+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14906de] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.052+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496186600 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:25.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:25.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1820458464 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:30:25.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fabecd]
2026-02-05T14:30:25.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:25.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:25.060+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:30:25.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:25.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:25.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:25.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:25.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:25.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14906de]
2026-02-05T14:30:25.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ccfa74b]
2026-02-05T14:30:25.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax", parameters={masked}
2026-02-05T14:30:25.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:25.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:25.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44332643] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170678897 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:25.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db5aa82] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862381116 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:25.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.092+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:25.095+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:25.097+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:25.097+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:25.099+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:25.099+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.099+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db5aa82]
2026-02-05T14:30:25.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44332643]
2026-02-05T14:30:25.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa6c98b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075099081 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:25.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf9600d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63500daf] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:25.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1804084298 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:25.110+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049378488 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:25.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:25.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.113+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.113+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.114+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf9600d]
2026-02-05T14:30:25.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:25.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa6c98b]
2026-02-05T14:30:25.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f406159] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63500daf]
2026-02-05T14:30:25.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334419380 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:25.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:25.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:25.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:30:25.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:30:25.141+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:30:25.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:30:25.141+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:25.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f406159]
2026-02-05T14:30:25.142+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:30:25.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:25.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:30:25.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:30:25.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a62dab] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:30:25.154+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@764466287 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:25.160+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f576d] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.160+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:25.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533344336 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:30:25.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:30:25.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.166+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:30:25.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af0d983] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.177+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1848738133 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:30:25.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f576d]
2026-02-05T14:30:25.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:25.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a62dab]
2026-02-05T14:30:25.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af0d983]
2026-02-05T14:30:25.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:30:25.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.189+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:30:25.192+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5e7d4e] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.195+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:25.196+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114540487 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.216+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.217+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5e7d4e]
2026-02-05T14:30:25.217+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.218+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0d4561] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.218+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369424707 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:25.227+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0d4561]
2026-02-05T14:30:25.227+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.227+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c26e522] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.228+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2101447050 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.228+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.229+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c26e522]
2026-02-05T14:30:25.232+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.232+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc8a720] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.233+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959543310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.233+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:25.236+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:25.240+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:25.243+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc8a720]
2026-02-05T14:30:25.243+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.244+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfb435b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@112198211 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.247+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfb435b]
2026-02-05T14:30:25.248+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:25.248+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110da0da] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:25.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005583931 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:30:25.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:25.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:25.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:25.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110da0da]
2026-02-05T14:30:25.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:25.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:25.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:28.083+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:28.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:28.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:30:28.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax", parameters={masked}
2026-02-05T14:30:28.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:28.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:28.086+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a0cca] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:28.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254424926 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:28.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:28.094+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:28.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:28.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a0cca]
2026-02-05T14:30:28.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:28.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bacc77] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:28.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036746631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:28.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:28.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:28.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:28.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bacc77]
2026-02-05T14:30:28.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:28.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7009ff6c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:28.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206344814 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:28.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:28.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:28.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:28.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7009ff6c]
2026-02-05T14:30:28.141+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:28.141+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c09bc3b] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:28.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942276169 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:30:28.144+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:28.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:28.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:30:28.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c09bc3b]
2026-02-05T14:30:28.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:28.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:30:28.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:30:29.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:30:29.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:30:29.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:30:29.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:30:29.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:30:29.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f90c04] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.077+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567201678 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:29.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:29.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:29.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f90c04]
2026-02-05T14:30:29.083+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.085+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb49c7c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.086+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075124598 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:29.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:29.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:29.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb49c7c]
2026-02-05T14:30:29.094+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.094+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28217b3c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.095+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315381048 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:29.097+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:29.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:29.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28217b3c]
2026-02-05T14:30:29.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2168b337] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45335741 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:29.113+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:29.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:29.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2168b337]
2026-02-05T14:30:29.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.119+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f2157c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.120+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1038607486 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.120+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:30:29.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:30:29.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:30:29.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f2157c]
2026-02-05T14:30:29.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622a4d2c] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@733674976 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:29.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:29.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:29.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622a4d2c]
2026-02-05T14:30:29.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:30:29.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6210cb40] was not registered for synchronization because synchronization is not active
2026-02-05T14:30:29.144+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390651651 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:30:29.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:30:29.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:30:29.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:30:29.149+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6210cb40]
2026-02-05T14:30:29.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:30:29.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:30:29.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:10.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-05T14:37:10.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-05T14:37:10.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/logout
2026-02-05T14:37:10.456+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-05T14:37:10.469+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-05T14:37:10.472+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-05T14:37:10.474+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI4IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-05T14:37:10.486+09:00  INFO 32176 --- [http-nio-8080-exec-9] SECURITY                                 : LOGOUT userId=8
2026-02-05T14:37:10.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:10.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-05T14:37:10.496+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:13.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-05T14:37:13.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-05T14:37:13.769+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-05T14:37:13.769+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-05T14:37:13.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-05T14:37:13.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-05T14:37:13.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountatn, password=1234)]
2026-02-05T14:37:13.771+09:00  INFO 32176 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountatn
2026-02-05T14:37:13.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:13.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66b965b6] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:13.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1299440154 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:13.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-05T14:37:13.777+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountatn(String)
2026-02-05T14:37:13.783+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-02-05T14:37:13.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66b965b6]
2026-02-05T14:37:13.785+09:00  WARN 32176 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 실패 - username: test_accountatn
2026-02-05T14:37:13.785+09:00  WARN 32176 --- [http-nio-8080-exec-4] SECURITY                                 : LOGIN_FAILURE username=test_accountatn
2026-02-05T14:37:13.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:13.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-02-05T14:37:13.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:16.711+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-05T14:37:16.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-05T14:37:16.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-05T14:37:16.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-05T14:37:16.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-05T14:37:16.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-05T14:37:16.723+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountant, password=1234)]
2026-02-05T14:37:16.726+09:00  INFO 32176 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountant
2026-02-05T14:37:16.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:16.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ec157] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:16.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534506901 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:16.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-05T14:37:16.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-02-05T14:37:16.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-05T14:37:16.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ec157]
2026-02-05T14:37:16.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:16.858+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a88ab4d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:16.858+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567805664 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:16.858+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:37:16.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 7(Long)
2026-02-05T14:37:16.864+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-05T14:37:16.864+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a88ab4d]
2026-02-05T14:37:16.865+09:00  INFO 32176 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 7, role: ACCOUNTANT, companyId: 3
2026-02-05T14:37:16.866+09:00  INFO 32176 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=7 username=test_accountant role=ACCOUNTANT
2026-02-05T14:37:16.867+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:16.867+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=7, username=test_accountant, pas (truncated)...]
2026-02-05T14:37:16.868+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:17.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-05T14:37:17.837+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-05T14:37:17.843+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-05T14:37:17.851+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-05T14:37:17.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-05T14:37:17.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-05T14:37:17.914+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:17.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a96a6f4] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:17.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1393867818 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:17.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-05T14:37:17.936+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 7(Long)
2026-02-05T14:37:17.940+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-05T14:37:17.942+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a96a6f4]
2026-02-05T14:37:17.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:17.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-05T14:37:17.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:18.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.039+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:18.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:18.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:18.049+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:18.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:18.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:18.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:18.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:18.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:18.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:18.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:18.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:18.057+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:18.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:18.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.075+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:18.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:18.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.074+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:18.074+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:18.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:18.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.089+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:18.089+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:18.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.091+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:18.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.098+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:18.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be4613d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2731d458] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:18.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1824561] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39d3aba1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1180243677 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T14:37:18.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648759907 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:18.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:18.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@680453096 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1253144697 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36765bab] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:18.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:18.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:18.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T14:37:18.140+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.140+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810621620 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.144+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:18.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:18.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:18.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.157+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.159+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be4613d]
2026-02-05T14:37:18.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:18.166+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2731d458]
2026-02-05T14:37:18.166+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:18.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.167+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39d3aba1]
2026-02-05T14:37:18.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1824561]
2026-02-05T14:37:18.168+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433b9978] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220733d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.173+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.174+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:18.174+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f2a4bc5] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.175+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62900644] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.175+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605346955 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.175+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441784269 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.175+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bac017d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.176+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36765bab]
2026-02-05T14:37:18.176+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1116079832 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.176+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140876176 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T14:37:18.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.182+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.182+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.183+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:37:18.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c6022] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616865907 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:18.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@778605584 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-05T14:37:18.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.191+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220733d]
2026-02-05T14:37:18.193+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433b9978]
2026-02-05T14:37:18.195+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.196+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62900644]
2026-02-05T14:37:18.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f2a4bc5]
2026-02-05T14:37:18.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:18.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bac017d]
2026-02-05T14:37:18.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-05T14:37:18.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c6022]
2026-02-05T14:37:18.207+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.208+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.209+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c7fc798] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.209+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c325b8] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:18.224+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.225+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858028149 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.227+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845114374 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T14:37:18.234+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:18.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:18.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.243+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.248+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.255+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.256+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.263+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:18.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.278+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.288+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:18.290+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.304+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T14:37:18.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c325b8]
2026-02-05T14:37:18.310+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.307+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.309+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.311+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.311+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:18.312+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.312+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:18.315+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T14:37:18.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a91f78] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.323+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c7fc798]
2026-02-05T14:37:18.324+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.326+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:18.327+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964564016 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5365f6ad] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012460879 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:18.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:18.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:18.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40893037] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T14:37:18.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T14:37:18.338+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:18.340+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.340+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842562745 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:37:18.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:18.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604361a3] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.351+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.352+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:18.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050326129 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb94f42] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a91f78]
2026-02-05T14:37:18.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533778634 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T14:37:18.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74307475] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-05T14:37:18.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.362+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58006f7c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T14:37:18.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971865685 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5365f6ad]
2026-02-05T14:37:18.369+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270199259 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.369+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:18.369+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.372+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.375+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:18.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:18.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-05T14:37:18.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40893037]
2026-02-05T14:37:18.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T14:37:18.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb94f42]
2026-02-05T14:37:18.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604361a3]
2026-02-05T14:37:18.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:18.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:18.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:18.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6e7248] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-05T14:37:18.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:18.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58006f7c]
2026-02-05T14:37:18.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74307475]
2026-02-05T14:37:18.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594540474 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d13601a] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:18.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.422+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990612578 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.423+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:18.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:18.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebb6ce5] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.424+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737c762d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.425+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:18.425+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.432+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:18.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1167825857 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77084651 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.461+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:18.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.458+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab32ff4] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.462+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.462+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:18.470+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.470+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:18.471+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1172086147 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.471+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d13601a]
2026-02-05T14:37:18.471+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6e7248]
2026-02-05T14:37:18.473+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:18.473+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:18.473+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.475+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7587d7c7] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.476+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:18.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4092f1b8] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:18.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@740431629 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.496+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:18.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1444370944 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.502+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea437ed] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.520+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:18.521+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.532+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@600427627 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:18.532+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737c762d]
2026-02-05T14:37:18.533+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:18.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.533+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:18.534+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebb6ce5]
2026-02-05T14:37:18.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:18.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7587d7c7]
2026-02-05T14:37:18.540+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:18.542+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab32ff4]
2026-02-05T14:37:18.542+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.545+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:18.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:18.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebba9e5] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.565+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ef7b691] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4092f1b8]
2026-02-05T14:37:18.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:18.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b96f4d3] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:18.575+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074228371 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971677031 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.579+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:18.582+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941205722 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.584+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea437ed]
2026-02-05T14:37:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d629fd0] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:18.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2058003701 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:18.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ba0570] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.590+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.590+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:18.591+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@371086581 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:18.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.598+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74b98186] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@135643426 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b96f4d3]
2026-02-05T14:37:18.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebba9e5]
2026-02-05T14:37:18.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ef7b691]
2026-02-05T14:37:18.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.607+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.607+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.608+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ba0570]
2026-02-05T14:37:18.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:18.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27077954] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ea056d2] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141905616 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d629fd0]
2026-02-05T14:37:18.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.619+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566580905 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.620+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74b98186]
2026-02-05T14:37:18.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:18.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.641+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:18.646+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347a4eff] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.664+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7e25b0] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:18.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:18.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224381887 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@645079624 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:18.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:18.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.690+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T14:37:18.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:18.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27077954]
2026-02-05T14:37:18.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:18.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:18.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ea056d2]
2026-02-05T14:37:18.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:18.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:18.707+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.708+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bfa6950] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665549474 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.710+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T14:37:18.710+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:18.710+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.711+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5693284c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bace4bc] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347a4eff]
2026-02-05T14:37:18.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7e25b0]
2026-02-05T14:37:18.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@182051466 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134601172 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.721+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.723+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@103a2f21] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.730+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d541fae] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139540275 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@387b2867] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1539289933 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537566642 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:18.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T14:37:18.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.742+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:37:18.745+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bfa6950]
2026-02-05T14:37:18.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:18.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-05T14:37:18.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:18.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bace4bc]
2026-02-05T14:37:18.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d541fae]
2026-02-05T14:37:18.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@387b2867]
2026-02-05T14:37:18.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5693284c]
2026-02-05T14:37:18.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@103a2f21]
2026-02-05T14:37:18.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:18.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.769+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.777+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@320c9943] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.782+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.783+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60a49d71] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-05T14:37:18.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:18.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f858ed4] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118714042 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2098223012 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:18.794+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317530402 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T14:37:18.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.837+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.837+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.838+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T14:37:18.838+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:18.839+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.843+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:18.857+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T14:37:18.857+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.858+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:18.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T14:37:18.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:18.860+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.860+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.860+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.876+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.878+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60a49d71]
2026-02-05T14:37:18.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@320c9943]
2026-02-05T14:37:18.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f858ed4]
2026-02-05T14:37:18.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:18.894+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5127f63b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7ba376] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492548256 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c076d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192c2538] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1700616] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.911+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667814283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:18.914+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aef3a95] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:18.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128746464 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329361375 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:18.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580963266 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:18.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T14:37:18.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1790113531 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:18.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:18.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:18.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:18.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:37:18.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T14:37:18.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:18.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:18.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:18.937+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T14:37:18.938+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:18.942+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:18.942+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-05T14:37:18.967+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5127f63b]
2026-02-05T14:37:18.968+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:18.968+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:18.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c076d]
2026-02-05T14:37:18.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7ba376]
2026-02-05T14:37:18.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192c2538]
2026-02-05T14:37:18.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1700616]
2026-02-05T14:37:18.979+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T14:37:18.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f6b58a] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:18.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7af4096f] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aef3a95]
2026-02-05T14:37:18.986+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-05T14:37:18.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603148705 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:18.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@675bafd5] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe67b42] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:18.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493100595 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:18.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:18.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.009+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-05T14:37:18.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530994147 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588037150 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.012+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:19.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.022+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:19.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:19.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.035+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.035+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.039+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f6b58a]
2026-02-05T14:37:19.036+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:19.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:19.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.039+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.040+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.040+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:19.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:19.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7af4096f]
2026-02-05T14:37:19.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:19.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b20e5c7] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@675bafd5]
2026-02-05T14:37:19.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:19.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:19.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe67b42]
2026-02-05T14:37:19.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138985932 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:19.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d92ef10] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edd1fc1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568ce841] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.076+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200472688 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@926221039 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dd53d7] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.086+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082466165 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.091+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@987542969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.092+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.092+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:19.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:19.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:19.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:19.107+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:19.107+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.107+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b20e5c7]
2026-02-05T14:37:19.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:19.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7c8caf] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:19.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:19.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657b2375] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806241850 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568ce841]
2026-02-05T14:37:19.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dd53d7]
2026-02-05T14:37:19.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d92ef10]
2026-02-05T14:37:19.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edd1fc1]
2026-02-05T14:37:19.208+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77727661 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.209+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f85d36c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@161475ea] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0b3458] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63476484] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121987133 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410719508 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879814758 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.223+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170361402 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.224+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.225+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.225+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:19.226+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.232+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.235+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.235+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657b2375]
2026-02-05T14:37:19.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7c8caf]
2026-02-05T14:37:19.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.240+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:19.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0e529e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc5f66b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.241+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f85d36c]
2026-02-05T14:37:19.242+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406317697 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.243+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442059400 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.243+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.245+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.246+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33735585] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63476484]
2026-02-05T14:37:19.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@161475ea]
2026-02-05T14:37:19.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0b3458]
2026-02-05T14:37:19.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376579124 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.252+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.254+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.268+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.268+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:19.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:19.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e43c3bb] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.276+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0e529e]
2026-02-05T14:37:19.277+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.277+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.282+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.282+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc5f66b]
2026-02-05T14:37:19.283+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034523103 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.285+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.287+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:19.289+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:19.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.299+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f7c726] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3754fd1c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:19.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104554244 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701847859 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.308+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.323+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.324+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.326+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:19.326+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:19.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:19.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e43c3bb]
2026-02-05T14:37:19.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33735585]
2026-02-05T14:37:19.340+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:19.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a987810] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.357+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:19.359+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.360+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:19.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1252403427 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3754fd1c]
2026-02-05T14:37:19.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f7c726]
2026-02-05T14:37:19.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:19.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:19.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:19.375+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:19.375+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4abaeba6] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e58f50] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:19.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:19.377+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:19.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1519797232 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760927837 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:19.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a987810]
2026-02-05T14:37:19.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b497d3] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:19.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472519841 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30b3a85] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7c6c0d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:19.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861620609 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c0d87b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642635018 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e58f50]
2026-02-05T14:37:19.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4abaeba6]
2026-02-05T14:37:19.392+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:19.392+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930641892 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2829fed1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad218b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841776011 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450305283 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:19.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30b3a85]
2026-02-05T14:37:19.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b497d3]
2026-02-05T14:37:19.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c0d87b]
2026-02-05T14:37:19.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7c6c0d]
2026-02-05T14:37:19.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2829fed1]
2026-02-05T14:37:19.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f8674ca] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8638d46] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6063715c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.408+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352563373 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.408+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2132711830 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.408+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad218b]
2026-02-05T14:37:19.408+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381137963 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.409+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e3b99a] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.409+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1054546689 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:19.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@109ecadc] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.422+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.423+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T14:37:19.425+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119241789 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.427+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:19.427+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.428+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.429+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:19.430+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.430+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T14:37:19.432+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.432+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.433+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.434+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.434+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8638d46]
2026-02-05T14:37:19.434+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.434+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6063715c]
2026-02-05T14:37:19.434+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f8674ca]
2026-02-05T14:37:19.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@109ecadc]
2026-02-05T14:37:19.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e3b99a]
2026-02-05T14:37:19.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744a5ca8] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:19.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7f8c6a] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb716d8] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.438+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774868031 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367917416 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.440+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e73d05c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.441+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206588736 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.441+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T14:37:19.443+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.445+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706251617 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.453+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:37:19.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T14:37:19.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.463+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.466+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.468+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T14:37:19.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T14:37:19.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T14:37:19.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.491+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.491+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.491+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.491+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8e2619] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322242728 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@389d6a12] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-05T14:37:19.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@227795918 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T14:37:19.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744a5ca8]
2026-02-05T14:37:19.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:37:19.500+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T14:37:19.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.502+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:19.502+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-05T14:37:19.502+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T14:37:19.503+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e73d05c]
2026-02-05T14:37:19.503+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7f8c6a]
2026-02-05T14:37:19.503+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb716d8]
2026-02-05T14:37:19.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.506+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-05T14:37:19.509+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.526+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.528+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:19.537+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8e2619]
2026-02-05T14:37:19.538+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c55982] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.542+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:19.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d61d7ef] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T14:37:19.540+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad1d65] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.542+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.542+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88376918 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.543+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:19.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877936373 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@389d6a12]
2026-02-05T14:37:19.547+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596965374 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-05T14:37:19.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:19.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:19.558+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.559+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-05T14:37:19.559+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:19.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.575+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d15164a] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424210704 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.575+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:19.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:19.578+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-05T14:37:19.583+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:19.582+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:19.583+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:19.584+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.584+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:19.596+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.598+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:19.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@656764cc] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.601+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.601+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230467177 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:19.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79f5e927] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c55982]
2026-02-05T14:37:19.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad1d65]
2026-02-05T14:37:19.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d15164a]
2026-02-05T14:37:19.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d61d7ef]
2026-02-05T14:37:19.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835549410 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.607+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.607+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.607+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.608+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b45494f] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.609+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256fee8b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b45e914] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a655f09] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@345182444 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@287148406 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1043793264 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.619+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@656764cc]
2026-02-05T14:37:19.619+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1229469957 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:19.623+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.623+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.625+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.636+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64484e63] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:19.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.638+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79f5e927]
2026-02-05T14:37:19.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@978781986 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256fee8b]
2026-02-05T14:37:19.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.641+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.641+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.641+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b45494f]
2026-02-05T14:37:19.642+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.642+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b45e914]
2026-02-05T14:37:19.643+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d991ebb] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.643+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.644+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd37139] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.646+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.646+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a655f09]
2026-02-05T14:37:19.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802724606 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.651+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638768030 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:19.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571b042c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.658+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.659+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:19.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192662225 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-05T14:37:19.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:37:19.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-05T14:37:19.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:37:19.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64484e63]
2026-02-05T14:37:19.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d991ebb]
2026-02-05T14:37:19.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571b042c]
2026-02-05T14:37:19.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-05T14:37:19.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:19.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-05T14:37:19.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19943882] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fde6e60] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@284dc05d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd37139]
2026-02-05T14:37:19.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.721+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1065961093 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.722+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523040742 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.723+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662211356 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.724+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.724+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.724+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.725+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.725+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.725+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2521b4] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c192f06] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1754842064 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2050477683 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c3c84e5] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.741+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.742+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-05T14:37:19.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2050309334 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:19.745+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:37:19.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-05T14:37:19.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@284dc05d]
2026-02-05T14:37:19.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fde6e60]
2026-02-05T14:37:19.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19943882]
2026-02-05T14:37:19.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:37:19.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-05T14:37:19.775+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b73fbab] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.775+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2521b4]
2026-02-05T14:37:19.777+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bfd9fc] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.778+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a321bf0] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.779+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c192f06]
2026-02-05T14:37:19.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-05T14:37:19.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@771391920 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.782+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.782+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684590181 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.782+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113222172 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c3c84e5]
2026-02-05T14:37:19.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e492159] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-05T14:37:19.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749520805 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-05T14:37:19.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.801+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:19.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b73fbab]
2026-02-05T14:37:19.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-05T14:37:19.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bfd9fc]
2026-02-05T14:37:19.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-05T14:37:19.839+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.841+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:37:19.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:19.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a321bf0]
2026-02-05T14:37:19.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4396a752] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:37:19.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-05T14:37:19.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee52e99] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e492159]
2026-02-05T14:37:19.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@927773224 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:19.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-05T14:37:19.890+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-05T14:37:19.891+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956604032 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.891+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.891+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2321a63f] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.892+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.892+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.892+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-05T14:37:19.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db96f1e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227277360 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.893+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.894+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.895+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-05T14:37:19.896+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.897+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712884249 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:19.897+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.898+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.898+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-05T14:37:19.899+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:19.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667c0643] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:19.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559775867 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:19.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:37:19.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4396a752]
2026-02-05T14:37:19.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee52e99]
2026-02-05T14:37:19.906+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-05T14:37:19.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:19.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-05T14:37:19.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143c2b1c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db96f1e]
2026-02-05T14:37:19.909+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2321a63f]
2026-02-05T14:37:19.910+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.910+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71d663d4] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.911+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976702949 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:19.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638589585 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:37:19.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:19.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a00987e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.916+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-05T14:37:19.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-05T14:37:19.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1421789535 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.924+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667c0643]
2026-02-05T14:37:19.926+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:19.936+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.939+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:19.939+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-05T14:37:19.942+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-05T14:37:19.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:37:19.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143c2b1c]
2026-02-05T14:37:19.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71d663d4]
2026-02-05T14:37:19.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:19.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.957+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-05T14:37:19.957+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502ddfbe] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.958+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:19.958+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@304598700 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.966+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-05T14:37:19.973+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.973+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a00987e]
2026-02-05T14:37:19.975+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18248f1b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712928521 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:19.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:19.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502ddfbe]
2026-02-05T14:37:19.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:19.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:19.991+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e0d0ad] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:19.992+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@109979680 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:19.992+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:19.993+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:19.997+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long)
2026-02-05T14:37:19.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18248f1b]
2026-02-05T14:37:20.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9345f1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1735611855 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.003+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-02-05T14:37:20.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:20.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e0d0ad]
2026-02-05T14:37:20.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:20.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32fa8184] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.007+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211901134 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:20.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-05T14:37:20.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.009+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9345f1]
2026-02-05T14:37:20.009+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.009+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.010+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737cfa22] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.017+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847349105 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.019+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.019+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.026+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32fa8184]
2026-02-05T14:37:20.027+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:20.036+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737cfa22]
2026-02-05T14:37:20.050+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.051+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:20.051+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.692+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:20.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:37:20.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:20.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:37:20.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-05T14:37:20.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:20.707+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:37:20.708+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:20.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-05T14:37:20.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:37:20.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:20.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:37:20.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:20.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:37:20.721+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:37:20.722+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:20.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:20.728+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:20.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:37:20.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:20.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:20.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:20.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:20.742+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:37:20.743+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:37:20.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:20.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:37:20.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:20.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:20.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:37:20.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:37:20.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:20.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant", parameters={masked}
2026-02-05T14:37:20.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:20.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:20.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:37:20.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:20.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:20.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@314f362e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:20.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:37:20.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:20.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7533b73] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0096cf] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5341330f] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4279b601] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.769+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553336996 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:20.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a94faff] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1819329652 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:20.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:20.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314577097 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:20.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1792355499 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:20.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845779842 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617396053 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:20.775+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:20.775+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:20.775+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.775+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:20.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:20.778+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:20.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:20.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:20.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:20.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@314f362e]
2026-02-05T14:37:20.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b104f2e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436907500 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:20.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7533b73]
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 11
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4279b601]
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1261d5be] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701259054 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c935d30] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a94faff]
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5341330f]
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0096cf]
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603800293 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:20.791+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43206fa2] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1354c8] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c247cb9] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.796+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172686105 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.796+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681922723 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:20.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@339041811 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:20.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b104f2e]
2026-02-05T14:37:20.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:20.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.805+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:37:20.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:20.809+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:37:20.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:37:20.814+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:20.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e091456] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462988864 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:20.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c935d30]
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1261d5be]
2026-02-05T14:37:20.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c247cb9]
2026-02-05T14:37:20.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43206fa2]
2026-02-05T14:37:20.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1354c8]
2026-02-05T14:37:20.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:20.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290143f8] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ce1066] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20fb724b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.825+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:20.825+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.825+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1072554293 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:20.826+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822357476 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:20.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:20.826+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145719129 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:20.827+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:20.839+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:20.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:37:20.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 67(Long), 66(Long), 63(Long), 51(Long), 41(Long), 38(Long), 23(Long), 10(Long), 6(Long), 1(Long)
2026-02-05T14:37:20.837+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:20.840+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:37:20.843+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:37:20.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:20.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:37:20.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:37:20.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant", parameters={masked}
2026-02-05T14:37:20.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:37:20.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:37:20.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:37:20.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:37:20.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5762288e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829580615 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:20.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc2125f] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2147174639 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.855+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.855+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:20.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:20.869+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e091456]
2026-02-05T14:37:20.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@549ea98d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922280684 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:20.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.872+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 11
2026-02-05T14:37:20.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc2125f]
2026-02-05T14:37:20.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 11
2026-02-05T14:37:20.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290143f8]
2026-02-05T14:37:20.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@594bce9] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118063854 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f60861] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254856740 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:20.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:37:20.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5762288e]
2026-02-05T14:37:20.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:37:20.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@549ea98d]
2026-02-05T14:37:20.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@594bce9]
2026-02-05T14:37:20.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f60861]
2026-02-05T14:37:20.920+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20fb724b]
2026-02-05T14:37:20.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ce1066]
2026-02-05T14:37:20.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.922+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.923+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.923+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e6f13] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.924+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.924+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55312b92] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6574627e] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=76, drafterI (truncated)...]
2026-02-05T14:37:20.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2279cbc1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.926+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202590188 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:20.926+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f15acda] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1950491256 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:20.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160247757 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.938+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500220655 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:37:20.939+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.940+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331218558 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:20.941+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:20.941+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:20.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:20.943+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:20.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:20.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 67(Long), 66(Long), 63(Long), 51(Long), 41(Long), 38(Long), 23(Long), 10(Long), 6(Long), 1(Long)
2026-02-05T14:37:20.969+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:20.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:20.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:37:20.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:20.974+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.975+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 11
2026-02-05T14:37:20.975+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55312b92]
2026-02-05T14:37:20.975+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:37:20.975+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:20.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:20.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14e6f13]
2026-02-05T14:37:20.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6574627e]
2026-02-05T14:37:20.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2279cbc1]
2026-02-05T14:37:20.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f15acda]
2026-02-05T14:37:20.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:20.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@add7c8d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:20.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8da172] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4fab57] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458351103 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a11c1c] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac402b1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:20.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@969501159 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:20.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1785613106 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:20.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:20.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372247854 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:20.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244142004 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:20.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:20.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:20.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:20.992+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:37:21.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:21.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:21.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:21.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:21.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:37:21.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:21.025+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:37:21.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:37:21.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:37:21.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:37:21.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:37:21.089+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:21.092+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@add7c8d]
2026-02-05T14:37:21.093+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4fab57]
2026-02-05T14:37:21.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8da172]
2026-02-05T14:37:21.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a11c1c]
2026-02-05T14:37:21.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac402b1]
2026-02-05T14:37:21.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.104+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:21.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0aba29] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6074ff87] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bae0f9f] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=76, drafterI (truncated)...]
2026-02-05T14:37:21.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a38e7fb] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5799fde5] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384835929 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:21.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28102160 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:21.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829679529 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:37:21.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:21.118+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@646267228 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:21.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1025686573 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:37:21.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:37:21.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:21.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:21.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:21.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:21.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:37:21.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:21.141+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.140+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:21.142+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:21.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:37:21.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:37:21.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:37:21.189+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:37:21.192+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0aba29]
2026-02-05T14:37:21.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bae0f9f]
2026-02-05T14:37:21.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5799fde5]
2026-02-05T14:37:21.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6074ff87]
2026-02-05T14:37:21.199+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a38e7fb]
2026-02-05T14:37:21.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:21.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:21.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf3d7f1] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:37:21.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:21.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4192b7a6] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e03ec24] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648816052 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:37:21.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:21.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:21.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106815700 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:21.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588895008 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:21.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:21.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:37:21.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:21.207+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.208+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.208+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:37:21.260+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:37:21.265+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.269+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4192b7a6]
2026-02-05T14:37:21.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e03ec24]
2026-02-05T14:37:21.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf3d7f1]
2026-02-05T14:37:21.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:21.271+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ed4092] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3d210b] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:37:21.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721171694 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:21.273+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1837012580 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:21.275+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:21.277+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:21.280+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:21.282+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.283+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:21.291+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.293+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:37:21.294+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ed4092]
2026-02-05T14:37:21.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3d210b]
2026-02-05T14:37:21.296+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.298+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.299+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d827677] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bc868d] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@95634565 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:21.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571608040 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:37:21.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:37:21.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:21.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:37:21.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.308+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.308+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:37:21.314+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bc868d]
2026-02-05T14:37:21.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d827677]
2026-02-05T14:37:21.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:21.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:37:21.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:21.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c4271d2] was not registered for synchronization because synchronization is not active
2026-02-05T14:37:21.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:37:21.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842891747 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f8ed5fc] will not be managed by Spring
2026-02-05T14:37:21.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:37:21.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:37:21.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:37:21.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c4271d2]
2026-02-05T14:37:21.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:37:21.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:37:21.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:05.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:05.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-05T14:39:05.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-05T14:39:06.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.078+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-05T14:39:06.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-05T14:39:06.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-05T14:39:06.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.143+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-05T14:39:06.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53532f32] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6425038b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b2c677c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1433045046 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472069090 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451162776 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-05T14:39:06.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 7(Long)
2026-02-05T14:39:06.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.254+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-05T14:39:06.254+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.255+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53532f32]
2026-02-05T14:39:06.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b2c677c]
2026-02-05T14:39:06.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6425038b]
2026-02-05T14:39:06.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-05T14:39:06.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ac42d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.267+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f4eb965] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@122449750 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.272+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635666274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.279+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.304+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.378+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ac42d]
2026-02-05T14:39:06.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.379+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.379+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f4eb965]
2026-02-05T14:39:06.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:39:06.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:39:06.422+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.461+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.472+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.474+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-05T14:39:06.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.485+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:39:06.502+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f175867] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.510+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.515+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-05T14:39:06.516+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:39:06.517+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:06.518+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.521+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:06.533+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:39:06.534+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.535+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.535+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.537+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:06.538+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:06.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:39:06.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.540+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:39:06.540+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.540+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.541+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456822759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:06.543+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:39:06.543+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant", parameters={masked}
2026-02-05T14:39:06.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.545+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.545+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.546+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:06.546+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.546+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:06.546+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.547+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bf8135] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2bd323] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131897315 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b64a98] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2001042934 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2971085a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22de3196] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814083474 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.556+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.558+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.561+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100848382 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:06.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247523653 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:06.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f175867]
2026-02-05T14:39:06.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444a956a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bf8135]
2026-02-05T14:39:06.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2bd323]
2026-02-05T14:39:06.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1920765687 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:06.578+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414c7845] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b64a98]
2026-02-05T14:39:06.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137625456 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33524bf4] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.582+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.582+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.583+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.583+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47260790 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3ffcf] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.586+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2971085a]
2026-02-05T14:39:06.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.587+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@110466947 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22de3196]
2026-02-05T14:39:06.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.593+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.595+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ca67a8] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.595+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@444a956a]
2026-02-05T14:39:06.596+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2861656 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:06.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd452c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414c7845]
2026-02-05T14:39:06.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.601+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@786318245 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:06.602+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.603+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33524bf4]
2026-02-05T14:39:06.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.610+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41fe8b20] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.613+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3ffcf]
2026-02-05T14:39:06.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.619+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:06.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1674730762 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.631+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.633+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:06.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:06.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8171d5] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.641+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.664+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930557005 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:39:06.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.651+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:06.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:39:06.664+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ca67a8]
2026-02-05T14:39:06.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:06.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:39:06.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd452c]
2026-02-05T14:39:06.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:39:06.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:06.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:06.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:06.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:39:06.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41fe8b20]
2026-02-05T14:39:06.690+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:39:06.691+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cc161f3] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:39:06.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:06.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.707+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782198213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.707+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bae2b9d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8171d5]
2026-02-05T14:39:06.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@784073795 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6820e324] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:06.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405733704 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@586dc85c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.721+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:06.721+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.724+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.730+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1023870301 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:06.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.738+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cc161f3]
2026-02-05T14:39:06.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:06.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:06.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b207dca] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.742+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:06.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4992c35] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a346720] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 11
2026-02-05T14:39:06.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256487146 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bae2b9d]
2026-02-05T14:39:06.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870321068 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:06.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184893445 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:06.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6820e324]
2026-02-05T14:39:06.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.761+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:06.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d20d1c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7398e2e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@586dc85c]
2026-02-05T14:39:06.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776611032 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.783+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1752130606 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:06.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:39:06.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b207dca]
2026-02-05T14:39:06.785+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:39:06.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4992c35]
2026-02-05T14:39:06.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a346720]
2026-02-05T14:39:06.790+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:39:06.792+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.800+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.800+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ccd924d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bbebd03] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a1c719] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.815+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477749020 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:06.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:06.805+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:39:06.814+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@87680915 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:06.815+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862473107 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:06.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:06.821+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:39:06.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.837+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:39:06.840+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.845+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:39:06.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.849+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.849+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:39:06.849+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7398e2e]
2026-02-05T14:39:06.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d20d1c]
2026-02-05T14:39:06.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:39:06.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.882+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb6458e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.855+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.855+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.871+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:06.884+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a1c719]
2026-02-05T14:39:06.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63fd270] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1622537768 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.884+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d3e26a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.884+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a55c6c3] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1389466950 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:06.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:39:06.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:06.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102945823 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:06.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@827803039 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:06.914+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:06.914+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 67(Long), 66(Long), 63(Long), 51(Long), 41(Long), 38(Long), 23(Long), 10(Long), 6(Long), 1(Long)
2026-02-05T14:39:06.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bbebd03]
2026-02-05T14:39:06.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ccd924d]
2026-02-05T14:39:06.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:06.924+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:06.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:06.930+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:06.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:06.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:06.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 11
2026-02-05T14:39:06.969+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb6458e]
2026-02-05T14:39:06.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:06.957+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.968+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:06.971+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:06.977+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:39:06.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63fd270]
2026-02-05T14:39:06.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7831e8] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.986+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:06.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:06.993+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:06.994+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343646204 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:06.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:06.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant
2026-02-05T14:39:06.997+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1877c105] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:06.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 11
2026-02-05T14:39:07.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:07.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_accountant", parameters={masked}
2026-02-05T14:39:07.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621310505 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:07.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a55c6c3]
2026-02-05T14:39:07.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d3e26a]
2026-02-05T14:39:07.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:07.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:07.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.102+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.084+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.086+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:07.097+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f24f1b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49253338] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.161+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72821d68] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.164+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7831e8]
2026-02-05T14:39:07.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888877720 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:07.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:07.166+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089226948 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:07.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73947ff0] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1877c105]
2026-02-05T14:39:07.183+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1403974951 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:07.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:39:07.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=76, drafterI (truncated)...]
2026-02-05T14:39:07.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@527224971 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:07.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.209+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c09529] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.213+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:39:07.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:07.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:07.212+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@622396349 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:07.233+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.288+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:39:07.288+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f24f1b]
2026-02-05T14:39:07.314+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-05T14:39:07.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:39:07.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49253338]
2026-02-05T14:39:07.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:39:07.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72821d68]
2026-02-05T14:39:07.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55abc72] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f662ac6] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.346+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1664524629 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:07.345+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0cc646] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.346+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606054625 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:07.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:07.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1577575922 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:07.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 8
2026-02-05T14:39:07.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:39:07.348+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:39:07.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 67(Long), 66(Long), 63(Long), 51(Long), 41(Long), 38(Long), 23(Long), 10(Long), 6(Long), 1(Long)
2026-02-05T14:39:07.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:07.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73947ff0]
2026-02-05T14:39:07.351+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c09529]
2026-02-05T14:39:07.351+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.352+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.352+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.353+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e0ce1] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.353+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dbd407] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.353+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555405183 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:07.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387625032 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:07.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.355+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.363+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 11
2026-02-05T14:39:07.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e0ce1]
2026-02-05T14:39:07.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dbd407]
2026-02-05T14:39:07.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0cc646]
2026-02-05T14:39:07.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f662ac6]
2026-02-05T14:39:07.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:07.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:07.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=79, drafterId= (truncated)...]
2026-02-05T14:39:07.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:07.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5aa835] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.369+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a9c8348] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:07.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:07.371+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:07.374+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1153327950 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:07.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411560135 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:07.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55abc72]
2026-02-05T14:39:07.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:07.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:07.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8a43d8] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055116119 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:07.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:07.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a9c8348]
2026-02-05T14:39:07.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5aa835]
2026-02-05T14:39:07.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:07.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.447+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8a43d8]
2026-02-05T14:39:07.448+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=76, drafterI (truncated)...]
2026-02-05T14:39:07.448+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2e54dc] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.448+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:07.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905859116 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:07.450+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@136ea019] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.454+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:07.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793158959 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:07.465+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_accountant(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:07.466+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-05T14:39:07.467+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-05T14:39:07.472+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:07.474+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2e54dc]
2026-02-05T14:39:07.479+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:07.479+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-02-05T14:39:07.480+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:39:07.481+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@136ea019]
2026-02-05T14:39:07.482+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:07.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:07.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28bf6d8e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:07.485+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312255720 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:07.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:07.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-05T14:39:07.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:07.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28bf6d8e]
2026-02-05T14:39:07.492+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:07.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:07.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:17.528+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-05T14:39:17.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-05T14:39:17.541+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/logout
2026-02-05T14:39:17.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-05T14:39:17.545+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-05T14:39:17.548+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-05T14:39:17.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI3IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-05T14:39:17.569+09:00  INFO 32176 --- [http-nio-8080-exec-3] SECURITY                                 : LOGOUT userId=7
2026-02-05T14:39:17.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:17.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-05T14:39:17.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:17.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:17.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:17.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-05T14:39:17.636+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-05T14:39:20.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-05T14:39:20.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-05T14:39:20.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-05T14:39:20.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-05T14:39:20.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-05T14:39:20.395+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-05T14:39:20.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-02-05T14:39:20.397+09:00  INFO 32176 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-02-05T14:39:20.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:20.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d52e3dd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:20.411+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1900617396 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:20.412+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-05T14:39:20.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-02-05T14:39:20.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-05T14:39:20.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d52e3dd]
2026-02-05T14:39:20.515+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:20.515+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195ed87c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:20.516+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548180308 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:20.516+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:20.517+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:20.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:20.519+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195ed87c]
2026-02-05T14:39:20.520+09:00  INFO 32176 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3
2026-02-05T14:39:20.520+09:00  INFO 32176 --- [http-nio-8080-exec-4] SECURITY                                 : LOGIN_SUCCESS userId=8 username=test_tax role=TAX_ACCOUNTANT
2026-02-05T14:39:20.520+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:20.521+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=8, username=test_tax, password=n (truncated)...]
2026-02-05T14:39:20.521+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:20.868+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-05T14:39:20.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-05T14:39:20.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-05T14:39:20.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-05T14:39:20.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-05T14:39:20.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-05T14:39:20.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:20.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3004f019] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:20.919+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330220040 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:20.930+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-05T14:39:21.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-05T14:39:21.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-05T14:39:21.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3004f019]
2026-02-05T14:39:21.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-05T14:39:21.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:21.578+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:21.579+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:21.582+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.611+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:21.613+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:21.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.625+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:21.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.625+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.628+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:21.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:21.633+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.638+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:21.638+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.642+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:21.644+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:21.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:21.646+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:21.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:21.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:21.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:21.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:21.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:21.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:21.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.651+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:21.651+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:21.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:21.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:21.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:21.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:21.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:21.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:21.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:21.656+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.656+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.660+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.663+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.663+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e68cb92] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.664+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.664+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548d0942] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.667+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.668+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb4720b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203e25c5] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723989c9] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a0b743a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067797605 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426591999 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:21.674+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@91780173 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:21.674+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:21.674+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101425136 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:21.677+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5718590 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.677+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537639288 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:21.677+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:39:21.678+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:21.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:21.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:21.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:39:21.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:21.683+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:21.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:21.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:21.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:21.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:21.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:21.690+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548d0942]
2026-02-05T14:39:21.692+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:21.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:21.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:21.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:39:21.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:21.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:21.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb4720b]
2026-02-05T14:39:21.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203e25c5]
2026-02-05T14:39:21.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e68cb92]
2026-02-05T14:39:21.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a0b743a]
2026-02-05T14:39:21.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723989c9]
2026-02-05T14:39:21.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:39:21.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1564d394] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:21.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:21.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:39:21.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.706+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:21.708+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@287629838 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:21.710+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:21.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:21.727+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:21.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:39:21.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.738+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:21.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:21.742+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:21.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:21.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:21.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:21.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:21.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:21.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:21.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:21.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af00260] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:39:21.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.761+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22483456] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67acae2c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1013519434 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1564d394]
2026-02-05T14:39:21.765+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe06a39] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883790043 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:21.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@313277317 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.768+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949002356 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:21.769+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:21.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:39:21.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:21.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6edc1f] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:21.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.774+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:21.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@559236907 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:21.782+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:21.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:21.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af00260]
2026-02-05T14:39:21.794+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:21.793+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:21.796+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39603a3e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:21.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864668784 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.798+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:21.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:21.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.800+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:39:21.801+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:21.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe06a39]
2026-02-05T14:39:21.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67acae2c]
2026-02-05T14:39:21.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22483456]
2026-02-05T14:39:21.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:39:21.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.805+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51fe120] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.805+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6edc1f]
2026-02-05T14:39:21.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:21.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cc0715] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:39:21.807+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.809+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366107075 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:21.812+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.814+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278070958 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.815+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39603a3e]
2026-02-05T14:39:21.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:21.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:21.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.821+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:21.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:21.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:21.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70db7cf5] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:21.834+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1221724442 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:21.863+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.863+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:21.867+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:21.869+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:21.882+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:21.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cc0715]
2026-02-05T14:39:21.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51fe120]
2026-02-05T14:39:21.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:21.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:21.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:21.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:21.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:21.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.889+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd1a6da] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.897+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38625da8] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:21.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1071113434 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707963676 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:21.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:21.910+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70db7cf5]
2026-02-05T14:39:21.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.912+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:21.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.913+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:21.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9d3a1b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:21.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:21.917+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@656396ce] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402e03a6] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2003022106 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:21.925+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:21.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419278399 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:21.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807344514 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:21.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:21.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:21.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:21.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38625da8]
2026-02-05T14:39:21.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:21.935+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd1a6da]
2026-02-05T14:39:21.936+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.936+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:21.938+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.938+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.939+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.940+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f307ea] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df28070] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b03b1a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.947+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314083379 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:21.947+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742146427 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:21.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:21.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@387428416 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9d3a1b]
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402e03a6]
2026-02-05T14:39:21.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@656396ce]
2026-02-05T14:39:21.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21dda064] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933708198 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:21.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b178933] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:21.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:39:21.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:21.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df28070]
2026-02-05T14:39:21.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f307ea]
2026-02-05T14:39:21.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454335684 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b03b1a]
2026-02-05T14:39:21.955+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:39:21.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.960+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:21.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.964+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:21.966+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4773e3ed] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.967+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff5df89] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:21.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697ef0ab] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.970+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:39:21.973+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061191285 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517675635 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:21.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:21.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@109069258 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:21.973+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21dda064]
2026-02-05T14:39:21.973+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:21.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:21.976+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:21.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:21.981+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:21.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:21.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:39:21.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:21.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:21.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b178933]
2026-02-05T14:39:21.984+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:21.985+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:21.987+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:21.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5169511e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.989+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697ef0ab]
2026-02-05T14:39:21.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615c23a4] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.990+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176503313 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:21.992+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:21.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112961556 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:21.995+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:21.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31870599] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:21.996+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:21.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:21.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803360938 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:21.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:22.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff5df89]
2026-02-05T14:39:22.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.002+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4773e3ed]
2026-02-05T14:39:22.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25078138] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:22.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@882842502 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5169511e]
2026-02-05T14:39:22.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615c23a4]
2026-02-05T14:39:22.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8757c71] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31870599]
2026-02-05T14:39:22.007+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.007+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.013+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.013+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354861081 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:22.015+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a77726] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:22.017+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.017+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9e1ac1] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.017+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1943874189 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:22.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.022+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966895878 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:22.022+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.034+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.039+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25078138]
2026-02-05T14:39:22.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.043+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.044+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd60a97] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8757c71]
2026-02-05T14:39:22.052+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9e1ac1]
2026-02-05T14:39:22.052+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a77726]
2026-02-05T14:39:22.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79779412 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.053+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1534e677] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.065+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914458196 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:22.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.087+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd60a97]
2026-02-05T14:39:22.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54515454] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046721787 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1534e677]
2026-02-05T14:39:22.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.165+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.171+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.174+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.176+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa8cec] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.182+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.185+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@911197530 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:22.186+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.193+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:22.195+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.196+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:22.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:22.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:22.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54515454]
2026-02-05T14:39:22.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.200+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0771c1] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:22.202+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:22.203+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279605153 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:22.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:22.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:22.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.210+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa8cec]
2026-02-05T14:39:22.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.207+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.209+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.216+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.230+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.234+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.236+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.236+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c2e0d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.238+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0771c1]
2026-02-05T14:39:22.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.239+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29552a5c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.239+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f811a86] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.248+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6499dfec] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.248+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423007630 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:22.256+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.249+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63505bc4] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72e1350e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697593297 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1978526903 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.256+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498458711 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:22.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.264+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@792856906 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:22.265+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@127785962 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.265+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:22.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:39:22.266+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:22.270+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:22.289+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.295+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.300+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.302+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:22.303+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.316+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c2e0d]
2026-02-05T14:39:22.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:39:22.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:22.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:39:22.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:22.320+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29552a5c]
2026-02-05T14:39:22.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f811a86]
2026-02-05T14:39:22.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6499dfec]
2026-02-05T14:39:22.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72e1350e]
2026-02-05T14:39:22.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63505bc4]
2026-02-05T14:39:22.324+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.333+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:39:22.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:39:22.334+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:22.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:22.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4905b82a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.337+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.340+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.341+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678053045 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:22.342+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.344+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.346+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:22.356+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.358+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:22.364+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:22.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:22.365+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:22.366+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:39:22.367+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:22.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.370+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.373+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3276e16a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1051901431 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:22.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:22.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:39:22.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.382+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:22.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:22.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:22.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4905b82a]
2026-02-05T14:39:22.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:22.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.386+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.391+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3276e16a]
2026-02-05T14:39:22.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:39:22.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.390+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.392+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.392+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.393+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.394+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26f0fc5f] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504e3c3d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bdb55e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330cad0b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.398+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b3097b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966973408 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:22.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438051055 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1798621851 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:22.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672731473 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1194993510 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:22.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:39:22.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.402+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:22.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:22.403+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:22.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:22.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.405+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.406+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.407+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:22.408+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.410+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:22.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb9f1f0] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504e3c3d]
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26f0fc5f]
2026-02-05T14:39:22.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bdb55e]
2026-02-05T14:39:22.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330cad0b]
2026-02-05T14:39:22.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b3097b]
2026-02-05T14:39:22.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993930001 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.418+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5401317a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:39:22.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:22.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7078633] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:39:22.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963933715 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.420+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370822445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.422+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.429+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:22.435+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.437+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:39:22.439+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.442+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb9f1f0]
2026-02-05T14:39:22.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c642bd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@394533188 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.452+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.453+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:39:22.453+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.454+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.454+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7078633]
2026-02-05T14:39:22.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5401317a]
2026-02-05T14:39:22.456+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.459+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.462+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:39:22.463+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c72ca65] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.463+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.466+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832941168 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.468+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.468+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.469+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.469+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c642bd]
2026-02-05T14:39:22.469+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.473+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d3cb2c2] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.473+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.474+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1279182962 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.475+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c72ca65]
2026-02-05T14:39:22.476+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.478+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.481+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48315dd1] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.481+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.481+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854230864 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.482+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d3cb2c2]
2026-02-05T14:39:22.485+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.485+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60840f08] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416680824 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48315dd1]
2026-02-05T14:39:22.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6ca21d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045886324 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.487+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.488+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60840f08]
2026-02-05T14:39:22.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64243c74] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.489+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@613979063 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.490+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6ca21d]
2026-02-05T14:39:22.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.493+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3280ed47] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.494+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814224192 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.495+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.495+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3280ed47]
2026-02-05T14:39:22.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64243c74]
2026-02-05T14:39:22.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276dd625] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651480864 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.500+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276dd625]
2026-02-05T14:39:22.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6059f35e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.505+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692903310 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.505+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.505+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.512+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6059f35e]
2026-02-05T14:39:22.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.514+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.514+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.656+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.656+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.657+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.659+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.660+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.666+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.666+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.670+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:22.667+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.667+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:22.671+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:22.671+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.671+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:22.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:22.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-05T14:39:22.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-05T14:39:22.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:22.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:22.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.674+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:22.676+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-05T14:39:22.677+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:22.678+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:22.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:22.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.683+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.683+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:22.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60760722] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e215bf] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.685+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2119b55d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327160177 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615393da] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1587552393 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:22.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c07a626] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147921253 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:22.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1516156893 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-05T14:39:22.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@165191220 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:22.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:22.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:22.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:22.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.691+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:22.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-05T14:39:22.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60760722]
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102984a6] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615393da]
2026-02-05T14:39:22.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e215bf]
2026-02-05T14:39:22.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c07a626]
2026-02-05T14:39:22.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2119b55d]
2026-02-05T14:39:22.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1077333654 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d2aced] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-05T14:39:22.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-05T14:39:22.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:22.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608656430 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:22.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:22.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-05T14:39:22.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102984a6]
2026-02-05T14:39:22.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c89079] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-05T14:39:22.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723003026 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d2aced]
2026-02-05T14:39:22.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-05T14:39:22.721+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:22.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c89079]
2026-02-05T14:39:22.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764c8bda] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161070130 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764c8bda]
2026-02-05T14:39:22.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@129b8280] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821010 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:22.741+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:22.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-05T14:39:22.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@129b8280]
2026-02-05T14:39:22.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e17056e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.747+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274076590 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.748+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e17056e]
2026-02-05T14:39:22.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:22.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516a5e73] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:22.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925900101 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:22.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:22.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:22.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:22.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516a5e73]
2026-02-05T14:39:22.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:22.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:22.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:27.347+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:27.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-05T14:39:27.350+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:27.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:27.443+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:27.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:27.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:27.478+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:27.482+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-05T14:39:27.529+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:27.538+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:27.538+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-05T14:39:27.545+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.569+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:27.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-05T14:39:27.574+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406478b7] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.575+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:27.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-05T14:39:27.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:27.581+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-05T14:39:27.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1fbdaf] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ed1f6] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479367602 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:27.665+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:27.667+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-05T14:39:27.668+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-05T14:39:27.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:27.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:27.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-05T14:39:27.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:27.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-05T14:39:27.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:27.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:27.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-05T14:39:27.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-05T14:39:27.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:27.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-05T14:39:27.719+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-05T14:39:27.722+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:27.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049051354 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:27.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@873086624 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:27.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:27.766+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:27.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-05T14:39:27.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:27.771+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:27.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406478b7]
2026-02-05T14:39:27.786+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:27.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-05T14:39:27.788+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-05T14:39:27.789+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:27.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:27.797+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:27.800+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:27.802+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:27.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:27.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:27.815+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:27.806+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:27.810+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-05T14:39:27.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-05T14:39:27.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:27.813+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:27.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:27.824+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.825+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339cc6e4] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.829+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885964603 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:27.816+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:27.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-05T14:39:27.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ed1f6]
2026-02-05T14:39:27.821+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1fbdaf]
2026-02-05T14:39:27.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-05T14:39:27.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:27.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:27.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:27.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:27.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:27.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:27.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:27.833+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c72927] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.834+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-05T14:39:27.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:27.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:27.847+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-05T14:39:27.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:27.880+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.884+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:27.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-05T14:39:27.899+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:27.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:27.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:27.886+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:27.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:27.887+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25bee4fd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.896+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864508163 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:27.896+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:27.898+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a0d61] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:27.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:27.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:27.905+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339cc6e4]
2026-02-05T14:39:27.907+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.923+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:27.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:27.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:27.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:27.933+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@881068358 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:27.972+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-05T14:39:27.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:27.948+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@66502084 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:27.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:27.967+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-05T14:39:27.967+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:27.981+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-05T14:39:27.982+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:27.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:27.983+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:27.988+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:27.997+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c72927]
2026-02-05T14:39:27.997+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:27.998+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-05T14:39:27.999+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-05T14:39:28.000+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.001+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:28.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.005+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:28.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-05T14:39:28.006+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.010+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-05T14:39:28.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a87e23] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749ad4df] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.021+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-05T14:39:28.031+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:28.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-05T14:39:28.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:28.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1545105126 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:28.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1748592414 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:28.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25bee4fd]
2026-02-05T14:39:28.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:28.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27a0d61]
2026-02-05T14:39:28.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:28.064+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:28.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-05T14:39:28.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:28.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-05T14:39:28.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-05T14:39:28.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:28.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:28.111+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.089+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.110+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.112+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d65c8ed] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.113+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.113+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.114+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206731761 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:28.117+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:28.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.124+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:28.125+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-05T14:39:28.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a87e23]
2026-02-05T14:39:28.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-05T14:39:28.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-05T14:39:28.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.134+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.140+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6895433e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205715005 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:28.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749ad4df]
2026-02-05T14:39:28.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-05T14:39:28.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:28.147+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fb2bdba] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:28.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.148+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:28.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:28.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841924873 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:28.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.155+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.155+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-05T14:39:28.155+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:28.169+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.170+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:28.172+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.184+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.187+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-05T14:39:28.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.188+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d65c8ed]
2026-02-05T14:39:28.190+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-05T14:39:28.193+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.197+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53710d63] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:28.198+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-05T14:39:28.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8896dd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@456009716 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:28.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-05T14:39:28.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6895433e]
2026-02-05T14:39:28.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-05T14:39:28.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774172566 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:28.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:28.222+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-05T14:39:28.224+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-05T14:39:28.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.231+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.250+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:28.235+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:28.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:28.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:28.237+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fb2bdba]
2026-02-05T14:39:28.251+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-05T14:39:28.253+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.258+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.260+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.280+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.281+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:28.282+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.301+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:28.312+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.317+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-05T14:39:28.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-05T14:39:28.318+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53710d63]
2026-02-05T14:39:28.322+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.323+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@325a23d1] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.319+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:28.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.321+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-05T14:39:28.327+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771776748 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:28.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699115fd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.330+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-05T14:39:28.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:28.329+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:28.330+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:28.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022318029 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:28.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8896dd]
2026-02-05T14:39:28.331+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.335+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-05T14:39:28.336+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:28.338+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-05T14:39:28.339+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.343+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.419+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.431+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-05T14:39:28.431+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-05T14:39:28.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.450+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.452+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.466+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-05T14:39:28.469+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.469+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.482+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6387db71] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.483+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@325a23d1]
2026-02-05T14:39:28.484+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-05T14:39:28.486+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-05T14:39:28.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1806698636 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:28.497+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a45be05] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.498+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:28.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:28.499+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:28.500+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:28.500+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104830 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:28.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-05T14:39:28.501+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.504+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699115fd]
2026-02-05T14:39:28.506+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.509+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-05T14:39:28.511+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:28.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.513+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.514+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-05T14:39:28.520+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:28.522+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-05T14:39:28.523+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.523+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-05T14:39:28.529+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:28.532+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:28.535+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-05T14:39:28.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344ab67c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.539+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-05T14:39:28.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:28.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6387db71]
2026-02-05T14:39:28.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@733774030 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:28.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-05T14:39:28.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a45be05]
2026-02-05T14:39:28.556+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.556+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:28.559+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:28.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.570+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:28.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:28.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c1b5dbd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5b5b78] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.608+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:28.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:28.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854231757 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:28.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756987136 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:28.615+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.670+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.671+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47638894] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@95272949 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:28.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:28.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-05T14:39:28.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-05T14:39:28.663+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:28.666+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66afd3cf] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.668+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:28.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-05T14:39:28.686+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344ab67c]
2026-02-05T14:39:28.694+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.687+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-05T14:39:28.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160662359 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:28.688+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.695+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-05T14:39:28.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:28.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:28.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:28.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-05T14:39:28.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c1b5dbd]
2026-02-05T14:39:28.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47638894]
2026-02-05T14:39:28.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:28.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-05T14:39:28.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:28.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5b5b78]
2026-02-05T14:39:28.706+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-05T14:39:28.706+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-05T14:39:28.707+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2650577a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.708+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.714+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.717+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-05T14:39:28.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-05T14:39:28.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100059148 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:28.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.724+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcdfa18] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.725+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@817332999 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:28.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.722+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:28.723+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:28.729+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:28.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:28.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-05T14:39:28.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:28.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:28.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:28.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30221693] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375589271 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:28.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:28.734+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-05T14:39:28.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:28.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.735+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-05T14:39:28.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-05T14:39:28.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-05T14:39:28.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-05T14:39:28.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-05T14:39:28.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-05T14:39:28.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-05T14:39:28.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-05T14:39:28.737+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.738+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.738+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16782c4e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-05T14:39:28.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.746+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@269718252 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:28.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66afd3cf]
2026-02-05T14:39:28.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:28.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-05T14:39:28.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-05T14:39:28.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-05T14:39:28.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-05T14:39:28.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c9be93] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30221693]
2026-02-05T14:39:28.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2650577a]
2026-02-05T14:39:28.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcdfa18]
2026-02-05T14:39:28.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:28.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1328146082 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:28.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.758+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-05T14:39:28.759+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.762+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:28.762+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-05T14:39:28.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-05T14:39:28.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-05T14:39:28.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-05T14:39:28.770+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-05T14:39:28.776+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.783+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.784+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16782c4e]
2026-02-05T14:39:28.817+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.799+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-05T14:39:28.801+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.818+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-05T14:39:28.819+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-05T14:39:28.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.822+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-05T14:39:28.820+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-05T14:39:28.829+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-05T14:39:28.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-05T14:39:28.836+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-05T14:39:28.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-05T14:39:28.883+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.904+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c9be93]
2026-02-05T14:39:28.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-05T14:39:28.915+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:28.927+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a7f857] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e6c524] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.928+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623e03a8] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:28.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877234892 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:28.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817170317 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:28.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061097677 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:28.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-05T14:39:28.930+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-05T14:39:28.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-05T14:39:28.931+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.932+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-05T14:39:28.934+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-05T14:39:28.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-05T14:39:28.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-05T14:39:28.946+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-05T14:39:28.949+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a7f857]
2026-02-05T14:39:28.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e6c524]
2026-02-05T14:39:28.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623e03a8]
2026-02-05T14:39:28.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:28.954+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-05T14:39:28.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-05T14:39:28.957+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-05T14:39:28.959+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.961+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:28.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.530+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:31.533+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:39:31.533+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:31.536+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-05T14:39:31.536+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:31.536+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:31.544+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:39:31.546+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:31.547+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-05T14:39:31.549+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:31.550+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-05T14:39:31.551+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:31.552+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:31.553+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:31.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:31.554+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:39:31.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:31.555+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:31.556+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:31.556+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:31.558+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:31.559+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:39:31.559+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:31.560+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:31.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:31.563+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:31.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:39:31.564+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:31.565+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:39:31.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:31.566+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:31.567+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:31.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:39:31.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:31.568+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:39:31.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax", parameters={masked}
2026-02-05T14:39:31.571+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:31.572+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:31.573+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:31.575+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:39:31.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:31.576+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36468a6d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.577+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.579+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.579+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.580+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c5617d3] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.584+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28139821] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2246ccc9] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.588+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1064302c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.589+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405496650 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:31.592+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdbe479] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.596+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.600+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032921800 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:31.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@130654450 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:31.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1286891785 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:31.605+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@395521334 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:31.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034869310 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:31.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.606+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.607+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:31.614+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.616+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.617+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36468a6d]
2026-02-05T14:39:31.619+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.621+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.622+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:31.624+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:31.632+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-02-05T14:39:31.633+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:31.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:31.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:31.640+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdbe479]
2026-02-05T14:39:31.642+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c5617d3]
2026-02-05T14:39:31.646+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1064302c]
2026-02-05T14:39:31.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28139821]
2026-02-05T14:39:31.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2246ccc9]
2026-02-05T14:39:31.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:39:31.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.651+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b88c31c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:39:31.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-02-05T14:39:31.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c3d5ee] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:31.651+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:31.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1870174913 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:31.652+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:31.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1708853309 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:31.653+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:31.659+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-05T14:39:31.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:31.672+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22bcf075] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.678+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:31.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/my-approvals
2026-02-05T14:39:31.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:31.680+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1303826741 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:31.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.683+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:31.684+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-05T14:39:31.689+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:31.690+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.693+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b88c31c]
2026-02-05T14:39:31.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:31.696+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-05T14:39:31.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax", parameters={masked}
2026-02-05T14:39:31.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.697+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c3d5ee]
2026-02-05T14:39:31.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.698+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:31.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-05T14:39:31.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:31.699+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.700+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3829f75d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.701+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.702+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e500d19] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.703+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@353649511 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:31.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6597139] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bfaf55f] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2471e9a7] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.704+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22bcf075]
2026-02-05T14:39:31.705+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872859032 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:31.709+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.711+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@342364441 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:31.712+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605732061 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:31.712+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091888842 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:31.712+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.713+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.715+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.716+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1775f274] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.718+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.720+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.726+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.731+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:31.732+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.733+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1385142199 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:31.736+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3829f75d]
2026-02-05T14:39:31.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:31.739+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:31.740+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-02-05T14:39:31.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e500d19]
2026-02-05T14:39:31.749+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6597139]
2026-02-05T14:39:31.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c0e257c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2471e9a7]
2026-02-05T14:39:31.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bfaf55f]
2026-02-05T14:39:31.750+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.751+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.752+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199927487 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:31.753+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.754+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.755+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198795c7] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.756+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:31.757+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.760+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.761+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18da1ecf] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.764+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-02-05T14:39:31.767+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389114667 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:31.772+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.773+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1775f274]
2026-02-05T14:39:31.778+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.780+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869130402 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:31.781+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.787+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.795+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-05T14:39:31.803+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.804+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.823+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154b7723] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.830+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-05T14:39:31.831+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756404652 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:31.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-05T14:39:31.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.832+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-05T14:39:31.834+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-05T14:39:31.835+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.837+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17249096] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.848+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c0e257c]
2026-02-05T14:39:31.849+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@826280870 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:31.851+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.851+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-05T14:39:31.852+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@91a740f] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.853+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-05T14:39:31.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.854+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:31.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70419861 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:31.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18da1ecf]
2026-02-05T14:39:31.861+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.856+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198795c7]
2026-02-05T14:39:31.859+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.862+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f72f9] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.863+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.870+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:31.872+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.872+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1229666421 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:31.879+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:39:31.880+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-05T14:39:31.880+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154b7723]
2026-02-05T14:39:31.881+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.882+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.895+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.885+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17249096]
2026-02-05T14:39:31.888+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.897+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:31.898+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e854d6] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.900+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-05T14:39:31.901+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@987027207 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:31.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:31.902+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.903+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.908+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:31.918+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@91a740f]
2026-02-05T14:39:31.921+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:31.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.929+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f72f9]
2026-02-05T14:39:31.944+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70556059] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.945+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:31.950+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716560464 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:31.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5d5d58] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e854d6]
2026-02-05T14:39:31.951+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:31.952+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1906265712 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:31.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:31.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:31.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.953+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c75296] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:31.956+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:31.960+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1111488060 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:31.962+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:31.980+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:32.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:32.016+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:32.046+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5d5d58]
2026-02-05T14:39:32.047+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70556059]
2026-02-05T14:39:32.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:32.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:32.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:32.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c75296]
2026-02-05T14:39:32.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:39:32.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78ed799f] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:32.058+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:32.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:32.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@593594739 wrapping com.mysql.cj.jdbc.ConnectionImpl@3527ca00] will not be managed by Spring
2026-02-05T14:39:32.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180c9af3] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:32.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:32.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1443969158 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:32.073+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:32.074+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:32.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:32.090+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:32.091+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:32.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78ed799f]
2026-02-05T14:39:32.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180c9af3]
2026-02-05T14:39:32.097+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:32.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:32.103+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:32.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e24f17c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:32.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:32.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@839070025 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:32.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:32.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:32.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:32.162+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e24f17c]
2026-02-05T14:39:32.179+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:32.201+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:32.227+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:39.013+09:00 DEBUG 32176 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=2&size=10
2026-02-05T14:39:39.034+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-02-05T14:39:39.038+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:39.041+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=2&size=10
2026-02-05T14:39:39.042+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=2&size=10", parameters={masked}
2026-02-05T14:39:39.048+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:39.049+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.052+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f48521] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.066+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297002018 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:39.070+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:39.088+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:39.089+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f48521]
2026-02-05T14:39:39.094+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.094+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1578c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055739192 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:39.096+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:39.098+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:39.098+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1578c]
2026-02-05T14:39:39.098+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.099+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbde2bd] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.099+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1391428529 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.100+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:39.101+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:39.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:39.105+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbde2bd]
2026-02-05T14:39:39.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.106+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f520526] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222863483 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.108+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:39.109+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:39.113+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:39.114+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f520526]
2026-02-05T14:39:39.114+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6843376e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1201108085 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.115+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:39.116+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:39.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:39.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6843376e]
2026-02-05T14:39:39.121+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec28106] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2135638007 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.122+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:39.123+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:39.126+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:39.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec28106]
2026-02-05T14:39:39.127+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:39.128+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e464f2c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:39.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@882254163 wrapping com.mysql.cj.jdbc.ConnectionImpl@c98ac2f] will not be managed by Spring
2026-02-05T14:39:39.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:39.129+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:39.131+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:39.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e464f2c]
2026-02-05T14:39:39.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:39.132+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:39.133+09:00 DEBUG 32176 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:40.130+09:00 DEBUG 32176 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:40.135+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:40.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:40.136+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax
2026-02-05T14:39:40.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_tax", parameters={masked}
2026-02-05T14:39:40.137+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:40.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:40.138+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@338cd76] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:40.142+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445744277 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:40.145+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:40.146+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:40.150+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:40.151+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@338cd76]
2026-02-05T14:39:40.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:40.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae56bd9] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:40.152+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493651768 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:40.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:40.153+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:40.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:40.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae56bd9]
2026-02-05T14:39:40.204+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:40.205+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6342c3] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:40.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@994660341 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:40.206+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:40.211+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:40.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:40.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6342c3]
2026-02-05T14:39:40.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:40.214+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31742e4b] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:40.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28379132 wrapping com.mysql.cj.jdbc.ConnectionImpl@16e7c583] will not be managed by Spring
2026-02-05T14:39:40.215+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:40.217+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_tax(String), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:40.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-05T14:39:40.219+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31742e4b]
2026-02-05T14:39:40.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:40.220+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-05T14:39:40.221+09:00 DEBUG 32176 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:41.004+09:00 DEBUG 32176 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=2&size=10
2026-02-05T14:39:41.008+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-02-05T14:39:41.010+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:41.011+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=2&size=10
2026-02-05T14:39:41.011+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=2&size=10", parameters={masked}
2026-02-05T14:39:41.013+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:41.014+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.015+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1172baa7] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.018+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671768948 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:41.020+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:41.022+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:41.024+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1172baa7]
2026-02-05T14:39:41.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.028+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735d3229] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906035605 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.030+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:41.031+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:41.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:41.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735d3229]
2026-02-05T14:39:41.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.033+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4dfe3d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.034+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1352352039 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.035+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:41.037+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:41.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:41.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4dfe3d]
2026-02-05T14:39:41.054+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dff61fa] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483129966 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.055+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:41.056+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:41.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:41.059+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dff61fa]
2026-02-05T14:39:41.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.061+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b87c1d4] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112983023 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.062+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:41.063+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:41.067+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:41.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b87c1d4]
2026-02-05T14:39:41.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.068+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a6e808] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969886889 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:41.069+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:41.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:41.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a6e808]
2026-02-05T14:39:41.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:41.071+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44038e3c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:41.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130551324 wrapping com.mysql.cj.jdbc.ConnectionImpl@5021e2dc] will not be managed by Spring
2026-02-05T14:39:41.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:41.072+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:41.079+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:41.080+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44038e3c]
2026-02-05T14:39:41.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:41.081+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:41.082+09:00 DEBUG 32176 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:42.305+09:00 DEBUG 32176 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=3&size=10
2026-02-05T14:39:42.332+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=3&size=10
2026-02-05T14:39:42.354+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:42.368+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=3&size=10
2026-02-05T14:39:42.376+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=3&size=10", parameters={masked}
2026-02-05T14:39:42.378+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:42.380+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.381+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c7d3af1] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.383+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716272816 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.384+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:42.385+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:42.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:42.387+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c7d3af1]
2026-02-05T14:39:42.388+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.389+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581a075e] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.396+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829335871 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:42.397+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:42.399+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:42.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581a075e]
2026-02-05T14:39:42.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.400+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb25451] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998232590 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.401+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:42.404+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:42.413+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:42.414+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb25451]
2026-02-05T14:39:42.415+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@860105] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.416+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845218712 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:42.417+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:42.421+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:42.423+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@860105]
2026-02-05T14:39:42.427+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.429+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b71e809] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.431+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271873611 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.432+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:42.436+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:42.441+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:42.442+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b71e809]
2026-02-05T14:39:42.442+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.443+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20272681] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.444+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424143148 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:42.446+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:42.448+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:42.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20272681]
2026-02-05T14:39:42.449+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:42.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43cefd0c] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:42.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522845914 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f71bfc] will not be managed by Spring
2026-02-05T14:39:42.451+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:42.452+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:42.453+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:42.454+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43cefd0c]
2026-02-05T14:39:42.455+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:42.456+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:42.457+09:00 DEBUG 32176 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-05T14:39:43.585+09:00 DEBUG 32176 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-05T14:39:43.596+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-05T14:39:43.597+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-05T14:39:43.598+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-05T14:39:43.599+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-05T14:39:43.604+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-05T14:39:43.618+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.620+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13065c92] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1373769703 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.634+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:43.635+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:43.637+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:43.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13065c92]
2026-02-05T14:39:43.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525e2ab3] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.639+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803732591 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.642+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:43.643+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:43.647+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:43.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525e2ab3]
2026-02-05T14:39:43.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.648+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e96d70] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455545036 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.649+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:43.650+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:43.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:43.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e96d70]
2026-02-05T14:39:43.654+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7240322d] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291600888 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:43.655+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:43.659+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:43.660+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7240322d]
2026-02-05T14:39:43.662+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.662+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780d9fd0] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.663+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187632550 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.663+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-05T14:39:43.664+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-05T14:39:43.668+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 33
2026-02-05T14:39:43.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780d9fd0]
2026-02-05T14:39:43.669+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.670+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee21a6a] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.670+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@981857145 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.671+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:43.671+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:43.673+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:43.675+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee21a6a]
2026-02-05T14:39:43.677+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-05T14:39:43.678+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f05a996] was not registered for synchronization because synchronization is not active
2026-02-05T14:39:43.678+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091226966 wrapping com.mysql.cj.jdbc.ConnectionImpl@4dc5e2a2] will not be managed by Spring
2026-02-05T14:39:43.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-05T14:39:43.679+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-05T14:39:43.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-05T14:39:43.681+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f05a996]
2026-02-05T14:39:43.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-05T14:39:43.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-05T14:39:43.682+09:00 DEBUG 32176 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
