2026-01-08T09:48:05.320+09:00  INFO 17052 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 17052 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-08T09:48:05.334+09:00 DEBUG 17052 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-08T09:48:05.340+09:00  INFO 17052 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-08T09:48:07.847+09:00 DEBUG 17052 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-08T09:48:07.856+09:00 DEBUG 17052 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-08T09:48:08.601+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-08T09:48:08.663+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-08T09:48:08.731+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-08T09:48:08.779+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-08T09:48:08.808+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-08T09:48:08.824+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-08T09:48:08.829+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-08T09:48:08.836+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-08T09:48:08.841+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-08T09:48:08.850+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-08T09:48:08.853+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-08T09:48:08.860+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-08T09:48:08.867+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-08T09:48:08.871+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-08T09:48:08.883+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-08T09:48:08.899+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-08T09:48:08.908+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-08T09:48:08.917+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-08T09:48:08.927+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-08T09:48:08.933+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-08T09:48:08.936+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-08T09:48:08.938+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-08T09:48:08.950+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-08T09:48:08.955+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-08T09:48:08.970+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-08T09:48:08.982+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-08T09:48:08.986+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-08T09:48:08.994+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-08T09:48:09.001+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-08T09:48:09.017+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-08T09:48:09.019+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-08T09:48:09.024+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-08T09:48:09.027+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-08T09:48:09.032+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-08T09:48:09.033+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-08T09:48:09.036+09:00 DEBUG 17052 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-08T09:48:10.083+09:00  INFO 17052 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-08T09:48:10.109+09:00  INFO 17052 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-08T09:48:10.113+09:00  INFO 17052 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-08T09:48:10.250+09:00  INFO 17052 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-08T09:48:10.251+09:00  INFO 17052 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4810 ms
2026-01-08T09:48:10.368+09:00 DEBUG 17052 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-08T09:48:10.369+09:00 DEBUG 17052 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-08T09:48:10.865+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-08T09:48:10.895+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-08T09:48:10.918+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-08T09:48:10.942+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-08T09:48:10.977+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-08T09:48:11.006+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-08T09:48:11.032+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-08T09:48:11.066+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-08T09:48:11.155+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-08T09:48:11.166+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-08T09:48:11.178+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-08T09:48:11.202+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-08T09:48:11.244+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-08T09:48:11.256+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-08T09:48:11.294+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-08T09:48:11.328+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-08T09:48:11.364+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-08T09:48:11.377+09:00 DEBUG 17052 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-08T09:48:13.012+09:00 DEBUG 17052 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-08T09:48:13.262+09:00 DEBUG 17052 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-08T09:48:13.337+09:00  WARN 17052 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: af4dd9a1-d91f-4d88-82c6-1f09c8b78058

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-08T09:48:13.377+09:00  INFO 17052 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-08T09:48:13.657+09:00 DEBUG 17052 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-08T09:48:13.902+09:00 DEBUG 17052 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-08T09:48:14.059+09:00 DEBUG 17052 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-08T09:48:14.162+09:00 DEBUG 17052 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-08T09:48:14.613+09:00  INFO 17052 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-08T09:48:14.648+09:00  INFO 17052 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 10.414 seconds (process running for 11.178)
2026-01-08T09:48:18.403+09:00  INFO 17052 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-08T09:48:18.405+09:00  INFO 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-08T09:48:18.406+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-08T09:48:18.406+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-08T09:48:18.406+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-08T09:48:18.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@b77b0a0
2026-01-08T09:48:18.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1ad1be5d
2026-01-08T09:48:18.409+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-08T09:48:18.410+09:00  INFO 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2026-01-08T09:48:18.452+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T09:48:18.540+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T09:48:18.549+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T09:48:18.554+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T09:48:18.561+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T09:48:18.563+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T09:48:18.672+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-08T09:48:18.680+09:00  INFO 17052 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-08T09:48:18.695+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:18.701+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1ac529] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:18.722+09:00  INFO 17052 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-08T09:48:19.065+09:00  INFO 17052 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2d263e0f
2026-01-08T09:48:19.068+09:00  INFO 17052 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-08T09:48:19.075+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558999318 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:19.084+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T09:48:19.127+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-08T09:48:19.169+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T09:48:19.181+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1ac529]
2026-01-08T09:48:19.284+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:19.285+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e03f0ad] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:19.287+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278301969 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:19.288+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T09:48:19.294+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-08T09:48:19.316+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-08T09:48:19.316+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e03f0ad]
2026-01-08T09:48:19.476+09:00  INFO 17052 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-08T09:48:19.478+09:00  INFO 17052 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-08T09:48:19.495+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:19.516+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-08T09:48:19.544+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:19.991+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T09:48:19.996+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T09:48:20.124+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-08T09:48:20.126+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T09:48:20.128+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T09:48:20.130+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T09:48:20.137+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.139+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529d30d9] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.167+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145435655 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.174+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T09:48:20.176+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-08T09:48:20.182+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-08T09:48:20.183+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T09:48:20.183+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T09:48:20.184+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529d30d9]
2026-01-08T09:48:20.185+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T09:48:20.200+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.215+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T09:48:20.217+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T09:48:20.217+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T09:48:20.218+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T09:48:20.222+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:20.230+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:20.225+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T09:48:20.232+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T09:48:20.234+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T09:48:20.234+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:20.236+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T09:48:20.239+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:20.239+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T09:48:20.239+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:20.241+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.257+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad832a0] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.242+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T09:48:20.245+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T09:48:20.249+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T09:48:20.249+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T09:48:20.252+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:20.258+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1507554580 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.284+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.266+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T09:48:20.268+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:20.280+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-08T09:48:20.285+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T09:48:20.285+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@561c01ac] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.294+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-08T09:48:20.296+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T09:48:20.298+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T09:48:20.299+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T09:48:20.299+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T09:48:20.301+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T09:48:20.301+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T09:48:20.302+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283952837 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.304+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T09:48:20.305+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:20.307+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T09:48:20.308+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:20.309+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T09:48:20.313+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T09:48:20.313+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.316+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:20.316+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T09:48:20.318+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T09:48:20.330+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad832a0]
2026-01-08T09:48:20.318+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55672e06] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.333+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.333+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@529c9ce2 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-08T09:48:20.333+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@529c9ce2 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-08T09:48:20.345+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T09:48:20.335+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470409048 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.335+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T09:48:20.347+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T09:48:20.347+09:00  WARN 17052 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T09:48:20.351+09:00  WARN 17052 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T09:48:20.348+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.349+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:20.352+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.352+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.359+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.371+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T09:48:20.372+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T09:48:20.374+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T09:48:20.380+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T09:48:20.381+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T09:48:20.382+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T09:48:20.384+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T09:48:20.384+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T09:48:20.387+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.388+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T09:48:20.401+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-08T09:48:20.393+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T09:48:20.401+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55672e06]
2026-01-08T09:48:20.402+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T09:48:20.402+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T09:48:20.402+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1022e730] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.404+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T09:48:20.407+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-08T09:48:20.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T09:48:20.409+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086267948 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.409+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T09:48:20.409+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T09:48:20.410+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T09:48:20.410+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.411+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.413+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T09:48:20.414+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T09:48:20.414+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.416+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@529c9ce2 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-08T09:48:20.414+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162a01e] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.414+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T09:48:20.424+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T09:48:20.426+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T09:48:20.432+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@529c9ce2 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-08T09:48:20.426+09:00  WARN 17052 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T09:48:20.439+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T09:48:20.441+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.444+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.445+09:00  WARN 17052 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T09:48:20.445+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318605945 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:20.446+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1022e730]
2026-01-08T09:48:20.446+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T09:48:20.447+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.447+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T09:48:20.448+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.456+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14deb5a5] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.450+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T09:48:20.462+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T09:48:20.451+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T09:48:20.452+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T09:48:20.454+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T09:48:20.466+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T09:48:20.471+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T09:48:20.476+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T09:48:20.478+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-08T09:48:20.479+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-08T09:48:20.483+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T09:48:20.483+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T09:48:20.485+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T09:48:20.484+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T09:48:20.485+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162a01e]
2026-01-08T09:48:20.488+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T09:48:20.491+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T09:48:20.493+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.493+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T09:48:20.495+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T09:48:20.496+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@153964207 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.496+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T09:48:20.497+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@529c9ce2 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-08T09:48:20.497+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T09:48:20.497+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:20.498+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:20.500+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T09:48:20.501+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@529c9ce2 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-08T09:48:20.505+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:20.511+09:00  WARN 17052 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T09:48:20.513+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T09:48:20.514+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.518+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:20.532+09:00  WARN 17052 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T09:48:20.533+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T09:48:20.534+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@561c01ac]
2026-01-08T09:48:20.536+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.535+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.541+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T09:48:20.536+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T09:48:20.540+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffeec30] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.543+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T09:48:20.543+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T09:48:20.544+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1367948163 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.547+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T09:48:20.548+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.549+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.561+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:20.564+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14deb5a5]
2026-01-08T09:48:20.567+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.567+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c673fb3] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.568+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@425164448 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.627+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.629+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.576+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.633+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffeec30]
2026-01-08T09:48:20.635+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.637+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e3ec66f] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.645+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@85538401 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.648+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:20.649+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:20.701+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.702+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:20.713+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c673fb3]
2026-01-08T09:48:20.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e3ec66f]
2026-01-08T09:48:20.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.716+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.717+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38069cea] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.717+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d1b686] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.721+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103027454 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.723+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675687953 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.724+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:20.725+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.727+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:20.734+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.752+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.759+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d1b686]
2026-01-08T09:48:20.764+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.764+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:20.767+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38069cea]
2026-01-08T09:48:20.768+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.780+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:20.783+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37de19ee] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.785+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@614018668 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.796+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:20.801+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:20.804+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:20.817+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:20.834+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:20.840+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:20.840+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37de19ee]
2026-01-08T09:48:20.841+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:20.841+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.843+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad17a53] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.843+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:20.847+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234830045 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.847+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:20.847+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.849+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.850+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac34935] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.850+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.850+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604283421 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.852+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:20.861+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.865+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:20.867+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad17a53]
2026-01-08T09:48:20.875+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.877+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e3fbfc] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.879+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:20.883+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1730768778 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.885+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac34935]
2026-01-08T09:48:20.886+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:20.892+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.894+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:20.894+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54168ba2] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.896+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@767996527 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.897+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.899+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.903+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:20.908+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e3fbfc]
2026-01-08T09:48:20.909+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.909+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f20598a] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.910+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.910+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1187462862 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:20.911+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54168ba2]
2026-01-08T09:48:20.911+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.911+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.912+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea459f9] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.912+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.913+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781156372 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.915+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:20.916+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:20.917+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.926+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f20598a]
2026-01-08T09:48:20.928+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:20.929+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.930+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea459f9]
2026-01-08T09:48:20.931+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:20.934+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@158aece] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:20.935+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T09:48:20.936+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1834964109 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:20.941+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:20.949+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:20.958+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:20.959+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:20.960+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@158aece]
2026-01-08T09:48:20.967+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T09:48:20.976+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:20.980+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:20.981+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:20.984+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T09:48:20.985+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:20.987+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T09:48:20.992+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:20.996+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.008+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141b655] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.014+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526189551 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.016+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.016+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.026+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:21.027+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.033+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141b655]
2026-01-08T09:48:21.033+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:21.035+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.036+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:21.039+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ab63b] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.044+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:21.045+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977623459 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.048+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:21.049+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.050+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.050+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.050+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@675c1ad8] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.052+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@577188730 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.054+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.060+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ab63b]
2026-01-08T09:48:21.055+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:21.062+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.063+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35578de6] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.063+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:21.064+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992285721 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.065+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:21.069+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:21.070+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:21.075+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@675c1ad8]
2026-01-08T09:48:21.075+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.075+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f66385] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.078+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@586889017 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.079+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.080+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.084+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:21.085+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.090+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35578de6]
2026-01-08T09:48:21.090+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f66385]
2026-01-08T09:48:21.091+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.091+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.091+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726017d0] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.093+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765cc2b6] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.093+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751865545 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.094+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612742067 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.095+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.096+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:21.096+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.097+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:21.099+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.100+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:21.101+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726017d0]
2026-01-08T09:48:21.102+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765cc2b6]
2026-01-08T09:48:21.102+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.103+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.103+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29bdbd83] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.104+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43baf029] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.105+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772118812 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.106+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407435674 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.106+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:21.108+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.109+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.110+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:21.113+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.114+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43baf029]
2026-01-08T09:48:21.115+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:21.116+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:21.116+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29bdbd83]
2026-01-08T09:48:21.117+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:21.117+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.118+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5a0232] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.118+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:21.120+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@824095757 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.125+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:21.126+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:21.129+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:21.134+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:21.135+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:21.140+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:21.144+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:21.148+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:21.150+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.151+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5a0232]
2026-01-08T09:48:21.154+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.151+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512cd3f5] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.158+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aef6f73] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.158+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609250720 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.159+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1273555653 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.161+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:21.161+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.163+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:21.163+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.183+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:21.185+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.185+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512cd3f5]
2026-01-08T09:48:21.185+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aef6f73]
2026-01-08T09:48:21.186+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.191+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.192+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f828262] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.192+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364e03a4] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.193+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366038407 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.194+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.194+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17311604 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.195+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.195+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:21.197+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:21.198+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.202+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f828262]
2026-01-08T09:48:21.205+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.206+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a3374a] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.210+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2072587438 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.212+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:21.212+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:21.213+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364e03a4]
2026-01-08T09:48:21.213+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:21.214+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.215+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5631c430] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.215+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270839409 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:21.218+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.219+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.220+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:21.222+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a3374a]
2026-01-08T09:48:21.224+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.225+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.227+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab7588c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.228+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5631c430]
2026-01-08T09:48:21.228+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595012087 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.230+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:21.230+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.231+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T09:48:21.233+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.238+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:21.247+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T09:48:21.250+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.266+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab7588c]
2026-01-08T09:48:21.267+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:21.267+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:21.268+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T09:48:21.270+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:21.271+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T09:48:21.275+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:21.275+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:21.277+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.305+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398ce8bf] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.313+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@614058311 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.314+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.315+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.318+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.318+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398ce8bf]
2026-01-08T09:48:21.320+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.328+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7962b44a] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.329+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@670393033 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.329+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.330+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.333+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.333+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7962b44a]
2026-01-08T09:48:21.334+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.335+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aab5aa3] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.336+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369586520 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.337+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:21.342+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:21.349+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:21.351+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aab5aa3]
2026-01-08T09:48:21.351+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.352+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352f0dfb] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.353+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@359741375 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.353+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.358+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.362+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.363+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352f0dfb]
2026-01-08T09:48:21.365+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.365+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67b5d7fb] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.367+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716725795 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.367+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:21.368+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:21.378+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:21.379+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67b5d7fb]
2026-01-08T09:48:21.379+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.380+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c619e8] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.381+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334119620 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.382+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:21.383+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:21.392+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:21.394+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c619e8]
2026-01-08T09:48:21.395+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.396+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5378cec9] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.396+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1707574295 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.396+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.397+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.399+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.402+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5378cec9]
2026-01-08T09:48:21.412+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.413+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532b3dc] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.414+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@271137589 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.415+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:21.418+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:21.425+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:21.430+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532b3dc]
2026-01-08T09:48:21.430+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:21.431+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f66d11] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:21.432+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1103792288 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:21.433+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:21.433+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:21.441+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:21.442+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f66d11]
2026-01-08T09:48:21.443+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:21.447+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T09:48:21.450+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:24.266+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-08T09:48:24.281+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:24.269+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-08T09:48:24.272+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-08T09:48:24.273+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-08T09:48:24.293+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:24.274+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-08T09:48:24.295+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:24.297+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-08T09:48:24.297+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-08T09:48:24.298+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-08T09:48:24.299+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-08T09:48:24.313+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:24.325+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:24.318+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-08T09:48:24.319+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-08T09:48:24.323+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:24.327+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-08T09:48:24.326+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.326+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-08T09:48:24.326+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-08T09:48:24.327+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-08T09:48:24.327+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-08T09:48:24.336+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-08T09:48:24.327+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b5fa98] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.329+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-08T09:48:24.334+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-08T09:48:24.334+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-08T09:48:24.335+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T09:48:24.347+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:24.338+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.350+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.346+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-08T09:48:24.346+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-08T09:48:24.348+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-08T09:48:24.350+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65498ebd] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.350+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-08T09:48:24.356+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.350+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.351+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.351+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-08T09:48:24.361+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.362+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.364+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.363+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.363+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-08T09:48:24.365+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d19426c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.366+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e125d12] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.367+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.368+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-08T09:48:24.374+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e2d98c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.377+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.379+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:24.380+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151418958 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:24.380+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1244911012 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:24.383+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.384+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:24.384+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:24.385+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619004985 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:24.385+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503930779 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:24.385+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675657807 wrapping com.mysql.cj.jdbc.ConnectionImpl@3cffa401] will not be managed by Spring
2026-01-08T09:48:24.388+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c7db5] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.390+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:24.392+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:24.392+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-08T09:48:24.394+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T09:48:24.394+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-08T09:48:24.398+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-08T09:48:24.398+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-08T09:48:24.400+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-08T09:48:24.401+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:24.401+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:24.406+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65498ebd]
2026-01-08T09:48:24.407+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b5fa98]
2026-01-08T09:48:24.407+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.407+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@578816131 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:24.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132dbbf3] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-08T09:48:24.408+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54fedf71] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.409+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1439998685 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:24.409+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-08T09:48:24.410+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:24.411+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:24.417+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:24.417+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-08T09:48:24.417+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132dbbf3]
2026-01-08T09:48:24.417+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-08T09:48:24.417+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e125d12]
2026-01-08T09:48:24.418+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-08T09:48:24.418+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.421+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@125c6cb5] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.418+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909010089 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:24.418+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c7db5]
2026-01-08T09:48:24.419+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:24.420+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e2d98c]
2026-01-08T09:48:24.425+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:24.422+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:24.423+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:24.424+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-08T09:48:24.429+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=15, totalAmo (truncated)...]
2026-01-08T09:48:24.427+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1977783, totalCo (truncated)...]
2026-01-08T09:48:24.431+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:24.432+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:24.429+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:24.431+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:24.448+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134899916 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:24.449+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:24.450+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:24.453+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-08T09:48:24.455+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d19426c]
2026-01-08T09:48:24.461+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:24.461+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-08T09:48:24.466+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:24.469+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T09:48:24.469+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:24.470+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@125c6cb5]
2026-01-08T09:48:24.471+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54fedf71]
2026-01-08T09:48:24.471+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.471+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.472+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cfbb42e] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.472+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc00adf] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.474+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736346226 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:24.475+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@703027585 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:24.475+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:24.475+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:24.477+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:24.477+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:24.483+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T09:48:24.484+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:24.484+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cfbb42e]
2026-01-08T09:48:24.484+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc00adf]
2026-01-08T09:48:24.485+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:24.485+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:24.486+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=5, totalElem (truncated)...]
2026-01-08T09:48:24.485+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e819adc] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:24.488+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@622652193 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:24.488+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:24.489+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:24.491+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:24.497+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:24.497+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e819adc]
2026-01-08T09:48:24.498+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:24.498+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:24.500+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.468+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T09:48:29.470+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T09:48:29.492+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:29.471+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T09:48:29.495+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:29.473+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T09:48:29.475+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T09:48:29.483+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T09:48:29.494+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T09:48:29.497+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:29.501+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T09:48:29.501+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T09:48:29.507+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:29.511+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T09:48:29.501+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T09:48:29.504+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:29.513+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:29.514+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.506+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T09:48:29.510+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T09:48:29.512+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T09:48:29.545+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:29.514+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:29.515+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f454beb] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.515+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T09:48:29.543+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T09:48:29.552+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T09:48:29.549+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.550+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T09:48:29.552+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T09:48:29.558+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T09:48:29.558+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7955f2] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.560+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T09:48:29.561+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T09:48:29.566+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.567+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:29.568+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.582+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f69e82a] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.568+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5e3dee] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.578+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.587+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933870023 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:29.599+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.595+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f69867d] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.601+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:29.603+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@768958165 wrapping com.mysql.cj.jdbc.ConnectionImpl@3cffa401] will not be managed by Spring
2026-01-08T09:48:29.606+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162898661 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:29.606+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535888072 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.609+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.610+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.610+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709325564 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.611+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.612+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:29.613+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T09:48:29.613+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.615+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.616+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:29.617+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.617+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f454beb]
2026-01-08T09:48:29.622+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.623+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.626+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T09:48:29.629+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa199d0] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.629+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7955f2]
2026-01-08T09:48:29.629+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f69e82a]
2026-01-08T09:48:29.629+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466241886 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:29.630+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.631+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.632+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.632+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:29.632+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f69867d]
2026-01-08T09:48:29.632+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3830d0eb] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.634+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.635+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T09:48:29.635+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.641+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.639+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119819121 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.641+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fc1b8e] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.642+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.643+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314595658 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.643+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.647+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T09:48:29.666+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.667+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5e3dee]
2026-01-08T09:48:29.667+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.669+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.670+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.680+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f937148] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.680+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa199d0]
2026-01-08T09:48:29.680+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734529677 wrapping com.mysql.cj.jdbc.ConnectionImpl@3cffa401] will not be managed by Spring
2026-01-08T09:48:29.681+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.681+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.681+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e93d8ff] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.682+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.682+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1303363044 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:29.683+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:29.685+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:29.690+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T09:48:29.694+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T09:48:29.695+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T09:48:29.696+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T09:48:29.696+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T09:48:29.697+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.698+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b74e74f] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.698+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145156 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:29.699+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.701+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T09:48:29.707+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.708+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3830d0eb]
2026-01-08T09:48:29.709+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.709+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3050285c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.710+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249106741 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.710+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:29.712+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:29.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T09:48:29.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:29.714+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fc1b8e]
2026-01-08T09:48:29.717+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.715+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f937148]
2026-01-08T09:48:29.716+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b74e74f]
2026-01-08T09:48:29.717+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e93d8ff]
2026-01-08T09:48:29.717+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f1e59b] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.718+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.718+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:29.718+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.719+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1232708160 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.720+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7135f29d] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.721+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T09:48:29.722+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c608ef] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.722+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:29.723+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1167643842 wrapping com.mysql.cj.jdbc.ConnectionImpl@3cffa401] will not be managed by Spring
2026-01-08T09:48:29.723+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.724+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1972531848 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:29.726+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:29.726+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:29.726+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.727+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T09:48:29.727+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.741+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T09:48:29.741+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3050285c]
2026-01-08T09:48:29.742+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.742+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493e5182] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.743+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023588401 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.744+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:29.745+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.745+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:29.745+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T09:48:29.745+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c608ef]
2026-01-08T09:48:29.746+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:29.746+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7135f29d]
2026-01-08T09:48:29.747+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:29.748+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f1e59b]
2026-01-08T09:48:29.748+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.749+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:29.750+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6453119c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.749+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.750+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a29085] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.750+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976004753 wrapping com.mysql.cj.jdbc.ConnectionImpl@3cffa401] will not be managed by Spring
2026-01-08T09:48:29.751+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1016162935 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.750+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.751+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.751+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.754+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.752+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.760+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T09:48:29.768+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T09:48:29.773+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:29.774+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T09:48:29.775+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.783+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493e5182]
2026-01-08T09:48:29.776+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T09:48:29.782+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:29.783+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a29085]
2026-01-08T09:48:29.783+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:29.783+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T09:48:29.784+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:29.790+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.790+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T09:48:29.792+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.791+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T09:48:29.791+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:29.791+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c98d9ec] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.796+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.797+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:29.798+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@980965442 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.804+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:29.806+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:29.798+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.799+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5589869d] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.801+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.813+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6453119c]
2026-01-08T09:48:29.814+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192543625 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.815+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:29.814+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@727addf0] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.815+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.815+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T09:48:29.822+09:00 DEBUG 17052 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.817+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087765415 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:29.818+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T09:48:29.827+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.830+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:29.835+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T09:48:29.842+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:29.848+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T09:48:29.850+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T09:48:29.851+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:29.857+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T09:48:29.883+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:29.889+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T09:48:29.890+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5589869d]
2026-01-08T09:48:29.892+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c98d9ec]
2026-01-08T09:48:29.896+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T09:48:29.896+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@727addf0]
2026-01-08T09:48:29.898+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:29.899+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:29.902+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.900+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.900+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T09:48:29.900+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.906+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f79509] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.903+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T09:48:29.904+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fe05b] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.904+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401e1c92] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.905+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T09:48:29.907+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992710138 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:29.911+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T09:48:29.908+09:00 DEBUG 17052 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:29.909+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459461850 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.911+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054421188 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.911+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.912+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.912+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.914+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:29.915+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.915+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3073e3ee] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.927+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477638480 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:29.915+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.918+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:29.929+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:29.933+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:29.940+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.940+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.941+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:29.952+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f79509]
2026-01-08T09:48:29.952+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fe05b]
2026-01-08T09:48:29.953+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401e1c92]
2026-01-08T09:48:29.955+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.956+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.956+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.956+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@111df700] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.957+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af9f138] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.957+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a66861] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.958+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2142005239 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:29.961+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376571652 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.962+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441534667 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.962+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:29.963+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.963+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.964+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:29.965+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.966+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.975+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.975+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.976+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:29.976+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a66861]
2026-01-08T09:48:29.976+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af9f138]
2026-01-08T09:48:29.977+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@111df700]
2026-01-08T09:48:29.977+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T09:48:29.978+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.979+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.979+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.980+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3073e3ee]
2026-01-08T09:48:29.980+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aab7bfa] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.980+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4641a66d] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.981+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3838824c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.982+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:29.983+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813576110 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:29.983+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@592768940 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:29.984+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189332924 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:29.984+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4850d7f2] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:29.985+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:29.985+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:29.985+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.986+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1729311109 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:29.986+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:29.990+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:29.990+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.990+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:29.994+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:29.997+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T09:48:29.997+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:29.998+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:29.999+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4641a66d]
2026-01-08T09:48:30.001+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3838824c]
2026-01-08T09:48:30.002+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.002+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aab7bfa]
2026-01-08T09:48:30.006+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.008+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:30.008+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4850d7f2]
2026-01-08T09:48:30.009+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.009+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608a4697] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.010+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:30.010+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.010+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a93ffc9] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.011+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@733214245 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:30.012+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca5fcad] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.012+09:00 DEBUG 17052 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:30.013+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803956682 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:30.014+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:30.015+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912886156 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:30.015+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T09:48:30.023+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.025+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:30.025+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:30.026+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.027+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T09:48:30.028+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T09:48:30.031+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T09:48:30.045+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T09:48:30.047+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T09:48:30.047+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.048+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T09:48:30.048+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T09:48:30.051+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.063+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608a4697]
2026-01-08T09:48:30.051+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a93ffc9]
2026-01-08T09:48:30.053+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca5fcad]
2026-01-08T09:48:30.063+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a1e46e] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.064+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:30.064+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:30.065+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.066+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909120716 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.066+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T09:48:30.067+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T09:48:30.067+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8fc07e] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.068+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T09:48:30.071+09:00 DEBUG 17052 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:30.077+09:00 DEBUG 17052 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:30.078+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333186134 wrapping com.mysql.cj.jdbc.ConnectionImpl@19742d91] will not be managed by Spring
2026-01-08T09:48:30.083+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.080+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T09:48:30.081+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T09:48:30.084+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.091+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T09:48:30.094+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T09:48:30.097+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T09:48:30.100+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T09:48:30.101+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.102+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T09:48:30.107+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.113+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8fc07e]
2026-01-08T09:48:30.113+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a1e46e]
2026-01-08T09:48:30.114+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cde418] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.115+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:30.115+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.121+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2684fb8c] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.117+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012301972 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.119+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T09:48:30.121+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128538022 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:30.123+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.126+09:00 DEBUG 17052 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:30.128+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.129+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.131+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.163+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.163+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.165+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cde418]
2026-01-08T09:48:30.165+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2684fb8c]
2026-01-08T09:48:30.165+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.166+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.167+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363cd7a2] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.167+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f901b79] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.167+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082146393 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.168+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.168+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@516545436 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:30.169+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.169+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:30.173+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T09:48:30.175+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.179+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363cd7a2]
2026-01-08T09:48:30.181+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T09:48:30.182+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.183+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f901b79]
2026-01-08T09:48:30.184+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f24a8e] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.184+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.185+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874709109 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.185+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c4f9d3] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.186+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:30.188+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047901121 wrapping com.mysql.cj.jdbc.ConnectionImpl@2d263e0f] will not be managed by Spring
2026-01-08T09:48:30.194+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:30.194+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.197+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.207+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:30.209+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f24a8e]
2026-01-08T09:48:30.210+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.211+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.212+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4be218] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.213+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c4f9d3]
2026-01-08T09:48:30.215+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421229381 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.215+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:30.215+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.216+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T09:48:30.217+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.218+09:00 DEBUG 17052 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:30.227+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.227+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4be218]
2026-01-08T09:48:30.229+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.230+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@515604ae] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.231+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631414206 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.231+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:30.232+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:30.238+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:30.241+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@515604ae]
2026-01-08T09:48:30.242+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.245+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a6d773] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.249+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219806621 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.251+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:30.271+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:30.278+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T09:48:30.283+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a6d773]
2026-01-08T09:48:30.284+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.285+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@141a38eb] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.290+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194541652 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.291+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.291+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.295+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.312+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@141a38eb]
2026-01-08T09:48:30.315+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.316+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bd78c3] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.318+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270913535 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.322+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:30.325+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T09:48:30.362+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T09:48:30.366+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bd78c3]
2026-01-08T09:48:30.368+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:30.368+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bae2a82] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:30.369+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969956948 wrapping com.mysql.cj.jdbc.ConnectionImpl@b9acb6e] will not be managed by Spring
2026-01-08T09:48:30.373+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:30.375+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:30.378+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:30.379+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bae2a82]
2026-01-08T09:48:30.380+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T09:48:30.381+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T09:48:30.383+09:00 DEBUG 17052 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:48:31.120+09:00 DEBUG 17052 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/export/journal
2026-01-08T09:48:31.123+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/export/journal
2026-01-08T09:48:31.125+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/export/journal
2026-01-08T09:48:31.126+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/export/journal
2026-01-08T09:48:31.127+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/export/journal", parameters={}
2026-01-08T09:48:31.127+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#exportJournalEntries(String, String)
2026-01-08T09:48:31.128+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportJournalEntries(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:31.129+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportJournalEntries(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:48:31.129+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:31.129+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bc45e4] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:31.133+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145977403 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:31.133+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? , ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:48:31.136+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:48:31.144+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-08T09:48:31.145+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bc45e4]
2026-01-08T09:48:31.146+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:31.146+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308ca869] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:31.146+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330416024 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:31.146+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:48:31.147+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:48:31.149+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:48:31.149+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308ca869]
2026-01-08T09:48:31.149+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:31.150+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@555476b0] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:31.151+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@13517715 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:31.151+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:31.152+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-08T09:48:31.157+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-08T09:48:31.158+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@555476b0]
2026-01-08T09:48:31.159+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:48:31.159+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8096c0] was not registered for synchronization because synchronization is not active
2026-01-08T09:48:31.160+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852021460 wrapping com.mysql.cj.jdbc.ConnectionImpl@509a9c87] will not be managed by Spring
2026-01-08T09:48:31.160+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:48:31.161+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long), 6(Long), 8(Long), 13(Long), 14(Long), 16(Long), 17(Long), 18(Long), 19(Long), 20(Long), 27(Long), 31(Long), 32(Long), 24(Long), 33(Long)
2026-01-08T09:48:31.163+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-08T09:48:31.164+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8096c0]
2026-01-08T09:48:32.452+09:00  INFO 17052 --- [http-nio-8080-exec-5] c.i.backend.service.ExpenseService       : 전표 엑셀 파일 생성 완료 - 파일명: journal_entry_8383406041461690240.xlsx, 건수: 15
2026-01-08T09:48:32.453+09:00  INFO 17052 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 전표 다운로드 요청 - userId: 4, startDate: null, endDate: null
2026-01-08T09:48:32.455+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' in response
2026-01-08T09:48:32.456+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\Users\owner\AppData\Local\Temp\journal_entry_8383406041461690240.xlsx]]
2026-01-08T09:48:32.458+09:00  WARN 17052 --- [http-nio-8080-exec-5] o.apache.coyote.http11.Http11Processor   : The HTTP response header [Content-Disposition] with value [attachment; filename="전표_전체_전체.xlsx"] has been removed from the response because it is invalid

java.lang.IllegalArgumentException: The Unicode character [전] at code point [51,204] cannot be encoded as it is outside the permitted range of 0 to 255
	at org.apache.tomcat.util.buf.MessageBytes.toBytesSimple(MessageBytes.java:306) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.buf.MessageBytes.toBytes(MessageBytes.java:279) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.write(Http11OutputBuffer.java:400) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.sendHeader(Http11OutputBuffer.java:379) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.writeHeaders(Http11Processor.java:1067) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1054) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:377) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.action(Response.java:201) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.commit(Response.java:454) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:284) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:264) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:130) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeContent(ResourceHttpMessageConverter.java:161) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:115) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:46) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:344) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:263) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ResponseEntityReturnValueHandler.handleReturnValue(ResponseEntityReturnValueHandler.java:79) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:79) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.RateLimitFilter.doFilterInternal(RateLimitFilter.java:87) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2026-01-08T09:48:32.508+09:00 DEBUG 17052 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T09:54:30.092+09:00  INFO 15084 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 15084 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-08T09:54:30.094+09:00 DEBUG 15084 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-08T09:54:30.096+09:00  INFO 15084 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-08T09:54:31.753+09:00 DEBUG 15084 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-08T09:54:31.754+09:00 DEBUG 15084 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-08T09:54:32.216+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-08T09:54:32.217+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-08T09:54:32.217+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-08T09:54:32.218+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-08T09:54:32.219+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-08T09:54:32.219+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-08T09:54:32.219+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-08T09:54:32.220+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-08T09:54:32.221+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-08T09:54:32.223+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-08T09:54:32.224+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-08T09:54:32.225+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-08T09:54:32.226+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-08T09:54:32.229+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-08T09:54:32.233+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-08T09:54:32.237+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-08T09:54:32.239+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-08T09:54:32.240+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-08T09:54:32.245+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-08T09:54:32.250+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-08T09:54:32.252+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-08T09:54:32.254+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-08T09:54:32.256+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-08T09:54:32.258+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-08T09:54:32.260+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-08T09:54:32.262+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-08T09:54:32.265+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-08T09:54:32.266+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-08T09:54:32.268+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-08T09:54:32.270+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-08T09:54:32.271+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-08T09:54:32.273+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-08T09:54:32.275+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-08T09:54:32.278+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-08T09:54:32.280+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-08T09:54:32.282+09:00 DEBUG 15084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-08T09:54:33.443+09:00  INFO 15084 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-08T09:54:33.466+09:00  INFO 15084 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-08T09:54:33.471+09:00  INFO 15084 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-08T09:54:33.650+09:00  INFO 15084 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-08T09:54:33.656+09:00  INFO 15084 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3499 ms
2026-01-08T09:54:33.848+09:00 DEBUG 15084 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-08T09:54:33.864+09:00 DEBUG 15084 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-08T09:54:34.375+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-08T09:54:34.390+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-08T09:54:34.422+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-08T09:54:34.442+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-08T09:54:34.465+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-08T09:54:34.498+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-08T09:54:34.512+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-08T09:54:34.538+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-08T09:54:34.662+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-08T09:54:34.684+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-08T09:54:34.699+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-08T09:54:34.716+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-08T09:54:34.735+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-08T09:54:34.753+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-08T09:54:34.771+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-08T09:54:34.792+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-08T09:54:34.837+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-08T09:54:34.865+09:00 DEBUG 15084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-08T09:54:36.001+09:00 DEBUG 15084 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-08T09:54:36.158+09:00 DEBUG 15084 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-08T09:54:36.189+09:00  WARN 15084 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 05f8f34e-86ff-4d77-a6a8-670fc578efaa

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-08T09:54:36.208+09:00  INFO 15084 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-08T09:54:36.456+09:00 DEBUG 15084 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-08T09:54:36.660+09:00 DEBUG 15084 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-08T09:54:36.773+09:00 DEBUG 15084 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-08T09:54:36.781+09:00 DEBUG 15084 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-08T09:54:37.213+09:00  INFO 15084 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-08T09:54:37.241+09:00  INFO 15084 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 7.932 seconds (process running for 8.546)
2026-01-08T09:54:39.534+09:00  INFO 15084 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-08T09:54:39.535+09:00  INFO 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-08T09:54:39.536+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-08T09:54:39.536+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-08T09:54:39.537+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-08T09:54:39.539+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5432dca2
2026-01-08T09:54:39.539+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@64420e34
2026-01-08T09:54:39.542+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-08T09:54:39.545+09:00  INFO 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2026-01-08T09:54:39.572+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/export/journal
2026-01-08T09:54:39.823+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/export/journal
2026-01-08T09:54:39.837+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/export/journal
2026-01-08T09:54:39.851+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/export/journal", parameters={}
2026-01-08T09:54:39.855+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#exportJournalEntries(String, String)
2026-01-08T09:54:39.901+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportJournalEntries(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:54:39.925+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportJournalEntries(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T09:54:40.056+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:40.087+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3844f642] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:40.373+09:00  INFO 15084 --- [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-08T09:54:40.900+09:00  INFO 15084 --- [http-nio-8080-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@39d95c8d
2026-01-08T09:54:40.904+09:00  INFO 15084 --- [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-08T09:54:40.911+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245981571 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:40.924+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? , ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T09:54:40.955+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T09:54:41.004+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-08T09:54:41.016+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3844f642]
2026-01-08T09:54:41.021+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.032+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332383b1] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.035+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@974286015 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.048+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T09:54:41.050+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T09:54:41.056+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T09:54:41.066+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332383b1]
2026-01-08T09:54:41.069+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.076+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a34afd1] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.088+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407865788 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.121+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:54:41.138+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-08T09:54:41.184+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-08T09:54:41.199+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a34afd1]
2026-01-08T09:54:41.202+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.211+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27157410] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.216+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655842410 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.223+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T09:54:41.228+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long), 6(Long), 8(Long), 13(Long), 14(Long), 16(Long), 17(Long), 18(Long), 19(Long), 20(Long), 27(Long), 31(Long), 32(Long), 24(Long), 33(Long)
2026-01-08T09:54:41.239+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-08T09:54:41.241+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27157410]
2026-01-08T09:54:41.242+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.243+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc5cfe] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.245+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@589218039 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.246+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.248+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T09:54:41.254+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T09:54:41.258+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc5cfe]
2026-01-08T09:54:41.261+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.262+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ed9f28] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.263+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113862759 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.264+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.266+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 6(Long), 1(Long)
2026-01-08T09:54:41.272+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T09:54:41.274+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ed9f28]
2026-01-08T09:54:41.275+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.276+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ff211c] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.278+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@978840116 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.282+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.284+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 8(Long), 1(Long)
2026-01-08T09:54:41.297+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.299+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ff211c]
2026-01-08T09:54:41.299+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.301+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6315f4] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.302+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936401061 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.304+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.305+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 13(Long), 1(Long)
2026-01-08T09:54:41.307+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.308+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6315f4]
2026-01-08T09:54:41.311+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.312+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376a35f0] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.313+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598887004 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.313+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.314+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 14(Long), 1(Long)
2026-01-08T09:54:41.321+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.324+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376a35f0]
2026-01-08T09:54:41.325+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.329+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c3e06df] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.331+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520267549 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.333+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.335+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 16(Long), 1(Long)
2026-01-08T09:54:41.339+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.341+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c3e06df]
2026-01-08T09:54:41.342+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.351+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c68d56] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.352+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@520253711 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.354+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.358+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 17(Long), 1(Long)
2026-01-08T09:54:41.365+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.367+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c68d56]
2026-01-08T09:54:41.368+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.369+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246552f7] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.371+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1135531792 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.372+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.373+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 18(Long), 1(Long)
2026-01-08T09:54:41.375+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.379+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246552f7]
2026-01-08T09:54:41.380+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.381+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5664264b] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.381+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477981338 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.382+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.384+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 19(Long), 1(Long)
2026-01-08T09:54:41.387+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.389+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5664264b]
2026-01-08T09:54:41.391+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.392+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@607dfc5e] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.393+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@391960676 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.396+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.397+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 20(Long), 1(Long)
2026-01-08T09:54:41.401+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.402+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@607dfc5e]
2026-01-08T09:54:41.403+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.403+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3882d06e] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.404+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932336684 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.405+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.406+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-08T09:54:41.409+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T09:54:41.414+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3882d06e]
2026-01-08T09:54:41.415+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.416+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe97a65] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.417+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681052415 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.419+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.421+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 31(Long), 1(Long)
2026-01-08T09:54:41.435+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T09:54:41.440+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe97a65]
2026-01-08T09:54:41.445+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.446+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203012ef] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.447+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1785640932 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.448+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.448+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 32(Long), 1(Long)
2026-01-08T09:54:41.451+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T09:54:41.451+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203012ef]
2026-01-08T09:54:41.452+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.452+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41757b7d] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.452+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356269316 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.453+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.454+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 24(Long), 1(Long)
2026-01-08T09:54:41.457+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 2
2026-01-08T09:54:41.458+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41757b7d]
2026-01-08T09:54:41.460+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T09:54:41.460+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba33fb5] was not registered for synchronization because synchronization is not active
2026-01-08T09:54:41.461+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1634140975 wrapping com.mysql.cj.jdbc.ConnectionImpl@39d95c8d] will not be managed by Spring
2026-01-08T09:54:41.462+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T09:54:41.465+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-08T09:54:41.469+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T09:54:41.471+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba33fb5]
2026-01-08T09:54:42.068+09:00  WARN 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 영수증 이미지가 너무 큽니다 (3585027 bytes). Excel에 삽입하지 않습니다.
2026-01-08T09:54:42.140+09:00  WARN 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 영수증 이미지가 너무 큽니다 (3585027 bytes). Excel에 삽입하지 않습니다.
2026-01-08T09:54:42.305+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 영수증 이미지 삽입 완료: receipt_20260106161341_innersign_logo.png (행: 38)
2026-01-08T09:54:42.319+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 영수증 이미지 삽입 완료: receipt_20260107140701_innersign_logo.png (행: 40)
2026-01-08T09:54:42.331+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 영수증 이미지 삽입 완료: receipt_20260106105553_innersign_logo.png (행: 44)
2026-01-08T09:54:42.337+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 영수증 이미지 삽입 완료: receipt_20260107144205_innersign_logo.png (행: 46)
2026-01-08T09:54:43.031+09:00  INFO 15084 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 전표 엑셀 파일 생성 완료 - 파일명: journal_entry_16186706932056492270.xlsx, 건수: 15
2026-01-08T09:54:43.033+09:00  INFO 15084 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 전표 다운로드 요청 - userId: 4, startDate: null, endDate: null
2026-01-08T09:54:43.090+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' in response
2026-01-08T09:54:43.191+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\Users\owner\AppData\Local\Temp\journal_entry_16186706932056492270.xlsx]]
2026-01-08T09:54:43.228+09:00  WARN 15084 --- [http-nio-8080-exec-1] o.apache.coyote.http11.Http11Processor   : The HTTP response header [Content-Disposition] with value [attachment; filename="전표_전체_전체.xlsx"] has been removed from the response because it is invalid

java.lang.IllegalArgumentException: The Unicode character [전] at code point [51,204] cannot be encoded as it is outside the permitted range of 0 to 255
	at org.apache.tomcat.util.buf.MessageBytes.toBytesSimple(MessageBytes.java:306) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.buf.MessageBytes.toBytes(MessageBytes.java:279) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.write(Http11OutputBuffer.java:400) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.sendHeader(Http11OutputBuffer.java:379) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.writeHeaders(Http11Processor.java:1067) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1054) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:377) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.action(Response.java:201) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:187) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.doWrite(Response.java:621) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:328) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:775) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:672) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:375) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:353) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:99) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.write(OnCommittedResponseWrapper.java:639) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.write(StandardServletAsyncWebRequest.java:401) ~[spring-web-6.2.14.jar:6.2.14]
	at java.base/java.io.InputStream.transferTo(InputStream.java:783) ~[na:na]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeContent(ResourceHttpMessageConverter.java:160) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:115) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:46) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:344) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:263) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ResponseEntityReturnValueHandler.handleReturnValue(ResponseEntityReturnValueHandler.java:79) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:79) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.RateLimitFilter.doFilterInternal(RateLimitFilter.java:87) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2026-01-08T09:54:43.301+09:00 DEBUG 15084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:39.604+09:00  INFO 18084 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 18084 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-08T10:08:39.647+09:00 DEBUG 18084 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-08T10:08:39.659+09:00  INFO 18084 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-08T10:08:42.352+09:00 DEBUG 18084 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-08T10:08:42.365+09:00 DEBUG 18084 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-08T10:08:42.858+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-08T10:08:42.866+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-08T10:08:42.868+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-08T10:08:42.869+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-08T10:08:42.870+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-08T10:08:42.872+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-08T10:08:42.876+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-08T10:08:42.882+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-08T10:08:42.893+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-08T10:08:42.895+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-08T10:08:42.911+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-08T10:08:42.912+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-08T10:08:42.913+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-08T10:08:42.960+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-08T10:08:43.021+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-08T10:08:43.035+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-08T10:08:43.058+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-08T10:08:43.060+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-08T10:08:43.065+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-08T10:08:43.068+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-08T10:08:43.077+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-08T10:08:43.079+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-08T10:08:43.082+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-08T10:08:43.086+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-08T10:08:43.092+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-08T10:08:43.095+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-08T10:08:43.098+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-08T10:08:43.100+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-08T10:08:43.101+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-08T10:08:43.102+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-08T10:08:43.106+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-08T10:08:43.108+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-08T10:08:43.111+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-08T10:08:43.113+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-08T10:08:43.114+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-08T10:08:43.115+09:00 DEBUG 18084 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-08T10:08:44.340+09:00  INFO 18084 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-08T10:08:44.366+09:00  INFO 18084 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-08T10:08:44.381+09:00  INFO 18084 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-08T10:08:44.634+09:00  INFO 18084 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-08T10:08:44.690+09:00  INFO 18084 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4914 ms
2026-01-08T10:08:44.952+09:00 DEBUG 18084 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-08T10:08:44.978+09:00 DEBUG 18084 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-08T10:08:46.525+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-08T10:08:46.544+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-08T10:08:46.581+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-08T10:08:46.634+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-08T10:08:46.673+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-08T10:08:46.724+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-08T10:08:46.740+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-08T10:08:46.780+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-08T10:08:46.885+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-08T10:08:46.941+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-08T10:08:46.987+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-08T10:08:47.011+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-08T10:08:47.028+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-08T10:08:47.039+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-08T10:08:47.051+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-08T10:08:47.065+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-08T10:08:47.098+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-08T10:08:47.112+09:00 DEBUG 18084 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-08T10:08:48.272+09:00 DEBUG 18084 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-08T10:08:48.453+09:00 DEBUG 18084 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-08T10:08:48.494+09:00  WARN 18084 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b4de9313-3bcf-43b5-8b23-f4e49835c342

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-08T10:08:48.539+09:00  INFO 18084 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-08T10:08:48.848+09:00 DEBUG 18084 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-08T10:08:49.147+09:00 DEBUG 18084 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-08T10:08:49.300+09:00 DEBUG 18084 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-08T10:08:49.332+09:00 DEBUG 18084 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-08T10:08:49.754+09:00  INFO 18084 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-08T10:08:49.881+09:00  INFO 18084 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 11.344 seconds (process running for 11.967)
2026-01-08T10:08:52.782+09:00  INFO 18084 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-08T10:08:52.793+09:00  INFO 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-08T10:08:52.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-08T10:08:52.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-08T10:08:52.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-08T10:08:52.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5432dca2
2026-01-08T10:08:52.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@64420e34
2026-01-08T10:08:52.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-08T10:08:52.984+09:00  INFO 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 186 ms
2026-01-08T10:08:53.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:08:53.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:08:53.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T10:08:53.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:08:53.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:08:53.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:08:53.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:08:53.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-08T10:08:53.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:08:53.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:08:53.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:08:53.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T10:08:53.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:08:53.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:08:53.412+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:08:53.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:08:53.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:08:53.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T10:08:53.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T10:08:53.431+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:08:53.431+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:08:53.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:08:53.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:08:53.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:08:53.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T10:08:53.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:08:53.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:08:53.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:08:53.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:08:53.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:08:53.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:53.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:53.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:53.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:53.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:53.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:53.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e80b0a1] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:53.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6305ea61] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:53.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48783387] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:53.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b56362] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:53.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a30c89] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:53.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba319db] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:53.563+09:00  INFO 18084 --- [http-nio-8080-exec-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-08T10:08:53.858+09:00  INFO 18084 --- [http-nio-8080-exec-5] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4
2026-01-08T10:08:53.862+09:00  INFO 18084 --- [http-nio-8080-exec-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-08T10:08:53.871+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869879513 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:53.880+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T10:08:53.924+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-08T10:08:54.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-08T10:08:54.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e80b0a1]
2026-01-08T10:08:54.022+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@947008218 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:54.023+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:54.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:54.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247616159 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:54.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:08:54.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:08:54.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:54.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a30c89]
2026-01-08T10:08:54.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898172002 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:54.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676e50ad] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:54.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:54.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:54.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:08:54.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T10:08:54.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6305ea61]
2026-01-08T10:08:54.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181e65b9] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.210+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T10:08:54.214+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba319db]
2026-01-08T10:08:54.239+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:54.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1157714270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:54.240+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72097821 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:54.242+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:08:54.249+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:54.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:54.252+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:54.257+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:54.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:08:54.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:54.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:54.298+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:08:54.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:54.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b56362]
2026-01-08T10:08:54.390+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.391+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275ccd6d] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:08:54.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:08:54.390+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847648141 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:54.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:08:54.412+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48783387]
2026-01-08T10:08:54.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:54.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:08:54.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416873381 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:54.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:54.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e0bb054] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:54.425+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800495889 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:54.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e04593] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.428+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:54.429+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:54.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:54.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:54.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676e50ad]
2026-01-08T10:08:54.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466342297 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:54.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:54.530+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:54.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a82c1a] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181e65b9]
2026-01-08T10:08:54.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:54.565+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:54.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220779977 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:54.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275ccd6d]
2026-01-08T10:08:54.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:08:54.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767cfb75] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.574+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:08:54.578+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2179dfd1] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1015443809 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:54.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:54.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T10:08:54.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:08:54.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:54.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e04593]
2026-01-08T10:08:54.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e0bb054]
2026-01-08T10:08:54.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:54.655+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@940674349 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:54.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@44719075 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:54.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:08:54.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:54.673+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3169dfdc] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:54.682+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:54.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T10:08:54.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:54.707+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:54.733+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836416319 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:54.739+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:08:54.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767cfb75]
2026-01-08T10:08:54.773+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:54.760+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:54.769+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:08:54.793+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:08:54.795+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e8d282d] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:54.920+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:08:54.925+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:08:55.007+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:08:55.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a82c1a]
2026-01-08T10:08:55.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752513319 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:55.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2179dfd1]
2026-01-08T10:08:55.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:08:55.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:08:55.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16431e2f] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57dee350] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438736683 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:55.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:08:55.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1695331758 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:55.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7f2088] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3169dfdc]
2026-01-08T10:08:55.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:55.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e8d282d]
2026-01-08T10:08:55.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:55.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19caff6c] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@817416503 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:55.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@527691016 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:55.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:55.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:08:55.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:08:55.173+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16431e2f]
2026-01-08T10:08:55.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T10:08:55.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:08:55.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57dee350]
2026-01-08T10:08:55.212+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:08:55.249+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ad35df] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:55.260+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19caff6c]
2026-01-08T10:08:55.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7f2088]
2026-01-08T10:08:55.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:55.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821502915 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:55.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:55.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:08:55.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:55.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:08:55.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:55.273+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T10:08:55.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:55.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:08:55.297+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:55.298+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:55.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:08:55.357+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:08:55.357+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:08:55.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:08:55.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:08:55.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:08:55.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ad35df]
2026-01-08T10:08:55.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:08:55.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:08:55.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:08:55.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:08:55.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:08:55.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:08:55.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:08:55.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:08:55.614+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8e1e0f] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.614+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:08:55.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:08:55.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T10:08:55.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:08:55.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:08:55.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620454420 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:55.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:08:55.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:08:55.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.687+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:55.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1b9d16] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.733+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201fdd64] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.742+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:55.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cccac80] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea3f0b3] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104964229 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:55.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910855862 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:55.761+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34292585 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:55.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:55.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.781+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:08:55.807+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806500977 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:08:55.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8e1e0f]
2026-01-08T10:08:55.813+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:55.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:55.855+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:08:55.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.859+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:55.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:08:55.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a8d69b] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.880+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:08:55.883+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686061276 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:55.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201fdd64]
2026-01-08T10:08:55.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1b9d16]
2026-01-08T10:08:55.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.885+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e160be] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:08:55.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16758cbf] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327265945 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:55.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea3f0b3]
2026-01-08T10:08:55.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T10:08:55.916+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222608872 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:55.917+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:55.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cccac80]
2026-01-08T10:08:55.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:08:55.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.940+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:55.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a8d69b]
2026-01-08T10:08:55.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43364952] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:55.948+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712459544 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:55.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645e561f] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.952+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:55.960+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372267009 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:55.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:55.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:55.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:08:55.969+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.970+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:55.993+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16758cbf]
2026-01-08T10:08:55.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0a2368] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:55.994+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e160be]
2026-01-08T10:08:55.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:08:56.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.007+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470122498 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.007+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:08:56.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:08:56.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43364952]
2026-01-08T10:08:56.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:56.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba1f6ab] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645e561f]
2026-01-08T10:08:56.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:08:56.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:56.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1624154097 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:56.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:08:56.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529419c4] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:56.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a0156b8] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:08:56.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588887581 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:56.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:56.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:08:56.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022952265 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:56.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T10:08:56.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50450cb1] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357308407 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:08:56.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:08:56.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:08:56.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:08:56.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T10:08:56.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:08:56.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0a2368]
2026-01-08T10:08:56.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba1f6ab]
2026-01-08T10:08:56.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529419c4]
2026-01-08T10:08:56.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.053+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a0156b8]
2026-01-08T10:08:56.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5254c424] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.056+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.056+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64808396] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.057+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:08:56.057+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b38e356] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1853471845 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:08:56.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1403445624 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:56.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50450cb1]
2026-01-08T10:08:56.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234212812 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:56.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:56.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:56.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:08:56.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:08:56.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:08:56.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:08:56.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:08:56.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:08:56.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5254c424]
2026-01-08T10:08:56.107+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b38e356]
2026-01-08T10:08:56.108+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64808396]
2026-01-08T10:08:56.109+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:08:56.109+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T10:08:56.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T10:08:56.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:08:56.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38471b1b] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171997291 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:08:56.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:08:56.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:08:56.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:08:56.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:08:56.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38471b1b]
2026-01-08T10:08:56.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7185c30c] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918148820 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:56.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c96a8b] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:56.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1347828810 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.208+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:56.209+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.211+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:08:56.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7185c30c]
2026-01-08T10:08:56.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c96a8b]
2026-01-08T10:08:56.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e681b21] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.236+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296369219 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:56.243+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331ec551] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.243+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681077899 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:56.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:56.294+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.300+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e681b21]
2026-01-08T10:08:56.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:08:56.311+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.311+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331ec551]
2026-01-08T10:08:56.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b531ec2] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1433188250 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:56.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74049141] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:56.314+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838203101 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:08:56.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:08:56.350+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b531ec2]
2026-01-08T10:08:56.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1684d7cf] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74049141]
2026-01-08T10:08:56.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1440902867 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:56.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0622ff] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@777534183 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:56.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:08:56.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1684d7cf]
2026-01-08T10:08:56.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:08:56.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:08:56.412+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0622ff]
2026-01-08T10:08:56.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6e8c7b] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:08:56.430+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875583539 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:08:56.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:08:56.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:08:56.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:08:56.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:08:56.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:08:56.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:08:56.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39440f02] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6e8c7b]
2026-01-08T10:08:56.501+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000398041 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:56.502+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.502+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:56.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@799cb9e3] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:56.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604716995 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:08:56.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39440f02]
2026-01-08T10:08:56.524+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.526+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ddbd52d] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@799cb9e3]
2026-01-08T10:08:56.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83813771 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:56.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391d54cc] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.534+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634565037 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:56.540+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:08:56.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ddbd52d]
2026-01-08T10:08:56.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:08:56.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391d54cc]
2026-01-08T10:08:56.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fa0135] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2099a339] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449566106 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:56.565+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936799954 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:56.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:56.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:08:56.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.581+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:08:56.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2099a339]
2026-01-08T10:08:56.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fa0135]
2026-01-08T10:08:56.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b64d6f5] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:08:56.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43945221 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:08:56.608+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.608+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b64d6f5]
2026-01-08T10:08:56.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:56.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:08:56.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:56.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:08:56.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:08:56.755+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:08:56.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:08:56.813+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:08:56.818+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.822+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e2b97b5] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.829+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378817259 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:56.835+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:56.838+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:56.846+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:08:56.847+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e2b97b5]
2026-01-08T10:08:56.849+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:56.849+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fbc18b] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:56.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@804104034 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:56.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:56.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:56.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:56.868+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fbc18b]
2026-01-08T10:08:56.923+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:57.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fb9310] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:57.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123806141 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:57.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:57.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:08:57.107+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:08:57.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fb9310]
2026-01-08T10:08:57.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:57.125+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6f5aa4] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:57.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@392504682 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:57.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:57.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:57.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:57.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6f5aa4]
2026-01-08T10:08:57.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:57.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:08:57.157+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:58.809+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers/active
2026-01-08T10:08:58.809+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers/active
2026-01-08T10:08:58.811+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:08:58.811+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:08:58.818+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:08:58.824+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:08:58.825+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-08T10:08:58.825+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:08:58.826+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:08:58.831+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-08T10:08:58.833+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:08:58.833+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:08:58.834+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-08T10:08:58.849+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:08:58.861+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:08:58.862+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-08T10:08:58.875+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:58.878+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:58.879+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-08T10:08:58.880+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd6f9ff] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:58.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@388fc026] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:58.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T10:08:58.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902903616 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:08:58.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@745437278 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:08:58.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:08:58.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:08:58.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:58.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:08:58.902+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T10:08:58.902+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:08:58.902+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:08:58.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:58.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd6f9ff]
2026-01-08T10:08:58.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@388fc026]
2026-01-08T10:08:58.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2a1b8b] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:58.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:58.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:58.914+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:08:58.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da8e4ef] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:58.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:58.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721522987 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:08:58.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:58.934+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089169462 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:08:58.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:58.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T10:08:58.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:58.959+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:58.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da8e4ef]
2026-01-08T10:08:58.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:58.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57ed3ba] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:58.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605095526 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:08:58.968+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:08:58.968+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:08:58.981+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-08T10:08:58.981+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:08:58.990+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2a1b8b]
2026-01-08T10:08:58.990+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57ed3ba]
2026-01-08T10:08:58.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:58.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:58.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@597fe22a] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:58.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-08T10:08:58.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720308668 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:08:59.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:08:59.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:59.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:08:59.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-08T10:08:59.076+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:08:59.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@597fe22a]
2026-01-08T10:08:59.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-08T10:08:59.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:59.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-08T10:08:59.089+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:08:59.093+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-08T10:08:59.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:08:59.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-08T10:08:59.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T10:08:59.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T10:08:59.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:08:59.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24260a1a] was not registered for synchronization because synchronization is not active
2026-01-08T10:08:59.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012058122 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:08:59.131+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T10:08:59.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:08:59.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-08T10:08:59.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24260a1a]
2026-01-08T10:08:59.152+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:08:59.160+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-08T10:08:59.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:00.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T10:09:00.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-08T10:09:00.325+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T10:09:00.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-08T10:09:00.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-08T10:09:00.335+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-08T10:09:00.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T10:09:00.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-08T10:09:00.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T10:09:00.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T10:09:00.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-08T10:09:00.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:00.345+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-08T10:09:00.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20692a14] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:00.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:00.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765cd77e] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:00.358+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160041189 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:00.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T10:09:00.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T10:09:00.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1284647976 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:00.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-08T10:09:00.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-08T10:09:00.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-08T10:09:00.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20692a14]
2026-01-08T10:09:00.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:00.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-08T10:09:00.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:00.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-08T10:09:00.449+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765cd77e]
2026-01-08T10:09:00.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:00.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-08T10:09:00.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:24.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:24.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:24.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:09:24.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:09:24.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:09:24.767+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:09:24.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:09:24.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:24.767+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:09:24.769+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:09:24.769+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:09:24.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:24.771+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:24.772+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:09:24.773+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:09:24.773+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:09:24.773+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:24.773+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:24.773+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:09:24.774+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T10:09:24.774+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:09:24.774+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:24.775+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:24.775+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:09:24.775+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:09:24.776+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.776+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.777+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d15aef] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6363a2] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4727cd95] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.780+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739fd210] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.781+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@244e03e1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@760399041 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:24.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355375605 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:24.790+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:24.791+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.795+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:09:24.795+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456172548 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:24.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1349943541 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:24.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219243966 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:24.801+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:24.802+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:09:24.803+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.805+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:24.807+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:09:24.808+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d15aef]
2026-01-08T10:09:24.808+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.808+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:09:24.810+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:24.810+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.814+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6363a2]
2026-01-08T10:09:24.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:24.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:24.816+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T10:09:24.817+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5bddb8] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.817+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.818+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4727cd95]
2026-01-08T10:09:24.825+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@244e03e1]
2026-01-08T10:09:24.826+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739fd210]
2026-01-08T10:09:24.826+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775438727 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:24.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c84830] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:24.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.828+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.829+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.830+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763288091 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:24.831+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:24.833+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198b503b] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.833+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca646f4] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.834+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.834+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.836+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:24.843+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.836+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761680289 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:24.841+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1190939730 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:24.849+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.851+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.851+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:24.863+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:24.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:24.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:24.865+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:24.865+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:24.868+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:24.873+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c84830]
2026-01-08T10:09:24.874+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca646f4]
2026-01-08T10:09:24.878+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198b503b]
2026-01-08T10:09:24.882+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5bddb8]
2026-01-08T10:09:24.882+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:24.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.886+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:24.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54dfd870] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a1381ad] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74db929d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1416421885 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:24.896+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8edd67] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580944659 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:24.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932318901 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:24.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:24.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@150830963 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:24.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69479a61] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:24.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:24.906+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T10:09:24.906+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:24.907+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1539031155 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:24.909+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:24.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:24.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:09:24.923+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:24.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T10:09:24.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:09:24.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a1381ad]
2026-01-08T10:09:24.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.941+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:09:24.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8c7aba] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54dfd870]
2026-01-08T10:09:24.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219788847 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:24.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:24.950+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:09:24.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:09:24.958+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.960+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@511e2265] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69479a61]
2026-01-08T10:09:24.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8edd67]
2026-01-08T10:09:24.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74db929d]
2026-01-08T10:09:24.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066250862 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:24.974+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:24.974+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:24.977+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:24.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:24.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edd0a66] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792aafee] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:24.980+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:24.982+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:24.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971557183 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:24.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364038956 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:24.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:25.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:25.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:25.023+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:25.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:25.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@511e2265]
2026-01-08T10:09:25.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8c7aba]
2026-01-08T10:09:25.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:25.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:25.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:09:25.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f2b557] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T10:09:25.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edd0a66]
2026-01-08T10:09:25.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792aafee]
2026-01-08T10:09:25.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366982278 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:25.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565f6033] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.073+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.076+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725296536 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:25.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:09:25.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:09:25.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T10:09:25.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:09:25.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:25.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.089+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:09:25.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T10:09:25.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:25.094+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:09:25.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:09:25.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:09:25.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:09:25.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:09:25.125+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:25.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:09:25.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f2b557]
2026-01-08T10:09:25.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T10:09:25.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:25.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:09:25.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T10:09:25.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:25.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46710a31] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:09:25.140+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:25.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487032b7] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1720272805 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:25.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565f6033]
2026-01-08T10:09:25.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58ca443c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@631095531 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:25.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2254eecd] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671485661 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:25.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:25.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:25.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:25.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075774141 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:25.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:25.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:09:25.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:09:25.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T10:09:25.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:09:25.213+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487032b7]
2026-01-08T10:09:25.213+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46710a31]
2026-01-08T10:09:25.214+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:09:25.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.223+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2254eecd]
2026-01-08T10:09:25.224+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697ea8e0] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.224+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58ca443c]
2026-01-08T10:09:25.225+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f20a63] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.225+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@550685426 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245145806 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:25.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367fcbb4] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.228+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1496a86c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.229+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861436208 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:25.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@511178086 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:25.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.248+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697ea8e0]
2026-01-08T10:09:25.257+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.258+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32531302] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787907584 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1496a86c]
2026-01-08T10:09:25.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f20a63]
2026-01-08T10:09:25.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367fcbb4]
2026-01-08T10:09:25.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T10:09:25.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbcff7e] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e6c3e5] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a65d5ce] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1279848301 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:25.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697794472 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:25.274+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376751453 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:25.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:25.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:09:25.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:09:25.311+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:25.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T10:09:25.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:09:25.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32531302]
2026-01-08T10:09:25.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbcff7e]
2026-01-08T10:09:25.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.324+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.324+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd73ee1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.325+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:09:25.326+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1053018a] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:09:25.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203174234 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e6c3e5]
2026-01-08T10:09:25.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@446585841 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:25.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a65d5ce]
2026-01-08T10:09:25.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433538cd] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d23946b] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@209920677 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:25.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230824868 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:25.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:25.340+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:25.350+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd73ee1]
2026-01-08T10:09:25.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.356+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T10:09:25.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1053018a]
2026-01-08T10:09:25.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T10:09:25.375+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d23946b]
2026-01-08T10:09:25.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:09:25.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@433538cd]
2026-01-08T10:09:25.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T10:09:25.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:09:25.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:25.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:09:25.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:09:25.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T10:09:25.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:25.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:09:25.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:25.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:09:25.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:25.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:09:25.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.441+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5941e2dd] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1700718716 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:25.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4391879c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:25.446+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829576338 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T10:09:25.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T10:09:25.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4391879c]
2026-01-08T10:09:25.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5941e2dd]
2026-01-08T10:09:25.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.463+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@303500e1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.463+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de8a363] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136464412 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199881993 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:25.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@303500e1]
2026-01-08T10:09:25.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de8a363]
2026-01-08T10:09:25.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5292a0e1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58acd47d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1253605466 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1078429616 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:25.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:25.478+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:25.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-08T10:09:25.490+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T10:09:25.491+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:09:25.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58acd47d]
2026-01-08T10:09:25.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5292a0e1]
2026-01-08T10:09:25.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a827c65] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c656b4a] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338909812 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:25.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807176591 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.517+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.517+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c656b4a]
2026-01-08T10:09:25.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a827c65]
2026-01-08T10:09:25.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.523+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.523+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e279d04] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.524+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T10:09:25.525+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421501617 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:25.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.530+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:09:25.534+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:09:25.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e279d04]
2026-01-08T10:09:25.540+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.544+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@303908f5] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315911243 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:25.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:09:25.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:09:25.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@303908f5]
2026-01-08T10:09:25.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333ad52] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1798660449 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.574+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.579+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333ad52]
2026-01-08T10:09:25.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d61daa] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122414047 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:09:25.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:09:25.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:09:25.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d61daa]
2026-01-08T10:09:25.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:25.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f3579e] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:25.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@856174343 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:25.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:09:25.666+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T10:09:25.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:09:25.706+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f3579e]
2026-01-08T10:09:25.706+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:25.707+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:09:25.708+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:26.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T10:09:26.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T10:09:26.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-08T10:09:26.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T10:09:26.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T10:09:26.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T10:09:26.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI0IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T10:09:26.204+09:00  INFO 18084 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=4
2026-01-08T10:09:26.205+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:26.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T10:09:26.208+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:29.786+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T10:09:29.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T10:09:29.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T10:09:29.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T10:09:29.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T10:09:29.790+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_admin, password=1234)]
2026-01-08T10:09:29.791+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 시도 - username: test_admin
2026-01-08T10:09:29.792+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:29.793+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a83af4d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:29.796+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272528498 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:29.796+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T10:09:29.796+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_admin(String)
2026-01-08T10:09:29.798+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T10:09:29.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a83af4d]
2026-01-08T10:09:29.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:29.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dec5e8f] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:29.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207019899 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:29.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:09:29.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-01-08T10:09:29.893+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-08T10:09:29.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dec5e8f]
2026-01-08T10:09:29.920+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: SUPERADMIN, companyId: 4
2026-01-08T10:09:29.921+09:00  INFO 18084 --- [http-nio-8080-exec-1] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_admin role=SUPERADMIN
2026-01-08T10:09:29.922+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:29.923+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_admin, password (truncated)...]
2026-01-08T10:09:29.925+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T10:09:30.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/companies
2026-01-08T10:09:30.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-01-08T10:09:30.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-01-08T10:09:30.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-01-08T10:09:30.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-01-08T10:09:30.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-01-08T10:09:30.454+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T10:09:30.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:30.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-01-08T10:09:30.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-01-08T10:09:30.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T10:09:30.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:30.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:30.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:09:30.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:30.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:09:30.478+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:09:30.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:09:30.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T10:09:30.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:30.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:30.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:09:30.507+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:09:30.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:09:30.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:09:30.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:09:30.501+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.501+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:30.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:30.507+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:30.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:09:30.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:09:30.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:09:30.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ead8b6] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.523+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.524+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:30.524+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:09:30.524+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:09:30.525+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:09:30.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37479e54] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.530+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@939130212 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:30.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:09:30.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffee20f] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.542+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T10:09:30.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156843534 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:30.556+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:09:30.556+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-01-08T10:09:30.558+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:30.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259776311 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:30.565+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:30.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec58d1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6a97f9] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3252b7c5] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:30.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-08T10:09:30.574+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:30.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ead8b6]
2026-01-08T10:09:30.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=4, companyCode=JIIST3, companyNa (truncated)...]
2026-01-08T10:09:30.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:30.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@51608011 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:30.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317765000 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:30.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@625375345 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:30.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:09:30.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:09:30.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffee20f]
2026-01-08T10:09:30.598+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:30.598+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:30.599+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:30.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:09:30.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37479e54]
2026-01-08T10:09:30.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:30.608+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:30.608+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:30.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:09:30.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:30.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.613+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:09:30.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:09:30.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:30.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:30.624+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:09:30.625+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:09:30.627+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec58d1]
2026-01-08T10:09:30.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6a97f9]
2026-01-08T10:09:30.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:09:30.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.640+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:30.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.648+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:09:30.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:09:30.659+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:30.661+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:30.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488a4e6b] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:09:30.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:30.674+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:30.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59954199 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:30.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:09:30.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:09:30.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:30.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:30.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:30.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f78615c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:09:30.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:30.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:30.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184914306 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:30.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:30.713+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:09:30.714+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:30.723+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:30.725+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:30.723+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:30.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:30.724+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.725+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:30.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:30.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10201ee] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3252b7c5]
2026-01-08T10:09:30.731+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:09:30.732+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:30.734+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0a300d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.735+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755638263 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:30.735+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:09:30.737+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.738+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488a4e6b]
2026-01-08T10:09:30.741+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1653483766 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:30.743+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:30.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:30.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532b66fc] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:30.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f78615c]
2026-01-08T10:09:30.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:30.749+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534882370 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:30.749+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:30.749+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ad1d95] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.750+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:09:30.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:09:30.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:30.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980387227 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:30.781+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:30.766+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.781+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:30.782+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:30.782+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:09:30.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:30.789+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:30.796+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0a300d]
2026-01-08T10:09:30.809+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.809+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:09:30.811+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:09:30.813+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:30.818+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.813+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:30.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:09:30.826+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:30.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:30.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:30.829+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:09:30.832+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:09:30.832+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:30.834+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:30.834+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532b66fc]
2026-01-08T10:09:30.847+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.840+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:09:30.841+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:09:30.844+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.848+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:30.849+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c708c49] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:09:30.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:09:30.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e430ce6] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:30.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97189100 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:30.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:09:30.865+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.866+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@466601034 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:30.867+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:30.871+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:09:30.872+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:30.874+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.874+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:30.875+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:30.876+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:09:30.876+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.878+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:30.878+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.880+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:30.880+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:30.882+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.882+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:30.883+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.885+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ad1d95]
2026-01-08T10:09:30.890+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1bde64] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@926173169 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:30.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:09:30.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba8aea8] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:30.893+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308be965] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.893+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c708c49]
2026-01-08T10:09:30.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284415130 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:30.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:30.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778744958 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:30.894+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:30.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:09:30.897+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:30.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:30.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:30.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e430ce6]
2026-01-08T10:09:30.902+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:30.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:30.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:30.906+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:30.908+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.909+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:30.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:09:30.914+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:09:30.923+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:30.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1bde64]
2026-01-08T10:09:30.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:09:30.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:30.932+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:09:30.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:30.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:09:30.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:30.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.940+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:30.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:30.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:30.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:09:30.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:09:30.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:30.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:30.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:30.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:30.948+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:09:30.948+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:09:30.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:30.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.955+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:09:30.956+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:30.956+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:30.957+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:30.958+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.958+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:30.958+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:30.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:30.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:09:30.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10201ee]
2026-01-08T10:09:30.962+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308be965]
2026-01-08T10:09:30.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:30.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:09:30.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.964+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:09:30.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.966+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:09:30.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:09:30.970+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:09:30.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b1c83e] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:30.973+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:30.974+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:09:30.974+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:30.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213362399 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:30.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:09:30.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:09:30.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:30.977+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.977+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182c5e46] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:30.977+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:30.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:30.990+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:30.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:30.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467390937 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:30.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:30.994+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:09:30.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:30.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:09:30.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:09:30.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:31.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:31.005+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:09:31.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:09:31.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e621da] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:31.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b1c83e]
2026-01-08T10:09:31.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:09:31.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:31.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:09:31.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712586276 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:31.016+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:09:31.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:09:31.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182c5e46]
2026-01-08T10:09:31.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:09:31.022+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:31.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:31.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:09:31.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:09:31.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:31.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:09:31.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b4acdc1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:31.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@32404096 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:31.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba8aea8]
2026-01-08T10:09:31.047+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:09:31.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0de36c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:31.074+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:09:31.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:31.075+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:09:31.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299575448 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:31.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:31.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:09:31.093+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:09:31.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e621da]
2026-01-08T10:09:31.108+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:09:31.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65976b67] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:09:31.107+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:09:31.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099093848 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:31.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:31.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:09:31.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:09:31.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:31.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:09:31.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:09:31.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:09:31.174+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:09:31.174+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:09:31.174+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:09:31.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:31.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfe9cd] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877523276 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:31.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:31.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:09:31.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.184+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:09:31.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67422d4d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1647257407 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:31.189+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:09:31.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:31.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b4acdc1]
2026-01-08T10:09:31.201+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:31.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:31.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfe9cd]
2026-01-08T10:09:31.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:31.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:31.208+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:09:31.212+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.220+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:09:31.222+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.228+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:31.229+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.229+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67422d4d]
2026-01-08T10:09:31.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:31.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.236+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@163c9a04] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:31.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:31.240+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625482699 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:31.240+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:31.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:31.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:09:31.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.242+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:31.243+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:31.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.253+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:09:31.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.255+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.256+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:31.258+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@294d8c77] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.260+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@163c9a04]
2026-01-08T10:09:31.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@592877183 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:31.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:31.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:31.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35c2bc1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:31.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908571412 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:31.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:31.269+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:31.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:31.274+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:31.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:31.277+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65976b67]
2026-01-08T10:09:31.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@294d8c77]
2026-01-08T10:09:31.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:31.282+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:09:31.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e082a61] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:09:31.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459484131 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:31.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.293+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.296+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:31.296+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:31.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:31.300+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:09:31.300+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:31.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0de36c]
2026-01-08T10:09:31.305+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:09:31.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:09:31.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:31.309+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:09:31.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:31.311+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e082a61]
2026-01-08T10:09:31.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35c2bc1]
2026-01-08T10:09:31.314+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:31.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:09:31.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a981742] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:31.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:09:31.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1694731919 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:31.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:09:31.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:31.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:09:31.332+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.332+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:09:31.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.338+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:09:31.340+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ed91fc0] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:31.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451694107 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:31.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:31.345+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:31.350+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:31.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:31.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:31.357+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.357+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:31.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:31.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:31.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:31.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:31.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a981742]
2026-01-08T10:09:31.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:09:31.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:31.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:31.370+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:09:31.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ed91fc0]
2026-01-08T10:09:31.372+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:09:31.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.374+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:09:31.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:09:31.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:09:31.379+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:31.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:09:31.391+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:09:31.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:31.394+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:09:31.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bbdac9] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925888639 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:31.397+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:31.397+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:31.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:31.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bbdac9]
2026-01-08T10:09:31.406+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.406+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fec7c5c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.407+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296715514 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:31.407+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:31.408+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.409+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:31.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fec7c5c]
2026-01-08T10:09:31.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caf76e9] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@16646076 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:31.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:31.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:31.446+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:31.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:31.457+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:31.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caf76e9]
2026-01-08T10:09:31.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:31.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25816afc] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:31.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@535057660 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:31.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:31.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:31.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:31.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:31.469+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:31.473+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:31.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:31.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:31.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:31.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:31.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:31.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25816afc]
2026-01-08T10:09:31.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:31.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:09:31.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:41.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:41.197+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:41.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:41.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:41.205+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:09:41.208+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:41.210+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:41.211+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:41.212+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:09:41.212+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:41.212+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d7e569] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:41.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071740256 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:41.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:41.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:41.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:41.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d7e569]
2026-01-08T10:09:41.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:41.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@316a9027] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:41.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378069874 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:41.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:41.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:09:41.244+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:09:41.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@316a9027]
2026-01-08T10:09:41.246+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:41.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:41.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:41.248+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:45.848+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses/23
2026-01-08T10:09:45.851+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses/23
2026-01-08T10:09:45.854+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses/23
2026-01-08T10:09:45.855+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses/23
2026-01-08T10:09:45.856+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses/23", parameters={}
2026-01-08T10:09:45.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseDetailForSuperAdmin(Long)
2026-01-08T10:09:45.857+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:45.859+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:45.860+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 요청 (SUPERADMIN) - userId: 9, expenseReportId: 23
2026-01-08T10:09:45.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aef3df1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.862+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1017078989 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:45.863+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.E.selectExpenseReportByIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.expense_report_id = ?
2026-01-08T10:09:45.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.E.selectExpenseReportByIdForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.866+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.E.selectExpenseReportByIdForSuperAdmin : <==      Total: 1
2026-01-08T10:09:45.867+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aef3df1]
2026-01-08T10:09:45.867+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.868+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22342d6d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.872+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1547629541 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:45.873+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] .b.m.E.selectExpenseDetailsForSuperAdmin : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ?
2026-01-08T10:09:45.874+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] .b.m.E.selectExpenseDetailsForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] .b.m.E.selectExpenseDetailsForSuperAdmin : <==      Total: 1
2026-01-08T10:09:45.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22342d6d]
2026-01-08T10:09:45.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666a0140] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.882+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706428325 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:45.882+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] i.b.m.E.selectApprovalLinesForSuperAdmin : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al LEFT JOIN user_tb u ON al.approver_id = u.user_id LEFT JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? ORDER BY al.step_order ASC
2026-01-08T10:09:45.883+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] i.b.m.E.selectApprovalLinesForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] i.b.m.E.selectApprovalLinesForSuperAdmin : <==      Total: 1
2026-01-08T10:09:45.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666a0140]
2026-01-08T10:09:45.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.893+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615efbbc] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.893+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872432413 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:45.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] ctReceiptsByExpenseReportIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T10:09:45.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] ctReceiptsByExpenseReportIdForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.896+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] ctReceiptsByExpenseReportIdForSuperAdmin : <==      Total: 0
2026-01-08T10:09:45.897+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615efbbc]
2026-01-08T10:09:45.897+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 완료 (SUPERADMIN) - expenseReportId: 23
2026-01-08T10:09:45.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:45.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 상세 조회 성공, data=ExpenseReportDto(expenseReportId=23, drafterI (truncated)...]
2026-01-08T10:09:45.914+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:45.941+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:45.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses/23
2026-01-08T10:09:45.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T10:09:45.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:45.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T10:09:45.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:09:45.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses/23
2026-01-08T10:09:45.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:45.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T10:09:45.950+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:45.956+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:45.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses/23
2026-01-08T10:09:45.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:45.956+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/users/me/signatures
2026-01-08T10:09:45.957+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:45.957+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses/23", parameters={}
2026-01-08T10:09:45.957+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:45.958+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T10:09:45.959+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.960+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseDetailForSuperAdmin(Long)
2026-01-08T10:09:45.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:45.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T10:09:45.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b8a330] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:45.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T10:09:45.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:45.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65eeb1ae] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1788747477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:45.966+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 4
2026-01-08T10:09:45.967+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 요청 (SUPERADMIN) - userId: 9, expenseReportId: 23
2026-01-08T10:09:45.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049623120 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:45.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:45.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.970+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@323e09f0] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.970+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:45.972+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:45.972+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2edbda79] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.973+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:45.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2029819896 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:45.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:09:45.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288324385 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:45.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:45.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T10:09:45.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b8a330]
2026-01-08T10:09:45.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.E.selectExpenseReportByIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.expense_report_id = ?
2026-01-08T10:09:45.977+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65eeb1ae]
2026-01-08T10:09:45.978+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:45.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:45.978+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:45.978+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.E.selectExpenseReportByIdForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:45.980+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:09:45.981+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:45.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:45.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.E.selectExpenseReportByIdForSuperAdmin : <==      Total: 1
2026-01-08T10:09:45.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2edbda79]
2026-01-08T10:09:45.990+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.990+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T10:09:45.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b99120] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@323e09f0]
2026-01-08T10:09:45.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220190710 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:45.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .b.m.E.selectExpenseDetailsForSuperAdmin : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ?
2026-01-08T10:09:45.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:45.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .b.m.E.selectExpenseDetailsForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T10:09:45.993+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:45.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] .b.m.E.selectExpenseDetailsForSuperAdmin : <==      Total: 1
2026-01-08T10:09:45.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T10:09:45.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b99120]
2026-01-08T10:09:45.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:45.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@335070a8] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:45.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1723189107 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:45.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/users/me/signatures
2026-01-08T10:09:45.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] i.b.m.E.selectApprovalLinesForSuperAdmin : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al LEFT JOIN user_tb u ON al.approver_id = u.user_id LEFT JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? ORDER BY al.step_order ASC
2026-01-08T10:09:45.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T10:09:45.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] i.b.m.E.selectApprovalLinesForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:45.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T10:09:46.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T10:09:46.000+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 4
2026-01-08T10:09:46.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:46.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2558b566] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:46.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] i.b.m.E.selectApprovalLinesForSuperAdmin : <==      Total: 1
2026-01-08T10:09:46.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@335070a8]
2026-01-08T10:09:46.005+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2107514549 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:46.005+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:46.005+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T10:09:46.006+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15806dd2] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:46.006+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:46.006+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627415802 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:46.007+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] ctReceiptsByExpenseReportIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T10:09:46.008+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] ctReceiptsByExpenseReportIdForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:46.008+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T10:09:46.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2558b566]
2026-01-08T10:09:46.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:46.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T10:09:46.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] ctReceiptsByExpenseReportIdForSuperAdmin : <==      Total: 0
2026-01-08T10:09:46.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15806dd2]
2026-01-08T10:09:46.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:46.015+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 완료 (SUPERADMIN) - expenseReportId: 23
2026-01-08T10:09:46.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:46.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 상세 조회 성공, data=ExpenseReportDto(expenseReportId=23, drafterI (truncated)...]
2026-01-08T10:09:46.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:46.023+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses/23
2026-01-08T10:09:46.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses/23
2026-01-08T10:09:46.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses/23
2026-01-08T10:09:46.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses/23", parameters={}
2026-01-08T10:09:46.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseDetailForSuperAdmin(Long)
2026-01-08T10:09:46.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:46.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:46.031+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 요청 (SUPERADMIN) - userId: 9, expenseReportId: 23
2026-01-08T10:09:46.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:46.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d1d377] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:46.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1051534120 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:46.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.E.selectExpenseReportByIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.expense_report_id = ?
2026-01-08T10:09:46.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.E.selectExpenseReportByIdForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:46.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.E.selectExpenseReportByIdForSuperAdmin : <==      Total: 1
2026-01-08T10:09:46.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d1d377]
2026-01-08T10:09:46.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:46.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290423f5] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:46.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062733769 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:46.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] .b.m.E.selectExpenseDetailsForSuperAdmin : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ?
2026-01-08T10:09:46.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] .b.m.E.selectExpenseDetailsForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:46.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] .b.m.E.selectExpenseDetailsForSuperAdmin : <==      Total: 1
2026-01-08T10:09:46.056+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290423f5]
2026-01-08T10:09:46.057+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:46.057+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec048c8] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:46.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919854958 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:46.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] i.b.m.E.selectApprovalLinesForSuperAdmin : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al LEFT JOIN user_tb u ON al.approver_id = u.user_id LEFT JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? ORDER BY al.step_order ASC
2026-01-08T10:09:46.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] i.b.m.E.selectApprovalLinesForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:46.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] i.b.m.E.selectApprovalLinesForSuperAdmin : <==      Total: 1
2026-01-08T10:09:46.094+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec048c8]
2026-01-08T10:09:46.094+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:46.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ffcf6ed] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:46.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128687570 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:46.225+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] ctReceiptsByExpenseReportIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T10:09:46.229+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] ctReceiptsByExpenseReportIdForSuperAdmin : ==> Parameters: 23(Long)
2026-01-08T10:09:46.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] ctReceiptsByExpenseReportIdForSuperAdmin : <==      Total: 0
2026-01-08T10:09:46.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ffcf6ed]
2026-01-08T10:09:46.238+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 완료 (SUPERADMIN) - expenseReportId: 23
2026-01-08T10:09:46.239+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:46.240+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 상세 조회 성공, data=ExpenseReportDto(expenseReportId=23, drafterI (truncated)...]
2026-01-08T10:09:46.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:46.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:46.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:09:46.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:09:47.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:09:47.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:09:47.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:09:47.007+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:09:47.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:09:47.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:47.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:47.023+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:47.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:47.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:09:47.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:09:47.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:09:47.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:09:47.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@266e2c89] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:09:47.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:09:47.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:09:47.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:09:47.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:47.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:09:47.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:09:47.040+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:09:47.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:09:47.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:47.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:09:47.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:09:47.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2037367006 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:47.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:47.060+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:09:47.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a3d7644] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.061+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:09:47.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:47.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933656241 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:47.063+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:09:47.063+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:09:47.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7998950a] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:47.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fda9a8d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:09:47.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:47.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6f9859] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a4f3d3] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162836351 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:47.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@266e2c89]
2026-01-08T10:09:47.074+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:47.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.076+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082506222 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:47.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296703820 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148106997 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:47.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:47.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:09:47.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:47.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:47.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:47.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a3d7644]
2026-01-08T10:09:47.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:47.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:47.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:47.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:47.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:09:47.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7998950a]
2026-01-08T10:09:47.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:47.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:09:47.097+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:09:47.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:09:47.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:47.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:09:47.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:09:47.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:47.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:09:47.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:09:47.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:47.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:47.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:47.125+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:09:47.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:09:47.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6f9859]
2026-01-08T10:09:47.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fda9a8d]
2026-01-08T10:09:47.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:47.131+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:09:47.131+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:47.131+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:09:47.133+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:09:47.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:09:47.140+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.140+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4241ab0f] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:09:47.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@633230d4] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:47.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:09:47.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927024060 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:47.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2092627769 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:47.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:47.150+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:09:47.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:47.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.154+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd4cae3] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:47.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a4f3d3]
2026-01-08T10:09:47.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.157+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.158+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1806489206 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:47.159+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.159+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.159+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:09:47.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:47.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f593cec] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:09:47.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:09:47.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333345783 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:09:47.174+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:47.188+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4241ab0f]
2026-01-08T10:09:47.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:47.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:47.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:09:47.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:47.190+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.191+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:47.192+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:47.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:09:47.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a61a2f] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.196+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:09:47.198+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:09:47.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121320135 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:47.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75935e51] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:09:47.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841337744 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:47.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd4cae3]
2026-01-08T10:09:47.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:47.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:09:47.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:47.208+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.209+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:47.210+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.210+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:47.223+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f593cec]
2026-01-08T10:09:47.225+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.214+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:47.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:09:47.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.225+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2370ad59] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:47.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1695046535 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.238+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:09:47.240+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:09:47.243+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:47.243+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:47.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:09:47.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:09:47.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.261+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6010faf1] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75935e51]
2026-01-08T10:09:47.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:47.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:09:47.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:09:47.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426592378 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:47.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2370ad59]
2026-01-08T10:09:47.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:09:47.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:47.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:47.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:47.276+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:47.278+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:09:47.278+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:47.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:47.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:47.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:09:47.284+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:09:47.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a61a2f]
2026-01-08T10:09:47.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:09:47.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.293+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.294+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:47.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:09:47.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:47.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0277dd] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.296+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38147746] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.297+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:09:47.297+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:47.298+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6010faf1]
2026-01-08T10:09:47.298+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423439285 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:47.298+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084934269 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:09:47.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:09:47.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:47.306+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:09:47.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:47.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:47.308+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.308+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:47.311+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.308+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.309+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:47.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:47.312+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:09:47.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:47.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:09:47.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622363c0] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@633230d4]
2026-01-08T10:09:47.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416190506 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:47.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262e5954] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.325+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:09:47.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:47.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:47.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372763727 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:47.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:47.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:47.332+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:47.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:09:47.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:47.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:47.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:09:47.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.345+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0277dd]
2026-01-08T10:09:47.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:09:47.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:47.350+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:09:47.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:09:47.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:47.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622363c0]
2026-01-08T10:09:47.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:47.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:09:47.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:09:47.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:09:47.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:47.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:09:47.374+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.375+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:09:47.390+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.391+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4afd7f] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297062477 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:47.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:09:47.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.397+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:47.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:47.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:09:47.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:47.409+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.414+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:09:47.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:09:47.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:09:47.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15386814] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:09:47.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1314929538 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:47.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:47.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:47.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479ae21c] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.439+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.439+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:47.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4afd7f]
2026-01-08T10:09:47.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@448259469 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:47.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.449+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:47.449+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cf36c68] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:09:47.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:47.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262e5954]
2026-01-08T10:09:47.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1367332748 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:09:47.462+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:09:47.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:47.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:09:47.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:09:47.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:47.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:47.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:09:47.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:09:47.490+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479ae21c]
2026-01-08T10:09:47.491+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cf36c68]
2026-01-08T10:09:47.491+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.491+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:47.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:09:47.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:47.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:47.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:47.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:47.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38147746]
2026-01-08T10:09:47.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:09:47.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:09:47.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:09:47.524+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:47.525+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:09:47.525+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:09:47.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:09:47.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.530+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:47.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:47.544+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:47.544+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:09:47.544+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:47.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2e45f4] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15386814]
2026-01-08T10:09:47.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014458125 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.546+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:09:47.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:09:47.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:09:47.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:09:47.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:47.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:09:47.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2e45f4]
2026-01-08T10:09:47.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@146b4e00] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944154780 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:09:47.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:09:47.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@146b4e00]
2026-01-08T10:09:47.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c809dc] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.563+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285377227 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.563+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:09:47.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:09:47.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:09:47.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:09:47.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:09:47.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c809dc]
2026-01-08T10:09:47.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:47.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ff4050] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:47.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596104880 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:09:47.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:47.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:47.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:47.613+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.614+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:47.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:47.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:47.622+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:47.622+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:47.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:47.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:47.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:47.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ff4050]
2026-01-08T10:09:47.627+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:47.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:09:47.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:49.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:49.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:49.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:49.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:09:49.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:49.093+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:49.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:49.098+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:09:49.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:49.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e7abb6] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:49.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2068405097 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:49.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:49.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:49.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:49.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e7abb6]
2026-01-08T10:09:49.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:49.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc87019] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:49.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032209342 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:09:49.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:49.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:09:49.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:09:49.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc87019]
2026-01-08T10:09:49.134+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:49.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:49.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:49.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:52.680+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:09:52.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:09:52.690+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:09:52.690+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:09:52.691+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/user-signups
2026-01-08T10:09:52.691+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/revenue
2026-01-08T10:09:52.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:09:52.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:09:52.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08", parameters={masked}
2026-01-08T10:09:52.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08", parameters={masked}
2026-01-08T10:09:52.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getUserSignupTrend(LocalDate, LocalDate)
2026-01-08T10:09:52.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getRevenueTrend(LocalDate, LocalDate)
2026-01-08T10:09:52.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:52.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:52.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:52.707+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:52.709+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 사용자 가입 추이 조회 요청 - userId: 9, from: 2025-12-09, to: 2026-01-08
2026-01-08T10:09:52.710+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 매출 추이 조회 요청 - userId: 9, from: 2025-12-09, to: 2026-01-08
2026-01-08T10:09:52.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:52.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ca3207] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:52.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:52.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b8da0a2] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:52.724+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476154766 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:09:52.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUserSignupTrend          : ==>  Preparing: SELECT DATE(created_at) AS date, COUNT(*) AS count FROM user_tb WHERE DATE(created_at) BETWEEN ? AND ? GROUP BY DATE(created_at) ORDER BY date ASC
2026-01-08T10:09:52.730+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUserSignupTrend          : ==> Parameters: 2025-12-09(LocalDate), 2026-01-08(LocalDate)
2026-01-08T10:09:52.731+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@318970693 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:09:52.732+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:09:52.733+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:09:52.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:52.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUserSignupTrend          : <==      Total: 3
2026-01-08T10:09:52.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:09:52.748+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ca3207]
2026-01-08T10:09:52.750+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:52.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자 가입 추이 조회 성공, data=[AdminReportService.UserSignupTrendDto(date= (truncated)...]
2026-01-08T10:09:52.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:52.757+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:52.759+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:52.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:09:52.766+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:52.775+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:09:52.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:09:52.782+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:09:52.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:09:52.792+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:09:52.796+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:09:52.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:09:52.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b8da0a2]
2026-01-08T10:09:52.800+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:52.801+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=매출 추이 조회 성공, data=[AdminReportService.RevenueTrendDto(date=2025-12 (truncated)...]
2026-01-08T10:09:52.812+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:09:54.897+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:54.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:09:54.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:09:54.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:09:54.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:09:54.906+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:54.907+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:09:54.908+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:09:54.909+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:54.909+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@357a04a8] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:54.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@438309871 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:54.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:09:54.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:09:54.915+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:09:54.915+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@357a04a8]
2026-01-08T10:09:54.916+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:09:54.916+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6b5f3d] was not registered for synchronization because synchronization is not active
2026-01-08T10:09:54.917+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478135246 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:09:54.917+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:09:54.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:09:54.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:09:54.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6b5f3d]
2026-01-08T10:09:54.927+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:09:54.927+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:09:54.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:09:54.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:06.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:06.485+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:12:06.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:06.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:12:06.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:12:06.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:06.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:06.522+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:12:06.522+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:06.522+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6fe86a] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:06.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@400177978 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:12:06.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:12:06.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:12:06.536+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:12:06.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6fe86a]
2026-01-08T10:12:06.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:06.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b57857] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:06.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114240808 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:12:06.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:12:06.540+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:12:06.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:12:06.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b57857]
2026-01-08T10:12:06.548+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:12:06.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:06.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:12:06.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:10.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:10.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:12:10.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:10.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:12:10.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:12:10.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:10.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:10.150+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:12:10.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:10.152+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ed169e] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:10.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248803665 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:12:10.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:12:10.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:12:10.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:12:10.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ed169e]
2026-01-08T10:12:10.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:10.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da9e59b] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:10.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509873929 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:12:10.208+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:12:10.209+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:12:10.212+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:12:10.213+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da9e59b]
2026-01-08T10:12:10.217+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:12:10.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:10.220+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:12:10.221+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:10.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:10.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:10.657+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/user-signups
2026-01-08T10:12:10.658+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:10.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08", parameters={masked}
2026-01-08T10:12:10.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getUserSignupTrend(LocalDate, LocalDate)
2026-01-08T10:12:10.658+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/revenue
2026-01-08T10:12:10.666+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:10.671+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:10.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:10.673+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 사용자 가입 추이 조회 요청 - userId: 9, from: 2025-12-09, to: 2026-01-08
2026-01-08T10:12:10.673+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08", parameters={masked}
2026-01-08T10:12:10.674+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:10.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getRevenueTrend(LocalDate, LocalDate)
2026-01-08T10:12:10.676+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672fc61c] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:10.677+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:10.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:10.681+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 매출 추이 조회 요청 - userId: 9, from: 2025-12-09, to: 2026-01-08
2026-01-08T10:12:10.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290068731 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:12:10.687+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:10.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUserSignupTrend          : ==>  Preparing: SELECT DATE(created_at) AS date, COUNT(*) AS count FROM user_tb WHERE DATE(created_at) BETWEEN ? AND ? GROUP BY DATE(created_at) ORDER BY date ASC
2026-01-08T10:12:10.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4255a203] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:10.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUserSignupTrend          : ==> Parameters: 2025-12-09(LocalDate), 2026-01-08(LocalDate)
2026-01-08T10:12:10.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1727761732 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:12:10.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUserSignupTrend          : <==      Total: 3
2026-01-08T10:12:10.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:12:10.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672fc61c]
2026-01-08T10:12:10.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:12:10.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:10.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자 가입 추이 조회 성공, data=[AdminReportService.UserSignupTrendDto(date= (truncated)...]
2026-01-08T10:12:10.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:10.706+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:12:10.707+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:12:10.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:12:10.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:12:10.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:12:10.713+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:12:10.714+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:12:10.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:12:10.720+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:12:10.721+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:12:10.723+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:12:10.724+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:12:10.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:12:10.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4255a203]
2026-01-08T10:12:10.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:10.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=매출 추이 조회 성공, data=[AdminReportService.RevenueTrendDto(date=2025-12 (truncated)...]
2026-01-08T10:12:10.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:10.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:11.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:12:11.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:11.006+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:12:11.006+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:12:11.007+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:11.008+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:11.008+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:12:11.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:11.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31c8dcd2] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:11.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502883535 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:12:11.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:12:11.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:12:11.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:12:11.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31c8dcd2]
2026-01-08T10:12:11.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:11.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c6735a4] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:11.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76975330 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:12:11.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:12:11.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:12:11.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:12:11.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c6735a4]
2026-01-08T10:12:11.038+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:12:11.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:11.040+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:12:11.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:19.867+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:19.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:12:19.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:19.871+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:12:19.872+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:12:19.874+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:19.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:19.894+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:12:19.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:19.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@931ceb7] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:19.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732796314 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:12:19.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:12:19.906+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:12:19.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:12:19.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@931ceb7]
2026-01-08T10:12:19.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:19.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a15c20e] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:19.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1019759576 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:12:19.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:12:19.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:12:19.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:12:19.927+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a15c20e]
2026-01-08T10:12:19.929+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:12:19.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:19.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:12:19.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:20.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:20.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:20.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/revenue
2026-01-08T10:12:20.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/user-signups
2026-01-08T10:12:20.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:20.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08
2026-01-08T10:12:20.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/revenue?from=2025-12-09&to=2026-01-08", parameters={masked}
2026-01-08T10:12:20.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/user-signups?from=2025-12-09&to=2026-01-08", parameters={masked}
2026-01-08T10:12:20.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getRevenueTrend(LocalDate, LocalDate)
2026-01-08T10:12:20.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getUserSignupTrend(LocalDate, LocalDate)
2026-01-08T10:12:20.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:20.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:20.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:20.123+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:20.123+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 매출 추이 조회 요청 - userId: 9, from: 2025-12-09, to: 2026-01-08
2026-01-08T10:12:20.123+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 사용자 가입 추이 조회 요청 - userId: 9, from: 2025-12-09, to: 2026-01-08
2026-01-08T10:12:20.123+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:20.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:20.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5732d658] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:20.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef302cd] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:20.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1225046871 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:12:20.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUserSignupTrend          : ==>  Preparing: SELECT DATE(created_at) AS date, COUNT(*) AS count FROM user_tb WHERE DATE(created_at) BETWEEN ? AND ? GROUP BY DATE(created_at) ORDER BY date ASC
2026-01-08T10:12:20.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81857786 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:12:20.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUserSignupTrend          : ==> Parameters: 2025-12-09(LocalDate), 2026-01-08(LocalDate)
2026-01-08T10:12:20.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:12:20.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:12:20.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUserSignupTrend          : <==      Total: 3
2026-01-08T10:12:20.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:12:20.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef302cd]
2026-01-08T10:12:20.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:12:20.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:20.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자 가입 추이 조회 성공, data=[AdminReportService.UserSignupTrendDto(date= (truncated)...]
2026-01-08T10:12:20.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:20.138+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:12:20.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:12:20.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:12:20.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:12:20.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:12:20.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:12:20.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:12:20.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:12:20.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:12:20.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:12:20.154+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:12:20.154+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5732d658]
2026-01-08T10:12:20.155+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:20.155+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=매출 추이 조회 성공, data=[AdminReportService.RevenueTrendDto(date=2025-12 (truncated)...]
2026-01-08T10:12:20.157+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:12:20.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:20.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:12:20.938+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:12:20.939+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:12:20.939+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:12:20.941+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:20.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:12:20.945+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:12:20.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:20.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ffe81e] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:20.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2019996776 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:12:20.954+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:12:20.955+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:12:20.959+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:12:20.960+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ffe81e]
2026-01-08T10:12:20.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:12:20.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e829695] was not registered for synchronization because synchronization is not active
2026-01-08T10:12:20.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1864920657 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:12:20.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:12:20.968+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:12:20.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:12:20.978+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e829695]
2026-01-08T10:12:20.978+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:12:20.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:12:20.980+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:12:20.993+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:02.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:14:02.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:14:02.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:14:02.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:14:02.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:14:02.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:14:02.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:14:02.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:14:02.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:14:02.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:14:02.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:14:02.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:14:02.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:14:02.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:14:02.289+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:14:02.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:14:02.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:14:02.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:14:02.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:14:02.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:14:02.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.308+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.320+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:14:02.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.324+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.325+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:14:02.326+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.322+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:14:02.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9df81] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.327+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:14:02.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3025c738] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d671112] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf81c25] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323794470 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@473849713 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885831141 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:02.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:02.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:02.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:02.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1174802247 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:02.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:02.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:02.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:02.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:02.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:02.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:02.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d671112]
2026-01-08T10:14:02.364+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:14:02.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3025c738]
2026-01-08T10:14:02.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:02.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf81c25]
2026-01-08T10:14:02.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:02.367+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:14:02.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:14:02.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:02.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126a95ba] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.370+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:14:02.370+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:02.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@114188894 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:02.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:02.372+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:02.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:02.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:02.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:02.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:02.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126a95ba]
2026-01-08T10:14:02.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9df81]
2026-01-08T10:14:02.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.386+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:14:02.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7cd0b0] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:02.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712859584 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:02.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:14:02.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:02.388+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:02.389+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:02.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:02.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:02.399+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:02.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:02.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7cd0b0]
2026-01-08T10:14:02.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdadee] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.406+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144938990 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:02.409+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:02.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:02.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:02.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:02.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:02.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:02.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:02.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:02.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:02.425+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:02.428+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:02.430+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:02.429+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:14:02.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:02.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:02.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:14:02.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:02.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:14:02.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdadee]
2026-01-08T10:14:02.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:14:02.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:02.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:14:02.439+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:14:02.440+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.441+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:02.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.443+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:14:02.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416993d3] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.456+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463482280 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:14:02.457+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:02.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:02.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:02.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:02.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:02.463+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:14:02.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:02.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:02.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:02.469+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:02.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:14:02.472+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:14:02.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:02.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:02.477+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:14:02.478+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:02.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:02.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72985d34] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154211008 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:02.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:02.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:14:02.490+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:02.490+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:14:02.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:02.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:02.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:14:02.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:02.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72985d34]
2026-01-08T10:14:02.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416993d3]
2026-01-08T10:14:02.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:02.502+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:14:02.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88370e8] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:02.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:02.506+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@943910193 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:02.507+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:14:02.507+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:14:02.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:02.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:14:02.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:14:02.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88370e8]
2026-01-08T10:14:02.536+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:14:02.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:02.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:14:02.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:04.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:14:04.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:14:04.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:14:04.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:14:04.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:14:04.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:14:04.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:14:04.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:14:04.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:14:04.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:14:04.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:14:04.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:14:04.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:14:04.293+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:14:04.302+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:14:04.293+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.297+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.307+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:14:04.308+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:14:04.308+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:14:04.308+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.309+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.309+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194b9c8b] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.309+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cef8b9] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f324466] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:14:04.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:14:04.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:14:04.340+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:14:04.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:14:04.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:04.346+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:14:04.358+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.358+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd59363] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@962127145 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:14:04.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1731442001 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:04.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1944705764 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:04.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:04.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:04.372+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:04.372+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773872185 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:04.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:04.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:04.374+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:04.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:04.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:04.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:04.425+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:04.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:04.427+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:04.440+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194b9c8b]
2026-01-08T10:14:04.441+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:04.441+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cef8b9]
2026-01-08T10:14:04.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f324466]
2026-01-08T10:14:04.442+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:14:04.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.452+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:14:04.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:04.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:14:04.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:04.472+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44259201] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:04.490+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:04.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@52761915 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:04.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:04.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd59363]
2026-01-08T10:14:04.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:14:04.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:04.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:04.506+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:14:04.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:04.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:14:04.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:04.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:04.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:04.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44259201]
2026-01-08T10:14:04.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ef1047] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@506605825 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:04.598+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:04.599+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:04.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:04.608+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:04.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:04.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:04.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ef1047]
2026-01-08T10:14:04.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:04.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f559c4] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:04.623+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2025903106 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:04.623+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:04.623+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:04.641+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:04.645+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:04.655+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:04.656+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:04.657+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:04.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:04.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:04.671+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:04.674+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:04.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:04.677+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:04.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:04.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:04.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f559c4]
2026-01-08T10:14:04.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:04.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:14:04.687+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:05.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:14:06.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:14:06.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:14:06.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:14:06.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:14:06.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:06.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:06.026+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:14:06.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:06.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ee41513] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:06.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274871661 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:06.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:06.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:06.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:06.076+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:06.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:06.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:06.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:06.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:06.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:06.106+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:06.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:06.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:06.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:06.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:06.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:06.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ee41513]
2026-01-08T10:14:06.123+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:14:06.123+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:06.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:14:06.125+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:06.140+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:06.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:14:06.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:06.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:14:06.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:14:06.155+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:06.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:06.157+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:14:06.158+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:06.158+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0737a] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:06.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388758703 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:06.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:14:06.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:14:06.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:14:06.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0737a]
2026-01-08T10:14:06.390+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:06.399+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19548cec] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:06.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738747862 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:06.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:14:06.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:14:06.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:14:06.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19548cec]
2026-01-08T10:14:06.581+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:14:06.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:06.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:14:06.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:07.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:14:07.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:14:07.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:14:07.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:14:07.277+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:14:07.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:14:07.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:14:07.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:14:07.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:14:07.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:14:07.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:14:07.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:14:07.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:14:07.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:14:07.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:14:07.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:14:07.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:14:07.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:14:07.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:14:07.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:14:07.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:14:07.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:14:07.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:14:07.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.289+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:14:07.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:14:07.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.294+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.297+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:14:07.301+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.300+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.300+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:14:07.301+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:14:07.302+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eff75ca] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.303+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:14:07.305+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:14:07.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb7a7f9] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fbae1] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248348541 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:14:07.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:07.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e5b7472] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.307+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a7e4875] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@271127131 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:07.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:07.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:07.324+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:07.324+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966560509 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:07.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:07.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:07.335+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276725580 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:07.335+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1825565226 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:14:07.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:07.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:07.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:07.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eff75ca]
2026-01-08T10:14:07.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:07.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:07.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.340+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:07.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@208bde9d] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:07.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327056106 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:14:07.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:07.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:07.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:07.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:07.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e5b7472]
2026-01-08T10:14:07.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fbae1]
2026-01-08T10:14:07.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:07.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:07.355+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:14:07.356+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:14:07.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:07.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:07.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:14:07.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:14:07.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:07.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:07.374+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:07.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:07.389+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:07.389+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:07.391+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb7a7f9]
2026-01-08T10:14:07.391+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:07.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@208bde9d]
2026-01-08T10:14:07.393+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:14:07.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:07.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.397+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:07.399+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f4fccc] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.399+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:14:07.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1836427033 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:14:07.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:07.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:07.402+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:07.407+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:07.408+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:07.409+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:07.409+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:07.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:07.423+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:07.423+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:07.423+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:07.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:07.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f4fccc]
2026-01-08T10:14:07.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.425+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2994ca] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:07.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1302636313 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:14:07.427+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:07.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:07.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:07.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:07.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a7e4875]
2026-01-08T10:14:07.439+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:14:07.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:07.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:07.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:14:07.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:07.446+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:07.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:07.456+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:07.457+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:07.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:07.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:07.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:07.473+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:07.473+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:07.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:07.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:07.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:07.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2994ca]
2026-01-08T10:14:07.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:07.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:14:07.485+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:07.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:07.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:14:07.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:07.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:14:07.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:14:07.563+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:07.567+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:14:07.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a9aa3a] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.572+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1662094306 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:14:07.573+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:14:07.573+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:14:07.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:14:07.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a9aa3a]
2026-01-08T10:14:07.577+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:07.577+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5914536e] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:07.578+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@130737008 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:14:07.578+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:14:07.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:14:07.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:14:07.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5914536e]
2026-01-08T10:14:07.589+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:14:07.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:07.590+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:14:07.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:13.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:14:13.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:14:13.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:14:13.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:14:13.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:14:13.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:14:13.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:14:13.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:14:13.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:14:13.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:14:13.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.286+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:14:13.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.287+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:14:13.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@561ba345] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b11b062] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.308+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355844065 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:13.309+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437129612 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:13.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:13.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:14:13.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:13.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:14:13.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:13.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:14:13.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@561ba345]
2026-01-08T10:14:13.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b11b062]
2026-01-08T10:14:13.347+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.348+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:14:13.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20dc9c03] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:13.350+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1216316428 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:13.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:14:13.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:13.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:13.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:13.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:13.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20dc9c03]
2026-01-08T10:14:13.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048a9db] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70256981 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:13.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:13.372+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:13.375+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:13.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:13.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:13.388+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:13.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048a9db]
2026-01-08T10:14:13.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cc82d75] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683078424 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:13.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:13.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:13.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:13.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:13.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:13.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:13.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:13.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:13.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:13.472+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:13.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:13.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:13.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:13.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:13.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:13.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cc82d75]
2026-01-08T10:14:13.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:13.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:14:13.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:13.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:14:13.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:14:13.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:14:13.540+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:14:13.540+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:14:13.542+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.543+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.543+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:14:13.544+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.544+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8d363d] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@592012904 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:14:13.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:14:13.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:14:13.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:13.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:14:13.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:14:13.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:14:13.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:14:13.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.565+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:14:13.567+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:14:13.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8d363d]
2026-01-08T10:14:13.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.572+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:14:13.572+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434e8af8] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.573+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:13.574+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:14:13.574+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:13.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@6488064 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:14:13.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:14:13.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:14:13.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:14:13.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:13.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:14:13.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:14:13.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:14:13.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:14:13.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:14:13.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:14:13.590+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.590+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:14:13.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434e8af8]
2026-01-08T10:14:13.593+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:14:13.593+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:14:13.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:13.598+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@704c53e1] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.599+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:14:13.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:13.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317054857 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:14:13.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:14:13.612+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:14:13.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:13.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:14:13.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:13.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:13.622+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:14:13.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:13.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:14:13.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:14:13.639+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:14:13.641+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:14:13.644+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:14:13.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:14:13.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:14:13.650+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@704c53e1]
2026-01-08T10:14:13.650+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:14:13.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:13.653+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:14:13.656+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:13.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:13.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:14:13.666+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:14:13.666+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:14:13.666+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:14:13.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:14:13.669+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:14:13.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1eeaa5] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1562014468 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:13.671+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:14:13.672+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:14:13.674+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:14:13.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1eeaa5]
2026-01-08T10:14:13.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:14:13.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@770d75d5] was not registered for synchronization because synchronization is not active
2026-01-08T10:14:13.676+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550705235 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:14:13.676+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:14:13.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:14:13.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:14:13.682+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@770d75d5]
2026-01-08T10:14:13.683+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:14:13.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:13.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:14:13.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:14:23.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-01-08T10:14:23.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-01-08T10:14:23.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/account-codes/list
2026-01-08T10:14:23.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-01-08T10:14:23.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-01-08T10:14:23.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-01-08T10:14:23.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-01-08T10:14:23.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@7170764 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('ADMIN', 'CEO', 'ACCOUNTANT')]
2026-01-08T10:14:23.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T10:14:23.623+09:00  WARN 18084 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T10:14:23.624+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:23.627+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T10:14:23.640+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T10:14:23.643+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T10:14:29.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-01-08T10:14:29.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/account-codes/list
2026-01-08T10:14:29.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-01-08T10:14:29.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-01-08T10:14:29.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-01-08T10:14:29.567+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-01-08T10:14:29.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@7170764 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('ADMIN', 'CEO', 'ACCOUNTANT')]
2026-01-08T10:14:29.573+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T10:14:29.574+09:00  WARN 18084 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T10:14:29.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:14:29.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T10:14:29.579+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T10:14:29.590+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T10:16:23.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-01-08T10:16:23.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/account-codes/list
2026-01-08T10:16:23.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-01-08T10:16:23.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-01-08T10:16:23.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-01-08T10:16:23.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-01-08T10:16:23.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@7170764 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('ADMIN', 'CEO', 'ACCOUNTANT')]
2026-01-08T10:16:23.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T10:16:23.118+09:00  WARN 18084 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T10:16:23.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:23.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T10:16:23.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T10:16:23.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T10:16:40.389+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:16:40.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:16:40.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:16:40.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:16:40.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:16:40.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:16:40.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:16:40.417+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:16:40.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:40.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6abba447] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:40.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162398945 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:40.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:16:40.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:16:40.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:16:40.439+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6abba447]
2026-01-08T10:16:40.439+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:40.439+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291817bc] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:40.440+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046048656 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:40.440+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:40.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:16:40.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:16:40.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291817bc]
2026-01-08T10:16:40.452+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:16:40.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:40.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:16:40.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:42.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-01-08T10:16:42.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/account-codes/list
2026-01-08T10:16:42.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-01-08T10:16:42.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-01-08T10:16:42.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-01-08T10:16:42.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-01-08T10:16:42.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@7170764 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('ADMIN', 'CEO', 'ACCOUNTANT')]
2026-01-08T10:16:42.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-08T10:16:42.670+09:00  WARN 18084 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-08T10:16:42.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:42.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-08T10:16:42.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-08T10:16:42.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-08T10:16:48.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T10:16:48.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/logout
2026-01-08T10:16:48.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T10:16:48.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T10:16:48.440+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T10:16:48.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI5IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T10:16:48.444+09:00  INFO 18084 --- [http-nio-8080-exec-5] SECURITY                                 : LOGOUT userId=9
2026-01-08T10:16:48.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:48.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T10:16:48.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:51.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T10:16:51.691+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T10:16:51.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T10:16:51.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T10:16:51.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T10:16:51.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-08T10:16:51.694+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-08T10:16:51.694+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:51.694+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15430205] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:51.697+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522683358 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:51.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T10:16:51.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-08T10:16:51.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T10:16:51.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15430205]
2026-01-08T10:16:51.783+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:51.783+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f280ff] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:51.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250606145 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:51.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:16:51.785+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:16:51.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:16:51.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f280ff]
2026-01-08T10:16:51.788+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-08T10:16:51.788+09:00  INFO 18084 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-08T10:16:51.789+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:51.789+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-08T10:16:51.790+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T10:16:53.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-08T10:16:53.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T10:16:53.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T10:16:53.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T10:16:53.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d3e4a4d] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.056+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@648244340 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:53.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T10:16:53.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-08T10:16:53.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-08T10:16:53.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d3e4a4d]
2026-01-08T10:16:53.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.073+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T10:16:53.074+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T10:16:53.131+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T10:16:53.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:16:53.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T10:16:53.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:16:53.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:16:53.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T10:16:53.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:16:53.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T10:16:53.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T10:16:53.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:16:53.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:16:53.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T10:16:53.155+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:16:53.160+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:16:53.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T10:16:53.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:16:53.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T10:16:53.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:16:53.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:16:53.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T10:16:53.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T10:16:53.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:16:53.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T10:16:53.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:16:53.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:16:53.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T10:16:53.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T10:16:53.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T10:16:53.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:16:53.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:16:53.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T10:16:53.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff4f037] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:16:53.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:16:53.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc14690] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:16:53.173+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:16:53.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20060016 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:16:53.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cde078] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:16:53.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ebc303] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196990760 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:16:53.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031907498 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:53.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d23c47] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.188+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:16:53.189+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.193+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344e6729] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.193+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1673365749 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:16:53.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:16:53.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.196+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:16:53.196+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff4f037]
2026-01-08T10:16:53.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:16:53.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642047296 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@765943407 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T10:16:53.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:16:53.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae043d6] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T10:16:53.205+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T10:16:53.205+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc14690]
2026-01-08T10:16:53.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cde078]
2026-01-08T10:16:53.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1368541073 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T10:16:53.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:16:53.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:16:53.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ebc303]
2026-01-08T10:16:53.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59690391] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.219+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.222+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cba46df] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.223+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646061284 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:53.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:16:53.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1137673629 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.238+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:16:53.240+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:16:53.243+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:16:53.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:16:53.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:16:53.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.249+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:16:53.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae043d6]
2026-01-08T10:16:53.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:16:53.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:16:53.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.252+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:16:53.253+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59690391]
2026-01-08T10:16:53.253+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cba46df]
2026-01-08T10:16:53.253+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51fd8581] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e90def] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.255+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.257+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T10:16:53.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623601619 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:53.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097795575 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e14fa2d] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.265+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:16:53.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344e6729]
2026-01-08T10:16:53.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:16:53.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795874293 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:16:53.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T10:16:53.280+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d23c47]
2026-01-08T10:16:53.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T10:16:53.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:16:53.271+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:16:53.271+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:53.273+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:16:53.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T10:16:53.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.297+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:16:53.298+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:16:53.302+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:16:53.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:16:53.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51fd8581]
2026-01-08T10:16:53.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T10:16:53.313+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:16:53.314+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:16:53.314+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:16:53.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:16:53.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e90def]
2026-01-08T10:16:53.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T10:16:53.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:16:53.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:16:53.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:16:53.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:16:53.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10009df3] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643605097 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T10:16:53.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:16:53.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e14fa2d]
2026-01-08T10:16:53.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.326+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T10:16:53.326+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T10:16:53.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T10:16:53.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:16:53.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:16:53.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9befbdb] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T10:16:53.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:16:53.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e154fe9] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.335+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@387320295 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:16:53.335+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T10:16:53.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b678d4] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667492244 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.338+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:16:53.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T10:16:53.339+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322be023] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1916982703 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.342+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10009df3]
2026-01-08T10:16:53.345+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T10:16:53.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629150853 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:53.347+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:16:53.347+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:16:53.347+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:16:53.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T10:16:53.350+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:16:53.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9befbdb]
2026-01-08T10:16:53.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:16:53.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:16:53.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T10:16:53.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:16:53.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:16:53.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:16:53.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b678d4]
2026-01-08T10:16:53.372+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140c642a] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e154fe9]
2026-01-08T10:16:53.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:16:53.379+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.379+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1920645399 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:16:53.381+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132e87ea] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.381+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T10:16:53.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55536a38] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:16:53.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702823811 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:16:53.384+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T10:16:53.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101860220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.389+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:16:53.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:16:53.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:16:53.389+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:16:53.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:16:53.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c088c10] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T10:16:53.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@486569739 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140c642a]
2026-01-08T10:16:53.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:16:53.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.406+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:16:53.406+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T10:16:53.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:16:53.421+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:16:53.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55536a38]
2026-01-08T10:16:53.427+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T10:16:53.421+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:16:53.421+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:16:53.422+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132e87ea]
2026-01-08T10:16:53.431+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc5adc8] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.431+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T10:16:53.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c088c10]
2026-01-08T10:16:53.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T10:16:53.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@571021506 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322be023]
2026-01-08T10:16:53.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f295ac] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046669678 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T10:16:53.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T10:16:53.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T10:16:53.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:16:53.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:53.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:16:53.500+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.502+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:16:53.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:16:53.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f295ac]
2026-01-08T10:16:53.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T10:16:53.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:16:53.608+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:16:53.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.614+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634ccfcf] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:16:53.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405be6cb] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667407931 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:16:53.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:16:53.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@307647641 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T10:16:53.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T10:16:53.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:16:53.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc5adc8]
2026-01-08T10:16:53.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T10:16:53.622+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.622+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.623+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T10:16:53.623+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:16:53.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f60fc2f] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1978a593] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T10:16:53.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T10:16:53.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481411523 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477636249 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T10:16:53.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634ccfcf]
2026-01-08T10:16:53.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:16:53.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405be6cb]
2026-01-08T10:16:53.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:16:53.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T10:16:53.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:16:53.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:16:53.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T10:16:53.637+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385da081] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.638+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:16:53.639+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.639+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.640+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:16:53.641+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657417471 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.641+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.642+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1978a593]
2026-01-08T10:16:53.642+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f60fc2f]
2026-01-08T10:16:53.644+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.645+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ac89964] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291046884 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:53.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d343b2] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527b2d6e] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T10:16:53.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423653638 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.653+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170013322 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.657+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385da081]
2026-01-08T10:16:53.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T10:16:53.655+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.656+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:16:53.659+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.659+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:16:53.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:16:53.661+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:16:53.663+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:16:53.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:16:53.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:16:53.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:16:53.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527b2d6e]
2026-01-08T10:16:53.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d343b2]
2026-01-08T10:16:53.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:16:53.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c6da9] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.671+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.672+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@41968323 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:16:53.674+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:16:53.676+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:16:53.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T10:16:53.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ac89964]
2026-01-08T10:16:53.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:16:53.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:16:53.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T10:16:53.687+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:16:53.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:16:53.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfefe01] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:16:53.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113631334 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.697+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:16:53.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:16:53.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:16:53.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:16:53.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:16:53.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c6da9]
2026-01-08T10:16:53.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:16:53.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.703+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:16:53.703+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49793cc6] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.703+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:16:53.703+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568857887 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfefe01]
2026-01-08T10:16:53.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:16:53.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:16:53.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a17bde2] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.714+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632780375 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.716+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.717+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T10:16:53.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:16:53.720+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49793cc6]
2026-01-08T10:16:53.721+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:16:53.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T10:16:53.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.723+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b86e573] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.734+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731476937 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:16:53.733+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T10:16:53.734+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a17bde2]
2026-01-08T10:16:53.735+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:16:53.735+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:16:53.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:16:53.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fc8293] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.741+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580108643 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.742+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.743+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:16:53.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508a2f0a] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@659565573 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:16:53.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:16:53.753+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508a2f0a]
2026-01-08T10:16:53.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fc8293]
2026-01-08T10:16:53.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b86e573]
2026-01-08T10:16:53.755+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.756+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.760+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.761+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e372b0a] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.761+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402b90d4] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:16:53.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329901497 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294812248 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:16:53.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.795+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.795+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.796+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e372b0a]
2026-01-08T10:16:53.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402b90d4]
2026-01-08T10:16:53.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.800+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e4c6c0] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.800+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:53.800+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847043085 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.800+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:16:53.801+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:53.802+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:53.803+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:16:53.805+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:16:53.814+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:16:53.819+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:16:53.820+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:16:53.820+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:16:53.822+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.838+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74dab62d] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.843+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321678987 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.852+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:16:53.855+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:16:53.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:16:53.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e4c6c0]
2026-01-08T10:16:53.885+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:16:53.887+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.887+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74dab62d]
2026-01-08T10:16:53.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25925bdb] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176722287 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da06a02] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216717893 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25925bdb]
2026-01-08T10:16:53.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c406a1] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29351713 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da06a02]
2026-01-08T10:16:53.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.938+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.938+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:16:53.938+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d9db4] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725817215 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.950+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:53.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:16:53.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:16:53.954+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c406a1]
2026-01-08T10:16:53.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15e0d100] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:16:53.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59190291 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d9db4]
2026-01-08T10:16:53.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:53.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.969+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:16:53.970+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1821227c] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.973+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1907911921 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:16:53.981+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:16:53.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15e0d100]
2026-01-08T10:16:53.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:53.986+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79024f9c] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:53.987+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1786378605 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:53.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:53.989+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:53.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:53.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1821227c]
2026-01-08T10:16:53.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:54.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:16:54.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:54.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79024f9c]
2026-01-08T10:16:54.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ff6a11] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854237213 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:54.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:54.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:16:54.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:16:54.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ff6a11]
2026-01-08T10:16:54.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62100049] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084051960 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:16:54.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:54.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:54.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62100049]
2026-01-08T10:16:54.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:54.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:16:54.040+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:16:54.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T10:16:54.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:16:54.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T10:16:54.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T10:16:54.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:16:54.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8059d9] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159470832 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.073+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:54.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:54.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8059d9]
2026-01-08T10:16:54.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8c3703] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@91028794 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:54.089+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:54.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8c3703]
2026-01-08T10:16:54.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcc699d] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1731360520 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:54.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:16:54.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:16:54.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcc699d]
2026-01-08T10:16:54.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4baff067] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.106+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@90306574 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.106+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:54.107+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:54.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4baff067]
2026-01-08T10:16:54.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a7e8a5c] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.124+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852204476 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:54.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:16:54.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:16:54.154+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a7e8a5c]
2026-01-08T10:16:54.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ff5535f] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1098320023 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:16:54.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:16:54.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:16:54.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ff5535f]
2026-01-08T10:16:54.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12adfe0b] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1468479658 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:54.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:54.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.196+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12adfe0b]
2026-01-08T10:16:54.196+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.197+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4a7ffa] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.198+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097503710 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.198+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:16:54.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:16:54.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:16:54.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4a7ffa]
2026-01-08T10:16:54.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:16:54.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c432bfd] was not registered for synchronization because synchronization is not active
2026-01-08T10:16:54.205+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@51985440 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:16:54.205+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:16:54.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:16:54.223+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:16:54.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c432bfd]
2026-01-08T10:16:54.232+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:16:54.256+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:16:54.260+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:01.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-08T10:17:01.039+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-08T10:17:01.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-08T10:17:01.040+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-08T10:17:01.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-08T10:17:01.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:01.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-08T10:17:01.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-08T10:17:01.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-08T10:17:01.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-08T10:17:01.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:01.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:01.053+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:01.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-08T10:17:01.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-08T10:17:01.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-08T10:17:01.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-08T10:17:01.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:01.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-08T10:17:01.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-08T10:17:01.056+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-08T10:17:01.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-08T10:17:01.056+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-08T10:17:01.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:01.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-08T10:17:01.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-08T10:17:01.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aff3c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:01.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:01.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff9cf2f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:01.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:01.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:01.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:01.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:01.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b163f12] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:01.089+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915685217 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:01.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7c536] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:01.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af65975] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:01.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:01.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281048994 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:01.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:01.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-08T10:17:01.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47075577 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:01.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771436394 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:01.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@370236814 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:01.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-08T10:17:01.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T10:17:01.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-08T10:17:01.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-08T10:17:01.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-08T10:17:01.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-08T10:17:01.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:01.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-08T10:17:01.106+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-08T10:17:01.109+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aff3c]
2026-01-08T10:17:01.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff9cf2f]
2026-01-08T10:17:01.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:01.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:01.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595d5ac2] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:01.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1977783, totalCo (truncated)...]
2026-01-08T10:17:01.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-08T10:17:01.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-08T10:17:01.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1837934421 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:01.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b163f12]
2026-01-08T10:17:01.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-08T10:17:01.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af65975]
2026-01-08T10:17:01.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:01.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:01.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7c536]
2026-01-08T10:17:01.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:01.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:01.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:01.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:01.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-08T10:17:01.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-08T10:17:01.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=15, totalAmo (truncated)...]
2026-01-08T10:17:01.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:01.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:01.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:01.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:01.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595d5ac2]
2026-01-08T10:17:01.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:01.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:01.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:04.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:04.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:04.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:04.942+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:04.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:04.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:04.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:04.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:04.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:04.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:04.959+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:04.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:04.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:04.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:04.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:04.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:04.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:05.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:05.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:05.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:05.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:05.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:05.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:05.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:05.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:05.005+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:05.008+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:05.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:05.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:05.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a7b801] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:05.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c3bca85] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@caddf29] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb8ed65] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3de84160] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2287fa4b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.022+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020693867 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343089059 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@863423142 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:05.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1640733157 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@505841903 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:05.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:05.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091665936 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:05.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:05.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:05.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:05.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:05.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:05.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:05.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:05.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3de84160]
2026-01-08T10:17:05.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2287fa4b]
2026-01-08T10:17:05.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@caddf29]
2026-01-08T10:17:05.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a7b801]
2026-01-08T10:17:05.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c3bca85]
2026-01-08T10:17:05.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:05.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.093+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.094+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.094+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:05.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb8ed65]
2026-01-08T10:17:05.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:05.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4ffc3] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60facb49] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3673506c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529194006 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:05.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258501501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.106+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417860658 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c4cdb0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.113+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830709425 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:05.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:05.127+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:05.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:05.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4ffc3]
2026-01-08T10:17:05.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:05.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60facb49]
2026-01-08T10:17:05.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:05.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:05.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff3264b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:05.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@178032273 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:05.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405813f5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.138+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3673506c]
2026-01-08T10:17:05.138+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c4cdb0]
2026-01-08T10:17:05.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.140+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1993226292 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5778f751] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a000715] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603275504 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:05.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:05.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912049161 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:05.159+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:05.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:05.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:05.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:05.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:05.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff3264b]
2026-01-08T10:17:05.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39182577] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:05.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:05.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:05.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405813f5]
2026-01-08T10:17:05.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258973025 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:05.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:05.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5778f751]
2026-01-08T10:17:05.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a000715]
2026-01-08T10:17:05.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.193+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:05.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a28683] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.212+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.214+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:05.214+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5ff450] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122366105 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113a649a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@880637473 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.220+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@452871177 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.228+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:05.231+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.233+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:05.235+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:05.238+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39182577]
2026-01-08T10:17:05.248+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:05.249+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:05.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:05.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:05.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.282+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:05.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5ff450]
2026-01-08T10:17:05.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a28683]
2026-01-08T10:17:05.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:05.291+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:05.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d6c7668] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.296+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd80b00] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.301+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113a649a]
2026-01-08T10:17:05.302+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:05.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:05.311+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343900948 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:05.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@745840031 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:05.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.316+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:05.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d5268a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:05.326+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:05.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963559518 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:05.333+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:05.345+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:05.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:05.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:05.348+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:05.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2712a41f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:05.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:05.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346710389 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:05.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d6c7668]
2026-01-08T10:17:05.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:05.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383aad6d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:05.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:05.370+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.372+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228139703 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:05.397+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d5268a]
2026-01-08T10:17:05.381+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd80b00]
2026-01-08T10:17:05.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.402+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5f3cd1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652387505 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:05.408+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:05.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:05.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:05.422+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2712a41f]
2026-01-08T10:17:05.427+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:05.431+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:05.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383aad6d]
2026-01-08T10:17:05.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7b2853] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:05.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610304447 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:05.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:05.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1494a40e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.441+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:05.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032673332 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:05.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:05.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1249ab96] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.446+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@516926033 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:05.449+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:05.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5f3cd1]
2026-01-08T10:17:05.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:05.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@648d275d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106309289 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7b2853]
2026-01-08T10:17:05.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1494a40e]
2026-01-08T10:17:05.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2266604f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f54e28d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384564704 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:05.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1053922237 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:05.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:05.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1249ab96]
2026-01-08T10:17:05.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:05.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@648d275d]
2026-01-08T10:17:05.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e078e1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:05.478+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202349424 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9003038] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2266604f]
2026-01-08T10:17:05.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:05.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79321482 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:05.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e3ea7c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:05.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:05.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930861175 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:05.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f54e28d]
2026-01-08T10:17:05.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e9c746] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082200156 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:05.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:05.502+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e078e1]
2026-01-08T10:17:05.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.506+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.506+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:05.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:05.517+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e3ea7c]
2026-01-08T10:17:05.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9003038]
2026-01-08T10:17:05.519+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.519+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:05.526+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10803274] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@411652524 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:05.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e9c746]
2026-01-08T10:17:05.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:05.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:05.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10803274]
2026-01-08T10:17:05.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:05.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.591+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:05.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:05.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:05.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:05.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:05.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:05.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ae3c0b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:05.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@820298371 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:05.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:05.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:05.638+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:05.650+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d7d0bc] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931490152 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.671+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:05.687+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ae3c0b]
2026-01-08T10:17:05.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40eaafac] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.692+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644596702 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.694+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.694+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.715+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d7d0bc]
2026-01-08T10:17:05.720+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40eaafac]
2026-01-08T10:17:05.720+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d6dd5a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519a759a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270384876 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1142433738 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.730+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:05.739+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:05.739+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519a759a]
2026-01-08T10:17:05.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d6dd5a]
2026-01-08T10:17:05.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@636995fa] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.746+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc462e7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641876136 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:05.748+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@843530760 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.750+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.750+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:05.751+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:05.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.785+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:05.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@636995fa]
2026-01-08T10:17:05.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc462e7]
2026-01-08T10:17:05.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:05.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:05.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39b4501d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.793+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@399105686 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.793+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:05.818+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.819+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:05.839+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:05.845+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39b4501d]
2026-01-08T10:17:05.848+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.848+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53093905] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1218887617 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:05.872+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:05.886+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:05.888+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53093905]
2026-01-08T10:17:05.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.897+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a341bd1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@552586371 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:05.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:05.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:05.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a341bd1]
2026-01-08T10:17:05.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:05.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba74af1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:05.954+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104619719 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:05.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:05.974+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:06.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:06.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba74af1]
2026-01-08T10:17:06.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:06.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13fb6ec5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:06.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927958153 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:06.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:06.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:06.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:06.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13fb6ec5]
2026-01-08T10:17:06.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:06.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67000d6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:06.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1320541083 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:06.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:06.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:06.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:06.074+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67000d6]
2026-01-08T10:17:06.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:06.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:06.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.457+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T10:17:12.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-08T10:17:12.463+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:12.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T10:17:12.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:12.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:12.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:12.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:12.474+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T10:17:12.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:12.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T10:17:12.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:12.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:12.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:12.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:12.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T10:17:12.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:12.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies/pending
2026-01-08T10:17:12.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:12.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:12.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:12.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T10:17:12.485+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:12.485+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T10:17:12.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:12.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:12.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:12.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T10:17:12.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:12.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T10:17:12.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:12.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T10:17:12.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T10:17:12.493+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T10:17:12.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47ac5021] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74908ef] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.491+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75d6b8b3] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71010a21] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e161110] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa0f8a5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1640240257 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:12.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148908188 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:12.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:12.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:12.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1282694894 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:12.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1453109046 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:12.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459832160 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:12.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-08T10:17:12.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1415136138 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:12.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:12.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:12.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:12.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:12.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:12.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:12.517+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:12.525+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:12.525+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:12.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T10:17:12.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:12.530+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47ac5021]
2026-01-08T10:17:12.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74908ef]
2026-01-08T10:17:12.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:12.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:12.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:12.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:12.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa0f8a5]
2026-01-08T10:17:12.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e161110]
2026-01-08T10:17:12.534+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75d6b8b3]
2026-01-08T10:17:12.534+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71010a21]
2026-01-08T10:17:12.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:12.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456067cf] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.543+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935610115 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:12.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43def680] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:12.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:12.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48da7f84] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:12.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1320470924 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:12.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1394633737 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:12.563+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:12.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:12.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:12.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:12.556+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:12.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:12.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:12.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48da7f84]
2026-01-08T10:17:12.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456067cf]
2026-01-08T10:17:12.572+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4871dcb0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:12.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397537893 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:12.577+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.578+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:12.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:12.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:12.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43def680]
2026-01-08T10:17:12.585+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T10:17:12.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:12.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T10:17:12.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4871dcb0]
2026-01-08T10:17:12.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.589+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@579c7ab2] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.592+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T10:17:12.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290371757 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:12.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:12.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T10:17:12.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:12.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T10:17:12.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T10:17:12.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T10:17:12.601+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T10:17:12.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:12.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@579c7ab2]
2026-01-08T10:17:12.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1415d9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086984957 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:12.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:12.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:12.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:12.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:12.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:12.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1415d9]
2026-01-08T10:17:12.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:12.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28bde66d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:12.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500426338 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:12.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:12.612+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:12.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:12.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28bde66d]
2026-01-08T10:17:12.615+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T10:17:12.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:12.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T10:17:12.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:15.916+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:15.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:15.920+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:15.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:15.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:15.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:15.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:15.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:15.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:15.922+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:15.925+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:15.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:15.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:15.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:15.929+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:15.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:15.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:15.934+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:15.934+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:15.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:15.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:15.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:15.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:15.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:15.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:15.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:15.941+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61706b68] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:15.948+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:15.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:15.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:15.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434560b2] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.954+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529d033b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.955+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb0a771] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.960+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4bce04] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1791806319 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:15.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1979b3ae] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.967+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:15.969+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441065605 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:15.969+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014915028 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:15.970+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:15.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:15.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:15.975+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874271519 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:15.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@185961783 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:15.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993028459 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:15.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:15.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:15.977+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:15.978+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:15.978+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:15.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:15.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:15.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:15.986+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:15.987+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61706b68]
2026-01-08T10:17:15.993+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:15.993+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:15.993+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:15.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d60dc7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:15.996+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529d033b]
2026-01-08T10:17:15.996+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434560b2]
2026-01-08T10:17:15.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701303944 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:15.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:16.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:16.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:16.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3356063c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1979b3ae]
2026-01-08T10:17:16.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e99bf1f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4bce04]
2026-01-08T10:17:16.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb0a771]
2026-01-08T10:17:16.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@193983954 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.006+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2384723 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.008+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.008+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:16.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:16.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6567e4b9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:16.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:16.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@430578329 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d60dc7]
2026-01-08T10:17:16.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:16.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:16.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:16.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3356063c]
2026-01-08T10:17:16.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e99bf1f]
2026-01-08T10:17:16.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51777ded] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:16.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32a9e66c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:16.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1138616881 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:16.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:16.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@827159011 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:16.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:16.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:16.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6567e4b9]
2026-01-08T10:17:16.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:16.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:16.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7811a55e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:16.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c32fce] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040841612 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:16.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650148931 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:16.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:16.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:16.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:16.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51777ded]
2026-01-08T10:17:16.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32a9e66c]
2026-01-08T10:17:16.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:16.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d01198] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5077679c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:16.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7811a55e]
2026-01-08T10:17:16.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4531de0b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082639546 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:16.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756048248 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:16.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c32fce]
2026-01-08T10:17:16.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@757172104 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:16.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:16.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4071763b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:16.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642957988 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:16.109+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:16.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:16.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:16.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:16.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:16.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4531de0b]
2026-01-08T10:17:16.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:16.128+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5077679c]
2026-01-08T10:17:16.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d01198]
2026-01-08T10:17:16.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.133+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df9d348] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@427f1274] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@738f9907] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:16.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116628858 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:16.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988274531 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.139+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4071763b]
2026-01-08T10:17:16.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414141293 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:16.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:16.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:16.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:16.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.153+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:16.154+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:16.155+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:16.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.160+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:16.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:16.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:16.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470308] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192104931 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:16.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:16.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:16.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:16.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:16.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@738f9907]
2026-01-08T10:17:16.195+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.196+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9597d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:16.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.188+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@427f1274]
2026-01-08T10:17:16.194+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df9d348]
2026-01-08T10:17:16.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@135380768 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.211+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:16.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:16.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.209+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.216+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:16.217+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:16.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:16.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:16.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:16.219+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470308]
2026-01-08T10:17:16.219+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:16.220+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.220+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.222+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.229+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f18d5ba] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744818706 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.235+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@535146b4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.237+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.237+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309899928 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:16.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:16.249+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.241+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:16.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:16.252+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9597d]
2026-01-08T10:17:16.253+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:16.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:16.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:16.256+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be99167] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f18d5ba]
2026-01-08T10:17:16.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@535146b4]
2026-01-08T10:17:16.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.260+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:16.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177953238 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.266+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6eae90] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:16.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41316198] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@349381999 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:16.271+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.271+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486739713 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a799df4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.278+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.281+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be99167]
2026-01-08T10:17:16.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1246a181] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1440966663 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.421+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:16.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.399+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285313957 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:16.412+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:16.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6eae90]
2026-01-08T10:17:16.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:16.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.449+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:16.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:16.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:16.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1388c4f5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1246a181]
2026-01-08T10:17:16.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41316198]
2026-01-08T10:17:16.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732619322 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:16.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9bf632] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.454+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b88f206] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.454+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:16.454+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@502661705 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293561678 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:16.455+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a799df4]
2026-01-08T10:17:16.456+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.456+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.458+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.459+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:16.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.461+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1138181e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1388c4f5]
2026-01-08T10:17:16.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742254576 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:16.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.464+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:16.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9bf632]
2026-01-08T10:17:16.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b88f206]
2026-01-08T10:17:16.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f937f8] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:16.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971581054 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:16.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:16.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:16.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:16.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.472+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1138181e]
2026-01-08T10:17:16.473+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:16.490+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:16.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:16.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:16.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:16.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.500+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172ca214] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:16.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.501+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919155365 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:16.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:16.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:16.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f937f8]
2026-01-08T10:17:16.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:16.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:16.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:16.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c57cc42] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.536+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689547715 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:16.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:16.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172ca214]
2026-01-08T10:17:16.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.578+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a83b5d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@560336702 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:16.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c57cc42]
2026-01-08T10:17:16.599+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4466b4bd] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@649151919 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a83b5d]
2026-01-08T10:17:16.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414d9114] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1395468467 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.606+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:16.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:16.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4466b4bd]
2026-01-08T10:17:16.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.614+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751fcfe6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70078116 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:16.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:16.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414d9114]
2026-01-08T10:17:16.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.623+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c3cd71] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235957196 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:16.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751fcfe6]
2026-01-08T10:17:16.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff03f44] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956360099 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:16.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c3cd71]
2026-01-08T10:17:16.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f16a3e8] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438927678 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.653+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:16.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:16.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff03f44]
2026-01-08T10:17:16.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f16a3e8]
2026-01-08T10:17:16.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.708+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:16.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7933f36b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:16.714+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671435846 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.716+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:16.721+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:16.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:16.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7933f36b]
2026-01-08T10:17:16.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59de0ec8] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.772+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1066407475 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.776+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.777+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59de0ec8]
2026-01-08T10:17:16.785+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.786+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198b850e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805986489 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:16.793+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:16.797+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:16.798+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198b850e]
2026-01-08T10:17:16.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:16.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0db97b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:16.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@535553217 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:16.801+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:16.801+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:16.804+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:16.805+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0db97b]
2026-01-08T10:17:16.805+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:16.806+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:16.808+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:19.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:19.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:19.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:19.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:19.533+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T10:17:19.534+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T10:17:19.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T10:17:19.545+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T10:17:19.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T10:17:19.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T10:17:19.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:17:19.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T10:17:19.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:19.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:19.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:19.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:19.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:19.543+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:19.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:17:19.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T10:17:19.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:19.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T10:17:19.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:19.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:19.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T10:17:19.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:19.563+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T10:17:19.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:19.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:19.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T10:17:19.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f017bf4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T10:17:19.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:19.585+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ae8c1e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:17:19.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65589d3e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.598+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19de3e4b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:17:19.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1066305142 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:19.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5056aa91] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T10:17:19.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3967963 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:19.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1394659314 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:19.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464329562 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:19.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399389ef] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T10:17:19.638+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:19.640+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888069057 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:19.644+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:19.644+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:19.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:19.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:19.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:19.663+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:19.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:19.680+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336414448 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:19.682+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:19.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T10:17:19.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:19.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T10:17:19.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:19.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:19.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:19.690+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:19.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5056aa91]
2026-01-08T10:17:19.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65589d3e]
2026-01-08T10:17:19.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19de3e4b]
2026-01-08T10:17:19.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:19.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T10:17:19.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ae8c1e]
2026-01-08T10:17:19.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.703+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:19.703+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T10:17:19.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399389ef]
2026-01-08T10:17:19.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e6f6cb] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7987b104] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:19.711+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f017bf4]
2026-01-08T10:17:19.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:19.713+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e337d04] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.715+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750077281 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:19.716+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445658628 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:19.717+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:19.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:19.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T10:17:19.720+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2137413868 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:19.734+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:19.734+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:19.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:19.749+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T10:17:19.750+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:19.750+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:19.751+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:19.751+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:19.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:19.753+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:19.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:19.758+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:19.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T10:17:19.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T10:17:19.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T10:17:19.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:19.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T10:17:19.771+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T10:17:19.771+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:19.776+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:19.776+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:19.776+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:19.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T10:17:19.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T10:17:19.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.798+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e337d04]
2026-01-08T10:17:19.798+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e6f6cb]
2026-01-08T10:17:19.799+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7987b104]
2026-01-08T10:17:19.800+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T10:17:19.802+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T10:17:19.812+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7ab37a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.814+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:19.814+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.822+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e761764] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.814+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T10:17:19.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:17:19.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1263771843 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:19.822+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:19.826+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156366543 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:19.836+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a52ff7e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.836+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:17:19.843+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T10:17:19.846+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:19.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:19.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:19.851+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318678689 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:19.855+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T10:17:19.871+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.863+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:19.867+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:19.869+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:19.869+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:19.871+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8a836b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.881+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55541039] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:19.902+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:19.905+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:19.907+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595500417 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:19.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1023126428 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:19.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:19.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T10:17:19.920+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:19.920+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:19.920+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T10:17:19.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:19.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:19.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T10:17:19.982+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e761764]
2026-01-08T10:17:19.982+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7ab37a]
2026-01-08T10:17:19.982+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T10:17:19.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:19.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a52ff7e]
2026-01-08T10:17:20.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:19.986+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:20.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b5beb2] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ed301f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:20.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@641d7d86] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T10:17:20.005+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83958741 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:20.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908309051 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:20.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:20.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@715033430 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55541039]
2026-01-08T10:17:20.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:20.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T10:17:20.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:20.030+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:20.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:20.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b5beb2]
2026-01-08T10:17:20.093+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:20.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@641d7d86]
2026-01-08T10:17:20.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T10:17:20.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ed301f]
2026-01-08T10:17:20.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b46ff9b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8a836b]
2026-01-08T10:17:20.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d6ccc0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1412978744 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045869933 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:20.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:20.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T10:17:20.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:20.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:20.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.116+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:20.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:20.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:20.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:20.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:20.215+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d6ccc0]
2026-01-08T10:17:20.188+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b46ff9b]
2026-01-08T10:17:20.188+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:20.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:20.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.399+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:20.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:20.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b43e15] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@904046751 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35d535a7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508533555 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:20.447+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:20.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:20.449+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:20.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:20.463+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:20.465+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:20.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:20.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:20.469+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:20.472+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a905f3c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892887547 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:20.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:20.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:20.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:20.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35d535a7]
2026-01-08T10:17:20.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b43e15]
2026-01-08T10:17:20.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:20.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8acca7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c5eaa1d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2003739772 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:20.502+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155690261 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:20.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a905f3c]
2026-01-08T10:17:20.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.514+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8acca7]
2026-01-08T10:17:20.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c5eaa1d]
2026-01-08T10:17:20.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2b33ab] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458240237 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:20.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2268e402] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d83b9e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:20.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523954972 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:20.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621058298 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:20.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:20.522+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:20.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:20.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:20.536+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:20.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:20.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:20.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2268e402]
2026-01-08T10:17:20.541+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d83b9e]
2026-01-08T10:17:20.542+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2b33ab]
2026-01-08T10:17:20.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fcfa36] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c310b5e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529546140 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.577+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:20.581+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966569006 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:20.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c310b5e]
2026-01-08T10:17:20.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fcfa36]
2026-01-08T10:17:20.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:20.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.638+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:20.645+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:20.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.655+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:20.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:20.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:20.663+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:20.671+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T10:17:20.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.697+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:20.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792d6ea4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T10:17:20.714+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T10:17:20.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:20.721+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55727259] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.724+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1652809709 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.724+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@804591932 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:20.731+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.731+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:20.733+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:20.739+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55727259]
2026-01-08T10:17:20.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:20.758+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.760+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792d6ea4]
2026-01-08T10:17:20.760+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ce58d4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.761+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.761+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585633454 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ad8963] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.767+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043536597 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:20.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.782+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.785+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ce58d4]
2026-01-08T10:17:20.786+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.798+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ad8963]
2026-01-08T10:17:20.804+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b272296] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.805+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.805+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490324958 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.807+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44511b85] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.808+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:20.808+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1020224765 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:20.811+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:20.811+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:20.811+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:20.839+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:20.847+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:20.861+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44511b85]
2026-01-08T10:17:20.872+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b272296]
2026-01-08T10:17:20.884+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65fa20f4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.906+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bbc071] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@700158717 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:20.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429896578 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:20.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.912+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:20.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:20.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bbc071]
2026-01-08T10:17:20.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65fa20f4]
2026-01-08T10:17:20.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:20.952+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:20.952+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbc3d3] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:20.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:20.966+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901738737 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:20.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:20.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:20.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:21.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:21.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbc3d3]
2026-01-08T10:17:21.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:21.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22fe23f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:21.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343698674 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:21.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:21.053+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:21.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:21.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22fe23f]
2026-01-08T10:17:21.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:21.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178113a6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:21.104+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1782723955 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:21.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:21.108+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:21.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:21.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178113a6]
2026-01-08T10:17:21.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:21.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2348b51f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:21.189+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011584755 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:21.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:21.230+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:21.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:21.249+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2348b51f]
2026-01-08T10:17:21.250+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:21.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce5651d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:21.251+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248058835 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:21.252+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:21.252+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:21.264+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:21.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce5651d]
2026-01-08T10:17:21.274+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:21.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:21.277+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:22.853+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-08T10:17:22.856+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-08T10:17:22.859+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-08T10:17:22.859+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-08T10:17:22.860+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:22.861+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-08T10:17:22.861+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-08T10:17:22.861+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-08T10:17:22.863+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-08T10:17:22.866+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:22.866+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-08T10:17:22.866+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-08T10:17:22.874+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-08T10:17:22.875+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-08T10:17:22.875+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:22.875+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-08T10:17:22.876+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-08T10:17:22.888+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-08T10:17:22.876+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-08T10:17:22.887+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-08T10:17:22.888+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:22.889+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-08T10:17:22.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.890+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-08T10:17:22.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-08T10:17:22.891+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:22.893+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.916+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:22.917+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:22.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T10:17:22.921+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ccf111] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:22.927+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:22.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f9972e6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:22.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:22.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:22.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc11b2e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:22.934+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4706f990] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:22.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cdc93b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:22.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654414033 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:22.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:22.965+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@112460897 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:22.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1747444924 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:22.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T10:17:22.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-08T10:17:22.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:22.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2132930004 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:22.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@645544485 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:22.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-08T10:17:22.999+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-08T10:17:23.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-08T10:17:23.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-08T10:17:23.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-08T10:17:23.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:23.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-08T10:17:23.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ccf111]
2026-01-08T10:17:23.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:23.022+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-08T10:17:23.022+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-08T10:17:23.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3539d5a5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:23.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc11b2e]
2026-01-08T10:17:23.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f9972e6]
2026-01-08T10:17:23.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910965717 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:23.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:23.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:23.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:23.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-08T10:17:23.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1977783, totalCo (truncated)...]
2026-01-08T10:17:23.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:23.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:23.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:23.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-08T10:17:23.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-08T10:17:23.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:23.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4706f990]
2026-01-08T10:17:23.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cdc93b]
2026-01-08T10:17:23.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3539d5a5]
2026-01-08T10:17:23.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:23.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:23.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:23.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=15, totalAmo (truncated)...]
2026-01-08T10:17:23.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-08T10:17:23.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:23.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:23.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:23.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:33.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:33.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:33.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:33.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:33.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:33.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:33.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:33.930+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:33.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:33.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:33.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:33.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:33.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:33.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:33.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:33.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:33.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:33.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:33.935+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:33.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:33.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:33.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:33.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:33.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:33.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:33.938+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:33.948+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52bd47a8] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:33.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23022274] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:33.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0e0b73] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:33.946+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:33.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226eb266] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:33.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:33.947+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ff5e16] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:33.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330136274 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:33.958+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47622ab5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:33.961+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:33.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:33.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880210075 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:33.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049142062 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:33.968+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:33.969+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:33.971+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:33.980+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:33.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1273095622 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:33.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738283594 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:33.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@287160014 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:33.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:34.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:34.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:34.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:34.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:34.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52bd47a8]
2026-01-08T10:17:34.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:34.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23022274]
2026-01-08T10:17:34.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0e0b73]
2026-01-08T10:17:34.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:34.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6255c6d5] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ab518a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df98236] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627196524 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1882257837 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:34.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:34.016+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:34.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671788262 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:34.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.018+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226eb266]
2026-01-08T10:17:34.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ff5e16]
2026-01-08T10:17:34.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47622ab5]
2026-01-08T10:17:34.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:34.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3536b84a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:34.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617737862 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:34.032+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6255c6d5]
2026-01-08T10:17:34.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:34.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ab518a]
2026-01-08T10:17:34.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:34.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:34.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ded1201] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:34.053+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df98236]
2026-01-08T10:17:34.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@557974023 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed5d100] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:34.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:34.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599779921 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:34.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a05b4e2] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:34.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:34.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722233254 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:34.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:34.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3536b84a]
2026-01-08T10:17:34.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:34.076+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dec81d2] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:34.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655483616 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed5d100]
2026-01-08T10:17:34.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:34.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:34.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:34.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ded1201]
2026-01-08T10:17:34.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bf0521e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1542315441 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45091e4e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:34.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089565172 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.096+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:34.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:34.100+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:34.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:34.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dec81d2]
2026-01-08T10:17:34.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:34.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a05b4e2]
2026-01-08T10:17:34.118+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bf0521e]
2026-01-08T10:17:34.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.121+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:34.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:34.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45091e4e]
2026-01-08T10:17:34.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100d90f4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:34.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3d2cea] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45096dd9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009629875 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:34.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576673390 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:34.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224732760 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.149+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:34.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.150+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.152+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:34.157+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:34.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:34.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:34.159+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:34.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:34.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:34.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:34.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:34.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:34.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:34.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:34.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.171+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d000496] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd3d472] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157840848 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100d90f4]
2026-01-08T10:17:34.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1421654224 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:34.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:34.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:34.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:34.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:34.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3d2cea]
2026-01-08T10:17:34.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45096dd9]
2026-01-08T10:17:34.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.186+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.187+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.192+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a319f3] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.198+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:34.198+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62377375] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:34.199+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:34.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2010920241 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:34.200+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1818148175 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:34.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d000496]
2026-01-08T10:17:34.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd3d472]
2026-01-08T10:17:34.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.201+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:34.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:34.202+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:34.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.203+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:34.204+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:34.206+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:34.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:34.207+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd5ec2c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.208+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.211+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:34.211+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242875744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.214+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.218+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.219+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a50c3b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.219+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.220+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271935217 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.221+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:34.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:34.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:34.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.234+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.235+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a319f3]
2026-01-08T10:17:34.235+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62377375]
2026-01-08T10:17:34.235+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd5ec2c]
2026-01-08T10:17:34.237+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.238+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.238+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.239+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:34.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:34.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@abcd9fa] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.245+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b0a0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a50c3b]
2026-01-08T10:17:34.246+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.247+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405730563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.248+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1422493701 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.248+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.253+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269f9334] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.254+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.255+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.257+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:34.259+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762952968 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.262+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.263+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:34.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:34.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.267+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:34.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b0a0]
2026-01-08T10:17:34.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@abcd9fa]
2026-01-08T10:17:34.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269f9334]
2026-01-08T10:17:34.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:34.269+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.269+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:34.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb4982c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e1399d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.270+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ea6061] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.271+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.271+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918206922 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.272+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526617522 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.274+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959863067 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf2e89] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.275+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.276+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.277+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96564015 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:34.277+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:34.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:34.279+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:34.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:34.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.283+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:34.284+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:34.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb4982c]
2026-01-08T10:17:34.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ea6061]
2026-01-08T10:17:34.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:34.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e1399d]
2026-01-08T10:17:34.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf2e89]
2026-01-08T10:17:34.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.302+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:34.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9d7476] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.303+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fe4767] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.304+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742713068 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:34.314+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.305+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d91ebcf] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576011666 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:34.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:34.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:34.306+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@393002548 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:34.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.337+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:34.350+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d91ebcf]
2026-01-08T10:17:34.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9d7476]
2026-01-08T10:17:34.354+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:34.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:34.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:34.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fe4767]
2026-01-08T10:17:34.379+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:34.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:34.381+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:34.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:34.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.384+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:34.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:34.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:34.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:34.384+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:34.390+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:34.391+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e95756e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf661cd] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860264990 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:34.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1115522928 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:34.393+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:34.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:34.403+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf661cd]
2026-01-08T10:17:34.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e95756e]
2026-01-08T10:17:34.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.405+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685fd8e6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.407+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7282d8a0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.409+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891578921 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930737563 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:34.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.411+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7282d8a0]
2026-01-08T10:17:34.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685fd8e6]
2026-01-08T10:17:34.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9b8dfd] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14efe280] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196616054 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:34.421+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@39948307 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.423+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:34.425+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:34.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:34.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:34.433+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:34.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9b8dfd]
2026-01-08T10:17:34.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14efe280]
2026-01-08T10:17:34.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c404475] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.437+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9e5d0e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131217509 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:34.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@84822463 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.445+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.448+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9e5d0e]
2026-01-08T10:17:34.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c404475]
2026-01-08T10:17:34.452+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.453+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bbe5d1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.454+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:34.456+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726771717 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:34.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:34.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:34.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bbe5d1]
2026-01-08T10:17:34.508+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a823d60] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847236748 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:34.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:34.536+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:34.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a823d60]
2026-01-08T10:17:34.625+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622082e9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688048880 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622082e9]
2026-01-08T10:17:34.782+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33111d65] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.879+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438709284 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.886+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:34.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:34.904+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:34.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33111d65]
2026-01-08T10:17:34.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:34.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2476067b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:34.914+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532143525 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:34.914+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:34.915+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:34.953+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:34.954+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2476067b]
2026-01-08T10:17:34.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:34.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:34.979+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:35.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:35.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:35.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:35.982+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:35.983+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:35.984+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:35.962+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:35.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:35.963+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T10:17:35.986+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:35.973+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T10:17:35.976+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:35.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:35.986+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:35.987+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T10:17:35.987+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:35.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:35.989+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d02118b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:35.990+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies/pending
2026-01-08T10:17:35.991+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:35.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T10:17:35.992+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:35.994+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:35.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T10:17:35.995+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:35.996+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T10:17:35.996+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:35.996+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:35.997+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T10:17:35.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110066542 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:35.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:35.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T10:17:36.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T10:17:36.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:36.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.003+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T10:17:36.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17440f4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f813e4c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.004+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:36.009+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@745a4194] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a86b05] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.014+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5db173] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@597204425 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1015494949 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141851716 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397602859 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1402990394 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:36.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:36.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:36.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:36.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:36.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:36.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d02118b]
2026-01-08T10:17:36.021+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:36.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-08T10:17:36.026+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:36.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:36.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:36.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5d643f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992614649 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:36.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:36.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:36.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:36.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:36.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:36.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:36.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T10:17:36.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@745a4194]
2026-01-08T10:17:36.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5db173]
2026-01-08T10:17:36.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17440f4]
2026-01-08T10:17:36.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f813e4c]
2026-01-08T10:17:36.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a86b05]
2026-01-08T10:17:36.038+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:36.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d0fae1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.043+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:36.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40beb9c9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:36.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:36.046+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920360482 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:36.047+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:36.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1635725885 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:36.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:36.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:36.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:36.055+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:36.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:36.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5d643f]
2026-01-08T10:17:36.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:36.059+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:36.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:36.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:36.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:36.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40beb9c9]
2026-01-08T10:17:36.069+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d0fae1]
2026-01-08T10:17:36.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.070+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T10:17:36.070+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359c025e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.071+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5871061 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:36.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T10:17:36.072+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:36.073+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:36.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:36.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T10:17:36.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:36.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T10:17:36.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359c025e]
2026-01-08T10:17:36.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T10:17:36.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T10:17:36.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dc1717f] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T10:17:36.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014972011 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:36.087+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T10:17:36.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:36.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:36.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8055cf] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.088+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432644781 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:36.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:36.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:36.095+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:36.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dc1717f]
2026-01-08T10:17:36.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:36.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8055cf]
2026-01-08T10:17:36.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:36.102+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:36.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:36.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ccec3a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:36.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1435433185 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:36.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:36.119+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:36.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:36.129+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ccec3a]
2026-01-08T10:17:36.129+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T10:17:36.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:36.131+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T10:17:36.132+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:39.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:39.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:39.163+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:39.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:39.164+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:39.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:39.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:39.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:39.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:39.166+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:39.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:39.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:39.167+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:39.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:39.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:39.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:39.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:39.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:39.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:39.173+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:39.174+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:39.174+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:39.175+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.175+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:39.175+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:39.175+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:39.175+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:39.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:39.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754eae95] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:39.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:39.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e755f24] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701a90e6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1564380388 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.225+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ded0418] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f5b50c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360dafb4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.227+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643989481 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.268+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160816281 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:39.285+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:39.286+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:39.287+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.295+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523066906 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:39.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105550058 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@626593781 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.317+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:39.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.318+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:39.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:39.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:39.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754eae95]
2026-01-08T10:17:39.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701a90e6]
2026-01-08T10:17:39.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e755f24]
2026-01-08T10:17:39.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:39.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.322+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.324+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:39.327+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b40384b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:39.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@688d9986] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f5b50c]
2026-01-08T10:17:39.328+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:39.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360dafb4]
2026-01-08T10:17:39.331+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2095520045 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ded0418]
2026-01-08T10:17:39.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249098913 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.329+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.330+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.332+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:39.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.334+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:39.335+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2cfdaf] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1118155596 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:39.336+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:39.341+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2529cab7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.343+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:39.344+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.345+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:39.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233082649 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:39.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:39.349+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b40384b]
2026-01-08T10:17:39.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:39.351+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.352+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@688d9986]
2026-01-08T10:17:39.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:39.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.353+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e9bc9cb] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2cfdaf]
2026-01-08T10:17:39.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.355+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:39.358+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@71512115 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.358+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9f1009] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.359+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.360+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2529cab7]
2026-01-08T10:17:39.361+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:39.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686286137 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cacd0e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.362+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.363+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:39.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.366+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403802493 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:39.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cff538] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:39.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:39.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515781572 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.369+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e9bc9cb]
2026-01-08T10:17:39.370+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.370+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:39.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:39.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:39.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.371+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:39.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:39.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:39.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9f1009]
2026-01-08T10:17:39.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acb4430] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706610483 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:39.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cacd0e]
2026-01-08T10:17:39.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.380+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:39.384+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:39.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad30fc1] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c79ae9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cff538]
2026-01-08T10:17:39.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.386+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686830472 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.387+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1278314050 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:39.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.390+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:39.392+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.394+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:39.395+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.396+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:39.398+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70893fd8] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:39.400+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:39.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050763972 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.401+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acb4430]
2026-01-08T10:17:39.402+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:39.402+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.402+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:39.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.404+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:39.405+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.405+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.405+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:39.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e21454] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.410+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.412+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c79ae9]
2026-01-08T10:17:39.412+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad30fc1]
2026-01-08T10:17:39.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005847454 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.413+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:39.414+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.415+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.416+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:39.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70893fd8]
2026-01-08T10:17:39.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:39.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edf4282] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.417+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.418+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:39.419+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751888799 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39933c0c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.420+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T10:17:39.428+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T10:17:39.431+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T10:17:39.424+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:39.425+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:39.426+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14529305 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.432+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T10:17:39.434+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:39.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:39.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:39.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T10:17:39.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:39.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.435+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e21454]
2026-01-08T10:17:39.436+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:39.438+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1988d64d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.441+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbe2ec9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.442+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edf4282]
2026-01-08T10:17:39.446+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.446+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:39.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207653498 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.443+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:39.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:39.444+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870538107 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:39.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.450+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39933c0c]
2026-01-08T10:17:39.451+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.460+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:39.462+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.466+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.467+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46567c60] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.468+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:39.469+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1720015866 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:39.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:39.470+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:39.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 1
2026-01-08T10:17:39.471+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:39.472+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:39.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:39.475+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbe2ec9]
2026-01-08T10:17:39.476+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1988d64d]
2026-01-08T10:17:39.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.477+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.478+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a07b79e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.479+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6004f785] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.480+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:39.481+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5301124d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568256579 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@515003690 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:39.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46567c60]
2026-01-08T10:17:39.482+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216308958 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:39.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.483+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:39.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448975cf] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.484+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835298370 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.486+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:39.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6004f785]
2026-01-08T10:17:39.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a07b79e]
2026-01-08T10:17:39.487+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.492+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d7144b7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.488+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5301124d]
2026-01-08T10:17:39.489+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.493+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982400067 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:39.494+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77393ee4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.495+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737f2a49] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448975cf]
2026-01-08T10:17:39.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818269402 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.496+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683134225 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.497+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:39.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.498+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd8b2d0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:39.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-08T10:17:39.499+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:39.500+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309365673 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.500+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d7144b7]
2026-01-08T10:17:39.501+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:39.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:39.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:39.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efab537] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.503+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77393ee4]
2026-01-08T10:17:39.504+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737f2a49]
2026-01-08T10:17:39.505+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775832739 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:39.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.509+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:39.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:39.510+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1baaabbb] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.511+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd8b2d0]
2026-01-08T10:17:39.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.512+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@286128101 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:39.513+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.515+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68263fe4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.516+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.517+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@808472066 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:39.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efab537]
2026-01-08T10:17:39.518+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.519+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.519+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.520+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=1, drafterId (truncated)...]
2026-01-08T10:17:39.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1baaabbb]
2026-01-08T10:17:39.521+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.522+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.527+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:39.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68263fe4]
2026-01-08T10:17:39.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.528+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.529+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:39.530+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.531+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:39.532+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T10:17:39.534+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:39.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:39.535+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T10:17:39.536+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:39.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T10:17:39.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:39.537+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T10:17:39.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T10:17:39.538+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9b83c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.539+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.541+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102514760 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.541+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f623b4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.542+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:39.542+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706914523 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.543+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:39.543+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.544+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.546+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:39.547+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f623b4]
2026-01-08T10:17:39.548+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9b83c]
2026-01-08T10:17:39.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f202785] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4072db61] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1070291030 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@254116619 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4072db61]
2026-01-08T10:17:39.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f202785]
2026-01-08T10:17:39.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f1507b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67371ad6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@890123959 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502942650 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:39.563+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:39.565+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:39.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:39.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f1507b]
2026-01-08T10:17:39.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdca07] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:39.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755717827 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:39.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67371ad6]
2026-01-08T10:17:39.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.571+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.572+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.572+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b264e59] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@613943873 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.575+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.576+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.577+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.578+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdca07]
2026-01-08T10:17:39.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:39.583+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:39.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b264e59]
2026-01-08T10:17:39.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a2267e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.592+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874845813 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.592+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.593+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:39.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:39.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a2267e]
2026-01-08T10:17:39.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51076385] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713450509 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:39.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T10:17:39.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-08T10:17:39.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51076385]
2026-01-08T10:17:39.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.612+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7430dad9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507610257 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7430dad9]
2026-01-08T10:17:39.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69dd52bf] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@466201423 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:39.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T10:17:39.624+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-08T10:17:39.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69dd52bf]
2026-01-08T10:17:39.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:39.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ccbf8e] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:39.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@117918978 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:39.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:39.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:39.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:39.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ccbf8e]
2026-01-08T10:17:39.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:39.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T10:17:39.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:44.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T10:17:44.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T10:17:44.549+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:44.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T10:17:44.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:44.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T10:17:44.550+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T10:17:44.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:44.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T10:17:44.551+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T10:17:44.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:44.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:44.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T10:17:44.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T10:17:44.552+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:44.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:44.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies/pending
2026-01-08T10:17:44.557+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T10:17:44.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T10:17:44.553+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T10:17:44.554+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T10:17:44.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T10:17:44.555+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:44.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T10:17:44.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T10:17:44.562+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T10:17:44.559+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c1c6da3] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.560+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T10:17:44.561+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T10:17:44.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.561+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T10:17:44.564+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T10:17:44.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.566+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.568+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41bca688] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@376170474 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:44.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.570+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f5bf41] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.573+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@658851f6] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.579+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:44.579+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d313250] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.579+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e8204a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.581+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:44.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073933352 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:44.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627729029 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:44.588+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@506768465 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:44.594+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:44.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:44.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:44.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:44.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:44.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T10:17:44.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-08T10:17:44.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556095672 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:44.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933552060 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:44.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c1c6da3]
2026-01-08T10:17:44.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:44.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:44.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41bca688]
2026-01-08T10:17:44.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:44.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:44.603+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:44.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.605+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@658851f6]
2026-01-08T10:17:44.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f5bf41]
2026-01-08T10:17:44.611+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:44.613+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-08T10:17:44.613+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75efd070] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:44.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187767533 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:44.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c6479d] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c787ddd] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:44.622+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248532163 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:44.624+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736292351 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:44.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:44.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:44.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T10:17:44.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:44.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T10:17:44.638+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T10:17:44.639+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:44.639+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:44.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T10:17:44.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:44.650+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d313250]
2026-01-08T10:17:44.650+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75efd070]
2026-01-08T10:17:44.650+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e8204a]
2026-01-08T10:17:44.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c787ddd]
2026-01-08T10:17:44.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c6479d]
2026-01-08T10:17:44.658+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.658+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.659+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.661+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.661+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T10:17:44.661+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:44.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66460f5c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.663+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T10:17:44.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T10:17:44.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839280052 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:44.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.675+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.676+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T10:17:44.677+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T10:17:44.682+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long)
2026-01-08T10:17:44.694+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T10:17:44.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-08T10:17:44.697+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T10:17:44.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66460f5c]
2026-01-08T10:17:44.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T10:17:44.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T10:17:44.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0b09d9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T10:17:44.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@501334795 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:44.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:44.701+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T10:17:44.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:44.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.705+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a0159c3] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.713+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@607699019 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:44.716+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T10:17:44.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:44.721+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T10:17:44.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0b09d9]
2026-01-08T10:17:44.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.730+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-08T10:17:44.731+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:44.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T10:17:44.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a0159c3]
2026-01-08T10:17:44.737+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:44.737+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6875d7] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:44.738+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@508028056 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:44.738+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:44.745+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T10:17:44.753+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T10:17:44.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6875d7]
2026-01-08T10:17:44.754+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T10:17:44.756+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:44.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T10:17:44.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:47.175+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T10:17:47.177+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/logout
2026-01-08T10:17:47.178+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T10:17:47.179+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T10:17:47.180+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T10:17:47.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T10:17:47.183+09:00  INFO 18084 --- [http-nio-8080-exec-4] SECURITY                                 : LOGOUT userId=1
2026-01-08T10:17:47.183+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:47.184+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T10:17:47.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T10:17:50.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T10:17:50.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T10:17:50.087+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T10:17:50.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T10:17:50.097+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_admin, password=1234)]
2026-01-08T10:17:50.100+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_admin
2026-01-08T10:17:50.110+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cef5d45] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.117+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169138107 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:50.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T10:17:50.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_admin(String)
2026-01-08T10:17:50.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T10:17:50.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cef5d45]
2026-01-08T10:17:50.221+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.221+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ad5d92] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.222+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298885527 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:50.222+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T10:17:50.223+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-01-08T10:17:50.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-08T10:17:50.226+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ad5d92]
2026-01-08T10:17:50.227+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: SUPERADMIN, companyId: 4
2026-01-08T10:17:50.228+09:00  INFO 18084 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_admin role=SUPERADMIN
2026-01-08T10:17:50.228+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.228+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_admin, password (truncated)...]
2026-01-08T10:17:50.229+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.558+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T10:17:50.569+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/companies
2026-01-08T10:17:50.579+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T10:17:50.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:50.580+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:50.581+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:17:50.586+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:50.581+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:17:50.581+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:17:50.582+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T10:17:50.584+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:17:50.587+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:17:50.592+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:50.594+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:17:50.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T10:17:50.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:50.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:17:50.595+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:17:50.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:50.596+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:17:50.597+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.599+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:50.599+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:17:50.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:17:50.600+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:50.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:17:50.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0ead74] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.601+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:50.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:17:50.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:17:50.602+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.604+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:17:50.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.607+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:17:50.609+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.610+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3322d60c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.612+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.612+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c92cf69] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.612+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.613+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.613+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1921875024 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:50.615+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.616+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537278923 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:50.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141203453 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.617+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.617+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T10:17:50.618+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:17:50.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:50.618+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:50.618+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.619+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-01-08T10:17:50.620+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:17:50.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:17:50.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e8a9f0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.621+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bcfcec] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-08T10:17:50.626+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:17:50.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c92cf69]
2026-01-08T10:17:50.627+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbcc34a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.628+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0ead74]
2026-01-08T10:17:50.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:50.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102314735 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:50.629+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3322d60c]
2026-01-08T10:17:50.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177784261 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:50.631+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:17:50.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:17:50.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244864920 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:50.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=4, companyCode=JIIST3, companyNa (truncated)...]
2026-01-08T10:17:50.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:17:50.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:17:50.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:17:50.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.633+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:50.634+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:17:50.636+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.637+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:17:50.637+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.640+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:17:50.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:17:50.646+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:17:50.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:17:50.647+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:17:50.648+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:17:50.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e8a9f0]
2026-01-08T10:17:50.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:17:50.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:17:50.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbcc34a]
2026-01-08T10:17:50.649+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bcfcec]
2026-01-08T10:17:50.650+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:17:50.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:17:50.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:17:50.651+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:17:50.651+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:17:50.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:17:50.652+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:17:50.653+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:17:50.653+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.653+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5229cd5b] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:17:50.654+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:17:50.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:17:50.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.660+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:17:50.661+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485435726 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:50.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:17:50.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.662+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.663+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.663+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:17:50.664+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.665+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T10:17:50.666+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.667+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.667+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T10:17:50.668+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.673+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:17:50.669+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:17:50.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.669+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/pending-approvals
2026-01-08T10:17:50.670+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/expenses/tax/revision-requests
2026-01-08T10:17:50.674+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.678+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32e2a276] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:17:50.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T10:17:50.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T10:17:50.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768cbbf0] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbf8ff] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.679+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@557068338 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:50.680+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5229cd5b]
2026-01-08T10:17:50.680+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T10:17:50.680+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T10:17:50.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789341146 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050735518 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:50.682+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:17:50.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T10:17:50.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T10:17:50.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:17:50.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:17:50.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:17:50.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26f9133] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:17:50.686+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.690+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@514901808 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:50.690+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22a7b784] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.693+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46287677] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.697+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:50.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:17:50.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621372815 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:50.700+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1557860444 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:50.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:50.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:17:50.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T10:17:50.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:17:50.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T10:17:50.707+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.709+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 4(Long)
2026-01-08T10:17:50.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768cbbf0]
2026-01-08T10:17:50.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 4(Long), 9(Long)
2026-01-08T10:17:50.710+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:17:50.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.714+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:50.716+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66bd0560] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.716+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:17:50.717+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971155324 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32e2a276]
2026-01-08T10:17:50.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T10:17:50.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T10:17:50.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:50.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:50.719+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:50.720+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:17:50.720+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46287677]
2026-01-08T10:17:50.721+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22a7b784]
2026-01-08T10:17:50.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.724+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:50.725+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:17:50.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.726+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T10:17:50.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:17:50.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:17:50.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T10:17:50.731+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.736+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.737+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.740+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:17:50.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:50.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:50.744+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:17:50.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:17:50.747+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:17:50.748+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:17:50.748+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:17:50.749+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.749+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66bd0560]
2026-01-08T10:17:50.750+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:17:50.751+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26f9133]
2026-01-08T10:17:50.751+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:17:50.752+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:17:50.753+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:17:50.753+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:17:50.753+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:17:50.753+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:17:50.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:17:50.754+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:17:50.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1d089] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:17:50.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:50.763+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:17:50.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:17:50.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:17:50.764+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490737220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:17:50.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:17:50.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:17:50.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.766+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.766+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.767+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:17:50.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.769+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:17:50.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.770+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.771+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.771+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.775+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.775+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:17:50.777+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:17:50.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.778+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68dbd897] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353f010] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:17:50.779+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b4e0a14] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.780+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:17:50.784+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569641119 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:50.785+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1058195201 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.786+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:17:50.786+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451422270 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:50.787+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:50.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:17:50.788+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:17:50.791+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.791+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:17:50.791+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:17:50.792+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:17:50.792+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:17:50.792+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.793+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.794+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:17:50.795+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbf8ff]
2026-01-08T10:17:50.799+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:17:50.802+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:50.802+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:17:50.803+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:17:50.806+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:17:50.809+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.809+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:50.810+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.813+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68dbd897]
2026-01-08T10:17:50.814+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1353f010]
2026-01-08T10:17:50.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.815+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c96c90] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.816+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:50.816+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:17:50.818+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:17:50.818+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:17:50.819+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:17:50.820+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619063465 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.821+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.826+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:17:50.827+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.828+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:17:50.828+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:17:50.832+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:50.828+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:17:50.831+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.832+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:50.833+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.846+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:17:50.847+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.848+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-01-08T10:17:50.848+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:17:50.850+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-01-08T10:17:50.851+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:17:50.852+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:17:50.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/users
2026-01-08T10:17:50.864+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b4e0a14]
2026-01-08T10:17:50.865+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/companies
2026-01-08T10:17:50.866+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:17:50.867+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:17:50.868+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-01-08T10:17:50.869+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:17:50.875+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-01-08T10:17:50.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c96c90]
2026-01-08T10:17:50.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:17:50.870+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-01-08T10:17:50.876+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:17:50.877+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:50.878+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-01-08T10:17:50.878+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.879+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:17:50.879+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-01-08T10:17:50.879+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.883+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:17:50.885+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-01-08T10:17:50.886+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2504a996] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.887+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.887+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.888+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-01-08T10:17:50.896+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:17:50.896+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:50.892+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.894+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774040650 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.895+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.900+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.896+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/subscriptions
2026-01-08T10:17:50.897+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:17:50.898+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.899+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:50.899+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:17:50.900+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.908+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd512cc] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.909+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155932399 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:50.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:17:50.910+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:17:50.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-01-08T10:17:50.901+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1d089]
2026-01-08T10:17:50.904+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.908+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:17:50.908+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.911+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-01-08T10:17:50.913+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.915+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.917+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6184485c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-01-08T10:17:50.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:17:50.918+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f89531] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113980543 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:17:50.919+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.920+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:17:50.924+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.926+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@550339772 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:50.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:17:50.927+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:17:50.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.928+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd512cc]
2026-01-08T10:17:50.931+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:50.932+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:17:50.933+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:17:50.934+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 9
2026-01-08T10:17:50.934+09:00  INFO 18084 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 12
2026-01-08T10:17:50.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2504a996]
2026-01-08T10:17:50.936+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:50.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:17:50.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.937+09:00  INFO 18084 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:17:50.937+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f024b9] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:50.938+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:17:50.939+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passwo (truncated)...]
2026-01-08T10:17:50.941+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:50.943+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500036386 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:50.944+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:17:50.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.945+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:17:50.949+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:17:50.950+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:17:50.951+09:00 DEBUG 18084 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:50.952+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:17:50.952+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.964+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:50.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:17:50.985+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:50.988+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:17:50.998+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:17:50.998+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.000+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f89531]
2026-01-08T10:17:51.001+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:17:51.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:17:51.002+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:51.002+09:00  INFO 18084 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 7
2026-01-08T10:17:51.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e7c6af] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.003+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-01-08T10:17:51.010+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@705137227 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:51.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-01-08T10:17:51.011+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT,  (truncated)...]
2026-01-08T10:17:51.012+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:17:51.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:17:51.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:51.013+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.015+09:00 DEBUG 18084 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:51.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:17:51.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:51.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:17:51.017+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.019+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:51.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f024b9]
2026-01-08T10:17:51.020+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:17:51.021+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 1
2026-01-08T10:17:51.021+09:00  INFO 18084 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 7
2026-01-08T10:17:51.023+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.024+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a37a529] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.025+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=7, companyId= (truncated)...]
2026-01-08T10:17:51.027+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822347672 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:51.028+09:00 DEBUG 18084 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:51.029+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:17:51.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:17:51.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:17:51.031+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e7c6af]
2026-01-08T10:17:51.033+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.034+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fceb20c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954008548 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:51.035+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:17:51.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:17:51.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:17:51.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a37a529]
2026-01-08T10:17:51.036+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:51.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41059293] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.037+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654076279 wrapping com.mysql.cj.jdbc.ConnectionImpl@7dec532f] will not be managed by Spring
2026-01-08T10:17:51.040+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:17:51.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:17:51.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-01-08T10:17:51.041+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:17:51.042+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fceb20c]
2026-01-08T10:17:51.044+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3670a4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:17:51.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-01-08T10:17:51.045+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277013308 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:51.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41059293]
2026-01-08T10:17:51.048+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:17:51.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:17:51.049+09:00  INFO 18084 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:17:51.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:17:51.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6184485c]
2026-01-08T10:17:51.049+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.050+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:17:51.050+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:17:51.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:17:51.051+09:00 DEBUG 18084 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:51.052+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.053+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:51.054+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:51.058+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-01-08T10:17:51.060+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/payments
2026-01-08T10:17:51.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:51.061+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-01-08T10:17:51.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:17:51.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-01-08T10:17:51.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3670a4]
2026-01-08T10:17:51.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-01-08T10:17:51.062+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:51.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f930f4] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.063+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:51.064+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1415951028 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:17:51.064+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 9
2026-01-08T10:17:51.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:17:51.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:51.065+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f471eb] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.066+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563150517 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a9f1497] will not be managed by Spring
2026-01-08T10:17:51.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:17:51.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:51.067+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.068+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:17:51.073+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:17:51.075+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.076+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.077+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:17:51.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.078+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:17:51.079+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.080+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:17:51.081+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.082+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:17:51.083+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:17:51.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:17:51.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.084+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:17:51.085+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:17:51.086+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f930f4]
2026-01-08T10:17:51.089+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.089+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:17:51.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:17:51.090+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:17:51.091+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:51.092+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f471eb]
2026-01-08T10:17:51.094+09:00  INFO 18084 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 4
2026-01-08T10:17:51.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.098+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-01-08T10:17:51.099+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=11, subscriptionId=2, a (truncated)...]
2026-01-08T10:17:51.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/reports/summary
2026-01-08T10:17:51.101+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:17:51.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-01-08T10:17:51.105+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-01-08T10:17:51.107+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-01-08T10:17:51.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:51.126+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:17:51.128+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 9
2026-01-08T10:17:51.131+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.135+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f89e455] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.136+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685819970 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:51.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-01-08T10:17:51.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-01-08T10:17:51.141+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 12
2026-01-08T10:17:51.142+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f89e455]
2026-01-08T10:17:51.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.143+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48afcc9c] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@947139216 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:51.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-01-08T10:17:51.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:51.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 7
2026-01-08T10:17:51.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48afcc9c]
2026-01-08T10:17:51.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6b7838] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.152+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014742085 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:51.152+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-01-08T10:17:51.152+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-01-08T10:17:51.155+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.158+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T10:17:51.160+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T10:17:51.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 7
2026-01-08T10:17:51.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6b7838]
2026-01-08T10:17:51.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:17:51.165+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ead254a] was not registered for synchronization because synchronization is not active
2026-01-08T10:17:51.168+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@306558068 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:17:51.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-01-08T10:17:51.169+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-01-08T10:17:51.170+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.172+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 2(Long)
2026-01-08T10:17:51.176+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.181+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.182+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 7(Long)
2026-01-08T10:17:51.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.185+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-01-08T10:17:51.188+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-01-08T10:17:51.299+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T10:17:51.312+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-01-08T10:17:51.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-01-08T10:17:51.319+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-01-08T10:17:51.320+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 4
2026-01-08T10:17:51.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ead254a]
2026-01-08T10:17:51.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:17:51.321+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-01-08T10:17:51.323+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:19:53.624+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:19:53.630+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:19:53.632+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:19:53.635+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:19:53.641+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:19:53.642+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:19:53.677+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:19:53.677+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:19:53.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:19:53.681+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e571cc] was not registered for synchronization because synchronization is not active
2026-01-08T10:19:53.683+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1527281645 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:19:53.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:19:53.684+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:19:53.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:19:53.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e571cc]
2026-01-08T10:19:53.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:19:53.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a9d6fd] was not registered for synchronization because synchronization is not active
2026-01-08T10:19:53.695+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458393433 wrapping com.mysql.cj.jdbc.ConnectionImpl@50ae53dc] will not be managed by Spring
2026-01-08T10:19:53.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:19:53.696+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:19:53.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:19:53.699+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a9d6fd]
2026-01-08T10:19:53.700+09:00  INFO 18084 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:19:53.701+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:19:53.702+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:19:53.709+09:00 DEBUG 18084 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:19:56.288+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:19:56.290+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:19:56.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-01-08T10:19:56.292+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-01-08T10:19:56.293+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:19:56.293+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:19:56.310+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:19:56.313+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: null, page: 1, size: 20
2026-01-08T10:19:56.314+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:19:56.315+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430baa94] was not registered for synchronization because synchronization is not active
2026-01-08T10:19:56.346+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966199581 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:19:56.364+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-01-08T10:19:56.365+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-01-08T10:19:56.367+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:19:56.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430baa94]
2026-01-08T10:19:56.368+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:19:56.373+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af19160] was not registered for synchronization because synchronization is not active
2026-01-08T10:19:56.376+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458294081 wrapping com.mysql.cj.jdbc.ConnectionImpl@520350b5] will not be managed by Spring
2026-01-08T10:19:56.377+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:19:56.378+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-01-08T10:19:56.381+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:19:56.382+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af19160]
2026-01-08T10:19:56.382+09:00  INFO 18084 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 29
2026-01-08T10:19:56.383+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:19:56.384+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:19:56.385+09:00 DEBUG 18084 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:20:04.103+09:00 DEBUG 18084 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20&companyId=1
2026-01-08T10:20:04.107+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20&companyId=1
2026-01-08T10:20:04.109+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:20:04.111+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20&companyId=1
2026-01-08T10:20:04.112+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20&companyId=1", parameters={masked}
2026-01-08T10:20:04.114+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:20:04.115+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:20:04.120+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:20:04.121+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: 1, page: 1, size: 20
2026-01-08T10:20:04.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:20:04.122+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69764a00] was not registered for synchronization because synchronization is not active
2026-01-08T10:20:04.130+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@430731632 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:20:04.134+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ?
2026-01-08T10:20:04.137+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 1(Long)
2026-01-08T10:20:04.144+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:20:04.145+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69764a00]
2026-01-08T10:20:04.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:20:04.146+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a5a9b39] was not registered for synchronization because synchronization is not active
2026-01-08T10:20:04.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206578216 wrapping com.mysql.cj.jdbc.ConnectionImpl@71f2d194] will not be managed by Spring
2026-01-08T10:20:04.147+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:20:04.148+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Long), 20(Integer), 0(Integer)
2026-01-08T10:20:04.151+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-01-08T10:20:04.156+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a5a9b39]
2026-01-08T10:20:04.158+09:00  INFO 18084 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 23
2026-01-08T10:20:04.159+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:20:04.161+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:20:04.162+09:00 DEBUG 18084 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T10:20:05.673+09:00 DEBUG 18084 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20&companyId=2
2026-01-08T10:20:05.680+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20&companyId=2
2026-01-08T10:20:05.685+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: SUPERADMIN, companyId: 4, uri: /api/superadmin/expenses
2026-01-08T10:20:05.687+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20&companyId=2
2026-01-08T10:20:05.688+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20&companyId=2", parameters={masked}
2026-01-08T10:20:05.689+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, Long)
2026-01-08T10:20:05.698+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:20:05.704+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-01-08T10:20:05.709+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 9, companyId: 2, page: 1, size: 20
2026-01-08T10:20:05.709+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:20:05.712+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1f5689] was not registered for synchronization because synchronization is not active
2026-01-08T10:20:05.718+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683219994 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:20:05.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ?
2026-01-08T10:20:05.722+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 2(Long)
2026-01-08T10:20:05.727+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-01-08T10:20:05.728+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1f5689]
2026-01-08T10:20:05.729+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T10:20:05.730+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8055fcd] was not registered for synchronization because synchronization is not active
2026-01-08T10:20:05.730+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@433054247 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b3ed8f4] will not be managed by Spring
2026-01-08T10:20:05.731+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T10:20:05.732+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 2(Long), 20(Integer), 0(Integer)
2026-01-08T10:20:05.758+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 6
2026-01-08T10:20:05.762+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8055fcd]
2026-01-08T10:20:05.763+09:00  INFO 18084 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 6
2026-01-08T10:20:05.765+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T10:20:05.767+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-01-08T10:20:05.768+09:00 DEBUG 18084 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
